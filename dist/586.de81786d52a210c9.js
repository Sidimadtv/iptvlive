"use strict";(global.webpackChunkesxiptv=global.webpackChunkesxiptv||[]).push([[586],{95334:(C,h,e)=>{e.d(h,{x:()=>U});var m=e(4859),s=e(65412),p=e(89383),a=e(94650);class T{constructor(r){this.dialogData=r}static#t=this.\u0275fac=function(g){return new(g||T)(a.Y36(s.WI))};static#n=this.\u0275cmp=a.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:18,vars:9,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-flat-button","","color","accent",3,"mat-dialog-close"],["mat-button","","mat-dialog-close","","cdkFocusInitial","","color","accent"]],template:function(g,c){1&g&&(a._uU(0,"\n        "),a.TgZ(1,"h2",0),a._uU(2),a.qZA(),a._uU(3,"\n        "),a.TgZ(4,"mat-dialog-content",1),a._uU(5),a.qZA(),a._uU(6,"\n        "),a.TgZ(7,"mat-dialog-actions",2),a._uU(8,"\n            "),a.TgZ(9,"button",3),a._uU(10),a.ALo(11,"translate"),a.qZA(),a._uU(12,"\n            "),a.TgZ(13,"button",4),a._uU(14),a.ALo(15,"translate"),a.qZA(),a._uU(16,"\n        "),a.qZA(),a._uU(17,"\n    ")),2&g&&(a.xp6(2),a.hij("\n            ",c.dialogData.title,"\n        "),a.xp6(3),a.hij("\n            ",c.dialogData.message,"\n        "),a.xp6(4),a.Q6J("mat-dialog-close",!0),a.xp6(1),a.hij("\n                ",a.lcZ(11,5,(null==c.dialogData?null:c.dialogData.confirmLabel)||"YES"),"\n            "),a.xp6(4),a.hij("\n                ",a.lcZ(15,7,(null==c.dialogData?null:c.dialogData.cancelLabel)||"NO"),"\n            "))},dependencies:[m.ot,m.lW,s.Is,s.ZT,s.uh,s.xY,s.H8,p.aw,p.X$],encapsulation:2})}class U{constructor(r){this.dialog=r}openConfirmDialog(r){this.dialog.open(T,{data:r,width:"300px"}).afterClosed().subscribe(c=>c?r.onConfirm():null)}static#t=this.\u0275fac=function(g){return new(g||U)(a.LFG(s.uw))};static#n=this.\u0275prov=a.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"})}},94586:(C,h,e)=>{e.r(h),e.d(h,{SettingsComponent:()=>Z});var m=e(36895),s=e(24006),p=e(76477),T=e(97858),I=e(31529),r=e(95334),g=e(52040),c=e(49465),P=e(8612),M=e(41595),D=e(31253),R=e(63336),N=e(70452),O=e(35969),d=e(98788),S=e(92834),t=e(94650),x=e(52468),y=e(34793),G=e(17009),B=e(28555),L=e(89383),b=e(60793),K=e(4859),W=e(97392),v=e(59549),F=e(44144),f=e(3238),J=e(44850),j=e(84385),Y=e(10266),q=e(56709);function H(u,n){if(1&u){const o=t.EpF();t.TgZ(0,"div"),t._uU(1,"\n                        "),t.TgZ(2,"mat-form-field",6),t._uU(3,"\n                            "),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._uU(7,"\n                            "),t._UZ(8,"input",20,21),t._uU(10,"\n                            "),t.TgZ(11,"mat-error"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._uU(14,"\n                        "),t.qZA(),t._uU(15,"\n                        "),t.TgZ(16,"button",22),t.NdJ("click",function(){const l=t.CHM(o).index,E=t.oxw(2);return t.KtG(E.refreshEpg(E.epgUrl.value[l]))}),t.ALo(17,"translate"),t._uU(18,"\n                            "),t.TgZ(19,"mat-icon"),t._uU(20,"refresh"),t.qZA(),t._uU(21,"\n                        "),t.qZA(),t._uU(22,"\n                        "),t.TgZ(23,"button",23),t.NdJ("click",function(){const l=t.CHM(o).index,E=t.oxw(2);return t.KtG(E.removeEpgSource(l))}),t.ALo(24,"translate"),t._uU(25,"\n                            "),t.TgZ(26,"mat-icon"),t._uU(27,"remove"),t.qZA(),t._uU(28,"\n                        "),t.qZA(),t._uU(29,"\n                    "),t.qZA()}if(2&u){const o=n.index,i=t.MAs(9);t.xp6(5),t.Oqu(t.lcZ(6,6,"SETTINGS.EPG_URL_PLACEHOLDER")),t.xp6(3),t.Q6J("formControlName",o),t.xp6(4),t.Oqu(t.lcZ(13,8,"SETTINGS.EPG_URL_ERROR")),t.xp6(4),t.Q6J("matTooltip",t.lcZ(17,10,"SETTINGS.REFRESH_EPG"))("disabled",""===i.value),t.xp6(7),t.Q6J("matTooltip",t.lcZ(24,12,"SETTINGS.REFRESH_EPG"))}}function V(u,n){if(1&u){const o=t.EpF();t.ynx(0,17),t._uU(1,"\n            "),t.TgZ(2,"div",4),t._uU(3,"\n                "),t.TgZ(4,"div",5),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"p"),t._uU(8,"Add single or multiple URLs as EPG sources"),t.qZA(),t._uU(9,"\n                "),t.qZA(),t._uU(10,"\n                "),t.TgZ(11,"div",5),t._uU(12,"\n                    "),t.YNc(13,H,30,14,"div",18),t._uU(14,"\n                    "),t.TgZ(15,"button",19),t.NdJ("click",function(){t.CHM(o);const _=t.oxw();return t.KtG(_.addEpgSource())}),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._uU(18,"\n                "),t.qZA(),t._uU(19,"\n            "),t.qZA(),t._uU(20,"\n        "),t.BQk()}if(2&u){const o=t.oxw();t.xp6(5),t.hij("\n                    ",t.lcZ(6,3,"SETTINGS.EPG_URL_LABEL"),"\n                    "),t.xp6(8),t.Q6J("ngForOf",o.epgUrl.controls),t.xp6(3),t.hij("\n                        ",t.lcZ(17,5,"SETTINGS.ADD_EPG_SOURCE"),"\n                    ")}}function Q(u,n){if(1&u&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&u){const o=n.$implicit;t.Q6J("value",o.id),t.uIk("data-test-id",o.id),t.xp6(1),t.hij("",o.label,"\n                        ")}}function k(u,n){if(1&u&&(t.TgZ(0,"mat-option",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u){const o=n.$implicit;t.Q6J("value",o.value),t.uIk("data-test-id",o.value),t.xp6(1),t.Oqu(t.lcZ(2,3,"THEMES."+o.value))}}class Z{constructor(n,o,i,_,l,E,A,X,z,$){this.dialogService=n,this.electronService=o,this.epgService=i,this.formBuilder=_,this.playlistsService=l,this.router=E,this.settingsService=A,this.snackBar=X,this.store=z,this.translate=$,this.languageEnum=O.S,this.players=[{id:d.Y.Html5Player,label:"HTML5 Video Player"},{id:d.Y.VideoJs,label:"VideoJs Player"},{id:d.Y.MPV,label:"MPV Player"}],this.epgAvailable$=this.store.select(R.hH),this.isElectron=this.electronService.isElectron,this.themeEnum=S.Q,this.settingsForm=this.formBuilder.group({player:[d.Y.VideoJs],...this.isElectron?{epgUrl:new s.vC([])}:{},language:O.S.ENGLISH,showCaptions:!1,theme:S.Q.LightTheme}),this.epgUrl=this.settingsForm.get("epgUrl")}ngOnInit(){this.setSettings()}setSettings(){this.settingsService.getValueFromLocalStorage(P.L.Settings).subscribe(n=>{n&&(this.settingsForm.setValue({player:n.player?n.player:d.Y.VideoJs,...this.isElectron?{epgUrl:[]}:{},language:n.language?n.language:O.S.ENGLISH,showCaptions:!!n.showCaptions&&n.showCaptions,theme:n.theme?n.theme:S.Q.LightTheme}),this.isElectron&&this.setEpgUrls(n.epgUrl))})}setEpgUrls(n){const o=/^(http|https|file):\/\/[^ "]+$/;Array.isArray(n)||(n=[n]),n=n.filter(i=>""!==i);for(const i of n)this.epgUrl.push(new s.p4(i,[s.kI.pattern(o)]))}isCurrentVersionOutdated(n){return this.version=this.electronService.getAppVersion(),T.lt(this.version,n)}onSubmit(){this.settingsService.setValueToLocalStorage(P.L.Settings,this.settingsForm.value,!0).pipe((0,p.take)(1)).subscribe(()=>{this.applyChangedSettings()})}applyChangedSettings(){if(this.settingsForm.markAsPristine(),this.isElectron){let n=this.settingsForm.value.epgUrl;n&&(Array.isArray(n)||(n=[n]),n=n.filter(o=>""!==o))}this.translate.use(this.settingsForm.value.language),this.settingsService.changeTheme(this.settingsForm.value.theme),this.snackBar.open(this.translate.instant("SETTINGS.SETTINGS_SAVED"),null,{duration:2e3})}backToHome(){this.router.navigateByUrl("/")}refreshEpg(n){this.electronService.sendIpcEvent(I.qh,n)}addEpgSource(){this.epgUrl.insert(this.epgUrl.length,new s.p4(""))}removeEpgSource(n){this.epgUrl.removeAt(n),this.settingsForm.markAsDirty()}exportData(){this.playlistsService.getAllData().pipe((0,p.take)(1)).subscribe(n=>{const o=new Blob([JSON.stringify(n)],{type:"text/plain"}),i=window.URL.createObjectURL(o),_=document.createElement("a");_.href=i,_.download="playlists.json",_.click(),window.URL.revokeObjectURL(i)})}importData(){const n=document.createElement("input");n.type="file",n.accept="application/json",n.addEventListener("change",o=>{const _=o.target.files?.[0];if(_&&_){const l=new FileReader;l.onload=()=>{const E=l.result;try{const A=JSON.parse(E.toString());Array.isArray(A)?this.store.dispatch(D.of({playlists:A})):this.snackBar.open(this.translate.instant("SETTINGS.IMPORT_ERROR"),null,{duration:2e3})}catch{this.snackBar.open(this.translate.instant("SETTINGS.IMPORT_ERROR"),null,{duration:2e3})}},l.readAsText(_)}}),n.click()}removeAll(){this.dialogService.openConfirmDialog({title:this.translate.instant("SETTINGS.REMOVE_DIALOG.TITLE"),message:this.translate.instant("SETTINGS.REMOVE_DIALOG.MESSAGE"),onConfirm:()=>this.store.dispatch(D.QG())})}static#t=this.\u0275fac=function(o){return new(o||Z)(t.Y36(r.x),t.Y36(x.D),t.Y36(g.z),t.Y36(s.QS),t.Y36(c.c),t.Y36(y.F0),t.Y36(N.g),t.Y36(G.ux),t.Y36(B.yh),t.Y36(L.sK))};static#n=this.\u0275cmp=t.Xpm({type:Z,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:149,vars:66,consts:[[3,"title","subtitle"],["data-test-id","settings-container",1,"settings-container"],["novalidate","",3,"formGroup","ngSubmit"],["formArrayName","epgUrl",4,"ngIf"],[1,"row"],[1,"column"],["appearance","outline"],["formControlName","player","data-test-id","select-video-player"],[3,"value",4,"ngFor","ngForOf"],["formControlName","theme","data-test-id","select-theme"],[1,"column",2,"margin-right","10px"],["formControlName","showCaptions",1,"column"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],["align","end",1,"action-buttons"],["mat-button","","color","accent","type","reset","data-test-id","back-to-home",3,"click"],["mat-button","","color","accent","type","submit","data-test-id","save-settings",3,"disabled"],["formArrayName","epgUrl"],[4,"ngFor","ngForOf"],["mat-button","","color","accent","type","button",3,"click"],["matInput","","type","url",3,"formControlName"],["epgField",""],["matLine","","mat-icon-button","","color","accent","type","button",3,"matTooltip","disabled","click"],["mat-icon-button","","matLine","","color","accent","type","button",3,"matTooltip","click"],[3,"value"]],template:function(o,i){1&o&&(t._UZ(0,"app-header",0),t.ALo(1,"translate"),t.ALo(2,"translate"),t.ALo(3,"translate"),t._uU(4,"\n\n\n\n"),t.TgZ(5,"div",1),t._uU(6,"\n    "),t.TgZ(7,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t._uU(8,"\n        "),t.YNc(9,V,21,7,"ng-container",3),t._uU(10,"\n        "),t._UZ(11,"mat-divider"),t._uU(12,"\n        "),t.TgZ(13,"div",4),t._uU(14,"\n            "),t.TgZ(15,"div",5),t._uU(16),t.ALo(17,"translate"),t.TgZ(18,"p"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._uU(21,"\n            "),t.qZA(),t._uU(22,"\n            "),t.TgZ(23,"div",5),t._uU(24,"\n                "),t.TgZ(25,"mat-form-field",6),t._uU(26,"\n                    "),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._uU(30,"\n                    "),t.TgZ(31,"mat-select",7),t._uU(32,"\n                        "),t.YNc(33,Q,2,3,"mat-option",8),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n                "),t.qZA(),t._uU(36,"\n            "),t.qZA(),t._uU(37,"\n        "),t.qZA(),t._uU(38,"\n        "),t._UZ(39,"mat-divider"),t._uU(40,"\n       \n        "),t.TgZ(41,"div",4),t._uU(42,"\n            "),t.TgZ(43,"div",5),t._uU(44),t.ALo(45,"translate"),t.TgZ(46,"p"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._uU(49,"\n            "),t.qZA(),t._uU(50,"\n            "),t.TgZ(51,"div",5),t._uU(52,"\n                "),t.TgZ(53,"mat-form-field",6),t._uU(54,"\n                    "),t.TgZ(55,"mat-label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._uU(58,"\n                    "),t.TgZ(59,"mat-select",9),t._uU(60,"\n                        "),t.YNc(61,k,3,5,"mat-option",8),t.ALo(62,"keyvalue"),t._uU(63,"\n                    "),t.qZA(),t._uU(64,"\n                "),t.qZA(),t._uU(65,"\n            "),t.qZA(),t._uU(66,"\n        "),t.qZA(),t._uU(67,"\n        "),t._UZ(68,"mat-divider"),t._uU(69,"\n        "),t.TgZ(70,"div",4),t._uU(71,"\n            "),t.TgZ(72,"div",5),t._uU(73),t.ALo(74,"translate"),t.TgZ(75,"p"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._uU(78,"\n            "),t.qZA(),t._uU(79,"\n            "),t.TgZ(80,"div",10),t._uU(81,"\n                "),t._UZ(82,"mat-checkbox",11),t._uU(83,"\n            "),t.qZA(),t._uU(84,"\n        "),t.qZA(),t._uU(85,"\n        "),t._UZ(86,"mat-divider"),t._uU(87,"\n       \n        "),t.TgZ(88,"div",4),t._uU(89,"\n            "),t.TgZ(90,"div",5),t._uU(91),t.ALo(92,"translate"),t.TgZ(93,"p"),t._uU(94),t.ALo(95,"translate"),t.qZA(),t._uU(96,"\n            "),t.qZA(),t._uU(97,"\n            "),t.TgZ(98,"div",5),t._uU(99,"\n                "),t.TgZ(100,"button",12),t.NdJ("click",function(l){return l.preventDefault(),l.stopPropagation(),i.importData()}),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._uU(103,"\n                "),t.TgZ(104,"button",12),t.NdJ("click",function(l){return l.preventDefault(),l.stopPropagation(),i.exportData()}),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._uU(107,"\n            "),t.qZA(),t._uU(108,"\n        "),t.qZA(),t._uU(109,"\n\n        "),t.TgZ(110,"div",4),t._uU(111,"\n            "),t.TgZ(112,"div",5),t._uU(113),t.ALo(114,"translate"),t.TgZ(115,"p"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t._uU(118,"\n            "),t.qZA(),t._uU(119,"\n            "),t.TgZ(120,"div",5),t._uU(121,"\n                "),t.TgZ(122,"button",13),t.NdJ("click",function(l){return l.preventDefault(),l.stopPropagation(),i.removeAll()}),t._uU(123),t.ALo(124,"translate"),t.qZA(),t._uU(125,"\n            "),t.qZA(),t._uU(126,"\n        "),t.qZA(),t._uU(127,"\n\n\n        "),t._UZ(128,"mat-divider"),t._uU(129,"\n        "),t.TgZ(130,"div",14),t._uU(131,"\n            "),t.TgZ(132,"button",15),t.NdJ("click",function(){return i.backToHome()}),t._uU(133,"\n                "),t.TgZ(134,"mat-icon"),t._uU(135,"chevron_left"),t.qZA(),t._uU(136),t.ALo(137,"translate"),t.qZA(),t._uU(138,"\n            "),t.TgZ(139,"button",16),t._uU(140,"\n                "),t.TgZ(141,"mat-icon"),t._uU(142,"save"),t.qZA(),t._uU(143),t.ALo(144,"translate"),t.qZA(),t._uU(145,"\n        "),t.qZA(),t._uU(146,"\n    "),t.qZA(),t._uU(147,"\n"),t.qZA(),t._uU(148,"\n")),2&o&&(t.Q6J("title",t.lcZ(1,24,"SETTINGS.|-S!dim@D"))("subtitle",t.lcZ(2,26,"SETTINGS.SUBTITLE")+". "+t.lcZ(3,28,"SETTINGS.DESCRIPTION")),t.xp6(7),t.Q6J("formGroup",i.settingsForm),t.xp6(2),t.Q6J("ngIf",i.isElectron),t.xp6(7),t.hij("\n                ",t.lcZ(17,30,"SETTINGS.VIDEO_PLAYER_LABEL"),"\n                "),t.xp6(3),t.Oqu(t.lcZ(20,32,"SETTINGS.VIDEO_PLAYER_DESCRIPTION")),t.xp6(9),t.Oqu(t.lcZ(29,34,"SETTINGS.VIDEO_PLAYER_PLACEHOLDER")),t.xp6(5),t.Q6J("ngForOf",i.players),t.xp6(11),t.hij("\n                ",t.lcZ(45,36,"SETTINGS.THEME"),"\n                "),t.xp6(3),t.Oqu(t.lcZ(48,38,"SETTINGS.THEME_DESCRIPTION")),t.xp6(9),t.Oqu(t.lcZ(57,40,"SETTINGS.VIDEO_PLAYER_PLACEHOLDER")),t.xp6(5),t.Q6J("ngForOf",t.lcZ(62,42,i.themeEnum)),t.xp6(12),t.hij("\n                ",t.lcZ(74,44,"SETTINGS.SHOW_CAPTIONS"),"\n                "),t.xp6(3),t.Oqu(t.lcZ(77,46,"SETTINGS.SHOW_CAPTIONS_DESCRIPTION")),t.xp6(15),t.hij("\n                ",t.lcZ(92,48,"SETTINGS.IMPORT_EXPORT_DATA"),"\n                "),t.xp6(3),t.hij("\n                    ",t.lcZ(95,50,"SETTINGS.IMPORT_EXPORT_DATA_DESCRIPTION"),"\n                "),t.xp6(7),t.hij("\n                    ",t.lcZ(102,52,"SETTINGS.IMPORT_DATA"),"\n                "),t.xp6(4),t.hij("\n                    ",t.lcZ(106,54,"SETTINGS.EXPORT_DATA"),"\n                "),t.xp6(8),t.hij("\n                ",t.lcZ(114,56,"SETTINGS.REMOVE_ALL"),"\n                "),t.xp6(3),t.hij("\n                    ",t.lcZ(117,58,"SETTINGS.REMOVE_ALL_DESCRIPTION"),"\n                "),t.xp6(7),t.hij("\n                    ",t.lcZ(124,60,"SETTINGS.REMOVE_ALL_BUTTON"),"\n                "),t.xp6(13),t.hij("\n                ",t.lcZ(137,62,"SETTINGS.BACK_TO_HOME"),"\n            "),t.xp6(3),t.Q6J("disabled",i.settingsForm.pristine||!i.settingsForm.valid),t.xp6(4),t.hij("\n                ",t.lcZ(144,64,"SETTINGS.SAVE_CHANGES"),"\n            "))},dependencies:[m.ez,m.sg,m.O5,m.Nd,M.m,s._Y,s.Fj,s.JJ,s.JL,b.G,K.lW,W.Hw,v.TO,v.KE,v.hX,F.Nt,f.X2,J.d,j.gD,f.ey,Y.gM,q.oG,s.sg,s.u,s.CE,L.X$],styles:["button[_ngcontent-%COMP%]{cursor:pointer!important;text-transform:uppercase}.settings-container[_ngcontent-%COMP%]{overflow:auto;height:calc(100vh - 140px)}.row[_ngcontent-%COMP%]{display:flex;padding:10px}.row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){text-align:right}.row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2)   mat-form-field[_ngcontent-%COMP%]{font-size:14px}.column[_ngcontent-%COMP%]{flex:1}.column[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;opacity:.6;padding:2px 0;margin:0}.action-buttons[_ngcontent-%COMP%]{margin-top:10px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px}"]})}}}]);