(global.webpackChunkesxiptv=global.webpackChunkesxiptv||[]).push([[746],{22746:(ft,dt,Ne)=>{"use strict";Ne.r(dt),Ne.d(dt,{PlayerModule:()=>Mv});var Ge=Ne(98184),de=Ne(36895),Se=Ne(34793),ue=Ne(41595),N=Ne(15439),ee=Ne(83292),G=Ne(31529),V=Ne(31253),q=Ne(63336),u=Ne(94650),Y=Ne(28555),B=Ne(52468),F=Ne(4859),O=Ne(97392),W=Ne(96338),U=Ne(3238),R=Ne(44850),M=Ne(10266),b=Ne(65412),g=Ne(89383);function v(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n        "),u.TgZ(2,"div",5),u._uU(3),u.ALo(4,"translate"),u.qZA(),u._uU(5,"\n        "),u.TgZ(6,"p",6),u._uU(7),u.qZA(),u._uU(8,"\n        "),u.TgZ(9,"div",5),u._uU(10),u.ALo(11,"translate"),u.qZA(),u._uU(12,"\n        "),u.TgZ(13,"p",7),u._uU(14),u.qZA(),u._uU(15,"\n    "),u.BQk()),2&a){const r=u.oxw();u.xp6(3),u.hij("\n            ",u.lcZ(4,4,"EPG.PROGRAM_DIALOG.TITLE"),"\n        "),u.xp6(4),u.Oqu(r.epgProgram.title[0].value),u.xp6(3),u.hij("\n            ",u.lcZ(11,6,"EPG.PROGRAM_DIALOG.LANGUAGE"),"\n        "),u.xp6(4),u.Oqu(r.epgProgram.title[0].lang)}}function S(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n        "),u.TgZ(2,"div",5),u._uU(3),u.ALo(4,"translate"),u.qZA(),u._uU(5,"\n        "),u.TgZ(6,"p",8),u._uU(7),u.qZA(),u._uU(8,"\n    "),u.BQk()),2&a){const r=u.oxw();u.xp6(3),u.hij("\n            ",u.lcZ(4,2,"EPG.PROGRAM_DIALOG.CATEGORY"),"\n        "),u.xp6(4),u.Oqu(r.epgProgram.category[0].value)}}function w(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n        "),u.TgZ(2,"div",5),u._uU(3),u.ALo(4,"translate"),u.qZA(),u._uU(5,"\n        "),u.TgZ(6,"p",9),u._uU(7),u.qZA(),u._uU(8,"\n    "),u.BQk()),2&a){const r=u.oxw();u.xp6(3),u.hij("\n            ",u.lcZ(4,2,"EPG.PROGRAM_DIALOG.DESCRIPTION"),"\n        "),u.xp6(4),u.Oqu(r.epgProgram.desc[0].value)}}function E(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n        "),u.TgZ(2,"div",5),u._uU(3),u.ALo(4,"translate"),u.qZA(),u._uU(5,"\n        "),u.TgZ(6,"p",10),u._uU(7),u.qZA(),u._uU(8,"\n    "),u.BQk()),2&a){const r=u.oxw();u.xp6(3),u.hij("\n            ",u.lcZ(4,3,"EPG.PROGRAM_DIALOG.PARENTAL_RATING_SYSTEM"),"\n        "),u.xp6(4),u.AsE("\n            ",r.epgProgram.rating[0].value," [",r.epgProgram.rating[0].system,"]\n        ")}}class _{constructor(t){this.epgProgram=t}static#e=this.\u0275fac=function(r){return new(r||_)(u.Y36(b.WI))};static#t=this.\u0275cmp=u.Xpm({type:_,selectors:[["app-epg-item-description"]],decls:22,vars:10,consts:[["mat-dialog-title",""],[1,"mat-typography"],[4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close","","cdkFocusInitial","","color","accent"],[1,"subheading-2"],["data-test","title"],["data-test","lang"],["data-test","category"],["data-test","desc"],["data-test","rating"]],template:function(r,n){1&r&&(u.TgZ(0,"h2",0),u._uU(1),u.ALo(2,"translate"),u.qZA(),u._uU(3,"\n"),u.TgZ(4,"mat-dialog-content",1),u._uU(5,"\n    "),u.YNc(6,v,16,8,"ng-container",2),u._uU(7,"\n    "),u.YNc(8,S,9,4,"ng-container",2),u._uU(9,"\n    "),u.YNc(10,w,9,4,"ng-container",2),u._uU(11,"\n    "),u.YNc(12,E,9,5,"ng-container",2),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n"),u.TgZ(15,"mat-dialog-actions",3),u._uU(16,"\n    "),u.TgZ(17,"button",4),u._uU(18),u.ALo(19,"translate"),u.qZA(),u._uU(20,"\n"),u.qZA(),u._uU(21,"\n")),2&r&&(u.xp6(1),u.hij("\n    ",u.lcZ(2,6,"EPG.PROGRAM_DIALOG.PROGRAM_DETAILS"),"\n"),u.xp6(5),u.Q6J("ngIf",(null==n.epgProgram||null==n.epgProgram.title?null:n.epgProgram.title.length)>0),u.xp6(2),u.Q6J("ngIf",(null==n.epgProgram||null==n.epgProgram.category?null:n.epgProgram.category.length)>0),u.xp6(2),u.Q6J("ngIf",(null==n.epgProgram||null==n.epgProgram.desc?null:n.epgProgram.desc.length)>0),u.xp6(2),u.Q6J("ngIf",(null==n.epgProgram||null==n.epgProgram.rating?null:n.epgProgram.rating.length)>0),u.xp6(6),u.hij("\n        ",u.lcZ(19,8,"HOME.PLAYLISTS.INFO_DIALOG.CLOSE"),"\n    "))},dependencies:[de.O5,F.lW,b.ZT,b.uh,b.xY,b.H8,g.X$],styles:[".subheading-2[_ngcontent-%COMP%]{color:#666;text-decoration:underline;text-transform:uppercase;font-weight:900;font-size:.9em}  .dark-theme .subheading-2{color:#bdbdbd}"]})}class c{transform(t,r,n="MMMM Do, dddd"){return N(t,r).format(n)}static#e=this.\u0275fac=function(r){return new(r||c)};static#t=this.\u0275pipe=u.Yjl({name:"momentDate",type:c,pure:!0})}function h(a,t){1&a&&(u.TgZ(0,"span",4),u.ALo(1,"translate"),u._uU(2,"live"),u.qZA()),2&a&&u.Q6J("matTooltip",u.lcZ(1,1,"EPG.LIVE_NOW"))}function d(a,t){1&a&&(u.TgZ(0,"span",5),u.ALo(1,"translate"),u._uU(2,"r"),u.qZA()),2&a&&u.Q6J("matTooltip",u.lcZ(1,1,"EPG.TIMESHIFT_AVAILABLE"))}function P(a,t){if(1&a){const r=u.EpF();u.TgZ(0,"span",6),u.NdJ("click",function(e){u.CHM(r);const i=u.oxw();return e.stopPropagation(),u.KtG(i.showDescription(i.item))}),u.ALo(1,"translate"),u.TgZ(2,"mat-icon"),u._uU(3,"info"),u.qZA()()}2&a&&u.Q6J("matTooltip",u.lcZ(1,1,"EPG.PROGRAM_DIALOG.SHOW_PROGRAM_DETAILS"))}class m{constructor(t){this.dialog=t}showDescription(t){this.dialog.open(_,{data:t})}static#e=this.\u0275fac=function(r){return new(r||m)(u.Y36(b.uw))};static#t=this.\u0275cmp=u.Xpm({type:m,selectors:[["app-epg-list-item"]],inputs:{item:"item",timeNow:"timeNow",timeshiftUntil:"timeshiftUntil"},decls:13,vars:13,consts:[[1,"time"],["class","live badge",3,"matTooltip",4,"ngIf"],["class","rec badge",3,"matTooltip",4,"ngIf"],["class","description-icon",3,"matTooltip","click",4,"ngIf"],[1,"live","badge",3,"matTooltip"],[1,"rec","badge",3,"matTooltip"],[1,"description-icon",3,"matTooltip","click"]],template:function(r,n){1&r&&(u.TgZ(0,"span",0),u._uU(1),u.ALo(2,"momentDate"),u.ALo(3,"momentDate"),u.qZA(),u._uU(4,"\n"),u.YNc(5,h,3,3,"span",1),u._uU(6,"\n"),u.YNc(7,d,3,3,"span",2),u._uU(8,"\n"),u.YNc(9,P,4,3,"span",3),u._uU(10,"\n"),u._UZ(11,"mat-divider"),u._uU(12,"\n")),2&r&&(u.xp6(1),u.AsE("",u.Dn7(2,5,n.item.start,"YYYYMMDDHHmm ZZ","HH:mm"),"\n    -\n    ",u.Dn7(3,9,n.item.stop,"YYYYMMDDHHmm ZZ","HH:mm"),""),u.xp6(4),u.Q6J("ngIf",n.timeNow>=n.item.start&&n.timeNow<=n.item.stop),u.xp6(2),u.Q6J("ngIf",n.item.start<n.timeNow&&n.item.stop<n.timeNow&&n.item.start>n.timeshiftUntil),u.xp6(2),u.Q6J("ngIf",n.item.desc.length>0))},dependencies:[de.O5,O.Hw,R.d,M.gM,c,g.X$],styles:[".time[_ngcontent-%COMP%]{color:#666;border-bottom:1px solid #ccc;font-size:.8em;display:inline-block;margin-bottom:5px}.badge[_ngcontent-%COMP%]{border-radius:2px;padding:2px 6px;color:#fff;text-transform:uppercase;margin-left:6px;font-size:.8em}.live[_ngcontent-%COMP%]{background-color:red}.rec[_ngcontent-%COMP%]{background-color:gray}.description-icon[_ngcontent-%COMP%]{float:right;cursor:pointer}"]})}function C(a,t){if(1&a&&u._UZ(0,"img",14),2&a){const r=u.oxw(2);u.Q6J("src",r.channel.icon,u.LSH)}}function x(a,t){if(1&a&&(u.TgZ(0,"mat-list-item"),u._uU(1,"\n                    "),u.TgZ(2,"div",19),u._uU(3,"\n                        "),u._UZ(4,"app-epg-list-item",20),u._uU(5,"\n                    "),u.qZA(),u._uU(6,"\n                    "),u.TgZ(7,"p",19),u._uU(8),u.qZA(),u._uU(9,"\n                "),u.qZA()),2&a){const r=u.oxw().$implicit,n=u.oxw(2).ngIf,e=u.oxw(2);u.xp6(4),u.Q6J("timeshiftUntil",n)("timeNow",e.timeNow)("item",r),u.xp6(4),u.Oqu(null==r||null==r.title[0]?null:r.title[0].value)}}function T(a,t){if(1&a){const r=u.EpF();u._uU(0,"\n                    "),u.TgZ(1,"mat-list-option",21),u.NdJ("click",function(){u.CHM(r);const e=u.oxw().$implicit,i=u.oxw(2).ngIf,s=u.oxw(2);return u.KtG(s.setEpgProgram(e,s.timeNow>=e.start&&s.timeNow<=e.stop,e.start>i))}),u._uU(2,"\n                        "),u.TgZ(3,"div",19),u._uU(4,"\n                            "),u._UZ(5,"app-epg-list-item",20),u._uU(6,"\n                        "),u.qZA(),u._uU(7,"\n                        "),u._UZ(8,"p",22),u._uU(9,"\n                    "),u.qZA(),u._uU(10,"\n                ")}if(2&a){const r=u.oxw().$implicit,n=u.oxw(2).ngIf,e=u.oxw(2);u.xp6(1),u.ekj("active",e.timeNow>=r.start&&e.timeNow<=r.stop),u.Q6J("value",r),u.xp6(4),u.Q6J("timeshiftUntil",n)("timeNow",e.timeNow)("item",r),u.xp6(3),u.Q6J("innerHTML",null==r||null==r.title[0]?null:r.title[0].value,u.oJD)}}function I(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n                "),u.YNc(2,x,10,4,"mat-list-item",0),u._uU(3,"\n                "),u.YNc(4,T,11,7,"ng-template",null,18,u.W1O),u._uU(6,"\n            "),u.BQk()),2&a){const r=t.$implicit,n=u.MAs(5),e=u.oxw(2).ngIf,i=u.oxw(2);u.xp6(2),u.Q6J("ngIf",r.start<e||r.start>=i.timeNow)("ngIfElse",n)}}function L(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n            "),u.YNc(2,I,7,2,"ng-container",17),u._uU(3,"\n        "),u.BQk()),2&a){const r=u.oxw(3);u.xp6(2),u.Q6J("ngForOf",r.items)}}function Z(a,t){1&a&&(u._uU(0,"\n            "),u.TgZ(1,"mat-list-option"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u._uU(4,"\n        ")),2&a&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"EPG.EPG_NOT_AVAILABLE_DATE")))}function re(a,t){if(1&a&&(u.TgZ(0,"mat-selection-list",15),u._uU(1,"\n        "),u.YNc(2,L,4,1,"ng-container",0),u._uU(3,"\n        "),u.YNc(4,Z,5,3,"ng-template",null,16,u.W1O),u._uU(6,"\n    "),u.qZA()),2&a){const r=u.MAs(5),n=u.oxw(2);u.Q6J("multiple",!1),u.xp6(2),u.Q6J("ngIf",(null==n.items?null:n.items.length)>0)("ngIfElse",r)}}function ne(a,t){if(1&a){const r=u.EpF();u.ynx(0),u._uU(1,"\n    "),u._uU(2,"\n    "),u.TgZ(3,"div",2),u._uU(4,"\n        "),u.TgZ(5,"div",3),u._uU(6,"\n            "),u.TgZ(7,"div",4),u._uU(8,"\n                "),u.YNc(9,C,1,1,"img",5),u._uU(10,"\n            "),u.qZA(),u._uU(11,"\n            "),u.TgZ(12,"div",6),u._uU(13,"\n                "),u.TgZ(14,"div",7),u._uU(15),u.qZA(),u._uU(16,"\n                "),u.TgZ(17,"div",8),u._uU(18),u.ALo(19,"translate"),u.qZA(),u._uU(20,"\n            "),u.qZA(),u._uU(21,"\n        "),u.qZA(),u._uU(22,"\n        "),u._UZ(23,"mat-divider"),u._uU(24,"\n        "),u.TgZ(25,"div",9),u._uU(26,"\n            "),u.TgZ(27,"button",10),u.NdJ("click",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.changeDate("prev"))}),u.ALo(28,"translate"),u._uU(29,"\n                "),u.TgZ(30,"mat-icon"),u._uU(31,"chevron_left"),u.qZA(),u._uU(32,"\n            "),u.qZA(),u._uU(33,"\n            "),u.TgZ(34,"span",11),u._uU(35),u.ALo(36,"momentDate"),u.qZA(),u._uU(37,"\n            "),u.TgZ(38,"button",12),u.NdJ("click",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.changeDate("next"))}),u.ALo(39,"translate"),u._uU(40,"\n                "),u.TgZ(41,"mat-icon"),u._uU(42,"chevron_right"),u.qZA(),u._uU(43,"\n            "),u.qZA(),u._uU(44,"\n        "),u.qZA(),u._uU(45,"\n    "),u.qZA(),u._uU(46,"\n    "),u._UZ(47,"mat-divider"),u._uU(48,"\n\n    "),u._uU(49,"\n    "),u.YNc(50,re,7,3,"mat-selection-list",13),u.ALo(51,"async"),u._uU(52,"\n"),u.BQk()}if(2&a){const r=u.oxw();u.xp6(9),u.Q6J("ngIf",null==r.channel?null:r.channel.icon),u.xp6(6),u.hij("\n                    ",null==r.channel||null==r.channel.name[0]?null:r.channel.name[0].value,"\n                "),u.xp6(3),u.hij("\n                    ",r.playingNow?null==r.playingNow.title[0]?null:r.playingNow.title[0].value:u.lcZ(19,7,"EPG.LIVE_STREAM"),"\n                "),u.xp6(9),u.Q6J("matTooltip",u.lcZ(28,9,"EPG.PREVIOUS_DAY")),u.xp6(8),u.hij("\n                ",u.Dn7(36,11,r.dateToday,"YYYYMMDD","MMMM Do, dddd"),""),u.xp6(3),u.Q6J("matTooltip",u.lcZ(39,15,"EPG.NEXT_DAY")),u.xp6(12),u.Q6J("ngIf",u.lcZ(51,17,r.timeshiftUntil$))}}function oe(a,t){1&a&&(u._uU(0,"\n    "),u.TgZ(1,"mat-list"),u._uU(2,"\n        "),u.TgZ(3,"mat-list-item"),u._uU(4),u.ALo(5,"translate"),u._UZ(6,"br"),u._uU(7),u.ALo(8,"translate"),u.qZA(),u._uU(9,"\n    "),u.qZA(),u._uU(10,"\n")),2&a&&(u.xp6(4),u.hij("\n            ",u.lcZ(5,2,"EPG.EPG_NOT_AVAILABLE_CHANNEL_TITLE"),""),u.xp6(3),u.hij("\n            ",u.lcZ(8,4,"EPG.EPG_NOT_AVAILABLE_CHANNEL_DESCRIPTION"),"\n        "))}const Te="YYYYMMDD",ye="YYYYMMDDHHmm ZZ";class Ce{constructor(t,r,n){this.store=t,this.electronService=r,this.ngZone=n,this.items=[],this.electronService.listenOn(G.bU,(e,i)=>{this.ngZone.run(()=>this.handleEpgData(i))})}ngOnInit(){this.timeshiftUntil$=this.store.select(q.ox).pipe((0,ee.UI)(t=>t?.tvg?.rec||t?.timeshift||t?.catchup?.days),(0,ee.UI)(t=>N(Date.now()).subtract(t,"days").format(ye)))}handleEpgData(t){t?.payload?.items?.length>0?(this.programs=t,this.timeNow=N(Date.now()).format(ye),this.dateToday=N(Date.now()).format(Te),this.channel=t.payload?.channel,this.items=this.selectPrograms(t),this.setPlayingNow()):(this.items=[],this.channel=null,this.store.dispatch((0,V.cp)(void 0)))}selectPrograms(t){return t.payload?.items.filter(r=>r.start.includes(this.dateToday.toString())).map(r=>({...r,start:N(r.start,ye).format(ye),stop:N(r.stop,ye).format(ye)})).sort((r,n)=>r.start.localeCompare(n.start))}changeDate(t){let r;"next"===t?r=N(this.dateToday,Te).add(1,"days").format(Te):"prev"===t&&(r=N(this.dateToday,Te).subtract(1,"days").format(Te)),this.dateToday=r,this.items=this.selectPrograms(this.programs)}setPlayingNow(){this.playingNow=this.items.find(t=>this.timeNow>=t.start&&this.timeNow<=t.stop),this.store.dispatch((0,V.cp)({program:this.playingNow}))}setEpgProgram(t,r,n){if(r)this.store.dispatch((0,V.DH)());else{if(!n)return;this.store.dispatch((0,V.y5)({program:t}))}this.playingNow=t}ngOnDestroy(){this.electronService.removeAllListeners(G.bU)}static#e=this.\u0275fac=function(r){return new(r||Ce)(u.Y36(Y.yh),u.Y36(B.D),u.Y36(u.R0b))};static#t=this.\u0275cmp=u.Xpm({type:Ce,selectors:[["app-epg-list"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["noEpg",""],["id","channel-header","color","primary"],[1,"channel-info"],[1,"channel-icon"],["width","48",3,"src",4,"ngIf"],[1,"channel-details"],[1,"channel-name"],[1,"program-name"],["id","date-navigator"],["mat-icon-button","",1,"previous-day",3,"matTooltip","click"],[1,"selected-date"],["mat-icon-button","",1,"next-day",3,"matTooltip","click"],["id","program-list",3,"multiple",4,"ngIf"],["width","48",3,"src"],["id","program-list",3,"multiple"],["epgNotAvailable",""],[4,"ngFor","ngForOf"],["timeshiftItem",""],["matLine",""],[3,"timeshiftUntil","timeNow","item"],[3,"value","click"],["matLine","",3,"innerHTML"]],template:function(r,n){if(1&r&&(u.YNc(0,ne,53,19,"ng-container",0),u._uU(1,"\n\n"),u.YNc(2,oe,11,6,"ng-template",null,1,u.W1O),u._uU(4,"\n")),2&r){const e=u.MAs(3);u.Q6J("ngIf",n.channel)("ngIfElse",e)}},dependencies:[de.sg,de.O5,F.lW,O.Hw,W.i$,W.Tg,U.X2,W.Ub,W.vS,R.d,M.gM,m,de.Ov,c,g.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:absolute;inset:0;height:100%}.active[_ngcontent-%COMP%]{border-bottom:1px dashed #666}#channel-header[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex;flex:1 1 120px;max-height:120px;min-height:120px}#channel-header[_ngcontent-%COMP%]   .channel-info[_ngcontent-%COMP%]{flex-direction:row;box-sizing:border-box;display:flex;flex:1 1 79px;max-height:79px;min-height:79px}#channel-header[_ngcontent-%COMP%]   .channel-icon[_ngcontent-%COMP%]{overflow:hidden;margin-right:10px;place-content:center;align-items:center;flex-direction:row;box-sizing:border-box;display:flex;flex:1 1 60px;max-width:60px;min-width:60px}#channel-header[_ngcontent-%COMP%]   .channel-details[_ngcontent-%COMP%]{flex:1 1 100%;box-sizing:border-box;max-width:100%;align-self:center;display:flex;flex-direction:column}#channel-header[_ngcontent-%COMP%]   .channel-name[_ngcontent-%COMP%]{font-weight:800}#channel-header[_ngcontent-%COMP%]   .program-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;font-size:.9em}#program-list[_ngcontent-%COMP%]{flex:1 1 .000000001px;box-sizing:border-box}mat-selection-list[_ngcontent-%COMP%]{overflow:auto}#date-navigator[_ngcontent-%COMP%]{flex-direction:row;box-sizing:border-box;display:flex;flex:1 1 40px;max-height:40px;min-height:40px}#date-navigator[_ngcontent-%COMP%]   .selected-date[_ngcontent-%COMP%]{font-size:.9em;place-content:center;align-items:center;flex-direction:row;box-sizing:border-box;display:flex;flex:1 1 100%;max-width:100%}#date-navigator[_ngcontent-%COMP%]   .previous-day[_ngcontent-%COMP%], #date-navigator[_ngcontent-%COMP%]   .next-day[_ngcontent-%COMP%]{flex:1 1 40px;box-sizing:border-box;max-width:40px;min-width:40px}"]})}var we=Ne(22070),Be=Ne.n(we);const Ze=["videoPlayer"];class st{ngOnChanges(t){t.channel&&t.channel.currentValue&&this.playChannel(t.channel.currentValue)}playChannel(t){if(this.hls&&this.hls.destroy(),t.url){const r=t.url+t.epgParams;Be()&&Be().isSupported()?(console.log("... switching channel to ",t.name,r),this.hls=new(Be()),this.hls.attachMedia(this.videoPlayer.nativeElement),this.hls.loadSource(r),this.handlePlayOperation()):console.error("something wrong with hls.js init...")}}disableCaptions(){for(let t=0;t<this.videoPlayer.nativeElement.textTracks.length;t++)this.videoPlayer.nativeElement.textTracks[t].mode="hidden"}handlePlayOperation(){const t=this.videoPlayer.nativeElement.play();void 0!==t&&t.then(()=>{this.showCaptions||this.disableCaptions()}).catch(()=>{})}ngOnDestroy(){this.hls&&this.hls.destroy()}static#e=this.\u0275fac=function(r){return new(r||st)};static#t=this.\u0275cmp=u.Xpm({type:st,selectors:[["app-html-video-player"]],viewQuery:function(r,n){if(1&r&&u.Gf(Ze,5),2&r){let e;u.iGM(e=u.CRH())&&(n.videoPlayer=e.first)}},inputs:{channel:"channel",showCaptions:"showCaptions"},features:[u.TTD],decls:3,vars:0,consts:[["id","video-player","autoplay","true","controls","true","muted","muted"],["videoPlayer",""]],template:function(r,n){1&r&&(u._UZ(0,"video",0,1),u._uU(2,"\n"))},styles:["#video-player[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 60px)}"]})}const ct=function(a){return{width:a}};function yt(a,t){if(1&a&&(u.TgZ(0,"div",1),u._uU(1,"\n    "),u.TgZ(2,"div",2),u._uU(3,"\n        "),u._UZ(4,"img",3),u._uU(5,"\n    "),u.qZA(),u._uU(6,"\n    "),u.TgZ(7,"div",4),u._uU(8,"\n        "),u.TgZ(9,"div",5),u._uU(10),u.qZA(),u._uU(11,"\n        "),u.TgZ(12,"div",6),u._uU(13),u.qZA(),u._uU(14,"\n        "),u.TgZ(15,"div",7),u._uU(16,"\n            "),u._UZ(17,"div",8),u._uU(18,"\n            "),u.TgZ(19,"div",9),u._uU(20),u.ALo(21,"momentDate"),u.ALo(22,"momentDate"),u.qZA(),u._uU(23,"\n        "),u.qZA(),u._uU(24,"\n    "),u.qZA(),u._uU(25,"\n"),u.qZA()),2&a){const r=u.oxw();u.ekj("visible",r.isVisible)("hidden",!r.isVisible),u.xp6(4),u.Q6J("src",(null==r.epgProgram?null:r.epgProgram.icon[0])||(null==r.channel||null==r.channel.tvg?null:r.channel.tvg.logo),u.LSH),u.xp6(6),u.AsE("\n            ",null==r.epgProgram||null==r.epgProgram.title[0]?null:r.epgProgram.title[0].value," | ",r.channel.name,"\n        "),u.xp6(3),u.hij("\n            ",null==r.epgProgram||null==r.epgProgram.desc[0]?null:r.epgProgram.desc[0].value,"\n        "),u.xp6(4),u.Q6J("ngStyle",u.VKq(19,ct,100*r.finishedDuration/r.generalDuration+"%")),u.xp6(3),u.AsE("\n                ",u.Dn7(21,11,r.start,"YYYYMMDDHHmm ZZ","HH:mm"),"\n                -\n                ",u.Dn7(22,15,r.stop,"YYYYMMDDHHmm ZZ","HH:mm"),"\n            ")}}class _t{constructor(){this.isVisible=!1}ngOnChanges(t){if(t.channel&&!t.channel.firstChange&&(clearTimeout(this.currentTimeout),this.isVisible=!0,this.currentTimeout=setTimeout(()=>{this.isVisible=!1},4e3)),t.epgProgram&&t.epgProgram.currentValue&&!t.epgProgram.firstChange){const{stop:r,start:n}=t.epgProgram.currentValue;this.setProgramDuration(n,r)}}setProgramDuration(t,r){this.stop=N(r,"YYYYMMDDHHmm ZZ"),this.start=N(t,"YYYYMMDDHHmm ZZ");const n=N(Date.now());this.generalDuration=N.duration(this.stop.diff(this.start)).asMilliseconds(),this.finishedDuration=N.duration(this.stop.diff(n)).asMilliseconds()}static#e=this.\u0275fac=function(r){return new(r||_t)};static#t=this.\u0275cmp=u.Xpm({type:_t,selectors:[["app-info-overlay"]],inputs:{channel:"channel",epgProgram:"epgProgram"},features:[u.TTD],decls:2,vars:1,consts:[["class","channel-overlay",3,"visible","hidden",4,"ngIf"],[1,"channel-overlay"],[1,"channel-logo"],["width","68","onerror","this.style.display='none'",3,"src"],[1,"content"],[1,"program-name"],[1,"program-description"],[1,"program-progress"],[1,"program-finished",3,"ngStyle"],[1,"duration"]],template:function(r,n){1&r&&(u.YNc(0,yt,26,21,"div",0),u._uU(1,"\n")),2&r&&u.Q6J("ngIf",n.channel&&n.epgProgram)},dependencies:[de.O5,de.PC,c],styles:[".channel-overlay[_ngcontent-%COMP%]{position:absolute;bottom:35px;width:100%;background:rgba(44,43,47,.862745098);min-height:130px;max-height:165px;margin-left:auto;margin-right:auto;left:0;right:0;backdrop-filter:blur(10px);flex-direction:row;box-sizing:border-box;display:flex}.program-name[_ngcontent-%COMP%], .program-description[_ngcontent-%COMP%]{margin:20px 0;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.channel-logo[_ngcontent-%COMP%]{margin-top:20px;place-content:flex-start center;align-items:flex-start;flex-direction:row;box-sizing:border-box;display:flex;flex:1 1 100px;max-width:100px;min-width:100px}.content[_ngcontent-%COMP%]{width:100%}.program-progress[_ngcontent-%COMP%]{width:96%;background:#ccc;height:20px;margin-bottom:8px}.program-name[_ngcontent-%COMP%]{width:96%;max-height:20px;-webkit-line-clamp:1}.program-description[_ngcontent-%COMP%]{width:96%;max-height:55px;-webkit-line-clamp:3}.program-finished[_ngcontent-%COMP%]{background:#717171;height:20px;font-size:.8em;padding-left:10px;color:#000;line-height:20px}.duration[_ngcontent-%COMP%]{position:relative;top:-18px;font-size:.8em;color:#000;left:10px}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s 2s,opacity 2s linear}"]})}var ot=Ne(272),bt=Ne(73555),Ct=Ne(17489),nt=Ne(76477),Ht=Ne(17009),Kt=Ne(67376),Ut=Ne(24006),tr=Ne(37084),It=Ne(3848);function Xt(a,t){1&a&&(u.TgZ(0,"mat-icon",5),u._uU(1,"drag_indicator"),u.qZA())}function sr(a,t){if(1&a&&(u.TgZ(0,"div",6),u._uU(1,"\n            "),u._UZ(2,"img",7),u._uU(3,"\n        "),u.qZA()),2&a){const r=u.oxw();u.xp6(2),u.Q6J("src",r.logo,u.LSH)}}function fr(a,t){if(1&a){const r=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(e){u.CHM(r);const i=u.oxw();return u.KtG(i.favoriteToggled.emit(e))}),u.ALo(1,"translate"),u._uU(2,"\n            "),u.TgZ(3,"mat-icon",9),u._uU(4,"star"),u.qZA(),u._uU(5,"\n        "),u.qZA()}2&a&&u.Q6J("matTooltip",u.lcZ(1,1,"CHANNELS.REMOVE_FAVORITE"))}class ir{constructor(){this.isDraggable=!1,this.name="",this.showFavoriteButton=!1,this.selected=!1,this.clicked=new u.vpe,this.favoriteToggled=new u.vpe}static#e=this.\u0275fac=function(r){return new(r||ir)};static#t=this.\u0275cmp=u.Xpm({type:ir,selectors:[["app-channel-list-item"]],inputs:{isDraggable:"isDraggable",logo:"logo",name:"name",showFavoriteButton:"showFavoriteButton",selected:"selected"},outputs:{clicked:"clicked",favoriteToggled:"favoriteToggled"},decls:12,vars:7,consts:[["cdkDrag","","cdkDragPreviewContainer","parent","data-test-id","channel-item",3,"cdkDragDisabled","click"],["mat-list-icon","","cdkDragHandle","","class","drag-icon",4,"ngIf"],["class","channel-logo",4,"ngIf"],["matLine","",1,"channel-name"],["mat-icon-button","","color","primary",3,"matTooltip","click",4,"ngIf"],["mat-list-icon","","cdkDragHandle","",1,"drag-icon"],[1,"channel-logo"],["width","48","onerror","this.style.display='none'",3,"src"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["color","accent"]],template:function(r,n){1&r&&(u.TgZ(0,"mat-list-item",0),u.NdJ("click",function(){return n.clicked.emit()}),u._uU(1,"\n        "),u.YNc(2,Xt,2,0,"mat-icon",1),u._uU(3,"\n        "),u.YNc(4,sr,4,1,"div",2),u._uU(5,"\n        "),u.TgZ(6,"p",3),u._uU(7),u.qZA(),u._uU(8,"\n        "),u.YNc(9,fr,6,3,"button",4),u._uU(10,"\n        "),u._UZ(11,"mat-divider"),u.qZA()),2&r&&(u.ekj("active",n.selected),u.Q6J("cdkDragDisabled",!n.isDraggable),u.xp6(2),u.Q6J("ngIf",n.isDraggable),u.xp6(2),u.Q6J("ngIf",n.logo),u.xp6(3),u.hij("\n            ",n.name,"\n        "),u.xp6(2),u.Q6J("ngIf",n.showFavoriteButton))},dependencies:[de.O5,bt.Zt,bt.Bh,F.lW,O.Hw,W.Tg,U.X2,W.Nh,R.d,M.gM,g.X$],styles:[".channel-logo[_ngcontent-%COMP%]{max-height:48px;overflow:hidden}.channel-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;font-size:.9em;max-width:290px}.active[_ngcontent-%COMP%]{background:#ddd}  .dark-theme .active{background:#000}.drag-icon[_ngcontent-%COMP%]{cursor:move;margin-left:-20px}"]})}class vr{transform(t,r,n){return t&&r?t.filter(e=>e[n].toLowerCase().includes(r.toLowerCase())):t}static#e=this.\u0275fac=function(r){return new(r||vr)};static#t=this.\u0275pipe=u.Yjl({name:"filterBy",type:vr,pure:!0});static#r=this.\u0275prov=u.Yz7({token:vr,factory:vr.\u0275fac})}const ce=["search"];function X(a,t){1&a&&(u._uU(0,"\n            "),u.TgZ(1,"mat-icon",10),u._uU(2,"list"),u.qZA(),u._uU(3,"\n            "),u.TgZ(4,"div",11),u._uU(5),u.ALo(6,"translate"),u.qZA(),u._uU(7,"\n        ")),2&a&&(u.xp6(5),u.hij("\n                ",u.lcZ(6,1,"CHANNELS.ALL_CHANNELS"),"\n            "))}function J(a,t){if(1&a){const r=u.EpF();u.ynx(0),u._uU(1,"\n                    "),u.TgZ(2,"app-channel-list-item",12),u.NdJ("clicked",function(){const i=u.CHM(r).$implicit,s=u.oxw();return u.KtG(s.selectChannel(i))}),u.ALo(3,"translate"),u.qZA(),u._uU(4,"\n                "),u.BQk()}if(2&a){const r=t.$implicit,n=t.index,e=u.oxw();u.xp6(2),u.Q6J("name",n+1+". "+u.lcZ(3,3,(null==r?null:r.name)||"CHANNELS.UNNAMED_CHANNEL"))("logo",null==r||null==r.tvg?null:r.tvg.logo)("selected",(null==e.selected?null:e.selected.id)===r.id)}}function be(a,t){1&a&&(u._uU(0,"\n            "),u.TgZ(1,"mat-icon",10),u._uU(2,"category"),u.qZA(),u._uU(3,"\n            "),u.TgZ(4,"div",11),u._uU(5),u.ALo(6,"translate"),u.qZA(),u._uU(7,"\n        ")),2&a&&(u.xp6(5),u.hij("\n                ",u.lcZ(6,1,"CHANNELS.GROUPS"),"\n            "))}function Le(a,t){if(1&a&&(u.TgZ(0,"mat-expansion-panel-header"),u._uU(1),u.ALo(2,"titlecase"),u.ALo(3,"translate"),u.qZA()),2&a){const r=u.oxw().$implicit;u.xp6(1),u.AsE("\n                            ",u.lcZ(2,2,r.key||u.lcZ(3,4,"CHANNELS.UNGROUPED")),"\n                            (",r.value.length,")\n                        ")}}function He(a,t){if(1&a){const r=u.EpF();u.ynx(0),u._uU(1,"\n                                "),u.TgZ(2,"app-channel-list-item",12),u.NdJ("clicked",function(){const i=u.CHM(r).$implicit,s=u.oxw(3);return u.KtG(s.selectChannel(i))}),u.ALo(3,"translate"),u.qZA(),u._uU(4,"\n                            "),u.BQk()}if(2&a){const r=t.$implicit,n=t.index,e=u.oxw(3);u.xp6(2),u.Q6J("name",n+1+". "+u.lcZ(3,3,(null==r?null:r.name)||"CHANNELS.UNNAMED_CHANNEL"))("logo",null==r||null==r.tvg?null:r.tvg.logo)("selected",(null==e.selected?null:e.selected.id)===r.id)}}function Ve(a,t){if(1&a&&(u._uU(0,"\n                            "),u.YNc(1,He,5,5,"ng-container",8),u._uU(2,"\n                        ")),2&a){const r=u.oxw().$implicit;u.xp6(1),u.Q6J("ngForOf",r.value)}}function Pt(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n                    "),u.TgZ(2,"mat-expansion-panel"),u._uU(3,"\n                        "),u.YNc(4,Le,4,6,"mat-expansion-panel-header",9),u._uU(5,"\n                        "),u.YNc(6,Ve,3,1,"ng-template",13),u._uU(7,"\n                    "),u.qZA(),u._uU(8,"\n                "),u.BQk()),2&a){const r=t.$implicit;u.xp6(4),u.Q6J("ngIf",r.value.length>0)}}function Zt(a,t){1&a&&(u._uU(0,"\n            "),u.TgZ(1,"mat-icon",10),u._uU(2,"star"),u.qZA(),u._uU(3,"\n            "),u.TgZ(4,"div",11),u._uU(5),u.ALo(6,"translate"),u.qZA(),u._uU(7,"\n        ")),2&a&&(u.xp6(5),u.hij("\n                ",u.lcZ(6,1,"CHANNELS.FAVORITES"),"\n            "))}function Bt(a,t){if(1&a){const r=u.EpF();u.TgZ(0,"app-channel-list-item",19),u.NdJ("clicked",function(){const i=u.CHM(r).$implicit,s=u.oxw(4);return u.KtG(s.selectChannel(i))})("favoriteToggled",function(e){const s=u.CHM(r).$implicit,l=u.oxw(4);return u.KtG(l.toggleFavoriteChannel(s,e))}),u.ALo(1,"translate"),u.qZA()}if(2&a){const r=t.$implicit,n=t.index,e=u.oxw(4);u.Q6J("name",n+1+". "+u.lcZ(1,5,(null==r?null:r.name)||"CHANNELS.UNNAMED_CHANNEL"))("isDraggable",!0)("logo",null==r||null==r.tvg?null:r.tvg.logo)("selected",(null==e.selected?null:e.selected.id)===r.id)("showFavoriteButton",!0)}}function jt(a,t){if(1&a&&(u.ynx(0),u._uU(1,"\n                "),u.YNc(2,Bt,2,7,"app-channel-list-item",18),u._uU(3,"\n            "),u.BQk()),2&a){const r=u.oxw().ngIf;u.xp6(2),u.Q6J("ngForOf",r)}}function Qt(a,t){1&a&&(u._uU(0,"\n                "),u.TgZ(1,"mat-list-item")(2,"strong"),u._uU(3),u.ALo(4,"translate"),u.qZA()(),u._uU(5,"\n                "),u.TgZ(6,"mat-list-item"),u._uU(7),u.ALo(8,"translate"),u.qZA(),u._uU(9,"\n            ")),2&a&&(u.xp6(3),u.Oqu(u.lcZ(4,2,"CHANNELS.NO_FAVORITES")),u.xp6(4),u.hij("\n                    ",u.lcZ(8,4,"CHANNELS.USE_STAR_TO_FAVORITE"),""))}function nn(a,t){if(1&a){const r=u.EpF();u.TgZ(0,"mat-nav-list",15),u.NdJ("cdkDropListDropped",function(e){const s=u.CHM(r).ngIf,l=u.oxw(2);return u.KtG(l.drop(e,s))}),u._uU(1,"\n            "),u.YNc(2,jt,4,1,"ng-container",16),u._uU(3,"\n            "),u.YNc(4,Qt,10,6,"ng-template",null,17,u.W1O),u._uU(6,"\n        "),u.qZA()}if(2&a){const r=t.ngIf,n=u.MAs(5);u.xp6(2),u.Q6J("ngIf",r.length>0)("ngIfElse",n)}}function Wn(a,t){if(1&a&&(u.TgZ(0,"mat-tab"),u._uU(1,"\n        "),u.YNc(2,Zt,8,3,"ng-template",1),u._uU(3,"\n        "),u.YNc(4,nn,7,2,"mat-nav-list",14),u.ALo(5,"async"),u._uU(6,"\n    "),u.qZA()),2&a){const r=u.oxw();u.xp6(4),u.Q6J("ngIf",u.lcZ(5,1,r.favorites$))}}class In{get channelList(){return this._channelList}set channelList(t){this._channelList=t,this.groupedChannels=Ct.groupBy(t,"group.title")}handleKeyboardEvent(t){"f"===t.key&&t.ctrlKey&&this.searchElement.nativeElement.focus()}constructor(t,r,n){this.store=t,this.snackBar=r,this.translateService=n,this.searchTerm={name:""},this.playlistId$=this.store.select(q.op).pipe((0,nt.skipWhile)(e=>""===e||void 0===e)),this.favorites$=this.store.select(q.Tc).pipe((0,nt.map)(e=>e.map(i=>this.channelList.find(s=>s.id===i))))}selectChannel(t){this.selected=t,this.store.dispatch(V.ZY({channel:t}))}toggleFavoriteChannel(t,r){r.stopPropagation(),this.snackBar.open(this.translateService.instant("CHANNELS.FAVORITES_UPDATED"),null,{duration:2e3}),this.store.dispatch(V.VO({channel:t}))}trackByFn(t,r){return r.id}drop(t,r){(0,bt.bA)(r,t.previousIndex,t.currentIndex),console.log(r),this.store.dispatch(V.Lo({channelIds:r.map(n=>n.id)}))}static#e=this.\u0275fac=function(r){return new(r||In)(u.Y36(Y.yh),u.Y36(Ht.ux),u.Y36(g.sK))};static#t=this.\u0275cmp=u.Xpm({type:In,selectors:[["app-channel-list-container"]],viewQuery:function(r,n){if(1&r&&u.Gf(ce,5),2&r){let e;u.iGM(e=u.CRH())&&(n.searchElement=e.first)}},hostBindings:function(r,n){1&r&&u.NdJ("keypress",function(i){return n.handleKeyboardEvent(i)},!1,u.evT)},inputs:{channelList:"channelList"},decls:46,vars:16,consts:[["color","primary","backgroundColor","primary"],["mat-tab-label",""],["type","search",1,"full-width","search-bar",3,"placeholder","ngModel","ngModelChange"],["search",""],["itemSize","50",1,"scroll-viewport"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["id","groups-list"],["multi",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"tab-icon"],[1,"tab-title"],[3,"name","logo","selected","clicked"],["matExpansionPanelContent",""],["cdkDropList","","id","favorites-list",3,"cdkDropListDropped",4,"ngIf"],["cdkDropList","","id","favorites-list",3,"cdkDropListDropped"],[4,"ngIf","ngIfElse"],["noFavorites",""],[3,"name","isDraggable","logo","selected","showFavoriteButton","clicked","favoriteToggled",4,"ngFor","ngForOf"],[3,"name","isDraggable","logo","selected","showFavoriteButton","clicked","favoriteToggled"]],template:function(r,n){1&r&&(u.TgZ(0,"mat-tab-group",0),u._uU(1,"\n    "),u.TgZ(2,"mat-tab"),u._uU(3,"\n        "),u.YNc(4,X,8,3,"ng-template",1),u._uU(5,"\n        "),u.TgZ(6,"mat-list"),u._uU(7,"\n            "),u.TgZ(8,"mat-list-item"),u._uU(9,"\n                "),u.TgZ(10,"input",2,3),u.NdJ("ngModelChange",function(i){return n.searchTerm.name=i}),u.ALo(12,"translate"),u.qZA(),u._uU(13,"\n            "),u.qZA(),u._uU(14,"\n        "),u.qZA(),u._uU(15,"\n        "),u._UZ(16,"mat-divider"),u._uU(17,"\n        "),u.TgZ(18,"mat-nav-list"),u._uU(19,"\n            "),u.TgZ(20,"cdk-virtual-scroll-viewport",4),u._uU(21,"\n                "),u.YNc(22,J,5,5,"ng-container",5),u.ALo(23,"filterBy"),u._uU(24,"\n            "),u.qZA(),u._uU(25,"\n        "),u.qZA(),u._uU(26,"\n    "),u.qZA(),u._uU(27,"\n\n    "),u.TgZ(28,"mat-tab"),u._uU(29,"\n        "),u.YNc(30,be,8,3,"ng-template",1),u._uU(31,"\n        "),u.TgZ(32,"mat-nav-list",6),u._uU(33,"\n            "),u.TgZ(34,"mat-accordion",7),u._uU(35,"\n                "),u.YNc(36,Pt,9,1,"ng-container",8),u.ALo(37,"keyvalue"),u._uU(38,"\n            "),u.qZA(),u._uU(39,"\n        "),u.qZA(),u._uU(40,"\n    "),u.qZA(),u._uU(41,"\n\n    "),u.YNc(42,Wn,7,3,"mat-tab",9),u.ALo(43,"async"),u._uU(44,"\n"),u.qZA(),u._uU(45,"\n")),2&r&&(u.xp6(10),u.Q6J("placeholder",u.lcZ(12,6,"CHANNELS.SEARCH_CHANNEL"))("ngModel",n.searchTerm.name),u.xp6(12),u.Q6J("cdkVirtualForOf",u.Dn7(23,8,n._channelList,n.searchTerm.name,"name"))("cdkVirtualForTrackBy",n.trackByFn),u.xp6(14),u.Q6J("ngForOf",u.lcZ(37,12,n.groupedChannels)),u.xp6(6),u.Q6J("ngIf","GLOBAL_FAVORITES"!==u.lcZ(43,14,n.playlistId$)))},dependencies:[de.sg,de.O5,Kt.xd,Kt.x0,Kt.N7,bt.Wj,Ut.Fj,Ut.JJ,Ut.On,tr.pp,tr.ib,tr.yz,tr.HS,O.Hw,W.i$,W.Hk,W.Tg,R.d,It.SP,It.uD,It.uX,ir,de.Ov,de.rS,de.Nd,vr,g.X$],styles:[".mat-list-base[_ngcontent-%COMP%]{padding-top:0}.scroll-viewport[_ngcontent-%COMP%]{min-height:calc(100vh - 165px)}.search-bar[_ngcontent-%COMP%]{padding:8px;background:#ddd;border:none;border-radius:4px}  .mat-expansion-panel-body{padding:0!important}  .dark-theme .search-bar{background:#666;color:#fff}  .dark-theme .search-bar::placeholder{color:#ccc}  .mat-tab-label-content{text-transform:uppercase}  .mat-expansion-panel{border-radius:0!important}  .mat-tab-label,   .mat-tab-label-active{min-width:0!important;padding:15px!important}[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button{-webkit-appearance:none;cursor:pointer;appearance:none;height:10px;width:10px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA5NiA5NiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgOTYgOTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBvbHlnb24gZmlsbD0iI2VlZSIgcG9pbnRzPSI5NiwxNCA4MiwwIDQ4LDM0IDE0LDAgMCwxNCAzNCw0OCAwLDgyIDE0LDk2IDQ4LDYyIDgyLDk2IDk2LDgyIDYyLDQ4ICIvPg0KPC9zdmc+DQo=);background-size:10px 10px;color:#fff}#groups-list[_ngcontent-%COMP%], #favorites-list[_ngcontent-%COMP%]{height:calc(100vh - 120px)}@media only screen and (max-width: 480px){.channel-name[_ngcontent-%COMP%]{max-width:100px}.tab-title[_ngcontent-%COMP%]{display:none}.tab-icon[_ngcontent-%COMP%]{display:block}}"]})}function un(a,t){if(1&a&&(u.ynx(0),u._uU(1),u.ALo(2,"async"),u.BQk()),2&a){const r=u.oxw();u.xp6(1),u.hij("\n                    ",u.lcZ(2,1,r.playlistTitle$),"\n                ")}}function Pi(a,t){1&a&&(u._uU(0),u.ALo(1,"translate")),2&a&&u.hij("\n                    ",u.lcZ(1,1,"HOME.PLAYLISTS.MY_PLAYLISTS"),"\n                ")}function pi(a,t){1&a&&(u.TgZ(0,"button",11),u.ALo(1,"translate"),u._uU(2,"\n            "),u.TgZ(3,"mat-icon"),u._uU(4,"playlist_add"),u.qZA(),u._uU(5,"\n        "),u.qZA()),2&a&&u.Q6J("matTooltip",u.lcZ(1,1,"CHANNELS.UPLOAD_OR_SELECT_OTHER_PLAYLIST"))}function Gn(a,t){if(1&a&&(u.TgZ(0,"app-channel-list-container",12),u._uU(1,"\n"),u.qZA()),2&a){const r=u.oxw();u.Q6J("channelList",r.channels)}}function Vn(a,t){if(1&a){const r=u.EpF();u._uU(0,"\n    "),u.TgZ(1,"app-recent-playlists",13),u.NdJ("playlistClicked",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.selectPlaylist())}),u.qZA(),u._uU(2,"\n")}if(2&a){const r=u.oxw();u.xp6(1),u.ekj("electron",r.dataService.isElectron)}}class pn{constructor(t,r,n){this.dataService=t,this.router=r,this.store=n,this.channels=[],this.isElectron=this.dataService.isElectron,this.playlistTitle$=this.store.select(q.yg),this.sidebarView="CHANNELS"}goBack(){"PLAYLISTS"===this.sidebarView?(this.store.dispatch(V.Qp()),this.router.navigate(["/"])):this.sidebarView="PLAYLISTS"}selectPlaylist(){this.sidebarView="CHANNELS"}static#e=this.\u0275fac=function(r){return new(r||pn)(u.Y36(B.D),u.Y36(Se.F0),u.Y36(Y.yh))};static#t=this.\u0275cmp=u.Xpm({type:pn,selectors:[["app-sidebar"]],inputs:{channels:"channels"},decls:37,vars:10,consts:[["id","playlists-navigation"],[1,"current-playlist"],["mat-icon-button","","matTooltip","Back",3,"click"],[1,"playlist-info"],[1,"name"],[4,"ngIf","ngIfElse"],["allPlaylists",""],[1,"channels-count"],["mat-icon-button","","routerLink","/",3,"matTooltip",4,"ngIf"],[3,"channelList",4,"ngIf","ngIfElse"],["playlistsTemplate",""],["mat-icon-button","","routerLink","/",3,"matTooltip"],[3,"channelList"],[1,"recent-playlists",3,"playlistClicked"]],template:function(r,n){if(1&r&&(u.TgZ(0,"div",0),u._uU(1,"\n    "),u.TgZ(2,"div",1),u._uU(3,"\n        "),u.TgZ(4,"button",2),u.NdJ("click",function(){return n.goBack()}),u._uU(5,"\n            "),u.TgZ(6,"mat-icon"),u._uU(7,"arrow_back_ios"),u.qZA(),u._uU(8,"\n        "),u.qZA(),u._uU(9,"\n        "),u.TgZ(10,"div",3),u._uU(11,"\n            "),u.TgZ(12,"div",4),u._uU(13,"\n                "),u.YNc(14,un,3,3,"ng-container",5),u._uU(15,"\n                "),u.YNc(16,Pi,2,3,"ng-template",null,6,u.W1O),u._uU(18,"\n            "),u.qZA(),u._uU(19,"\n            "),u.TgZ(20,"div",7),u._uU(21),u.ALo(22,"translate"),u.ALo(23,"translate"),u.qZA(),u._uU(24,"\n        "),u.qZA(),u._uU(25,"\n\n        "),u.YNc(26,pi,6,3,"button",8),u._uU(27,"\n    "),u.qZA(),u._uU(28,"\n"),u.qZA(),u._uU(29,"\n"),u._UZ(30,"mat-divider"),u._uU(31,"\n"),u.YNc(32,Gn,2,1,"app-channel-list-container",9),u._uU(33,"\n"),u.YNc(34,Vn,3,2,"ng-template",null,10,u.W1O),u._uU(36,"\n")),2&r){const e=u.MAs(17),i=u.MAs(35);u.xp6(14),u.Q6J("ngIf","CHANNELS"===n.sidebarView)("ngIfElse",e),u.xp6(7),u.hij("\n                ","CHANNELS"===n.sidebarView?n.channels.length+" "+u.lcZ(22,6,"HOME.PLAYLISTS.CHANNELS"):u.lcZ(23,8,"HOME.PLAYLISTS.MY_PLAYLISTS_SUBTITLE"),"\n            "),u.xp6(5),u.Q6J("ngIf","CHANNELS"===n.sidebarView),u.xp6(6),u.Q6J("ngIf","CHANNELS"===n.sidebarView)("ngIfElse",i)}},dependencies:[de.O5,Se.rH,F.lW,O.Hw,R.d,M.gM,ot.d,In,de.Ov,g.X$],styles:["#playlists-navigation[_ngcontent-%COMP%]{background-color:#000;color:#fff}#playlists-navigation[_ngcontent-%COMP%]   .current-playlist[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px}#playlists-navigation[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]{flex:1;max-width:300px}#playlists-navigation[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1.1em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#playlists-navigation[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .channels-count[_ngcontent-%COMP%]{font-size:.8em;color:#ccc;text-transform:lowercase}.recent-playlists[_ngcontent-%COMP%]{height:calc(100vh - 60px);overflow:auto;width:100%;display:block}.electron[_ngcontent-%COMP%]{height:calc(100vh - 85px)!important}@media only screen and (max-width: 480px){.playlist-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{max-width:105px}}"]})}var wi=Ne(83683);function An(a,t){if(1&a){const r=u.EpF();u.TgZ(0,"button",1),u.NdJ("click",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.addToFavorites(e.activeChannel))}),u.ALo(1,"translate"),u._uU(2,"\n        "),u.TgZ(3,"mat-icon"),u._uU(4),u.ALo(5,"async"),u.qZA(),u._uU(6,"\n    "),u.qZA()}if(2&a){const r=u.oxw();u.Q6J("matTooltip",u.lcZ(1,2,"TOP_MENU.TOGGLE_FAVORITE_FLAG")),u.xp6(4),u.hij("\n            ",u.lcZ(5,4,r.favorites$).includes(null==r.activeChannel?null:r.activeChannel.id)?"star":"star_outline","")}}function ca(a,t){if(1&a){const r=u.EpF();u.ynx(0),u._uU(1,"\n        "),u.TgZ(2,"button",1),u.NdJ("click",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.multiEpgClicked.emit())}),u.ALo(3,"translate"),u._uU(4,"\n            "),u.TgZ(5,"mat-icon"),u._uU(6,"view_list"),u.qZA(),u._uU(7,"\n        "),u.qZA(),u._uU(8,"\n        "),u.TgZ(9,"button",5),u.NdJ("click",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.toggleRightDrawerClicked.emit())}),u.ALo(10,"translate"),u._uU(11,"\n            EPG\n        "),u.qZA(),u._uU(12,"\n    "),u.BQk()}2&a&&(u.xp6(2),u.Q6J("matTooltip",u.lcZ(3,2,"TOP_MENU.OPEN_MULTI_EPG")),u.xp6(7),u.Q6J("matTooltip",u.lcZ(10,4,"TOP_MENU.OPEN_EPG_LIST")))}class vi{constructor(t,r,n){this.snackBar=t,this.store=r,this.translateService=n,this.multiEpgClicked=new u.vpe,this.toggleLeftDrawerClicked=new u.vpe,this.toggleRightDrawerClicked=new u.vpe,this.favorites$=this.store.select(q.Tc),this.isEpgAvailable$=this.store.select(q.hH),this.playlistId$=this.store.select(q.op)}addToFavorites(t){this.snackBar.open(this.translateService.instant("CHANNELS.FAVORITES_UPDATED"),null,{duration:2e3}),this.store.dispatch((0,V.VO)({channel:t}))}static#e=this.\u0275fac=function(r){return new(r||vi)(u.Y36(Ht.ux),u.Y36(Y.yh),u.Y36(g.sK))};static#t=this.\u0275cmp=u.Xpm({type:vi,selectors:[["app-toolbar"]],inputs:{activeChannel:"activeChannel"},outputs:{multiEpgClicked:"multiEpgClicked",toggleLeftDrawerClicked:"toggleLeftDrawerClicked",toggleRightDrawerClicked:"toggleRightDrawerClicked"},decls:18,vars:10,consts:[["color","primary"],["mat-icon-button","",3,"matTooltip","click"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],[1,"spacer"],[4,"ngIf"],["mat-button","",3,"matTooltip","click"]],template:function(r,n){1&r&&(u.TgZ(0,"mat-toolbar",0),u._uU(1,"\n    "),u.TgZ(2,"button",1),u.NdJ("click",function(){return n.toggleLeftDrawerClicked.emit()}),u.ALo(3,"translate"),u._uU(4,"\n        "),u.TgZ(5,"mat-icon"),u._uU(6,"menu"),u.qZA(),u._uU(7,"\n    "),u.qZA(),u._uU(8,"\n    "),u.YNc(9,An,7,6,"button",2),u.ALo(10,"async"),u._uU(11),u._UZ(12,"div",3),u._uU(13,"\n    "),u.YNc(14,ca,13,6,"ng-container",4),u.ALo(15,"async"),u._uU(16,"\n"),u.qZA(),u._uU(17,"\n")),2&r&&(u.xp6(2),u.Q6J("matTooltip",u.lcZ(3,4,"TOP_MENU.OPEN_CHANNELS_LIST")),u.xp6(7),u.Q6J("ngIf","GLOBAL_FAVORITES"!==u.lcZ(10,6,n.playlistId$)),u.xp6(2),u.hij("\n    ",null==n.activeChannel?null:n.activeChannel.name,"\n    "),u.xp6(3),u.Q6J("ngIf",u.lcZ(15,8,n.isEpgAvailable$)))},dependencies:[de.O5,F.lW,O.Hw,wi.Ye,M.gM,de.Ov,g.X$],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}var Oi=Ne(84080),Kn=Ne(49465),fe=Ne(98788),ve=Ne(8612);function Ae(a,t){if(t.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+t.length+" present")}function Ke(a){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function gt(a){return Ae(1,arguments),a instanceof Date||"object"===Ke(a)&&"[object Date]"===Object.prototype.toString.call(a)}function Mt(a){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Yt(a){Ae(1,arguments);var t=Object.prototype.toString.call(a);return a instanceof Date||"object"===Mt(a)&&"[object Date]"===t?new Date(a.getTime()):"number"==typeof a||"[object Number]"===t?new Date(a):(("string"==typeof a||"[object String]"===t)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Xr(a){if(Ae(1,arguments),!gt(a)&&"number"!=typeof a)return!1;var t=Yt(a);return!isNaN(Number(t))}function mr(a){if(null===a||!0===a||!1===a)return NaN;var t=Number(a);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Cn(a,t){Ae(2,arguments);var r=Yt(a).getTime(),n=mr(t);return new Date(r+n)}function Ln(a,t){Ae(2,arguments);var r=mr(t);return Cn(a,-r)}function Rn(a){Ae(1,arguments);var t=1,r=Yt(a),n=r.getUTCDay(),e=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-e),r.setUTCHours(0,0,0,0),r}function vn(a){Ae(1,arguments);var t=Yt(a),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var e=Rn(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var s=Rn(i);return t.getTime()>=e.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function Ki(a){Ae(1,arguments);var t=vn(a),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=Rn(r);return n}var Ii=6048e5;function $r(a){Ae(1,arguments);var t=Yt(a),r=Rn(t).getTime()-Ki(t).getTime();return Math.round(r/Ii)+1}var Ps={};function Yn(){return Ps}function da(a,t){var r,n,e,i,s,l,p,y;Ae(1,arguments);var k=Yn(),$=mr(null!==(r=null!==(n=null!==(e=null!==(i=t?.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==e?e:k.weekStartsOn)&&void 0!==n?n:null===(p=k.locale)||void 0===p||null===(y=p.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==r?r:0);if(!($>=0&&$<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var z=Yt(a),ae=z.getUTCDay(),pe=(ae<$?7:0)+ae-$;return z.setUTCDate(z.getUTCDate()-pe),z.setUTCHours(0,0,0,0),z}function No(a,t){var r,n,e,i,s,l,p,y;Ae(1,arguments);var k=Yt(a),$=k.getUTCFullYear(),z=Yn(),ae=mr(null!==(r=null!==(n=null!==(e=null!==(i=t?.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==e?e:z.firstWeekContainsDate)&&void 0!==n?n:null===(p=z.locale)||void 0===p||null===(y=p.options)||void 0===y?void 0:y.firstWeekContainsDate)&&void 0!==r?r:1);if(!(ae>=1&&ae<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var pe=new Date(0);pe.setUTCFullYear($+1,0,ae),pe.setUTCHours(0,0,0,0);var me=da(pe,t),Ee=new Date(0);Ee.setUTCFullYear($,0,ae),Ee.setUTCHours(0,0,0,0);var We=da(Ee,t);return k.getTime()>=me.getTime()?$+1:k.getTime()>=We.getTime()?$:$-1}function ag(a,t){var r,n,e,i,s,l,p,y;Ae(1,arguments);var k=Yn(),$=mr(null!==(r=null!==(n=null!==(e=null!==(i=t?.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==e?e:k.firstWeekContainsDate)&&void 0!==n?n:null===(p=k.locale)||void 0===p||null===(y=p.options)||void 0===y?void 0:y.firstWeekContainsDate)&&void 0!==r?r:1),z=No(a,t),ae=new Date(0);ae.setUTCFullYear(z,0,$),ae.setUTCHours(0,0,0,0);var pe=da(ae,t);return pe}var sg=6048e5;function vd(a,t){Ae(1,arguments);var r=Yt(a),n=da(r,t).getTime()-ag(r,t).getTime();return Math.round(n/sg)+1}function yr(a,t){for(var r=a<0?"-":"",n=Math.abs(a).toString();n.length<t;)n="0"+n;return r+n}var gd={y:function(t,r){var n=t.getUTCFullYear(),e=n>0?n:1-n;return yr("yy"===r?e%100:e,r.length)},M:function(t,r){var n=t.getUTCMonth();return"M"===r?String(n+1):yr(n+1,2)},d:function(t,r){return yr(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(t,r){return yr(t.getUTCHours()%12||12,r.length)},H:function(t,r){return yr(t.getUTCHours(),r.length)},m:function(t,r){return yr(t.getUTCMinutes(),r.length)},s:function(t,r){return yr(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,e=t.getUTCMilliseconds();return yr(Math.floor(e*Math.pow(10,n-3)),r.length)}};const Yi=gd;var Vl={G:function(t,r,n){var e=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})}},y:function(t,r,n){if("yo"===r){var e=t.getUTCFullYear();return n.ordinalNumber(e>0?e:1-e,{unit:"year"})}return Yi.y(t,r)},Y:function(t,r,n,e){var i=No(t,e),s=i>0?i:1-i;return"YY"===r?yr(s%100,2):"Yo"===r?n.ordinalNumber(s,{unit:"year"}):yr(s,r.length)},R:function(t,r){return yr(vn(t),r.length)},u:function(t,r){return yr(t.getUTCFullYear(),r.length)},Q:function(t,r,n){var e=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(e);case"QQ":return yr(e,2);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})}},q:function(t,r,n){var e=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(e);case"qq":return yr(e,2);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})}},M:function(t,r,n){var e=t.getUTCMonth();switch(r){case"M":case"MM":return Yi.M(t,r);case"Mo":return n.ordinalNumber(e+1,{unit:"month"});case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})}},L:function(t,r,n){var e=t.getUTCMonth();switch(r){case"L":return String(e+1);case"LL":return yr(e+1,2);case"Lo":return n.ordinalNumber(e+1,{unit:"month"});case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})}},w:function(t,r,n,e){var i=vd(t,e);return"wo"===r?n.ordinalNumber(i,{unit:"week"}):yr(i,r.length)},I:function(t,r,n){var e=$r(t);return"Io"===r?n.ordinalNumber(e,{unit:"week"}):yr(e,r.length)},d:function(t,r,n){return"do"===r?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Yi.d(t,r)},D:function(t,r,n){var e=function Vi(a){Ae(1,arguments);var t=Yt(a),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),e=r-n;return Math.floor(e/864e5)+1}(t);return"Do"===r?n.ordinalNumber(e,{unit:"dayOfYear"}):yr(e,r.length)},E:function(t,r,n){var e=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})}},e:function(t,r,n,e){var i=t.getUTCDay(),s=(i-e.weekStartsOn+8)%7||7;switch(r){case"e":return String(s);case"ee":return yr(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,e){var i=t.getUTCDay(),s=(i-e.weekStartsOn+8)%7||7;switch(r){case"c":return String(s);case"cc":return yr(s,r.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var e=t.getUTCDay(),i=0===e?7:e;switch(r){case"i":return String(i);case"ii":return yr(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(e,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(e,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(e,{width:"short",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})}},a:function(t,r,n){var i=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var i,e=t.getUTCHours();switch(i=12===e?"noon":0===e?"midnight":e/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var i,e=t.getUTCHours();switch(i=e>=17?"evening":e>=12?"afternoon":e>=4?"morning":"night",r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if("ho"===r){var e=t.getUTCHours()%12;return 0===e&&(e=12),n.ordinalNumber(e,{unit:"hour"})}return Yi.h(t,r)},H:function(t,r,n){return"Ho"===r?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Yi.H(t,r)},K:function(t,r,n){var e=t.getUTCHours()%12;return"Ko"===r?n.ordinalNumber(e,{unit:"hour"}):yr(e,r.length)},k:function(t,r,n){var e=t.getUTCHours();return 0===e&&(e=24),"ko"===r?n.ordinalNumber(e,{unit:"hour"}):yr(e,r.length)},m:function(t,r,n){return"mo"===r?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Yi.m(t,r)},s:function(t,r,n){return"so"===r?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Yi.s(t,r)},S:function(t,r){return Yi.S(t,r)},X:function(t,r,n,e){var s=(e._originalDate||t).getTimezoneOffset();if(0===s)return"Z";switch(r){case"X":return Kl(s);case"XXXX":case"XX":return Li(s);default:return Li(s,":")}},x:function(t,r,n,e){var s=(e._originalDate||t).getTimezoneOffset();switch(r){case"x":return Kl(s);case"xxxx":case"xx":return Li(s);default:return Li(s,":")}},O:function(t,r,n,e){var s=(e._originalDate||t).getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+md(s,":");default:return"GMT"+Li(s,":")}},z:function(t,r,n,e){var s=(e._originalDate||t).getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+md(s,":");default:return"GMT"+Li(s,":")}},t:function(t,r,n,e){return yr(Math.floor((e._originalDate||t).getTime()/1e3),r.length)},T:function(t,r,n,e){return yr((e._originalDate||t).getTime(),r.length)}};function md(a,t){var r=a>0?"-":"+",n=Math.abs(a),e=Math.floor(n/60),i=n%60;if(0===i)return r+String(e);var s=t||"";return r+String(e)+s+yr(i,2)}function Kl(a,t){return a%60==0?(a>0?"-":"+")+yr(Math.abs(a)/60,2):Li(a,t)}function Li(a,t){var r=t||"",n=a>0?"-":"+",e=Math.abs(a);return n+yr(Math.floor(e/60),2)+r+yr(e%60,2)}const yd=Vl;var _d=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});default:return r.date({width:"full"})}},Yl=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});default:return r.time({width:"full"})}},zl={p:Yl,P:function(t,r){var s,n=t.match(/(P+)(p+)?/)||[],e=n[1],i=n[2];if(!i)return _d(t,r);switch(e){case"P":s=r.dateTime({width:"short"});break;case"PP":s=r.dateTime({width:"medium"});break;case"PPP":s=r.dateTime({width:"long"});break;default:s=r.dateTime({width:"full"})}return s.replace("{{date}}",_d(e,r)).replace("{{time}}",Yl(i,r))}};const ql=zl;function Xl(a){var t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),a.getTime()-t.getTime()}var Zl=["D","DD"],Ql=["YY","YYYY"];function Ma(a){return-1!==Zl.indexOf(a)}function $l(a){return-1!==Ql.indexOf(a)}function ws(a,t,r){if("YYYY"===a)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===a)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===a)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===a)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var og={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function jo(a){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):a.defaultWidth,n=a.formats[r]||a.formats[a.defaultWidth];return n}}const Sd={date:jo({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:jo({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:jo({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var cg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Os(a){return function(t,r){var e;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&a.formattingValues){var i=a.defaultFormattingWidth||a.defaultWidth,s=null!=r&&r.width?String(r.width):i;e=a.formattingValues[s]||a.formattingValues[i]}else{var l=a.defaultWidth,p=null!=r&&r.width?String(r.width):a.defaultWidth;e=a.values[p]||a.values[l]}return e[a.argumentCallback?a.argumentCallback(t):t]}}var Dr={ordinalNumber:function(t,r){var n=Number(t),e=n%100;if(e>20||e<10)switch(e%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Os({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Os({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Os({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Os({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Os({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};const _g=Dr;function Is(a){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,e=n&&a.matchPatterns[n]||a.matchPatterns[a.defaultMatchWidth],i=t.match(e);if(!i)return null;var y,s=i[0],l=n&&a.parsePatterns[n]||a.parsePatterns[a.defaultParseWidth],p=Array.isArray(l)?Eg(l,function($){return $.test(s)}):Tg(l,function($){return $.test(s)});y=a.valueCallback?a.valueCallback(p):p,y=r.valueCallback?r.valueCallback(y):y;var k=t.slice(s.length);return{value:y,rest:k}}}function Tg(a,t){for(var r in a)if(a.hasOwnProperty(r)&&t(a[r]))return r}function Eg(a,t){for(var r=0;r<a.length;r++)if(t(a[r]))return r}var Id={ordinalNumber:function bg(a){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(a.matchPattern);if(!n)return null;var e=n[0],i=t.match(a.parsePattern);if(!i)return null;var s=a.valueCallback?a.valueCallback(i[0]):i[0];s=r.valueCallback?r.valueCallback(s):s;var l=t.slice(e.length);return{value:s,rest:l}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}}),era:Is({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Is({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Is({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Is({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Is({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};const Rd={code:"en-US",formatDistance:function(t,r,n){var e,i=og[t];return e="string"==typeof i?i:1===r?i.one:i.other.replace("{{count}}",r.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+e:e+" ago":e},formatLong:Sd,formatRelative:function(t,r,n,e){return cg[t]},localize:_g,match:Id,options:{weekStartsOn:0,firstWeekContainsDate:1}};var ui=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cg=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Md=/^'([^]*?)'?$/,ha=/''/g,Ho=/[a-zA-Z]/;function Rs(a,t,r){var n,e,i,s,l,p,y,k,$,z,ae,pe,me,Ee,We,et,pt,Ye;Ae(2,arguments);var ze=String(t),it=Yn(),Xe=null!==(n=null!==(e=r?.locale)&&void 0!==e?e:it.locale)&&void 0!==n?n:Rd,qe=mr(null!==(i=null!==(s=null!==(l=null!==(p=r?.firstWeekContainsDate)&&void 0!==p?p:null==r||null===(y=r.locale)||void 0===y||null===(k=y.options)||void 0===k?void 0:k.firstWeekContainsDate)&&void 0!==l?l:it.firstWeekContainsDate)&&void 0!==s?s:null===($=it.locale)||void 0===$||null===(z=$.options)||void 0===z?void 0:z.firstWeekContainsDate)&&void 0!==i?i:1);if(!(qe>=1&&qe<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var at=mr(null!==(ae=null!==(pe=null!==(me=null!==(Ee=r?.weekStartsOn)&&void 0!==Ee?Ee:null==r||null===(We=r.locale)||void 0===We||null===(et=We.options)||void 0===et?void 0:et.weekStartsOn)&&void 0!==me?me:it.weekStartsOn)&&void 0!==pe?pe:null===(pt=it.locale)||void 0===pt||null===(Ye=pt.options)||void 0===Ye?void 0:Ye.weekStartsOn)&&void 0!==ae?ae:0);if(!(at>=0&&at<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!Xe.localize)throw new RangeError("locale must contain localize property");if(!Xe.formatLong)throw new RangeError("locale must contain formatLong property");var $e=Yt(a);if(!Xr($e))throw new RangeError("Invalid time value");var Lt=Xl($e),Tt=Ln($e,Lt),Ft={firstWeekContainsDate:qe,weekStartsOn:at,locale:Xe,_originalDate:$e},Sr=ze.match(Cg).map(function(er){var cr=er[0];return"p"===cr||"P"===cr?(0,ql[cr])(er,Xe.formatLong):er}).join("").match(ui).map(function(er){if("''"===er)return"'";var cr=er[0];if("'"===cr)return Ir(er);var Pr=yd[cr];if(Pr)return!(null!=r&&r.useAdditionalWeekYearTokens)&&$l(er)&&ws(er,t,String(a)),!(null!=r&&r.useAdditionalDayOfYearTokens)&&Ma(er)&&ws(er,t,String(a)),Pr(Tt,er,Xe.localize,Ft);if(cr.match(Ho))throw new RangeError("Format string contains an unescaped latin alphabet character `"+cr+"`");return er}).join("");return Sr}function Ir(a){var t=a.match(Md);return t?t[1].replace(ha,"'"):a}function pa(a,t){if(null==a)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r]);return a}function us(a){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function kd(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Ms(a,t)}function Ms(a,t){return(Ms=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Fd(a){var t=function Ud(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ka(a);if(t){var i=ka(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Dg(this,e)}}function Dg(a,t){return!t||"object"!==us(t)&&"function"!=typeof t?tf(a):t}function tf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ka(a){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function va(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Bd(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Wo(a,t,r){return t&&Bd(a.prototype,t),r&&Bd(a,r),a}function Go(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Vo=function(){function a(){va(this,a),Go(this,"subPriority",0)}return Wo(a,[{key:"validate",value:function(r,n){return!0}}]),a}(),Nd=function(a){kd(r,a);var t=Fd(r);function r(n,e,i,s,l){var p;return va(this,r),(p=t.call(this)).value=n,p.validateValue=e,p.setValue=i,p.priority=s,l&&(p.subPriority=l),p}return Wo(r,[{key:"validate",value:function(e,i){return this.validateValue(e,this.value,i)}},{key:"set",value:function(e,i,s){return this.setValue(e,i,this.value,s)}}]),r}(Vo),Pg=function(a){kd(r,a);var t=Fd(r);function r(){var n;va(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Go(tf(n=t.call.apply(t,[this].concat(i))),"priority",10),Go(tf(n),"subPriority",-1),n}return Wo(r,[{key:"set",value:function(e,i){if(i.timestampIsSet)return e;var s=new Date(0);return s.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),s.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),s}}]),r}(Vo);function Ko(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}var dr=function(){function a(){!function nf(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}return function wg(a,t,r){t&&Ko(a.prototype,t),r&&Ko(a,r)}(a,[{key:"run",value:function(r,n,e,i){var s=this.parse(r,n,e,i);return s?{setter:new Nd(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}},{key:"validate",value:function(r,n,e){return!0}}]),a}();function gn(a){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function af(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function ls(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function sf(a,t){return(sf=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Ig(a,t){return!t||"object"!==gn(t)&&"function"!=typeof t?of(a):t}function of(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zi(a){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Wd(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Rg=function(a){!function Hd(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&sf(a,t)}(r,a);var t=function Og(a){var t=function Lg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=zi(a);if(t){var i=zi(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Ig(this,e)}}(r);function r(){var n;af(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Wd(of(n=t.call.apply(t,[this].concat(i))),"priority",140),Wd(of(n),"incompatibleTokens",["R","u","t","T"]),n}return function jd(a,t,r){t&&ls(a.prototype,t),r&&ls(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}},{key:"set",value:function(e,i,s){return i.era=s,e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(dr),je_month=(Math.pow(10,8),/^(1[0-2]|0?\d)/),je_date=/^(3[0-1]|[0-2]?\d)/,je_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,je_week=/^(5[0-3]|[0-4]?\d)/,je_hour23h=/^(2[0-3]|[0-1]?\d)/,je_hour24h=/^(2[0-4]|[0-1]?\d)/,je_hour11h=/^(1[0-1]|0?\d)/,je_hour12h=/^(1[0-2]|0?\d)/,je_minute=/^[0-5]?\d/,je_second=/^[0-5]?\d/,je_singleDigit=/^\d/,je_twoDigits=/^\d{1,2}/,je_threeDigits=/^\d{1,3}/,je_fourDigits=/^\d{1,4}/,je_anyDigitsSigned=/^-?\d+/,je_singleDigitSigned=/^-?\d/,je_twoDigitsSigned=/^-?\d{1,2}/,je_threeDigitsSigned=/^-?\d{1,3}/,je_fourDigitsSigned=/^-?\d{1,4}/,xt_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,xt_basic=/^([+-])(\d{2})(\d{2})|Z/,xt_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,xt_extended=/^([+-])(\d{2}):(\d{2})|Z/,xt_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function wt(a,t){return a&&{value:t(a.value),rest:a.rest}}function kt(a,t){var r=t.match(a);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function br(a,t){var r=t.match(a);return r?"Z"===r[0]?{value:0,rest:t.slice(1)}:{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}:null}function xr(a){return kt(je_anyDigitsSigned,a)}function Lr(a,t){switch(a){case 1:return kt(je_singleDigit,t);case 2:return kt(je_twoDigits,t);case 3:return kt(je_threeDigits,t);case 4:return kt(je_fourDigits,t);default:return kt(new RegExp("^\\d{1,"+a+"}"),t)}}function zo(a,t){switch(a){case 1:return kt(je_singleDigitSigned,t);case 2:return kt(je_twoDigitsSigned,t);case 3:return kt(je_threeDigitsSigned,t);case 4:return kt(je_fourDigitsSigned,t);default:return kt(new RegExp("^-?\\d{1,"+a+"}"),t)}}function Mn(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Us(a,t){var e,r=t>0,n=r?t:1-t;if(n<=50)e=a||100;else{var i=n+50;e=a+100*Math.floor(i/100)-(a>=i%100?100:0)}return r?e:1-e}function Yd(a){return a%400==0||a%4==0&&a%100!=0}function qi(a){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function qo(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Bs(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Xo(a,t){return(Xo=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Ng(a,t){return!t||"object"!==qi(t)&&"function"!=typeof t?uf(a):t}function uf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Fa(a){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Xi(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Qo=function(a){!function Bg(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Xo(a,t)}(r,a);var t=function Zo(a){var t=function jg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Fa(a);if(t){var i=Fa(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Ng(this,e)}}(r);function r(){var n;qo(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Xi(uf(n=t.call.apply(t,[this].concat(i))),"priority",130),Xi(uf(n),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),n}return function _r(a,t,r){t&&Bs(a.prototype,t),r&&Bs(a,r)}(r,[{key:"parse",value:function(e,i,s){var l=function(y){return{year:y,isTwoDigitYear:"yy"===i}};switch(i){case"y":return wt(Lr(4,e),l);case"yo":return wt(s.ordinalNumber(e,{unit:"year"}),l);default:return wt(Lr(i.length,e),l)}}},{key:"validate",value:function(e,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(e,i,s){var l=e.getUTCFullYear();if(s.isTwoDigitYear){var p=Us(s.year,l);return e.setUTCFullYear(p,0,1),e.setUTCHours(0,0,0,0),e}return e.setUTCFullYear("era"in i&&1!==i.era?1-s.year:s.year,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function Ns(a){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function $o(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function lf(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function eu(a,t){return(eu=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Ua(a,t){return!t||"object"!==Ns(t)&&"function"!=typeof t?fs(a):t}function fs(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function tu(a){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function qd(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var ru=function(a){!function Jo(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&eu(a,t)}(r,a);var t=function js(a){var t=function Hg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=tu(a);if(t){var i=tu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Ua(this,e)}}(r);function r(){var n;$o(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return qd(fs(n=t.call.apply(t,[this].concat(i))),"priority",130),qd(fs(n),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),n}return function zd(a,t,r){t&&lf(a.prototype,t),r&&lf(a,r)}(r,[{key:"parse",value:function(e,i,s){var l=function(y){return{year:y,isTwoDigitYear:"YY"===i}};switch(i){case"Y":return wt(Lr(4,e),l);case"Yo":return wt(s.ordinalNumber(e,{unit:"year"}),l);default:return wt(Lr(i.length,e),l)}}},{key:"validate",value:function(e,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(e,i,s,l){var p=No(e,l);if(s.isTwoDigitYear){var y=Us(s.year,p);return e.setUTCFullYear(y,0,l.firstWeekContainsDate),e.setUTCHours(0,0,0,0),da(e,l)}return e.setUTCFullYear("era"in i&&1!==i.era?1-s.year:s.year,0,l.firstWeekContainsDate),e.setUTCHours(0,0,0,0),da(e,l)}}]),r}(dr);function Ba(a){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function ff(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Xd(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function cf(a,t){return(cf=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function mn(a,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?df(a):t}function df(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Hs(a){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Qd(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var hf=function(a){!function Wg(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&cf(a,t)}(r,a);var t=function Jr(a){var t=function Gg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Hs(a);if(t){var i=Hs(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return mn(this,e)}}(r);function r(){var n;ff(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Qd(df(n=t.call.apply(t,[this].concat(i))),"priority",130),Qd(df(n),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),n}return function Zd(a,t,r){t&&Xd(a.prototype,t),r&&Xd(a,r)}(r,[{key:"parse",value:function(e,i){return zo("R"===i?4:i.length,e)}},{key:"set",value:function(e,i,s){var l=new Date(0);return l.setUTCFullYear(s,0,4),l.setUTCHours(0,0,0,0),Rn(l)}}]),r}(dr);function ma(a){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function pf(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function cs(a,t){return(cs=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Vg(a,t){return!t||"object"!==ma(t)&&"function"!=typeof t?vf(a):t}function vf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function nu(a){return(nu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function $d(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var iu=function(a){!function Gs(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&cs(a,t)}(r,a);var t=function ds(a){var t=function Kg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=nu(a);if(t){var i=nu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Vg(this,e)}}(r);function r(){var n;pf(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return $d(vf(n=t.call.apply(t,[this].concat(i))),"priority",130),$d(vf(n),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),n}return function Ws(a,t,r){t&&Na(a.prototype,t),r&&Na(a,r)}(r,[{key:"parse",value:function(e,i){return zo("u"===i?4:i.length,e)}},{key:"set",value:function(e,i,s){return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function ya(a){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Jd(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function he(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function kn(a,t){return(kn=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Yg(a,t){return!t||"object"!==ya(t)&&"function"!=typeof t?gf(a):t}function gf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Mi(a){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function eh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var qg=function(a){!function au(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&kn(a,t)}(r,a);var t=function or(a){var t=function zg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Mi(a);if(t){var i=Mi(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Yg(this,e)}}(r);function r(){var n;Jd(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return eh(gf(n=t.call.apply(t,[this].concat(i))),"priority",120),eh(gf(n),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),n}return function hs(a,t,r){t&&he(a.prototype,t),r&&he(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"Q":case"QQ":return Lr(i.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,i){return i>=1&&i<=4}},{key:"set",value:function(e,i,s){return e.setUTCMonth(3*(s-1),1),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function su(a){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Xg(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function th(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function mf(a,t){return(mf=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function $g(a,t){return!t||"object"!==su(t)&&"function"!=typeof t?yf(a):t}function yf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ou(a){return(ou=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function rh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Jg=function(a){!function Zg(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&mf(a,t)}(r,a);var t=function Qg(a){var t=function Qi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ou(a);if(t){var i=ou(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return $g(this,e)}}(r);function r(){var n;Xg(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return rh(yf(n=t.call.apply(t,[this].concat(i))),"priority",120),rh(yf(n),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),n}return function Zi(a,t,r){t&&th(a.prototype,t),r&&th(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"q":case"qq":return Lr(i.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,i){return i>=1&&i<=4}},{key:"set",value:function(e,i,s){return e.setUTCMonth(3*(s-1),1),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function uu(a){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function em(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function zn(a,t){return(zn=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function im(a,t){return!t||"object"!==uu(t)&&"function"!=typeof t?_f(a):t}function _f(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function lu(a){return(lu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Tf(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var nh=function(a){!function rm(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&zn(a,t)}(r,a);var t=function nm(a){var t=function am(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=lu(a);if(t){var i=lu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return im(this,e)}}(r);function r(){var n;em(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Tf(_f(n=t.call.apply(t,[this].concat(i))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Tf(_f(n),"priority",110),n}return function tm(a,t,r){t&&_a(a.prototype,t),r&&_a(a,r)}(r,[{key:"parse",value:function(e,i,s){var l=function(y){return y-1};switch(i){case"M":return wt(kt(je_month,e),l);case"MM":return wt(Lr(2,e),l);case"Mo":return wt(s.ordinalNumber(e,{unit:"month"}),l);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,i){return i>=0&&i<=11}},{key:"set",value:function(e,i,s){return e.setUTCMonth(s,1),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function fu(a){return(fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function sm(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function cu(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Ef(a,t){return(Ef=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function om(a,t){return!t||"object"!==fu(t)&&"function"!=typeof t?gi(a):t}function gi(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ki(a){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function qn(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var um=function(a){!function du(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Ef(a,t)}(r,a);var t=function ih(a){var t=function bf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ki(a);if(t){var i=ki(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return om(this,e)}}(r);function r(){var n;sm(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return qn(gi(n=t.call.apply(t,[this].concat(i))),"priority",110),qn(gi(n),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),n}return function Vs(a,t,r){t&&cu(a.prototype,t),r&&cu(a,r)}(r,[{key:"parse",value:function(e,i,s){var l=function(y){return y-1};switch(i){case"L":return wt(kt(je_month,e),l);case"LL":return wt(Lr(2,e),l);case"Lo":return wt(s.ordinalNumber(e,{unit:"month"}),l);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,i){return i>=0&&i<=11}},{key:"set",value:function(e,i,s){return e.setUTCMonth(s,1),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function Ks(a){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Ys(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function $i(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function ps(a,t){return(ps=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function oh(a,t){return!t||"object"!==Ks(t)&&"function"!=typeof t?en(a):t}function en(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zs(a){return(zs=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function mi(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Sf=function(a){!function lm(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&ps(a,t)}(r,a);var t=function fm(a){var t=function xf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=zs(a);if(t){var i=zs(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return oh(this,e)}}(r);function r(){var n;Ys(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return mi(en(n=t.call.apply(t,[this].concat(i))),"priority",100),mi(en(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),n}return function sh(a,t,r){t&&$i(a.prototype,t),r&&$i(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"w":return kt(je_week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=1&&i<=53}},{key:"set",value:function(e,i,s,l){return da(function ah(a,t,r){Ae(2,arguments);var n=Yt(a),e=mr(t),i=vd(n,r)-e;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,s,l),l)}}]),r}(dr);function Fi(a){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function uh(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Cf(a,t){return(Cf=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Df(a,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?Pf(a):t}function Pf(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Xs(a){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function lh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var hm=function(a){!function cm(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Cf(a,t)}(r,a);var t=function dm(a){var t=function qs(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Xs(a);if(t){var i=Xs(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Df(this,e)}}(r);function r(){var n;uh(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return lh(Pf(n=t.call.apply(t,[this].concat(i))),"priority",100),lh(Pf(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),n}return function Af(a,t,r){t&&yn(a.prototype,t),r&&yn(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"I":return kt(je_week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=1&&i<=53}},{key:"set",value:function(e,i,s){return Rn(function hu(a,t){Ae(2,arguments);var r=Yt(a),n=mr(t),e=$r(r)-n;return r.setUTCDate(r.getUTCDate()-7*e),r}(e,s))}}]),r}(dr);function Ta(a){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function pm(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function fh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Of(a,t){return(Of=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function gm(a,t){return!t||"object"!==Ta(t)&&"function"!=typeof t?Zs(a):t}function Zs(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function pu(a){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Qs(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var dh=[31,28,31,30,31,30,31,31,30,31,30,31],hh=[31,29,31,30,31,30,31,31,30,31,30,31],ph=function(a){!function ch(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Of(a,t)}(r,a);var t=function vm(a){var t=function If(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=pu(a);if(t){var i=pu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return gm(this,e)}}(r);function r(){var n;pm(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Qs(Zs(n=t.call.apply(t,[this].concat(i))),"priority",90),Qs(Zs(n),"subPriority",1),Qs(Zs(n),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),n}return function wf(a,t,r){t&&fh(a.prototype,t),r&&fh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"d":return kt(je_date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){var l=Yd(e.getUTCFullYear()),p=e.getUTCMonth();return l?i>=1&&i<=hh[p]:i>=1&&i<=dh[p]}},{key:"set",value:function(e,i,s){return e.setUTCDate(s),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function ja(a){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function mm(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Lf(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function vu(a,t){return(vu=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Rf(a,t){return!t||"object"!==ja(t)&&"function"!=typeof t?$s(a):t}function $s(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function gu(a){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Js(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var rr=function(a){!function ym(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&vu(a,t)}(r,a);var t=function _m(a){var t=function Mf(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=gu(a);if(t){var i=gu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Rf(this,e)}}(r);function r(){var n;mm(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Js($s(n=t.call.apply(t,[this].concat(i))),"priority",90),Js($s(n),"subpriority",1),Js($s(n),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),n}return function vh(a,t,r){t&&Lf(a.prototype,t),r&&Lf(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"D":case"DD":return kt(je_dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return Yd(e.getUTCFullYear())?i>=1&&i<=366:i>=1&&i<=365}},{key:"set",value:function(e,i,s){return e.setUTCMonth(0,s),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function kf(a,t,r){var n,e,i,s,l,p,y,k;Ae(2,arguments);var $=Yn(),z=mr(null!==(n=null!==(e=null!==(i=null!==(s=r?.weekStartsOn)&&void 0!==s?s:null==r||null===(l=r.locale)||void 0===l||null===(p=l.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==i?i:$.weekStartsOn)&&void 0!==e?e:null===(y=$.locale)||void 0===y||null===(k=y.options)||void 0===k?void 0:k.weekStartsOn)&&void 0!==n?n:0);if(!(z>=0&&z<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var ae=Yt(a),pe=mr(t),me=ae.getUTCDay(),Ee=pe%7,We=(Ee+7)%7,et=(We<z?7:0)+pe-me;return ae.setUTCDate(ae.getUTCDate()+et),ae}function mu(a){return(mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function eo(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Ff(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Fn(a,t){return(Fn=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function yu(a,t){return!t||"object"!==mu(t)&&"function"!=typeof t?to(a):t}function to(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ro(a){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Un(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Ea=function(a){!function Em(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Fn(a,t)}(r,a);var t=function bm(a){var t=function gh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ro(a);if(t){var i=ro(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return yu(this,e)}}(r);function r(){var n;eo(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Un(to(n=t.call.apply(t,[this].concat(i))),"priority",90),Un(to(n),"incompatibleTokens",["D","i","e","c","t","T"]),n}return function Tm(a,t,r){t&&Ff(a.prototype,t),r&&Ff(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,i){return i>=0&&i<=6}},{key:"set",value:function(e,i,s,l){return(e=kf(e,s,l)).setUTCHours(0,0,0,0),e}}]),r}(dr);function vs(a){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function mh(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function no(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function _u(a,t){return(_u=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Nf(a,t){return!t||"object"!==vs(t)&&"function"!=typeof t?Ui(a):t}function Ui(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function yi(a){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function jf(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var _h=function(a){!function Uf(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&_u(a,t)}(r,a);var t=function Bf(a){var t=function xm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=yi(a);if(t){var i=yi(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Nf(this,e)}}(r);function r(){var n;mh(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return jf(Ui(n=t.call.apply(t,[this].concat(i))),"priority",90),jf(Ui(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),n}return function yh(a,t,r){t&&no(a.prototype,t),r&&no(a,r)}(r,[{key:"parse",value:function(e,i,s,l){var p=function(k){var $=7*Math.floor((k-1)/7);return(k+l.weekStartsOn+6)%7+$};switch(i){case"e":case"ee":return wt(Lr(i.length,e),p);case"eo":return wt(s.ordinalNumber(e,{unit:"day"}),p);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,i){return i>=0&&i<=6}},{key:"set",value:function(e,i,s,l){return(e=kf(e,s,l)).setUTCHours(0,0,0,0),e}}]),r}(dr);function gs(a){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Sm(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Th(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Tu(a,t){return(Tu=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function bh(a,t){return!t||"object"!==gs(t)&&"function"!=typeof t?Eu(a):t}function Eu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Xn(a){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function xh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Dm=function(a){!function Eh(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Tu(a,t)}(r,a);var t=function Cm(a){var t=function Bn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Xn(a);if(t){var i=Xn(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return bh(this,e)}}(r);function r(){var n;Sm(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return xh(Eu(n=t.call.apply(t,[this].concat(i))),"priority",90),xh(Eu(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),n}return function Am(a,t,r){t&&Th(a.prototype,t),r&&Th(a,r)}(r,[{key:"parse",value:function(e,i,s,l){var p=function(k){var $=7*Math.floor((k-1)/7);return(k+l.weekStartsOn+6)%7+$};switch(i){case"c":case"cc":return wt(Lr(i.length,e),p);case"co":return wt(s.ordinalNumber(e,{unit:"day"}),p);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,i){return i>=0&&i<=6}},{key:"set",value:function(e,i,s,l){return(e=kf(e,s,l)).setUTCHours(0,0,0,0),e}}]),r}(dr);function Ji(a){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Sh(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Hf(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function ba(a,t){return(ba=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function wm(a,t){return!t||"object"!==Ji(t)&&"function"!=typeof t?xu(a):t}function xu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ha(a){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Wf(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Su=function(a){!function Ah(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&ba(a,t)}(r,a);var t=function io(a){var t=function Ch(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Ha(a);if(t){var i=Ha(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return wm(this,e)}}(r);function r(){var n;Sh(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Wf(xu(n=t.call.apply(t,[this].concat(i))),"priority",90),Wf(xu(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),n}return function Pm(a,t,r){t&&Hf(a.prototype,t),r&&Hf(a,r)}(r,[{key:"parse",value:function(e,i,s){var l=function(y){return 0===y?7:y};switch(i){case"i":case"ii":return Lr(i.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return wt(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),l);case"iiiii":return wt(s.day(e,{width:"narrow",context:"formatting"}),l);case"iiiiii":return wt(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),l);default:return wt(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(e,i){return i>=1&&i<=7}},{key:"set",value:function(e,i,s){return e=function bu(a,t){Ae(2,arguments);var r=mr(t);r%7==0&&(r-=7);var n=1,e=Yt(a),i=e.getUTCDay(),s=r%7,l=(s+7)%7,p=(l<n?7:0)+r-i;return e.setUTCDate(e.getUTCDate()+p),e}(e,s),e.setUTCHours(0,0,0,0),e}}]),r}(dr);function ms(a){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Au(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Dh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Du(a,t){return(Du=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Om(a,t){return!t||"object"!==ms(t)&&"function"!=typeof t?Pu(a):t}function Pu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ao(a){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Vf(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Im=function(a){!function Cu(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Du(a,t)}(r,a);var t=function Gf(a){var t=function ea(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ao(a);if(t){var i=ao(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Om(this,e)}}(r);function r(){var n;Au(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Vf(Pu(n=t.call.apply(t,[this].concat(i))),"priority",80),Vf(Pu(n),"incompatibleTokens",["b","B","H","k","t","T"]),n}return function Ph(a,t,r){t&&Dh(a.prototype,t),r&&Dh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,i,s){return e.setUTCHours(Mn(s),0,0,0),e}}]),r}(dr);function so(a){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Lm(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function wh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function oo(a,t){return(oo=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function wu(a,t){return!t||"object"!==so(t)&&"function"!=typeof t?xa(a):t}function xa(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wa(a){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Ou(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Ga=function(a){!function Kf(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&oo(a,t)}(r,a);var t=function Yf(a){var t=function Nt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Wa(a);if(t){var i=Wa(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return wu(this,e)}}(r);function r(){var n;Lm(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Ou(xa(n=t.call.apply(t,[this].concat(i))),"priority",80),Ou(xa(n),"incompatibleTokens",["a","B","H","k","t","T"]),n}return function ta(a,t,r){t&&wh(a.prototype,t),r&&wh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,i,s){return e.setUTCHours(Mn(s),0,0,0),e}}]),r}(dr);function Iu(a){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function zf(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function qf(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Xf(a,t){return(Xf=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Mm(a,t){return!t||"object"!==Iu(t)&&"function"!=typeof t?Lu(a):t}function Lu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ru(a){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Ih(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var ra=function(a){!function Rm(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Xf(a,t)}(r,a);var t=function Oh(a){var t=function km(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Ru(a);if(t){var i=Ru(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Mm(this,e)}}(r);function r(){var n;zf(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Ih(Lu(n=t.call.apply(t,[this].concat(i))),"priority",80),Ih(Lu(n),"incompatibleTokens",["a","b","t","T"]),n}return function _n(a,t,r){t&&qf(a.prototype,t),r&&qf(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,i,s){return e.setUTCHours(Mn(s),0,0,0),e}}]),r}(dr);function an(a){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Zf(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Lh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function $f(a,t){return($f=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Rh(a,t){return!t||"object"!==an(t)&&"function"!=typeof t?Mu(a):t}function Mu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ku(a){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Mh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Bm=function(a){!function Fm(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&$f(a,t)}(r,a);var t=function uo(a){var t=function Um(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ku(a);if(t){var i=ku(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Rh(this,e)}}(r);function r(){var n;Zf(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Mh(Mu(n=t.call.apply(t,[this].concat(i))),"priority",70),Mh(Mu(n),"incompatibleTokens",["H","K","k","t","T"]),n}return function Qf(a,t,r){t&&Lh(a.prototype,t),r&&Lh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"h":return kt(je_hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=1&&i<=12}},{key:"set",value:function(e,i,s){var l=e.getUTCHours()>=12;return e.setUTCHours(l&&s<12?s+12:l||12!==s?s:0,0,0,0),e}}]),r}(dr);function lo(a){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function kh(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Fh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Va(a,t){return(Va=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Bh(a,t){return!t||"object"!==lo(t)&&"function"!=typeof t?Fu(a):t}function Fu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fo(a){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function _i(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Ka=function(a){!function Uh(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Va(a,t)}(r,a);var t=function ec(a){var t=function Uu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=fo(a);if(t){var i=fo(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Bh(this,e)}}(r);function r(){var n;kh(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return _i(Fu(n=t.call.apply(t,[this].concat(i))),"priority",70),_i(Fu(n),"incompatibleTokens",["a","b","h","K","k","t","T"]),n}return function Jf(a,t,r){t&&Fh(a.prototype,t),r&&Fh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"H":return kt(je_hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=0&&i<=23}},{key:"set",value:function(e,i,s){return e.setUTCHours(s,0,0,0),e}}]),r}(dr);function Bu(a){return(Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Nh(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function jh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function tc(a,t){return(tc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Wm(a,t){return!t||"object"!==Bu(t)&&"function"!=typeof t?rc(a):t}function rc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Nu(a){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Hh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Vm=function(a){!function jm(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&tc(a,t)}(r,a);var t=function Hm(a){var t=function Gm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Nu(a);if(t){var i=Nu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Wm(this,e)}}(r);function r(){var n;Nh(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Hh(rc(n=t.call.apply(t,[this].concat(i))),"priority",70),Hh(rc(n),"incompatibleTokens",["h","H","k","t","T"]),n}return function Nm(a,t,r){t&&jh(a.prototype,t),r&&jh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"K":return kt(je_hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=0&&i<=11}},{key:"set",value:function(e,i,s){var l=e.getUTCHours()>=12;return e.setUTCHours(l&&s<12?s+12:s,0,0,0),e}}]),r}(dr);function co(a){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Wh(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function nc(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function ic(a,t){return(ic=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function zm(a,t){return!t||"object"!==co(t)&&"function"!=typeof t?ac(a):t}function ac(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ju(a){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Vh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var Xm=function(a){!function Ym(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&ic(a,t)}(r,a);var t=function Gh(a){var t=function qm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ju(a);if(t){var i=ju(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return zm(this,e)}}(r);function r(){var n;Wh(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Vh(ac(n=t.call.apply(t,[this].concat(i))),"priority",70),Vh(ac(n),"incompatibleTokens",["a","b","h","H","K","t","T"]),n}return function Km(a,t,r){t&&nc(a.prototype,t),r&&nc(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"k":return kt(je_hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=1&&i<=24}},{key:"set",value:function(e,i,s){return e.setUTCHours(s<=24?s%24:s,0,0,0),e}}]),r}(dr);function Dn(a){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function Zm(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Kh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function sc(a,t){return(sc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function Jm(a,t){return!t||"object"!==Dn(t)&&"function"!=typeof t?oc(a):t}function oc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Hu(a){return(Hu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function zh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var e0=function(a){!function Yh(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&sc(a,t)}(r,a);var t=function $m(a){var t=function uc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Hu(a);if(t){var i=Hu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Jm(this,e)}}(r);function r(){var n;Zm(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return zh(oc(n=t.call.apply(t,[this].concat(i))),"priority",60),zh(oc(n),"incompatibleTokens",["t","T"]),n}return function Qm(a,t,r){t&&Kh(a.prototype,t),r&&Kh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"m":return kt(je_minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=0&&i<=59}},{key:"set",value:function(e,i,s){return e.setUTCMinutes(s,0,0),e}}]),r}(dr);function Wu(a){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function t0(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function qh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function lc(a,t){return(lc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function a0(a,t){return!t||"object"!==Wu(t)&&"function"!=typeof t?fc(a):t}function fc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gu(a){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Xh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var o0=function(a){!function n0(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&lc(a,t)}(r,a);var t=function i0(a){var t=function s0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Gu(a);if(t){var i=Gu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return a0(this,e)}}(r);function r(){var n;t0(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Xh(fc(n=t.call.apply(t,[this].concat(i))),"priority",50),Xh(fc(n),"incompatibleTokens",["t","T"]),n}return function r0(a,t,r){t&&qh(a.prototype,t),r&&qh(a,r)}(r,[{key:"parse",value:function(e,i,s){switch(i){case"s":return kt(je_second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return Lr(i.length,e)}}},{key:"validate",value:function(e,i){return i>=0&&i<=59}},{key:"set",value:function(e,i,s){return e.setUTCSeconds(s,0),e}}]),r}(dr);function Vu(a){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function u0(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Zh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Ku(a,t){return(Ku=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function c0(a,t){return!t||"object"!==Vu(t)&&"function"!=typeof t?dc(a):t}function dc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Yu(a){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function Qh(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var h0=function(a){!function cc(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&Ku(a,t)}(r,a);var t=function f0(a){var t=function d0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Yu(a);if(t){var i=Yu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return c0(this,e)}}(r);function r(){var n;u0(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Qh(dc(n=t.call.apply(t,[this].concat(i))),"priority",30),Qh(dc(n),"incompatibleTokens",["t","T"]),n}return function l0(a,t,r){t&&Zh(a.prototype,t),r&&Zh(a,r)}(r,[{key:"parse",value:function(e,i){return wt(Lr(i.length,e),function(p){return Math.floor(p*Math.pow(10,3-i.length))})}},{key:"set",value:function(e,i,s){return e.setUTCMilliseconds(s),e}}]),r}(dr);function zu(a){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function $h(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Jh(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function hc(a,t){return(hc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function g0(a,t){return!t||"object"!==zu(t)&&"function"!=typeof t?pc(a):t}function pc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Xu(a){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function ep(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var y0=function(a){!function p0(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&hc(a,t)}(r,a);var t=function v0(a){var t=function m0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Xu(a);if(t){var i=Xu(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return g0(this,e)}}(r);function r(){var n;$h(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return ep(pc(n=t.call.apply(t,[this].concat(i))),"priority",10),ep(pc(n),"incompatibleTokens",["t","T","x"]),n}return function qu(a,t,r){t&&Jh(a.prototype,t),r&&Jh(a,r)}(r,[{key:"parse",value:function(e,i){switch(i){case"X":return br(xt_basicOptionalMinutes,e);case"XX":return br(xt_basic,e);case"XXXX":return br(xt_basicOptionalSeconds,e);case"XXXXX":return br(xt_extendedOptionalSeconds,e);default:return br(xt_extended,e)}}},{key:"set",value:function(e,i,s){return i.timestampIsSet?e:new Date(e.getTime()-s)}}]),r}(dr);function Zu(a){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function _0(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function tp(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function vc(a,t){return(vc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function rp(a,t){return!t||"object"!==Zu(t)&&"function"!=typeof t?Qu(a):t}function Qu(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $u(a){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function np(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var S0=function(a){!function E0(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&vc(a,t)}(r,a);var t=function b0(a){var t=function x0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=$u(a);if(t){var i=$u(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return rp(this,e)}}(r);function r(){var n;_0(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return np(Qu(n=t.call.apply(t,[this].concat(i))),"priority",10),np(Qu(n),"incompatibleTokens",["t","T","X"]),n}return function T0(a,t,r){t&&tp(a.prototype,t),r&&tp(a,r)}(r,[{key:"parse",value:function(e,i){switch(i){case"x":return br(xt_basicOptionalMinutes,e);case"xx":return br(xt_basic,e);case"xxxx":return br(xt_basicOptionalSeconds,e);case"xxxxx":return br(xt_extendedOptionalSeconds,e);default:return br(xt_extended,e)}}},{key:"set",value:function(e,i,s){return i.timestampIsSet?e:new Date(e.getTime()-s)}}]),r}(dr);function Ya(a){return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function A0(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function ip(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function gc(a,t){return(gc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function w0(a,t){return!t||"object"!==Ya(t)&&"function"!=typeof t?mc(a):t}function mc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ju(a){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function ap(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var el=function(a){!function D0(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&gc(a,t)}(r,a);var t=function P0(a){var t=function O0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=Ju(a);if(t){var i=Ju(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return w0(this,e)}}(r);function r(){var n;A0(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return ap(mc(n=t.call.apply(t,[this].concat(i))),"priority",40),ap(mc(n),"incompatibleTokens","*"),n}return function C0(a,t,r){t&&ip(a.prototype,t),r&&ip(a,r)}(r,[{key:"parse",value:function(e){return xr(e)}},{key:"set",value:function(e,i,s){return[new Date(1e3*s),{timestampIsSet:!0}]}}]),r}(dr);function tl(a){return(tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function sp(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function yc(a,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function rl(a,t){return(rl=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(a,t)}function lp(a,t){return!t||"object"!==tl(t)&&"function"!=typeof t?Tc(a):t}function Tc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function nl(a){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(a)}function ho(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var il=function(a){!function op(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&rl(a,t)}(r,a);var t=function up(a){var t=function I0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=nl(a);if(t){var i=nl(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return lp(this,e)}}(r);function r(){var n;sp(this,r);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return ho(Tc(n=t.call.apply(t,[this].concat(i))),"priority",20),ho(Tc(n),"incompatibleTokens","*"),n}return function _c(a,t,r){t&&yc(a.prototype,t),r&&yc(a,r)}(r,[{key:"parse",value:function(e){return xr(e)}},{key:"set",value:function(e,i,s){return[new Date(s),{timestampIsSet:!0}]}}]),r}(dr),L0={G:new Rg,y:new Qo,Y:new ru,R:new hf,u:new iu,Q:new qg,q:new Jg,M:new nh,L:new um,w:new Sf,I:new hm,d:new ph,D:new rr,E:new Ea,e:new _h,c:new Dm,i:new Su,a:new Im,b:new Ga,B:new ra,h:new Bm,H:new Ka,K:new Vm,k:new Xm,m:new e0,s:new o0,S:new h0,X:new y0,x:new S0,t:new el,T:new il};function al(a){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(a)}function sl(a,t){var r;if(typeof Symbol>"u"||null==a[Symbol.iterator]){if(Array.isArray(a)||(r=function fp(a,t){if(a){if("string"==typeof a)return cp(a,t);var r=Object.prototype.toString.call(a).slice(8,-1);if("Object"===r&&a.constructor&&(r=a.constructor.name),"Map"===r||"Set"===r)return Array.from(a);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cp(a,t)}}(a))||t&&a&&"number"==typeof a.length){r&&(a=r);var n=0,e=function(){};return{s:e,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(y){throw y},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,s=!1;return{s:function(){r=a[Symbol.iterator]()},n:function(){var y=r.next();return i=y.done,y},e:function(y){s=!0,l=y},f:function(){try{!i&&null!=r.return&&r.return()}finally{if(s)throw l}}}}function cp(a,t){(null==t||t>a.length)&&(t=a.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=a[r];return n}var R0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M0=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,k0=/^'([^]*?)'?$/,F0=/''/g,U0=/\S/,B0=/[a-zA-Z]/;function ol(a,t,r,n){var e,i,s,l,p,y,k,$,z,ae,pe,me,Ee,We,et,pt,Ye,ze;Ae(3,arguments);var it=String(a),Xe=String(t),qe=Yn(),at=null!==(e=null!==(i=n?.locale)&&void 0!==i?i:qe.locale)&&void 0!==e?e:Rd;if(!at.match)throw new RangeError("locale must contain match property");var $e=mr(null!==(s=null!==(l=null!==(p=null!==(y=n?.firstWeekContainsDate)&&void 0!==y?y:null==n||null===(k=n.locale)||void 0===k||null===($=k.options)||void 0===$?void 0:$.firstWeekContainsDate)&&void 0!==p?p:qe.firstWeekContainsDate)&&void 0!==l?l:null===(z=qe.locale)||void 0===z||null===(ae=z.options)||void 0===ae?void 0:ae.firstWeekContainsDate)&&void 0!==s?s:1);if(!($e>=1&&$e<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Lt=mr(null!==(pe=null!==(me=null!==(Ee=null!==(We=n?.weekStartsOn)&&void 0!==We?We:null==n||null===(et=n.locale)||void 0===et||null===(pt=et.options)||void 0===pt?void 0:pt.weekStartsOn)&&void 0!==Ee?Ee:qe.weekStartsOn)&&void 0!==me?me:null===(Ye=qe.locale)||void 0===Ye||null===(ze=Ye.options)||void 0===ze?void 0:ze.weekStartsOn)&&void 0!==pe?pe:0);if(!(Lt>=0&&Lt<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===Xe)return""===it?Yt(r):new Date(NaN);var Pr,Tt={firstWeekContainsDate:$e,weekStartsOn:Lt,locale:at},Ft=[new Pg],Sr=Xe.match(M0).map(function(Hr){var pr=Hr[0];return pr in ql?(0,ql[pr])(Hr,at.formatLong):Hr}).join("").match(R0),er=[],cr=sl(Sr);try{var Mr=function(){var pr=Pr.value;!(null!=n&&n.useAdditionalWeekYearTokens)&&$l(pr)&&ws(pr,Xe,a),(null==n||!n.useAdditionalDayOfYearTokens)&&Ma(pr)&&ws(pr,Xe,a);var hi=pr[0],Io=L0[hi];if(Io){var kv=Io.incompatibleTokens;if(Array.isArray(kv)){var Fv=er.find(function(Uv){return kv.includes(Uv.token)||Uv.token===hi});if(Fv)throw new RangeError("The format string mustn't contain `".concat(Fv.fullToken,"` and `").concat(pr,"` at the same time"))}else if("*"===Io.incompatibleTokens&&er.length>0)throw new RangeError("The format string mustn't contain `".concat(pr,"` and any other token at the same time"));er.push({token:hi,fullToken:pr});var sd=Io.run(it,pr,at.match,Tt);if(!sd)return{v:new Date(NaN)};Ft.push(sd.setter),it=sd.rest}else{if(hi.match(B0))throw new RangeError("Format string contains an unescaped latin alphabet character `"+hi+"`");if("''"===pr?pr="'":"'"===hi&&(pr=N0(pr)),0!==it.indexOf(pr))return{v:new Date(NaN)};it=it.slice(pr.length)}};for(cr.s();!(Pr=cr.n()).done;){var dn=Mr();if("object"===al(dn))return dn.v}}catch(Hr){cr.e(Hr)}finally{cr.f()}if(it.length>0&&U0.test(it))return new Date(NaN);var Tr=Ft.map(function(Hr){return Hr.priority}).sort(function(Hr,pr){return pr-Hr}).filter(function(Hr,pr,hi){return hi.indexOf(Hr)===pr}).map(function(Hr){return Ft.filter(function(pr){return pr.priority===Hr}).sort(function(pr,hi){return hi.subPriority-pr.subPriority})}).map(function(Hr){return Hr[0]}),Cs=Yt(r);if(isNaN(Cs.getTime()))return new Date(NaN);var Ia,Sn=Ln(Cs,Xl(Cs)),Wi={},Ai=sl(Tr);try{for(Ai.s();!(Ia=Ai.n()).done;){var Ci=Ia.value;if(!Ci.validate(Sn,Tt))return new Date(NaN);var la=Ci.set(Sn,Wi,Tt);Array.isArray(la)?(Sn=la[0],pa(Wi,la[1])):Sn=la}}catch(Hr){Ai.e(Hr)}finally{Ai.f()}return Sn}function N0(a){return a.match(k0)[1].replace(F0,"'")}function ul(a,t){Ae(2,arguments);var r=Yt(a),n=mr(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function j0(a,t){return Ae(2,arguments),Yt(a).getTime()-Yt(t).getTime()}var dp={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}};function H0(a){return a?dp[a]:dp.trunc}const $t=["epgContainer"];function G0(a,t){if(1&a&&(u.O4$(),u._UZ(0,"image",18)),2&a){const r=u.oxw(),n=r.$implicit,e=r.index,i=u.oxw();u.Q6J("matTooltip",n.name[0].value),u.uIk("y",i.barHeight*e+i.barHeight+1)("href",n.icon[0])("height",i.barHeight-2)}}function Nn(a,t){if(1&a&&(u.O4$(),u.TgZ(0,"foreignObject",19),u._uU(1,"\n                    "),u.kcU(),u.TgZ(2,"div",20),u._uU(3),u.qZA(),u._uU(4,"\n                "),u.qZA()),2&a){const r=u.oxw(),n=r.index,e=r.$implicit,i=u.oxw();u.uIk("y",i.barHeight*n+i.barHeight)("height",i.barHeight),u.xp6(3),u.hij("\n                        ",e.name[0].value,"\n                    ")}}function Kr(a,t){if(1&a&&(u.O4$(),u.TgZ(0,"g"),u._uU(1,"\n            "),u._uU(2,"\n            "),u.TgZ(3,"g",14),u._uU(4,"\n                "),u._UZ(5,"rect",15),u._uU(6,"\n                "),u.YNc(7,G0,1,4,"image",16),u._uU(8,"\n                "),u.YNc(9,Nn,5,3,"foreignObject",17),u._uU(10,"\n            "),u.qZA(),u._uU(11,"\n        "),u.qZA()),2&a){const r=t.$implicit,n=t.index,e=u.oxw();u.xp6(5),u.uIk("height",e.barHeight)("y",e.barHeight*n+e.barHeight),u.xp6(2),u.Q6J("ngIf",r.icon[0]),u.xp6(2),u.Q6J("ngIf",!r.icon[0])}}function V0(a,t){if(1&a&&(u.O4$(),u.TgZ(0,"g"),u._uU(1,"\n                "),u._UZ(2,"rect",21),u._uU(3,"\n                "),u.TgZ(4,"text",22),u._uU(5),u.qZA(),u._uU(6,"\n            "),u.qZA()),2&a){const r=t.index,n=u.oxw();u.xp6(2),u.Q6J("matTooltip",r+":00"),u.uIk("width",n.hourWidth)("height",n.barHeight)("x",r*n.hourWidth),u.xp6(2),u.uIk("x",r*n.hourWidth),u.xp6(1),u.hij("\n                    ",r,":00\n                ")}}function Sa(a,t){if(1&a){const r=u.EpF();u.O4$(),u.TgZ(0,"g",25),u._uU(1,"\n                    "),u._uU(2,"\n                    "),u._UZ(3,"rect",26),u._uU(4,"\n                    "),u.TgZ(5,"foreignObject",27),u.NdJ("click",function(){const i=u.CHM(r).$implicit,s=u.oxw(2);return u.KtG(s.showDescription(i))}),u._uU(6,"\n                        "),u.kcU(),u._UZ(7,"div",28),u._uU(8,"\n                    "),u.qZA(),u._uU(9,"\n                "),u.qZA()}if(2&a){const r=t.$implicit,n=u.oxw().index,e=u.oxw();u.Q6J("matTooltip",r.title[0].value),u.xp6(3),u.uIk("width",r.width)("height",e.barHeight)("x",r.startPosition)("y",e.barHeight*n+e.barHeight),u.xp6(2),u.uIk("width",r.width)("height",e.barHeight)("y",e.barHeight*n+e.barHeight)("x",r.startPosition),u.xp6(2),u.Q6J("innerHtml",null==r.title[0]?null:r.title[0].value,u.oJD)}}function K0(a,t){if(1&a&&(u.O4$(),u.TgZ(0,"g"),u._uU(1,"\n                "),u.YNc(2,Sa,10,10,"g",23),u._uU(3,"\n                "),u._UZ(4,"line",24),u._uU(5,"\n            "),u.qZA()),2&a){const r=t.$implicit,n=t.index,e=u.oxw();u.xp6(2),u.Q6J("ngForOf",r.programs),u.xp6(2),u.uIk("x1",0)("y1",e.barHeight*n+e.barHeight)("x2",24*e.hourWidth)("y2",e.barHeight*n+e.barHeight)}}class ll{constructor(t,r,n,e){this.dataService=t,this.dialog=r,this.ngZone=n,this.overlayRef=e,this.timeHeader=new Array(24),this.hourWidth=150,this.barHeight=50,this.originalEpgData=[],this.channels=[],this.today=Rs(new Date,"yyyyMMdd"),this.currentTimeLine=0,this.channelsLowerRange=0,this.dataService.listenOn(G.Ff,(i,s)=>this.ngZone.run(()=>{s&&(this.originalEpgData=s.payload,this.channels=this.enrichProgramData())}))}ngOnInit(){this.calculateCurrentTimeBar()}ngAfterViewInit(){const t=new Date,r=(t.getHours()+t.getMinutes()/60)*this.hourWidth;document.getElementById("epg-container").scrollTo(r<1e3?0:r-150,0),this.visibleChannels=Math.floor((this.epgContainer.nativeElement.offsetHeight-this.epgContainer.nativeElement.offsetHeight/this.barHeight)/this.barHeight-1),this.channelsUpperRange=this.visibleChannels,this.requestPrograms()}nextChannels(){this.channelsLowerRange=this.channelsUpperRange,this.channelsUpperRange=this.channelsUpperRange+this.visibleChannels,this.channels=[],this.requestPrograms()}previousChannels(){this.channelsUpperRange=this.channelsUpperRange-this.visibleChannels,this.channelsLowerRange=this.channelsUpperRange-this.visibleChannels,this.requestPrograms()}requestPrograms(){this.dataService.sendIpcEvent(G.NP,{limit:this.channelsUpperRange,skip:this.channelsLowerRange})}enrichProgramData(){return this.originalEpgData.map(t=>({...t,programs:t.programs.filter(r=>r.start.includes(this.today)).map(r=>{const n=ol(r.start,"yyyyMMddHHmmss XXXX",ul(new Date,1)),e=ol(r.stop,"yyyyMMddHHmmss XXXX",ul(new Date,1));return{...r,startDate:n,stopDate:e,startPosition:this.positionToStartInPx(n),width:this.programDurationInPx(n,e)}})}))}positionToStartInPx(t){return(t.getHours()+t.getMinutes()/60)*this.hourWidth}programDurationInPx(t,r){return function W0(a,t,r){Ae(2,arguments);var n=j0(a,t)/6e4;return H0(r?.roundingMethod)(n)}(r,t)*this.hourWidth/60}recalculate(){this.channels.forEach(t=>{t.programs=t.programs.map(r=>({...r,startPosition:this.positionToStartInPx(r.startDate),width:this.programDurationInPx(r.startDate,r.stopDate)}))})}zoomIn(){this.hourWidth+=50,this.recalculate(),this.calculateCurrentTimeBar()}zoomOut(){this.hourWidth<=50||(this.hourWidth-=50,this.recalculate(),this.calculateCurrentTimeBar())}calculateCurrentTimeBar(){const t=new Date;this.currentTimeLine=(t.getHours()+t.getMinutes()/60)*this.hourWidth}switchDay(t){this.today=Rs("prev"===t?function za(a,t){Ae(2,arguments);var r=mr(t);return ul(a,-r)}(ol(this.today,"yyyyMMdd",new Date),1):ul(ol(this.today,"yyyyMMdd",new Date),1),"yyyyMMdd"),this.calculateCurrentTimeBar(),this.channels=this.enrichProgramData()}showDescription(t){this.dialog.open(_,{data:t})}close(){this.overlayRef.detach()}static#e=this.\u0275fac=function(r){return new(r||ll)(u.Y36(B.D),u.Y36(b.uw),u.Y36(u.R0b),u.Y36(bc))};static#t=this.\u0275cmp=u.Xpm({type:ll,selectors:[["app-multi-epg-container"]],viewQuery:function(r,n){if(1&r&&u.Gf($t,5),2&r){let e;u.iGM(e=u.CRH())&&(n.epgContainer=e.first)}},decls:70,vars:27,consts:[["id","epg-navigation"],["mat-button","","color","accent",3,"matTooltip","click"],["mat-icon-button","",3,"matTooltip","click"],[1,"today-date"],["mat-icon-button","",3,"disabled","click"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[1,"parent"],["epgContainer",""],["id","channels-column"],[4,"ngFor","ngForOf"],["id","epg-container"],["height","100%","id","epg-svg"],["id","current-time-line","y2","1000","stroke","black"],[1,"channel"],["width","100","stroke","black"],["width","100",3,"matTooltip",4,"ngIf"],["width","100",4,"ngIf"],["width","100",3,"matTooltip"],["width","100"],[1,"channel-name"],["fill","#000",3,"matTooltip"],["y","10","font-size","14","fill","white","transform","translate(20,20)"],["class","program-item",3,"matTooltip",4,"ngFor","ngForOf"],["stroke","#676767"],[1,"program-item",3,"matTooltip"],["fill","#000"],[3,"click"],[1,"program-name",3,"innerHtml"]],template:function(r,n){1&r&&(u.TgZ(0,"div",0),u._uU(1,"\n    "),u.TgZ(2,"button",1),u.NdJ("click",function(){return n.close()}),u.ALo(3,"translate"),u._uU(4,"\n        "),u.TgZ(5,"mat-icon"),u._uU(6,"close"),u.qZA(),u._uU(7),u.ALo(8,"translate"),u.qZA(),u._uU(9,"\n    "),u.TgZ(10,"button",2),u.NdJ("click",function(){return n.switchDay("prev")}),u.ALo(11,"translate"),u._uU(12,"\n        "),u.TgZ(13,"mat-icon"),u._uU(14,"navigate_before"),u.qZA(),u._uU(15,"\n    "),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"button",2),u.NdJ("click",function(){return n.switchDay("next")}),u.ALo(18,"translate"),u._uU(19,"\n        "),u.TgZ(20,"mat-icon"),u._uU(21,"navigate_next"),u.qZA(),u._uU(22,"\n    "),u.qZA(),u._uU(23,"\n    "),u.TgZ(24,"div",3),u._uU(25),u.ALo(26,"momentDate"),u.qZA(),u._uU(27,"\n    "),u.TgZ(28,"button",4),u.NdJ("click",function(){return n.zoomIn()}),u._uU(29,"\n        "),u.TgZ(30,"mat-icon"),u._uU(31,"zoom_in"),u.qZA(),u._uU(32,"\n    "),u.qZA(),u._uU(33,"\n    "),u.TgZ(34,"button",4),u.NdJ("click",function(){return n.zoomOut()}),u._uU(35,"\n        "),u.TgZ(36,"mat-icon"),u._uU(37,"zoom_out"),u.qZA(),u._uU(38,"\n    "),u.qZA(),u._uU(39,"\n    "),u.TgZ(40,"button",5),u.NdJ("click",function(){return n.previousChannels()}),u._uU(41,"\n        Previous channels\n    "),u.qZA(),u._uU(42,"\n    "),u.TgZ(43,"button",6),u.NdJ("click",function(){return n.nextChannels()}),u._uU(44,"Next channels"),u.qZA(),u._uU(45,"\n"),u.qZA(),u._uU(46,"\n"),u.TgZ(47,"div",7,8),u._uU(49,"\n    "),u.O4$(),u.TgZ(50,"svg",9),u._uU(51,"\n        "),u.YNc(52,Kr,12,4,"g",10),u._uU(53,"\n    "),u.qZA(),u._uU(54,"\n    "),u.kcU(),u.TgZ(55,"div",11),u._uU(56,"\n        "),u.O4$(),u.TgZ(57,"svg",12),u._uU(58,"\n            "),u._uU(59,"\n            "),u.YNc(60,V0,7,6,"g",10),u._uU(61,"\n\n            "),u._uU(62,"\n            "),u.YNc(63,K0,6,5,"g",10),u._uU(64,"\n            "),u._UZ(65,"line",13),u._uU(66,"\n        "),u.qZA(),u._uU(67,"\n    "),u.qZA(),u._uU(68,"\n"),u.qZA(),u._uU(69,"\n")),2&r&&(u.xp6(2),u.Q6J("matTooltip",u.lcZ(3,15,"CLOSE")),u.xp6(5),u.hij(" ",u.lcZ(8,17,"CLOSE"),"\n    "),u.xp6(3),u.Q6J("matTooltip",u.lcZ(11,19,"EPG.NEXT_DAY")),u.xp6(7),u.Q6J("matTooltip",u.lcZ(18,21,"EPG.PREVIOUS_DAY")),u.xp6(8),u.hij("\n        ",u.Dn7(26,23,n.today,"YYYYMMDD","MMMM Do, dddd"),"\n    "),u.xp6(3),u.Q6J("disabled",n.hourWidth>=800),u.xp6(6),u.Q6J("disabled",n.hourWidth<=50),u.xp6(6),u.Q6J("disabled",0===n.channelsLowerRange),u.xp6(12),u.Q6J("ngForOf",n.channels),u.xp6(5),u.uIk("width",24*n.hourWidth),u.xp6(3),u.Q6J("ngForOf",n.timeHeader),u.xp6(3),u.Q6J("ngForOf",n.channels),u.xp6(2),u.uIk("x1",n.currentTimeLine)("y1",n.barHeight)("x2",n.currentTimeLine))},dependencies:[de.sg,de.O5,F.lW,O.Hw,M.gM,c,g.X$],styles:[".program-item[_ngcontent-%COMP%]{cursor:pointer}rect[_ngcontent-%COMP%]{stroke:#676767;cursor:pointer}.channel[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]{stroke:#676767}.program-item[_ngcontent-%COMP%]:hover > rect[_ngcontent-%COMP%]{fill:#333}.program-name[_ngcontent-%COMP%], .channel-name[_ngcontent-%COMP%]{-webkit-line-clamp:2;height:32px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;padding:6px 2px}#epg-container[_ngcontent-%COMP%]{width:calc(100vw - 100px);height:calc(100vh - 73px);overflow-x:scroll;overflow-y:hidden}.parent[_ngcontent-%COMP%]{display:flex;background-color:#000}#channels-column[_ngcontent-%COMP%]{width:100px;flex:none;border-right:2px solid #ccc}.channel-name[_ngcontent-%COMP%]{margin:0 5px;text-align:center}#epg-navigation[_ngcontent-%COMP%]{display:flex;background-color:#000;margin-top:30px;border-bottom:2px solid #fff}.today-date[_ngcontent-%COMP%]{flex:1;align-items:center;line-height:40px;height:40px;padding:0 20px}#current-time-line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]})}var Y0=Ne(66304);function z0(a,t){1&a&&u._UZ(0,"app-sidebar",9),2&a&&u.Q6J("channels",t.ngIf)}const q0=function(a){return{src:a,type:"application/x-mpegURL"}},Ec=function(a){return[a]},X0=function(a){return{sources:a}};function na(a,t){if(1&a&&u._UZ(0,"app-vjs-player",12),2&a){const r=u.oxw().ngIf,n=u.oxw();u.ekj("hide-captions",!n.playerSettings.showCaptions),u.Q6J("options",u.VKq(7,X0,u.VKq(5,Ec,u.VKq(3,q0,(null==r?null:r.url)+(null==r?null:r.epgParams)))))}}function hp(a,t){if(1&a){const r=u.EpF();u.ynx(0),u._uU(1,"\n            "),u._uU(2,"\n            "),u.TgZ(3,"app-toolbar",10),u.NdJ("toggleLeftDrawerClicked",function(){u.CHM(r),u.oxw();const e=u.MAs(4);return u.KtG(e.toggle())})("toggleRightDrawerClicked",function(){u.CHM(r),u.oxw();const e=u.MAs(29);return u.KtG(e.toggle())})("multiEpgClicked",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.openMultiEpgView())}),u.qZA(),u._uU(4,"\n\n            "),u._uU(5,"\n            "),u.YNc(6,na,1,9,"app-vjs-player",11),u._uU(7,"\n        "),u.BQk()}if(2&a){const r=t.ngIf,n=u.oxw();u.xp6(3),u.Q6J("activeChannel",r),u.xp6(3),u.Q6J("ngIf","videojs"===n.playerSettings.player)}}function fl(a,t){if(1&a&&(u.TgZ(0,"app-html-video-player",13),u.ALo(1,"async"),u._uU(2,"\n        "),u.qZA()),2&a){const r=u.oxw();u.Q6J("channel",u.lcZ(1,2,r.activeChannel$))("showCaptions",r.playerSettings.showCaptions)}}function Fr(a,t){if(1&a){const r=u.EpF();u.ynx(0),u._uU(1,"\n            "),u.TgZ(2,"div",14),u._uU(3,"\n                "),u._UZ(4,"img",15),u._uU(5,"\n                "),u.TgZ(6,"p"),u._uU(7,"The channel is played in a separate window in the MPV player. ("),u.TgZ(8,"a",16),u.NdJ("click",function(){u.CHM(r);const e=u.oxw();return u.KtG(e.openUrl(""))}),u._uU(9,"Installation instructions"),u.qZA(),u._uU(10,")"),u.qZA(),u._uU(11,"\n            "),u.qZA(),u._uU(12,"\n        "),u.BQk()}}function Gr(a,t){1&a&&u._UZ(0,"app-epg-list")}const bc=new u.OlP("COMPONENT_OVERLAY_REF");class po{constructor(t,r,n,e,i,s,l,p){this.activatedRoute=t,this.dataService=r,this.ngZone=n,this.overlay=e,this.playlistsService=i,this.snackBar=s,this.storage=l,this.store=p,this.activeChannel$=this.store.select(q.ox).pipe((0,nt.filter)(y=>Boolean(y?.url))),this.epgProgram$=this.store.select(q.eY),this.playerSettings={player:fe.Y.VideoJs,showCaptions:!1},this.playlistTitle$=this.store.select(q.yg).pipe((0,nt.skipWhile)(y=>""===y)),this.commandsList=[{id:G.pn,execute:y=>{this.snackBar.open(y.message,"",{duration:3100})}},{id:G.fw,execute:y=>{this.store.dispatch(y.payload.isTemporary?V.as({channels:y.payload.playlist.items}):V.Ow({playlist:y.payload})),this.sidebarView="CHANNELS"}}],this.listeners=[],this.isElectron=this.dataService.isElectron,this.sidebarView="CHANNELS"}ngOnInit(){this.applySettings(),this.setRendererListeners(),this.getPlaylistUrlAsParam(),this.channels$=this.activatedRoute.params.pipe((0,nt.combineLatestWith)(this.activatedRoute.queryParams),(0,nt.switchMap)(([t,r])=>t.id?(this.store.dispatch(V.Ev({playlistId:t.id})),this.playlistsService.getPlaylistChannels(t.id)):r.url?this.store.select(q.Vh):void 0))}getPlaylistUrlAsParam(){const r=this.activatedRoute.snapshot.queryParams.url;r&&r.match(/^(http|https|file):\/\/[^ "]+$/)&&this.dataService.sendIpcEvent(G.fM,{url:r,isTemporary:!0})}setRendererListeners(){this.commandsList.forEach(t=>{if(this.isElectron)this.dataService.listenOn(t.id,(r,n)=>this.ngZone.run(()=>t.execute(n)));else{const r=n=>{n.data.type===t.id&&t.execute(n.data)};this.dataService.listenOn(t.id,r),this.listeners.push(r)}})}applySettings(){this.storage.get(ve.L.Settings).subscribe(t=>{t&&Object.keys(t).length>0&&(this.playerSettings={player:t.player||fe.Y.VideoJs,showCaptions:t.showCaptions||!1})})}ngOnDestroy(){this.isElectron?this.dataService.removeAllListeners(G.fw):this.listeners.forEach(t=>window.removeEventListener("message",t))}openMultiEpgView(){this.overlayRef=this.overlay.create();const t=u.zs3.create({providers:[{provide:bc,useValue:this.overlayRef}]}),r=new Oi.C5(ll,void 0,t);this.overlayRef.addPanelClass("epg-overlay"),this.overlayRef.attach(r)}openUrl(t){window.open(t,"_blank")}static#e=this.\u0275fac=function(r){return new(r||po)(u.Y36(Se.gz),u.Y36(B.D),u.Y36(u.R0b),u.Y36(Ge.aV),u.Y36(Kn.c),u.Y36(Ht.ux),u.Y36(Y0.BU),u.Y36(Y.yh))};static#t=this.\u0275cmp=u.Xpm({type:po,selectors:[["ng-component"]],decls:35,vars:17,consts:[[1,"main-container"],["mode","side","opened","","disableClose",""],["drawer",""],[3,"channels",4,"ngIf"],[4,"ngIf"],[3,"channel","showCaptions",4,"ngIf"],[3,"channel","epgProgram"],["position","end","mode","side","disableClose",""],["drawerRight",""],[3,"channels"],[3,"activeChannel","toggleLeftDrawerClicked","toggleRightDrawerClicked","multiEpgClicked"],[3,"options","hide-captions",4,"ngIf"],[3,"options"],[3,"channel","showCaptions"],[1,"mpv-player"],["src","./assets/images/custom-player.png"],[2,"cursor","pointer",3,"routerLink","click"]],template:function(r,n){1&r&&(u.TgZ(0,"mat-drawer-container",0),u._uU(1,"\n    "),u._uU(2,"\n    "),u.TgZ(3,"mat-drawer",1,2),u._uU(5,"\n        "),u.YNc(6,z0,1,1,"app-sidebar",3),u.ALo(7,"async"),u._uU(8,"\n    "),u.qZA(),u._uU(9,"\n    "),u.TgZ(10,"mat-drawer-content"),u._uU(11,"\n        "),u.YNc(12,hp,8,2,"ng-container",4),u.ALo(13,"async"),u._uU(14,"\n\n        "),u._uU(15,"\n        "),u.YNc(16,fl,3,4,"app-html-video-player",5),u._uU(17,"\n\n        "),u.YNc(18,Fr,13,0,"ng-container",4),u.ALo(19,"async"),u._uU(20,"\n\n        "),u._uU(21,"\n        "),u._UZ(22,"app-info-overlay",6),u.ALo(23,"async"),u.ALo(24,"async"),u._uU(25,"\n    "),u.qZA(),u._uU(26,"\n    "),u._uU(27,"\n    "),u.TgZ(28,"mat-drawer",7,8),u._uU(30,"\n        "),u.YNc(31,Gr,1,0,"app-epg-list",4),u._uU(32,"\n    "),u.qZA(),u._uU(33,"\n"),u.qZA(),u._uU(34,"\n")),2&r&&(u.xp6(6),u.Q6J("ngIf",u.lcZ(7,7,n.channels$)),u.xp6(6),u.Q6J("ngIf",u.lcZ(13,9,n.activeChannel$)),u.xp6(4),u.Q6J("ngIf","html5"===n.playerSettings.player),u.xp6(2),u.Q6J("ngIf",u.lcZ(19,11,n.activeChannel$)&&"mpv"===n.playerSettings.player),u.xp6(4),u.Q6J("channel",u.lcZ(23,13,n.activeChannel$))("epgProgram",u.lcZ(24,15,n.epgProgram$)),u.xp6(9),u.Q6J("ngIf",n.isElectron))},styles:[".main-container[_ngcontent-%COMP%]{position:absolute;inset:0}.mat-drawer-content[_ngcontent-%COMP%]{background:#000;overflow:hidden}.mat-drawer[_ngcontent-%COMP%]{width:400px;min-width:400px}@media only screen and (max-width: 480px){.mat-drawer[_ngcontent-%COMP%]{width:200px;min-width:200px}}@media (prefers-color-scheme: dark){.mpv-player[_ngcontent-%COMP%]{display:flex;margin-top:50px;flex-direction:column;align-items:center}.mpv-player[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(100%);width:400px}}"]})}var Z0=Ne(69226),De=Ne.n(Z0),Q0=Ne(11421),mt=Ne.n(Q0),$0=Ne(10434),Bi=Ne.n($0),vo=Ne(81234),qt=Ne.n(vo),J0=Ne(66115),zt=Ne.n(J0),cl=Ne(7867),ht=Ne.n(cl),ys=Ne(28099),ey=Ne.n(ys),ty=Ne(30745),pp=Ne.n(ty),ry=Ne(53629),vp=Ne.n(ry),gp=Ne(3515),ia=Ne.n(gp),Jt=Ne(61655),mp=Ne.n(Jt),li=Ne(53871),xc=Ne.n(li),yp="http://example.com";const dl=function(t,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(t)&&(t=De().location&&De().location.href||"");var n="function"==typeof De().URL,e=/^\/\//.test(t),i=!De().location&&!/\/\//i.test(t);if(n?t=new(De().URL)(t,De().location||yp):/\/\//i.test(t)||(t=xc().buildAbsoluteURL(De().location&&De().location.href||"",t)),n){var s=new URL(r,t);return i?s.href.slice(yp.length):e?s.href.slice(s.protocol.length):s.href}return xc().buildAbsoluteURL(t,r)};var hl=function(){function a(){this.listeners={}}var t=a.prototype;return t.on=function(n,e){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(e)},t.off=function(n,e){if(!this.listeners[n])return!1;var i=this.listeners[n].indexOf(e);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(i,1),i>-1},t.trigger=function(n){var e=this.listeners[n];if(e)if(2===arguments.length)for(var i=e.length,s=0;s<i;++s)e[s].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),p=e.length,y=0;y<p;++y)e[y].apply(this,l)},t.dispose=function(){this.listeners={}},t.pipe=function(n){this.on("data",function(e){n.push(e)})},a}(),pl=Ne(53559).lW;function _p(a){for(var t=function(t){return De().atob?De().atob(t):pl.from(t,"base64").toString("binary")}(a),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}var a,Ur,iy=function(a){function t(){var n;return(n=a.call(this)||this).buffer="",n}return ht()(t,a),t.prototype.push=function(e){var i;for(this.buffer+=e,i=this.buffer.indexOf("\n");i>-1;i=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)},t}(hl),ay=String.fromCharCode(9),Sc=function(t){var r=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return r[1]&&(n.length=parseInt(r[1],10)),r[2]&&(n.offset=parseInt(r[2],10)),n},Ei=function(t){for(var i,r=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},e=r.length;e--;)""!==r[e]&&((i=/([^=]*)=(.*)/.exec(r[e]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n},oy=function(a){function t(){var n;return(n=a.call(this)||this).customParsers=[],n.tagMappers=[],n}ht()(t,a);var r=t.prototype;return r.push=function(e){var s,l,i=this;if(0!==(e=e.trim()).length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});this.tagMappers.reduce(function(y,k){var $=k(e);return $===e?y:y.concat([$])},[e]).forEach(function(y){for(var k=0;k<i.customParsers.length;k++)if(i.customParsers[k].call(i,y))return;if(0===y.indexOf("#EXT"))if(y=y.replace("\r",""),s=/^#EXTM3U/.exec(y))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(y))return l={type:"tag",tagType:"inf"},s[1]&&(l.duration=parseFloat(s[1])),s[2]&&(l.title=s[2]),void i.trigger("data",l);if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(y))return l={type:"tag",tagType:"targetduration"},s[1]&&(l.duration=parseInt(s[1],10)),void i.trigger("data",l);if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(y))return l={type:"tag",tagType:"version"},s[1]&&(l.version=parseInt(s[1],10)),void i.trigger("data",l);if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(y))return l={type:"tag",tagType:"media-sequence"},s[1]&&(l.number=parseInt(s[1],10)),void i.trigger("data",l);if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(y))return l={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(l.number=parseInt(s[1],10)),void i.trigger("data",l);if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(y))return l={type:"tag",tagType:"playlist-type"},s[1]&&(l.playlistType=s[1]),void i.trigger("data",l);if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(y))return l=Bi()(Sc(s[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",l);if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(y))return l={type:"tag",tagType:"allow-cache"},s[1]&&(l.allowed=!/NO/.test(s[1])),void i.trigger("data",l);if(s=/^#EXT-X-MAP:?(.*)$/.exec(y)){if(l={type:"tag",tagType:"map"},s[1]){var $=Ei(s[1]);$.URI&&(l.uri=$.URI),$.BYTERANGE&&(l.byterange=Sc($.BYTERANGE))}i.trigger("data",l)}else if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(y)){if(l={type:"tag",tagType:"stream-inf"},s[1]){if(l.attributes=Ei(s[1]),l.attributes.RESOLUTION){var z=l.attributes.RESOLUTION.split("x"),ae={};z[0]&&(ae.width=parseInt(z[0],10)),z[1]&&(ae.height=parseInt(z[1],10)),l.attributes.RESOLUTION=ae}l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))}i.trigger("data",l)}else{if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(y))return l={type:"tag",tagType:"media"},s[1]&&(l.attributes=Ei(s[1])),void i.trigger("data",l);if(s=/^#EXT-X-ENDLIST/.exec(y))i.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(s=/^#EXT-X-DISCONTINUITY/.exec(y)))return(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(y))?(l={type:"tag",tagType:"program-date-time"},s[1]&&(l.dateTimeString=s[1],l.dateTimeObject=new Date(s[1])),void i.trigger("data",l)):(s=/^#EXT-X-KEY:?(.*)$/.exec(y))?(l={type:"tag",tagType:"key"},s[1]&&(l.attributes=Ei(s[1]),l.attributes.IV&&("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),void i.trigger("data",l)):(s=/^#EXT-X-START:?(.*)$/.exec(y))?(l={type:"tag",tagType:"start"},s[1]&&(l.attributes=Ei(s[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),void i.trigger("data",l)):(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(y))?((l={type:"tag",tagType:"cue-out-cont"}).data=s[1]?s[1]:"",void i.trigger("data",l)):(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(y))?((l={type:"tag",tagType:"cue-out"}).data=s[1]?s[1]:"",void i.trigger("data",l)):(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(y))?((l={type:"tag",tagType:"cue-in"}).data=s[1]?s[1]:"",void i.trigger("data",l)):(s=/^#EXT-X-SKIP:(.*)$/.exec(y))&&s[1]?((l={type:"tag",tagType:"skip"}).attributes=Ei(s[1]),l.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(l.attributes["SKIPPED-SEGMENTS"]=parseInt(l.attributes["SKIPPED-SEGMENTS"],10)),l.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(l.attributes["RECENTLY-REMOVED-DATERANGES"]=l.attributes["RECENTLY-REMOVED-DATERANGES"].split(ay)),void i.trigger("data",l)):(s=/^#EXT-X-PART:(.*)$/.exec(y))&&s[1]?((l={type:"tag",tagType:"part"}).attributes=Ei(s[1]),["DURATION"].forEach(function(pe){l.attributes.hasOwnProperty(pe)&&(l.attributes[pe]=parseFloat(l.attributes[pe]))}),["INDEPENDENT","GAP"].forEach(function(pe){l.attributes.hasOwnProperty(pe)&&(l.attributes[pe]=/YES/.test(l.attributes[pe]))}),l.attributes.hasOwnProperty("BYTERANGE")&&(l.attributes.byterange=Sc(l.attributes.BYTERANGE)),void i.trigger("data",l)):(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(y))&&s[1]?((l={type:"tag",tagType:"server-control"}).attributes=Ei(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(pe){l.attributes.hasOwnProperty(pe)&&(l.attributes[pe]=parseFloat(l.attributes[pe]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(pe){l.attributes.hasOwnProperty(pe)&&(l.attributes[pe]=/YES/.test(l.attributes[pe]))}),void i.trigger("data",l)):(s=/^#EXT-X-PART-INF:(.*)$/.exec(y))&&s[1]?((l={type:"tag",tagType:"part-inf"}).attributes=Ei(s[1]),["PART-TARGET"].forEach(function(pe){l.attributes.hasOwnProperty(pe)&&(l.attributes[pe]=parseFloat(l.attributes[pe]))}),void i.trigger("data",l)):(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(y))&&s[1]?((l={type:"tag",tagType:"preload-hint"}).attributes=Ei(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(pe){if(l.attributes.hasOwnProperty(pe)){l.attributes[pe]=parseInt(l.attributes[pe],10);var me="BYTERANGE-LENGTH"===pe?"length":"offset";l.attributes.byterange=l.attributes.byterange||{},l.attributes.byterange[me]=l.attributes[pe],delete l.attributes[pe]}}),void i.trigger("data",l)):(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(y))&&s[1]?((l={type:"tag",tagType:"rendition-report"}).attributes=Ei(s[1]),["LAST-MSN","LAST-PART"].forEach(function(pe){l.attributes.hasOwnProperty(pe)&&(l.attributes[pe]=parseInt(l.attributes[pe],10))}),void i.trigger("data",l)):void i.trigger("data",{type:"tag",data:y.slice(4)});i.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else i.trigger("data",{type:"comment",text:y.slice(1)})})}},r.addParser=function(e){var i=this,s=e.expression,l=e.customType,p=e.dataParser,y=e.segment;"function"!=typeof p&&(p=function($){return $}),this.customParsers.push(function(k){if(s.exec(k))return i.trigger("data",{type:"custom",data:p(k),customType:l,segment:y}),!0})},r.addTagMapper=function(e){var i=e.expression,s=e.map;this.tagMappers.push(function(y){return i.test(y)?s(y):y})},t}(hl),_s=function(t){var r={};return Object.keys(t).forEach(function(n){r[function(t){return t.toLowerCase().replace(/-(\w)/g,function(r){return r[1].toUpperCase()})}(n)]=t[n]}),r},Ac=function(t){var r=t.serverControl,n=t.targetDuration,e=t.partTargetDuration;if(r){var i="#EXT-X-SERVER-CONTROL",s="holdBack",l="partHoldBack",p=n&&3*n,y=e&&2*e;n&&!r.hasOwnProperty(s)&&(r[s]=p,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+p+")."})),p&&r[s]<p&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+r[s]+") to targetDuration * 3 ("+p+")"}),r[s]=p),e&&!r.hasOwnProperty(l)&&(r[l]=3*e,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+r[l]+")."})),e&&r[l]<y&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+r[l]+") to partTargetDuration * 2 ("+y+")."}),r[l]=y)}},ly=function(a){function t(){var n;(n=a.call(this)||this).lineStream=new iy,n.parseStream=new oy,n.lineStream.pipe(n.parseStream);var l,p,e=zt()(n),i=[],s={},y=!1,k=function(){},$={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},ae=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var pe=0,me=0;return n.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&l&&(s.map=l),!s.key&&p&&(s.key=p),!s.timeline&&"number"==typeof ae&&(s.timeline=ae),n.manifest.preloadSegment=s)}),n.parseStream.on("data",function(Ee){var We,et;({tag:function(){({version:function(){Ee.version&&(this.manifest.version=Ee.version)},"allow-cache":function(){this.manifest.allowCache=Ee.allowed,"allowed"in Ee||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var ze={};"length"in Ee&&(s.byterange=ze,ze.length=Ee.length,"offset"in Ee||(Ee.offset=pe)),"offset"in Ee&&(s.byterange=ze,ze.offset=Ee.offset),pe=ze.offset+ze.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),Ee.duration>0&&(s.duration=Ee.duration),0===Ee.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key:function(){if(Ee.attributes)if("NONE"!==Ee.attributes.METHOD)if(Ee.attributes.URI){if("com.apple.streamingkeydelivery"===Ee.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:Ee.attributes});if("com.microsoft.playready"===Ee.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:Ee.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===Ee.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(Ee.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===Ee.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==Ee.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):Ee.attributes.KEYID&&"0x"===Ee.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:Ee.attributes.KEYFORMAT,keyId:Ee.attributes.KEYID.substring(2)},pssh:_p(Ee.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));Ee.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),p={method:Ee.attributes.METHOD||"AES-128",uri:Ee.attributes.URI},typeof Ee.attributes.IV<"u"&&(p.iv=Ee.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else p=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(Ee.number)?this.manifest.mediaSequence=Ee.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+Ee.number})},"discontinuity-sequence":function(){isFinite(Ee.number)?(this.manifest.discontinuitySequence=Ee.number,ae=Ee.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+Ee.number})},"playlist-type":function(){/VOD|EVENT/.test(Ee.playlistType)?this.manifest.playlistType=Ee.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+Ee.playlist})},map:function(){l={},Ee.uri&&(l.uri=Ee.uri),Ee.byterange&&(l.byterange=Ee.byterange),p&&(l.key=p)},"stream-inf":function(){this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||$,Ee.attributes?(s.attributes||(s.attributes={}),Bi()(s.attributes,Ee.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||$,Ee.attributes&&Ee.attributes.TYPE&&Ee.attributes["GROUP-ID"]&&Ee.attributes.NAME){var ze=this.manifest.mediaGroups[Ee.attributes.TYPE];ze[Ee.attributes["GROUP-ID"]]=ze[Ee.attributes["GROUP-ID"]]||{},We=ze[Ee.attributes["GROUP-ID"]],(et={default:/yes/i.test(Ee.attributes.DEFAULT)}).autoselect=!!et.default||/yes/i.test(Ee.attributes.AUTOSELECT),Ee.attributes.LANGUAGE&&(et.language=Ee.attributes.LANGUAGE),Ee.attributes.URI&&(et.uri=Ee.attributes.URI),Ee.attributes["INSTREAM-ID"]&&(et.instreamId=Ee.attributes["INSTREAM-ID"]),Ee.attributes.CHARACTERISTICS&&(et.characteristics=Ee.attributes.CHARACTERISTICS),Ee.attributes.FORCED&&(et.forced=/yes/i.test(Ee.attributes.FORCED)),We[Ee.attributes.NAME]=et}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){ae+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=Ee.dateTimeString,this.manifest.dateTimeObject=Ee.dateTimeObject),s.dateTimeString=Ee.dateTimeString,s.dateTimeObject=Ee.dateTimeObject},targetduration:function(){!isFinite(Ee.duration)||Ee.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+Ee.duration}):(this.manifest.targetDuration=Ee.duration,Ac.call(this,this.manifest))},start:function(){Ee.attributes&&!isNaN(Ee.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:Ee.attributes["TIME-OFFSET"],precise:Ee.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=Ee.data},"cue-out-cont":function(){s.cueOutCont=Ee.data},"cue-in":function(){s.cueIn=Ee.data},skip:function(){this.manifest.skip=_s(Ee.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",Ee.attributes,["SKIPPED-SEGMENTS"])},part:function(){var ze=this;y=!0;var it=this.manifest.segments.length,Xe=_s(Ee.attributes);s.parts=s.parts||[],s.parts.push(Xe),Xe.byterange&&(Xe.byterange.hasOwnProperty("offset")||(Xe.byterange.offset=me),me=Xe.byterange.offset+Xe.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(s.parts.length-1)+" for segment #"+it,Ee.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(at,$e){at.hasOwnProperty("lastPart")||ze.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+$e+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var ze=this.manifest.serverControl=_s(Ee.attributes);ze.hasOwnProperty("canBlockReload")||(ze.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Ac.call(this,this.manifest),ze.canSkipDateranges&&!ze.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var ze=this.manifest.segments.length,it=_s(Ee.attributes),Xe=it.type&&"PART"===it.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(it),it.byterange&&(it.byterange.hasOwnProperty("offset")||(it.byterange.offset=Xe?me:0,Xe&&(me=it.byterange.offset+it.byterange.length)));var qe=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+qe+" for segment #"+ze,Ee.attributes,["TYPE","URI"]),it.type)for(var at=0;at<s.preloadHints.length-1;at++){var $e=s.preloadHints[at];$e.type&&$e.type===it.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+qe+" for segment #"+ze+" has the same TYPE "+it.type+" as preload hint #"+at})}},"rendition-report":function(){var ze=_s(Ee.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(ze);var it=this.manifest.renditionReports.length-1,Xe=["LAST-MSN","URI"];y&&Xe.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+it,Ee.attributes,Xe)},"part-inf":function(){this.manifest.partInf=_s(Ee.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",Ee.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Ac.call(this,this.manifest)}}[Ee.tagType]||k).call(e)},uri:function(){s.uri=Ee.uri,i.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),p&&(s.key=p),s.timeline=ae,l&&(s.map=l),me=0,s={}},comment:function(){},custom:function(){Ee.segment?(s.custom=s.custom||{},s.custom[Ee.customType]=Ee.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[Ee.customType]=Ee.data)}})[Ee.type].call(e)}),n}ht()(t,a);var r=t.prototype;return r.warnOnMissingAttributes_=function(e,i,s){var l=[];s.forEach(function(p){i.hasOwnProperty(p)||l.push(p)}),l.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+l.join(", ")})},r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n"),this.trigger("end")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(hl),Aa={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Cc=["video","audio","text"],Tp=["Video","Audio","Text"],go=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(r,n,e){return"avc1."+("00"+Number(n).toString(16)).slice(-2)+"00"+("00"+Number(e).toString(16)).slice(-2)})},Ni=function(t){void 0===t&&(t="");var r=t.split(","),n=[];return r.forEach(function(e){var i;e=e.trim(),Cc.forEach(function(s){var l=Aa[s].exec(e.toLowerCase());if(l&&!(l.length<=1)){i=s;var p=e.substring(0,l[1].length),y=e.replace(p,"");n.push({type:p,details:y,mediaType:s})}}),i||n.push({type:e,details:"",mediaType:"unknown"})}),n},Ep=function(t){return void 0===t&&(t=""),Aa.audio.test(t.trim().toLowerCase())},mo=function(t){if(t&&"string"==typeof t){var r=t.toLowerCase().split(",").map(function(i){return go(i.trim())}),n="video";1===r.length&&Ep(r[0])?n="audio":1===r.length&&function(t){return void 0===t&&(t=""),Aa.text.test(t.trim().toLowerCase())}(r[0])&&(n="application");var e="mp4";return r.every(function(i){return Aa.mp4.test(i)})?e="mp4":r.every(function(i){return Aa.webm.test(i)})?e="webm":r.every(function(i){return Aa.ogg.test(i)})&&(e="ogg"),n+"/"+e+';codecs="'+t+'"'}},yo=function(t){return void 0===t&&(t=""),De().MediaSource&&De().MediaSource.isTypeSupported&&De().MediaSource.isTypeSupported(mo(t))||!1},Dc=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every(function(r){r=r.trim();for(var n=0;n<Tp.length;n++)if(Aa["muxer"+Tp[n]].test(r))return!0;return!1})},bp="mp4a.40.2",xp=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,hy=/^application\/dash\+xml/i,Sp=function(t){return xp.test(t)?"hls":hy.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null},Pp=function(t){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},Rt=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!function(t){return Pp(t)}(t)&&!(t instanceof ArrayBuffer)&&(t="number"!=typeof t||"number"==typeof t&&t!=t?0:[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},fn=De().BigInt||Number,Pc=[fn("0x1"),fn("0x100"),fn("0x10000"),fn("0x1000000"),fn("0x100000000"),fn("0x10000000000"),fn("0x1000000000000"),fn("0x100000000000000"),fn("0x10000000000000000")],Op=(a=new Uint16Array([65484]),new Uint8Array(a.buffer,a.byteOffset,a.byteLength),function(t,r){var n=void 0===r?{}:r,e=n.signed,i=void 0!==e&&e,s=n.le,l=void 0!==s&&s;t=Rt(t);var p=l?"reduce":"reduceRight",k=(t[p]?t[p]:Array.prototype[p]).call(t,function(z,ae,pe){var me=l?pe:Math.abs(pe+1-t.length);return z+fn(ae)*Pc[me]},fn(0));if(i){var $=Pc[t.length]/fn(2)-fn(1);(k=fn(k))>$&&(k-=$,k-=$,k-=fn(2))}return Number(k)}),Ip=function(t,r){if("string"!=typeof t&&t&&"function"==typeof t.toString&&(t=t.toString()),"string"!=typeof t)return new Uint8Array;r||(t=unescape(encodeURIComponent(t)));for(var n=new Uint8Array(t.length),e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n},Rr=function(t,r,n){var e=void 0===n?{}:n,i=e.offset,s=void 0===i?0:i,l=e.mask,p=void 0===l?[]:l;return t=Rt(t),(r=Rt(r)).length&&t.length-s>=r.length&&(r.every?r.every:Array.prototype.every).call(r,function(k,$){return k===(p[$]?p[$]&t[s+$]:t[s+$])})},Ey=Ne(50978),Lp=function(t){return!!t&&"object"==typeof t},Pn=function a(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(e,i){return"object"!=typeof i||Object.keys(i).forEach(function(s){e[s]=Array.isArray(e[s])&&Array.isArray(i[s])?e[s].concat(i[s]):Lp(e[s])&&Lp(i[s])?a(e[s],i[s]):i[s]}),e},{})},Rp=function(t){return Object.keys(t).map(function(r){return t[r]})},vl=function(t){return t.reduce(function(r,n){return r.concat(n)},[])},Mp=function(t){if(!t.length)return[];for(var r=[],n=0;n<t.length;n++)r.push(t[n]);return r},wc=function(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n;return-1},To=function(t){var r=t.baseUrl,e=t.source,i=void 0===e?"":e,s=t.range,l=void 0===s?"":s,p=t.indexRange,y=void 0===p?"":p,k={uri:i,resolvedUri:dl((void 0===r?"":r)||"",i)};if(l||y){var me,z=(l||y).split("-"),ae=De().BigInt?De().BigInt(z[0]):parseInt(z[0],10),pe=De().BigInt?De().BigInt(z[1]):parseInt(z[1],10);ae<Number.MAX_SAFE_INTEGER&&"bigint"==typeof ae&&(ae=Number(ae)),pe<Number.MAX_SAFE_INTEGER&&"bigint"==typeof pe&&(pe=Number(pe)),"bigint"==typeof(me="bigint"==typeof pe||"bigint"==typeof ae?De().BigInt(pe)-De().BigInt(ae)+De().BigInt(1):pe-ae+1)&&me<Number.MAX_SAFE_INTEGER&&(me=Number(me)),k.byterange={length:me,offset:ae}}return k},kp=function(t){return t&&"number"!=typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},Cy={static:function(t){var r=t.duration,n=t.timescale,e=void 0===n?1:n,i=t.sourceDuration,s=t.periodDuration,l=kp(t.endNumber),p=r/e;return"number"==typeof l?{start:0,end:l}:"number"==typeof s?{start:0,end:s/p}:{start:0,end:i/p}},dynamic:function(t){var r=t.NOW,n=t.clientOffset,e=t.availabilityStartTime,i=t.timescale,s=void 0===i?1:i,l=t.duration,p=t.periodStart,y=void 0===p?0:p,k=t.minimumUpdatePeriod,$=void 0===k?0:k,z=t.timeShiftBufferDepth,ae=void 0===z?1/0:z,pe=kp(t.endNumber),me=(r+n)/1e3,Ee=e+y,pt=Math.ceil((me+$-Ee)*s/l),Ye=Math.floor((me-Ee-ae)*s/l),ze=Math.floor((me-Ee)*s/l);return{start:Math.max(0,Ye),end:"number"==typeof pe?pe:Math.min(pt,ze)}}},Eo=function(t){var r=t.type,n=t.duration,e=t.timescale,i=void 0===e?1:e,s=t.periodDuration,l=t.sourceDuration,p=Cy[r](t),$=function(t,r){for(var n=[],e=t;e<r;e++)n.push(e);return n}(p.start,p.end).map(function(t){return function(r){var n=t.duration,e=t.timescale,l=t.startNumber;return{number:(void 0===l?1:l)+r,duration:n/(void 0===e?1:e),timeline:t.periodStart,time:r*n}}}(t));if("static"===r){var z=$.length-1;$[z].duration=("number"==typeof s?s:l)-n/i*z}return $},Oc=function(t){var r=t.baseUrl,n=t.initialization,e=void 0===n?{}:n,i=t.sourceDuration,s=t.indexRange,l=void 0===s?"":s,p=t.periodStart,y=t.presentationTime,k=t.number,$=void 0===k?0:k,z=t.duration;if(!r)throw new Error("NO_BASE_URL");var ae=To({baseUrl:r,source:e.sourceURL,range:e.range}),pe=To({baseUrl:r,source:r,indexRange:l});if(pe.map=ae,z){var me=Eo(t);me.length&&(pe.duration=me[0].duration,pe.timeline=me[0].timeline)}else i&&(pe.duration=i,pe.timeline=p);return pe.presentationTime=y||p,pe.number=$,[pe]},gl=function(t,r,n){var Ee,e=t.sidx.map?t.sidx.map:null,i=t.sidx.duration,s=t.timeline||0,l=t.sidx.byterange,p=l.offset+l.length,y=r.timescale,k=r.references.filter(function(at){return 1!==at.referenceType}),$=[],z=t.endList?"static":"dynamic",ae=t.sidx.timeline,pe=ae,me=t.mediaSequence||0;Ee="bigint"==typeof r.firstOffset?De().BigInt(p)+r.firstOffset:p+r.firstOffset;for(var We=0;We<k.length;We++){var ze,et=r.references[We],pt=et.referencedSize,Ye=et.subsegmentDuration;ze="bigint"==typeof Ee?Ee+De().BigInt(pt)-De().BigInt(1):Ee+pt-1;var qe=Oc({baseUrl:n,timescale:y,timeline:s,periodStart:ae,presentationTime:pe,number:me,duration:Ye,sourceDuration:i,indexRange:Ee+"-"+ze,type:z})[0];e&&(qe.map=e),$.push(qe),Ee+="bigint"==typeof Ee?De().BigInt(pt):pt,pe+=Ye/y,me++}return t.segments=$,t},Py=["AUDIO","SUBTITLES"],Fp=function(t){return function(t,r){return Rp(t.reduce(function(n,e){return e.forEach(function(i){n[function(r){return r.timeline}(i)]=i}),n},{}))}(t).sort(function(r,n){return r.timeline>n.timeline?1:-1})},Up=function(t){var r=[];return function(t,r,n){r.forEach(function(e){for(var i in t.mediaGroups[e])for(var s in t.mediaGroups[e][i])n(t.mediaGroups[e][i][s])})}(t,Py,function(n,e,i,s){r=r.concat(n.playlists||[])}),r},Bp=function(t){var r=t.playlist;r.mediaSequence=t.mediaSequence,r.segments.forEach(function(e,i){e.number=r.mediaSequence+i})},Es=function(t){return t&&t.uri+"-"+function(t){var r;return r="bigint"==typeof t.offset||"bigint"==typeof t.length?De().BigInt(t.offset)+De().BigInt(t.length)-De().BigInt(1):t.offset+t.length-1,t.offset+"-"+r}(t.byterange)},Lc=function(t){return Rp(t.reduce(function(n,e){var s,i=e.attributes.id+(e.attributes.lang||"");n[i]?(e.segments&&(e.segments[0]&&(e.segments[0].discontinuity=!0),(s=n[i].segments).push.apply(s,e.segments)),e.attributes.contentProtection&&(n[i].attributes.contentProtection=e.attributes.contentProtection)):(n[i]=e,n[i].attributes.timelineStarts=[]);return n[i].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),n},{})).map(function(n){return n.discontinuityStarts=function(t,r){return t.reduce(function(n,e,i){return e.discontinuity&&n.push(i),n},[])}(n.segments||[]),n})},Rc=function(t,r){var n=Es(t.sidx),e=n&&r[n]&&r[n].sidx;return e&&gl(t,e,t.sidx.resolvedUri),t},Iy=function(t,r){if(void 0===r&&(r={}),!Object.keys(r).length)return t;for(var n in t)t[n]=Rc(t[n],r);return t},ky=function(t){var r,n=t.attributes,e=t.segments,i=t.sidx,s=t.discontinuityStarts,l={attributes:(r={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:s,timelineStarts:n.timelineStarts,segments:e};return n.contentProtection&&(l.contentProtection=n.contentProtection),i&&(l.sidx=i),l},Fy=function(t){var r=t.attributes;return"video/mp4"===r.mimeType||"video/webm"===r.mimeType||"video"===r.contentType},Uy=function(t){var r=t.attributes;return"audio/mp4"===r.mimeType||"audio/webm"===r.mimeType||"audio"===r.contentType},Np=function(t){var r=t.attributes;return"text/vtt"===r.mimeType||"text"===r.contentType},jp=function(t){return t?Object.keys(t).reduce(function(r,n){return r.concat(t[n].playlists)},[]):[]},Ny=function(t){var r,n=t.dashPlaylists,e=t.locations,i=t.sidxMapping,s=void 0===i?{}:i,l=t.previousManifest;if(!n.length)return{};var p=n[0].attributes,y=p.sourceDuration,k=p.type,$=p.suggestedPresentationDelay,z=p.minimumUpdatePeriod,ae=Lc(n.filter(Fy)).map(ky),pe=Lc(n.filter(Uy)),me=Lc(n.filter(Np)),Ee=n.map(function(Xe){return Xe.attributes.captionServices}).filter(Boolean),We={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:y,playlists:Iy(ae,s)};z>=0&&(We.minimumUpdatePeriod=1e3*z),e&&(We.locations=e),"dynamic"===k&&(We.suggestedPresentationDelay=$);var pt=pe.length?function(t,r,n){void 0===r&&(r={}),void 0===n&&(n=!1);var e,i=t.reduce(function(l,p){var y=p.attributes.role&&p.attributes.role.value||"",k=p.attributes.lang||"",$=p.attributes.label||"main";k&&!p.attributes.label&&($=p.attributes.lang+(y?" ("+y+")":"")),l[$]||(l[$]={language:k,autoselect:!0,default:"main"===y,playlists:[],uri:""});var ae=Rc(function(t,r){var n,e=t.attributes,i=t.segments,s=t.sidx,l=t.mediaSequence,p=t.discontinuitySequence,y=t.discontinuityStarts,k={attributes:(n={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:p,discontinuityStarts:y,timelineStarts:e.timelineStarts,mediaSequence:l,segments:i};return e.contentProtection&&(k.contentProtection=e.contentProtection),s&&(k.sidx=s),r&&(k.attributes.AUDIO="audio",k.attributes.SUBTITLES="subs"),k}(p,n),r);return l[$].playlists.push(ae),typeof e>"u"&&"main"===y&&((e=p).default=!0),l},{});return e||(i[Object.keys(i)[0]].default=!0),i}(pe,s,0===We.playlists.length):null,Ye=me.length?function(t,r){return void 0===r&&(r={}),t.reduce(function(n,e){var i=e.attributes.lang||"text";return n[i]||(n[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),n[i].playlists.push(Rc(function(t){var r,n=t.attributes,e=t.segments,i=t.mediaSequence,s=t.discontinuityStarts,l=t.discontinuitySequence;typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var p=((r={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,r);return n.codecs&&(p.CODECS=n.codecs),{attributes:p,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:s,discontinuitySequence:l,mediaSequence:i,segments:e}}(e),r)),n},{})}(me,s):null,ze=ae.concat(jp(pt),jp(Ye)),it=ze.map(function(Xe){return Xe.timelineStarts});return We.timelineStarts=Fp(it),function(t,r){t.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=wc(r,function(e){return e.timeline===n.timeline}),n.segments&&n.segments.forEach(function(e,i){e.number=i})})}(ze,We.timelineStarts),pt&&(We.mediaGroups.AUDIO.audio=pt),Ye&&(We.mediaGroups.SUBTITLES.subs=Ye),Ee.length&&(We.mediaGroups["CLOSED-CAPTIONS"].cc=function(t){return t.reduce(function(r,n){return n&&n.forEach(function(e){var s=e.language;r[s]={autoselect:!1,default:!1,instreamId:e.channel,language:s},e.hasOwnProperty("aspectRatio")&&(r[s].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(r[s].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(r[s]["3D"]=e["3D"])}),r},{})}(Ee)),l?function(t){var r=t.oldManifest,n=t.newManifest,e=r.playlists.concat(Up(r)),i=n.playlists.concat(Up(n));return n.timelineStarts=Fp([r.timelineStarts,n.timelineStarts]),function(t){var r=t.oldPlaylists,e=t.timelineStarts;t.newPlaylists.forEach(function(i){i.discontinuitySequence=wc(e,function(k){return k.timeline===i.timeline});var s=function(t,r){for(var n=0;n<t.length;n++)if(t[n].attributes.NAME===r)return t[n];return null}(r,i.attributes.NAME);if(s&&!i.sidx){var l=i.segments[0],p=wc(s.segments,function(k){return Math.abs(k.presentationTime-l.presentationTime)<.016666666666666666});if(-1===p)return Bp({playlist:i,mediaSequence:s.mediaSequence+s.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),void((!s.segments.length&&i.timeline>s.timeline||s.segments.length&&i.timeline>s.segments[s.segments.length-1].timeline)&&i.discontinuitySequence--);s.segments[p].discontinuity&&!l.discontinuity&&(l.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Bp({playlist:i,mediaSequence:s.segments[p].number})}})}({oldPlaylists:e,newPlaylists:i,timelineStarts:n.timelineStarts}),n}({oldManifest:l,newManifest:We}):We},Fc=function(t,r,n){var l=t.timescale,y=t.periodStart,$=t.minimumUpdatePeriod;return Math.ceil((((t.NOW+t.clientOffset)/1e3+(void 0===$?0:$)-(t.availabilityStartTime+(void 0===y?0:y)))*(void 0===l?1:l)-r)/n)},ml=function(t,r){for(var n=t.type,e=t.minimumUpdatePeriod,i=void 0===e?0:e,s=t.media,l=void 0===s?"":s,p=t.sourceDuration,y=t.timescale,k=void 0===y?1:y,$=t.startNumber,z=void 0===$?1:$,ae=t.periodStart,pe=[],me=-1,Ee=0;Ee<r.length;Ee++){var We=r[Ee],et=We.d,pt=We.r||0,Ye=We.t||0;me<0&&(me=Ye),Ye&&Ye>me&&(me=Ye);var ze=void 0;if(pt<0){var it=Ee+1;ze=it===r.length?"dynamic"===n&&i>0&&l.indexOf("$Number$")>0?Fc(t,me,et):(p*k-me)/et:(r[it].t-me)/et}else ze=pt+1;for(var Xe=z+pe.length+ze,qe=z+pe.length;qe<Xe;)pe.push({number:qe,duration:et/k,time:me,timeline:ae}),me+=et,qe++}return pe},jy=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Hp=function(t,r){return t.replace(jy,function(t){return function(r,n,e,i){if("$$"===r)return"$";if(typeof t[n]>"u")return r;var s=""+t[n];return"RepresentationID"===n||(i=e?parseInt(i,10):1,s.length>=i)?s:""+new Array(i-s.length+1).join("0")+s}}(r))},Gy=function(t,r){var n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},e=t.initialization,i=void 0===e?{sourceURL:"",range:""}:e,s=To({baseUrl:t.baseUrl,source:Hp(i.sourceURL,n),range:i.range}),l=function(t,r){return t.duration||r?t.duration?Eo(t):ml(t,r):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]}(t,r);return l.map(function(p){n.Number=p.number,n.Time=p.time;var y=Hp(t.media||"",n),z=t.periodStart+(p.time-(t.presentationTimeOffset||0))/(t.timescale||1);return{uri:y,timeline:p.timeline,duration:p.duration,resolvedUri:dl(t.baseUrl||"",y),map:s,number:p.number,presentationTime:z}})},Ky=function(t,r){var n=t.duration,e=t.segmentUrls,i=void 0===e?[]:e,s=t.periodStart;if(!n&&!r||n&&r)throw new Error("SEGMENT_TIME_UNSPECIFIED");var p,l=i.map(function(k){return function(t,r){var n=t.baseUrl,e=t.initialization,i=void 0===e?{}:e,s=To({baseUrl:n,source:i.sourceURL,range:i.range}),l=To({baseUrl:n,source:r.media,range:r.mediaRange});return l.map=s,l}(t,k)});return n&&(p=Eo(t)),r&&(p=ml(t,r)),p.map(function(k,$){if(l[$]){var z=l[$],ae=t.timescale||1,pe=t.presentationTimeOffset||0;return z.timeline=k.timeline,z.duration=k.duration,z.number=k.number,z.presentationTime=s+(k.time-pe)/ae,z}}).filter(function(k){return k})},Yy=function(t){var e,i,r=t.attributes,n=t.segmentInfo;n.template?(i=Gy,e=Pn(r,n.template)):n.base?(i=Oc,e=Pn(r,n.base)):n.list&&(i=Ky,e=Pn(r,n.list));var s={attributes:r};if(!i)return s;var l=i(e,n.segmentTimeline);if(e.duration){var k=e.timescale;e.duration=e.duration/(void 0===k?1:k)}else e.duration=l.length?l.reduce(function(z,ae){return Math.max(z,Math.ceil(ae.duration))},0):0;return s.attributes=e,s.segments=l,n.base&&e.indexRange&&(s.sidx=l[0],s.segments=[]),s},Yr=function(t,r){return Mp(t.childNodes).filter(function(n){return n.tagName===r})},Uc=function(t){return t.textContent.trim()},bs=function(t){var p=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!p)return 0;var y=p.slice(1),$=y[1],z=y[2],ae=y[3],pe=y[4],me=y[5];return 31536e3*parseFloat(y[0]||0)+2592e3*parseFloat($||0)+86400*parseFloat(z||0)+3600*parseFloat(ae||0)+60*parseFloat(pe||0)+parseFloat(me||0)},Wp={mediaPresentationDuration:function(t){return bs(t)},availabilityStartTime:function(t){return function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t)&&(t+="Z"),Date.parse(t)}(t)/1e3},minimumUpdatePeriod:function(t){return bs(t)},suggestedPresentationDelay:function(t){return bs(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return bs(t)},start:function(t){return bs(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var r=parseInt(t,10);return isNaN(r)?bs(t):r},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Tn=function(t){return t&&t.attributes?Mp(t.attributes).reduce(function(r,n){return r[n.name]=(Wp[n.name]||Wp.DEFAULT)(n.value),r},{}):{}},Xy={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},yl=function(t,r){return r.length?vl(t.map(function(n){return r.map(function(e){return dl(n,Uc(e))})})):t},Bc=function(t){var r=Yr(t,"SegmentTemplate")[0],n=Yr(t,"SegmentList")[0],e=n&&Yr(n,"SegmentURL").map(function(z){return Pn({tag:"SegmentURL"},Tn(z))}),i=Yr(t,"SegmentBase")[0],s=n||r,l=s&&Yr(s,"SegmentTimeline")[0],p=n||i||r,y=p&&Yr(p,"Initialization")[0],k=r&&Tn(r);k&&y?k.initialization=y&&Tn(y):k&&k.initialization&&(k.initialization={sourceURL:k.initialization});var $={template:k,segmentTimeline:l&&Yr(l,"S").map(function(z){return Tn(z)}),list:n&&Pn(Tn(n),{segmentUrls:e,initialization:Tn(y)}),base:i&&Pn(Tn(i),{initialization:Tn(y)})};return Object.keys($).forEach(function(z){$[z]||delete $[z]}),$},f=function(t,r){return function(n,e){var i=yl(r,Yr(n.node,"BaseURL")),s=Pn(t,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);var l=Yr(n.node,"AdaptationSet"),p=Bc(n.node);return vl(l.map(function(t,r,n){return function(e){var i=Tn(e),s=yl(r,Yr(e,"BaseURL")),l=Yr(e,"Role")[0],p={role:Tn(l)},y=Pn(t,i,p),k=Yr(e,"Accessibility")[0],$=function(t){return"urn:scte:dash:cc:cea-608:2015"===t.schemeIdUri?("string"!=typeof t.value?[]:t.value.split(";")).map(function(e){var i,s;if(s=e,/^CC\d=/.test(e)){var l=e.split("=");i=l[0],s=l[1]}else/^CC\d$/.test(e)&&(i=e);return{channel:i,language:s}}):"urn:scte:dash:cc:cea-708:2015"===t.schemeIdUri?("string"!=typeof t.value?[]:t.value.split(";")).map(function(e){var i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var s=e.split("="),p=s[1],y=void 0===p?"":p;i.channel=s[0],i.language=e,y.split(",").forEach(function(k){var $=k.split(":"),z=$[0],ae=$[1];"lang"===z?i.language=ae:"er"===z?i.easyReader=Number(ae):"war"===z?i.aspectRatio=Number(ae):"3D"===z&&(i["3D"]=Number(ae))})}else i.language=e;return i.channel&&(i.channel="SERVICE"+i.channel),i}):void 0}(Tn(k));$&&(y=Pn(y,{captionServices:$}));var z=Yr(e,"Label")[0];if(z&&z.childNodes.length){var ae=z.childNodes[0].nodeValue.trim();y=Pn(y,{label:ae})}var pe=function(t){return t.reduce(function(r,n){var e=Tn(n);e.schemeIdUri&&(e.schemeIdUri=e.schemeIdUri.toLowerCase());var i=Xy[e.schemeIdUri];if(i){r[i]={attributes:e};var s=Yr(n,"cenc:pssh")[0];if(s){var l=Uc(s);r[i].pssh=l&&_p(l)}}return r},{})}(Yr(e,"ContentProtection"));Object.keys(pe).length&&(y=Pn(y,{contentProtection:pe}));var me=Bc(e),Ee=Yr(e,"Representation"),We=Pn(n,me);return vl(Ee.map(function(t,r,n){return function(e){var i=Yr(e,"BaseURL"),s=yl(r,i),l=Pn(t,Tn(e)),p=Bc(e);return s.map(function(y){return{segmentInfo:Pn(n,p),attributes:Pn(l,{baseUrl:y})}})}}(y,s,We)))}}(s,i,p)))}},se=function(t){if(""===t)throw new Error("DASH_EMPTY_MANIFEST");var n,e,r=new Ey.DOMParser;try{e=(n=r.parseFromString(t,"application/xml"))&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch{}if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return e},tt=Ne(87459),rt=Ne.n(tt),ut=Rt([73,68,51]),Ot=function a(t,r){return void 0===r&&(r=0),(t=Rt(t)).length-r<10||!Rr(t,ut,{offset:r})?r:(r+=function(t,r){void 0===r&&(r=0);var e=(t=Rt(t))[r+6]<<21|t[r+7]<<14|t[r+8]<<7|t[r+9];return(16&t[r+5])>>4?e+20:e+10}(t,r),a(t,r))},cn=(new Uint8Array([79,112,117,115,72,101,97,100]),function(t){return"string"==typeof t?Ip(t):t}),$n=function(t){t=Rt(t);for(var r=[],n=0;t.length>n;){var e=t[n],i=0,s=0,l=t[++s];for(s++;128&l;)i=(127&l)<<7,l=t[s],s++;i+=127&l;for(var p=0;p<Ur.length;p++){var y=Ur[p];if(e===y.id){r.push((0,y.parser)(t.subarray(s,s+i)));break}}n+=i+s}return r};Ur=[{id:3,parser:function(t){var r={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&r.flags&&(r.dependsOnEsId=t[r.size]<<8|t[r.size+1],r.size+=2),64&r.flags){var n=t[r.size];r.url=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var r=String.fromCharCode.apply(null,Rt(t));try{return decodeURIComponent(escape(r))}catch{}return r}(t.subarray(r.size+1,r.size+1+n)),r.size+=n}return 32&r.flags&&(r.ocrEsId=t[r.size]<<8|t[r.size+1],r.size+=2),r.descriptors=$n(t.subarray(r.size))||[],r}},{id:4,parser:function(t){return{tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:$n(t.subarray(13))}}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var Vr=function a(t,r,n){void 0===n&&(n=!1),r=function(t){return Array.isArray(t)?t.map(function(r){return cn(r)}):[cn(t)]}(r),t=Rt(t);var e=[];if(!r.length)return e;for(var i=0;i<t.length;){var s=(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0,l=t.subarray(i+4,i+8);if(0===s)break;var p=i+s;if(p>t.length){if(n)break;p=t.length}var y=t.subarray(i+8,p);Rr(l,r[0])&&(1===r.length?e.push(y):e.push.apply(e,a(y,r.slice(1),n))),i=p}return e},Br={EBML:Rt([26,69,223,163]),DocType:Rt([66,130]),Segment:Rt([24,83,128,103]),SegmentInfo:Rt([21,73,169,102]),Tracks:Rt([22,84,174,107]),Track:Rt([174]),TrackNumber:Rt([215]),DefaultDuration:Rt([35,227,131]),TrackEntry:Rt([174]),TrackType:Rt([131]),FlagDefault:Rt([136]),CodecID:Rt([134]),CodecPrivate:Rt([99,162]),VideoTrack:Rt([224]),AudioTrack:Rt([225]),Cluster:Rt([31,67,182,117]),Timestamp:Rt([231]),TimestampScale:Rt([42,215,177]),BlockGroup:Rt([160]),BlockDuration:Rt([155]),Block:Rt([161]),SimpleBlock:Rt([163])},Jy=[128,64,32,16,8,4,2,1],bo=function(t,r,n,e){void 0===n&&(n=!0),void 0===e&&(e=!1);var i=function(t){for(var r=1,n=0;n<Jy.length&&!(t&Jy[n]);n++)r++;return r}(t[r]),s=t.subarray(r,r+i);return n&&((s=Array.prototype.slice.call(t,r,r+i))[0]^=Jy[i-1]),{length:i,value:Op(s,{signed:e}),bytes:s}},JT=function a(t){return"string"==typeof t?t.match(/.{1,2}/g).map(function(r){return a(r)}):"number"==typeof t?function(t,r){var e=(void 0===r?{}:r).le,i=void 0!==e&&e;("bigint"!=typeof t&&"number"!=typeof t||"number"==typeof t&&t!=t)&&(t=0);for(var s=function(t){return Math.ceil(function(t){return t.toString(2).length}(t)/8)}(t=fn(t)),l=new Uint8Array(new ArrayBuffer(s)),p=0;p<s;p++){var y=i?p:Math.abs(p+1-l.length);l[y]=Number(t/Pc[p]&fn(255)),t<0&&(l[y]=Math.abs(~l[y]),l[y]-=0===p?1:2)}return l}(t):t},HS=function a(t,r,n){if(n>=r.length)return r.length;var e=bo(r,n,!1);if(Rr(t.bytes,e.bytes))return n;var i=bo(r,n+e.length);return a(t,r,n+i.length+i.value+e.length)},zr=function a(t,r){r=function(t){return Array.isArray(t)?t.map(function(r){return JT(r)}):[JT(t)]}(r),t=Rt(t);var n=[];if(!r.length)return n;for(var e=0;e<t.length;){var i=bo(t,e,!1),s=bo(t,e+i.length),l=e+i.length+s.length;127===s.value&&(s.value=HS(i,t,l),s.value!==t.length&&(s.value-=l));var y=t.subarray(l,l+s.value>t.length?t.length:l+s.value);Rr(r[0],i.bytes)&&(1===r.length?n.push(y):n=n.concat(a(y,r.slice(1)))),e+=i.length+s.length+y.length}return n},KS=Rt([0,0,0,1]),YS=Rt([0,0,1]),zS=Rt([0,0,3]),qS=function(t){for(var r=[],n=1;n<t.length-2;)Rr(t.subarray(n,n+3),zS)&&(r.push(n+2),n++),n++;if(0===r.length)return t;var e=t.length-r.length,i=new Uint8Array(e),s=0;for(n=0;n<e;s++,n++)s===r[0]&&(s++,r.shift()),i[n]=t[s];return i},eE=function(t,r,n,e){void 0===e&&(e=1/0),t=Rt(t),n=[].concat(n);for(var s,i=0,l=0;i<t.length&&(l<e||s);){var p=void 0;if(Rr(t.subarray(i),KS)?p=4:Rr(t.subarray(i),YS)&&(p=3),p){if(l++,s)return qS(t.subarray(s,i));var y=void 0;"h264"===r?y=31&t[i+p]:"h265"===r&&(y=t[i+p]>>1&63),-1!==n.indexOf(y)&&(s=i+p),i+=p+("h264"===r?1:2)}else i++}return t.subarray(0,0)},Jn={webm:Rt([119,101,98,109]),matroska:Rt([109,97,116,114,111,115,107,97]),flac:Rt([102,76,97,67]),ogg:Rt([79,103,103,83]),ac3:Rt([11,119]),riff:Rt([82,73,70,70]),avi:Rt([65,86,73]),wav:Rt([87,65,86,69]),"3gp":Rt([102,116,121,112,51,103]),mp4:Rt([102,116,121,112]),fmp4:Rt([115,116,121,112]),mov:Rt([102,116,121,112,113,116]),moov:Rt([109,111,111,118]),moof:Rt([109,111,111,102])},_l={aac:function(t){var r=Ot(t);return Rr(t,[255,16],{offset:r,mask:[255,22]})},mp3:function(t){var r=Ot(t);return Rr(t,[255,2],{offset:r,mask:[255,6]})},webm:function(t){var r=zr(t,[Br.EBML,Br.DocType])[0];return Rr(r,Jn.webm)},mkv:function(t){var r=zr(t,[Br.EBML,Br.DocType])[0];return Rr(r,Jn.matroska)},mp4:function(t){return!_l["3gp"](t)&&!_l.mov(t)&&(!!(Rr(t,Jn.mp4,{offset:4})||Rr(t,Jn.fmp4,{offset:4})||Rr(t,Jn.moof,{offset:4})||Rr(t,Jn.moov,{offset:4}))||void 0)},mov:function(t){return Rr(t,Jn.mov,{offset:4})},"3gp":function(t){return Rr(t,Jn["3gp"],{offset:4})},ac3:function(t){var r=Ot(t);return Rr(t,Jn.ac3,{offset:r})},ts:function(t){if(t.length<189&&t.length>=1)return 71===t[0];for(var r=0;r+188<t.length&&r<188;){if(71===t[r]&&71===t[r+188])return!0;r+=1}return!1},flac:function(t){var r=Ot(t);return Rr(t,Jn.flac,{offset:r})},ogg:function(t){return Rr(t,Jn.ogg)},avi:function(t){return Rr(t,Jn.riff)&&Rr(t,Jn.avi,{offset:8})},wav:function(t){return Rr(t,Jn.riff)&&Rr(t,Jn.wav,{offset:8})},h264:function(t){return function(t,r,n){return eE(t,"h264",7,3)}(t).length},h265:function(t){return function(t,r,n){return eE(t,"h265",[32,33],3)}(t).length}},e_=Object.keys(_l).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts","h264","h265"]);e_.forEach(function(a){var t=_l[a];_l[a]=function(r){return t(Rt(r))}});for(var jc,QS=_l,t_=function(t){t=Rt(t);for(var r=0;r<e_.length;r++){var n=e_[r];if(QS[n](t))return n}return""},Gp=Ne(16277),Xa={},xs=function(t,r){return Xa[t]=Xa[t]||[],r&&(Xa[t]=Xa[t].concat(r)),Xa[t]},rE=function(t,r){var n=xs(t).indexOf(r);return!(n<=-1||(Xa[t]=Xa[t].slice(),Xa[t].splice(n,1),0))},Vp={prefixed:!0},Kp=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],nE=Kp[0],Yp=0;Yp<Kp.length;Yp++)if(Kp[Yp][1]in mt()){jc=Kp[Yp];break}if(jc){for(var zp=0;zp<jc.length;zp++)Vp[nE[zp]]=jc[zp];Vp.prefixed=jc[0]!==nE[0]}var ci=[],ar=function iE(a){var r,t="info",n=function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];r("log",t,s)};return r=function(t,r){return function(n,e,i){var s=r.levels[e],l=new RegExp("^("+s+")$");if("log"!==n&&i.unshift(n.toUpperCase()+":"),i.unshift(t+":"),ci){ci.push([].concat(i));var p=ci.length-1e3;ci.splice(0,p>0?p:0)}if(De().console){var y=De().console[n];!y&&"debug"===n&&(y=De().console.info||De().console.log),y&&s&&l.test(n)&&y[Array.isArray(i)?"apply":"call"](De().console,i)}}}(a,n),n.createLogger=function(e){return iE(a+": "+e)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');t=e}return t},(n.history=function(){return ci?[].concat(ci):[]}).filter=function(e){return(ci||[]).filter(function(i){return new RegExp(".*"+e+".*").test(i[0])})},n.history.clear=function(){ci&&(ci.length=0)},n.history.disable=function(){null!==ci&&(ci.length=0,ci=null)},n.history.enable=function(){null===ci&&(ci=[])},n.error=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r("error",t,i)},n.warn=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r("warn",t,i)},n.debug=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r("debug",t,i)},n}("VIDEOJS"),aE=ar.createLogger,rA=Object.prototype.toString,sE=function(t){return Za(t)?Object.keys(t):[]};function Tl(a,t){sE(a).forEach(function(r){return t(a[r],r)})}function Zr(a){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign?Bi().apply(void 0,[a].concat(r)):(r.forEach(function(e){e&&Tl(e,function(i,s){a[s]=i})}),a)}function Za(a){return!!a&&"object"==typeof a}function Hc(a){return Za(a)&&"[object Object]"===rA.call(a)&&a.constructor===Object}function Wc(a,t){if(!a||!t)return"";if("function"==typeof De().getComputedStyle){var r;try{r=De().getComputedStyle(a)}catch{return""}return r?r.getPropertyValue(t)||r[t]:""}return""}var En=De().navigator&&De().navigator.userAgent||"",oE=/AppleWebKit\/([\d.]+)/i.exec(En),iA=oE?parseFloat(oE.pop()):null,uE=/iPod/i.test(En),aA=function(){var a=En.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Qa=/Android/i.test(En),r_=function(){var a=En.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var t=a[1]&&parseFloat(a[1]),r=a[2]&&parseFloat(a[2]);return t&&r?parseFloat(a[1]+"."+a[2]):t||null}(),lE=Qa&&r_<5&&iA<537,fE=/Firefox/i.test(En),Gc=/Edg/i.test(En),$a=!Gc&&(/Chrome/i.test(En)||/CriOS/i.test(En)),cE=function(){var a=En.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),Vc=function(){var a=/MSIE\s(\d+)\.\d/.exec(En),t=a&&parseFloat(a[1]);return!t&&/Trident\/7.0/i.test(En)&&/rv:11.0/.test(En)&&(t=11),t}(),n_=/Safari/i.test(En)&&!$a&&!Qa&&!Gc,dE=/Windows/i.test(En),El=Boolean(bl()&&("ontouchstart"in De()||De().navigator.maxTouchPoints||De().DocumentTouch&&De().document instanceof De().DocumentTouch)),i_=/iPad/i.test(En)||n_&&El&&!/iPhone/i.test(En),a_=/iPhone/i.test(En)&&!i_,ei=a_||i_||uE,qp=(n_||ei)&&!$a,sA=Object.freeze({__proto__:null,IS_IPOD:uE,IOS_VERSION:aA,IS_ANDROID:Qa,ANDROID_VERSION:r_,IS_NATIVE_ANDROID:lE,IS_FIREFOX:fE,IS_EDGE:Gc,IS_CHROME:$a,CHROME_VERSION:cE,IE_VERSION:Vc,IS_SAFARI:n_,IS_WINDOWS:dE,TOUCH_ENABLED:El,IS_IPAD:i_,IS_IPHONE:a_,IS_IOS:ei,IS_ANY_SAFARI:qp});function hE(a){return"string"==typeof a&&Boolean(a.trim())}function pE(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function bl(){return mt()===De().document}function xl(a){return Za(a)&&1===a.nodeType}function vE(){try{return De().parent!==De().self}catch{return!0}}function gE(a){return function(t,r){if(!hE(t))return mt()[a](null);hE(r)&&(r=mt().querySelector(r));var n=xl(r)?r:mt();return n[a]&&n[a](t)}}function hr(a,t,r,n){void 0===a&&(a="div"),void 0===t&&(t={}),void 0===r&&(r={});var e=mt().createElement(a);return Object.getOwnPropertyNames(t).forEach(function(i){var s=t[i];-1!==i.indexOf("aria-")||"role"===i||"type"===i?(ar.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+i+" to "+s+"."),e.setAttribute(i,s)):"textContent"===i?xo(e,s):(e[i]!==s||"tabIndex"===i)&&(e[i]=s)}),Object.getOwnPropertyNames(r).forEach(function(i){e.setAttribute(i,r[i])}),n&&u_(e,n),e}function xo(a,t){return typeof a.textContent>"u"?a.innerText=t:a.textContent=t,a}function s_(a,t){t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)}function So(a,t){return pE(t),a.classList?a.classList.contains(t):function oA(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}(t).test(a.className)}function Ja(a,t){return a.classList?a.classList.add(t):So(a,t)||(a.className=(a.className+" "+t).trim()),a}function Kc(a,t){return a?(a.classList?a.classList.remove(t):(pE(t),a.className=a.className.split(/\s+/).filter(function(r){return r!==t}).join(" ")),a):(ar.warn("removeClass was called with an element that doesn't exist"),null)}function mE(a,t,r){var n=So(a,t);if("function"==typeof r&&(r=r(a,t)),"boolean"!=typeof r&&(r=!n),r!==n)return r?Ja(a,t):Kc(a,t),a}function yE(a,t){Object.getOwnPropertyNames(t).forEach(function(r){var n=t[r];null===n||typeof n>"u"||!1===n?a.removeAttribute(r):a.setAttribute(r,!0===n?"":n)})}function es(a){var t={};if(a&&a.attributes&&a.attributes.length>0)for(var n=a.attributes,e=n.length-1;e>=0;e--){var i=n[e].name,s=n[e].value;("boolean"==typeof a[i]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+","))&&(s=null!==s),t[i]=s}return t}function _E(a,t){return a.getAttribute(t)}function Sl(a,t,r){a.setAttribute(t,r)}function Xp(a,t){a.removeAttribute(t)}function TE(){mt().body.focus(),mt().onselectstart=function(){return!1}}function EE(){mt().onselectstart=function(){return!0}}function Al(a){if(a&&a.getBoundingClientRect&&a.parentNode){var t=a.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(n){void 0!==t[n]&&(r[n]=t[n])}),r.height||(r.height=parseFloat(Wc(a,"height"))),r.width||(r.width=parseFloat(Wc(a,"width"))),r}}function Yc(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=a.offsetWidth,r=a.offsetHeight,n=0,e=0;a.offsetParent&&a!==mt()[Vp.fullscreenElement];)n+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:n,top:e,width:t,height:r}}function Zp(a,t){var r={x:0,y:0};if(ei)for(var n=a;n&&"html"!==n.nodeName.toLowerCase();){var e=Wc(n,"transform");if(/^matrix/.test(e)){var i=e.slice(7,-1).split(/,\s/).map(Number);r.x+=i[4],r.y+=i[5]}else if(/^matrix3d/.test(e)){var s=e.slice(9,-1).split(/,\s/).map(Number);r.x+=s[12],r.y+=s[13]}n=n.parentNode}var l={},p=Yc(t.target),y=Yc(a),k=y.width,z=t.offsetY-(y.top-p.top),ae=t.offsetX-(y.left-p.left);return t.changedTouches&&(ae=t.changedTouches[0].pageX-y.left,z=t.changedTouches[0].pageY+y.top,ei&&(ae-=r.x,z-=r.y)),l.y=1-Math.max(0,Math.min(1,z/y.height)),l.x=Math.max(0,Math.min(1,ae/k)),l}function bE(a){return Za(a)&&3===a.nodeType}function o_(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function xE(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(t){return"function"==typeof t&&(t=t()),xl(t)||bE(t)?t:"string"==typeof t&&/\S/.test(t)?mt().createTextNode(t):void 0}).filter(function(t){return t})}function u_(a,t){return xE(t).forEach(function(r){return a.appendChild(r)}),a}function SE(a,t){return u_(o_(a),t)}function zc(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||"mouseup"===a.type&&0===a.button&&0===a.buttons||!(0!==a.button||1!==a.buttons)}var l_,Ss=gE("querySelector"),AE=gE("querySelectorAll"),CE=Object.freeze({__proto__:null,isReal:bl,isEl:xl,isInFrame:vE,createEl:hr,textContent:xo,prependTo:s_,hasClass:So,addClass:Ja,removeClass:Kc,toggleClass:mE,setAttributes:yE,getAttributes:es,getAttribute:_E,setAttribute:Sl,removeAttribute:Xp,blockTextSelection:TE,unblockTextSelection:EE,getBoundingClientRect:Al,findPosition:Yc,getPointerPosition:Zp,isTextNode:bE,emptyEl:o_,normalizeContent:xE,appendContent:u_,insertContent:SE,isSingleLeftClick:zc,$:Ss,$$:AE}),DE=!1,uA=function(){if(!1!==l_.options.autoSetup){var t=Array.prototype.slice.call(mt().getElementsByTagName("video")),r=Array.prototype.slice.call(mt().getElementsByTagName("audio")),n=Array.prototype.slice.call(mt().getElementsByTagName("video-js")),e=t.concat(r,n);if(e&&e.length>0)for(var i=0,s=e.length;i<s;i++){var l=e[i];if(!l||!l.getAttribute){f_(1);break}void 0===l.player&&null!==l.getAttribute("data-setup")&&l_(l)}else DE||f_(1)}};function f_(a,t){bl()&&(t&&(l_=t),De().setTimeout(uA,a))}function c_(){DE=!0,De().removeEventListener("load",c_)}bl()&&("complete"===mt().readyState?c_():De().addEventListener("load",c_));var OE,PE=function(t){var r=mt().createElement("style");return r.className=t,r},wE=function(t,r){t.styleSheet?t.styleSheet.cssText=r:t.textContent=r},fA=3;function ts(){return fA++}De().WeakMap||(OE=function(){function a(){this.vdata="vdata"+Math.floor(De().performance&&De().performance.now()||Date.now()),this.data={}}var t=a.prototype;return t.set=function(n,e){var i=n[this.vdata]||ts();return n[this.vdata]||(n[this.vdata]=i),this.data[i]=e,this},t.get=function(n){var e=n[this.vdata];if(e)return this.data[e];ar("We have no data for this element",n)},t.has=function(n){return n[this.vdata]in this.data},t.delete=function(n){var e=n[this.vdata];e&&(delete this.data[e],delete n[this.vdata])},a}());var ti=De().WeakMap?new WeakMap:new OE;function IE(a,t){if(ti.has(a)){var r=ti.get(a);0===r.handlers[t].length&&(delete r.handlers[t],a.removeEventListener?a.removeEventListener(t,r.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+t,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&ti.delete(a)}}function d_(a,t,r,n){r.forEach(function(e){a(t,e,n)})}function Qp(a){if(a.fixed_)return a;function t(){return!0}function r(){return!1}if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var n=a||De().event;for(var e in a={},n)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&"path"!==e&&("returnValue"===e&&n.preventDefault||(a[e]=n[e]));if(a.target||(a.target=a.srcElement||mt()),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){n.preventDefault&&n.preventDefault(),a.returnValue=!1,n.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),a.cancelBubble=!0,n.cancelBubble=!0,a.isPropagationStopped=t},a.isPropagationStopped=r,a.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),a.isImmediatePropagationStopped=t,a.stopPropagation()},a.isImmediatePropagationStopped=r,null!=a.clientX){var i=mt().documentElement,s=mt().body;a.pageX=a.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),a.pageY=a.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}a.which=a.charCode||a.keyCode,null!=a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a.fixed_=!0,a}var $p,dA=["touchstart","touchmove"];function bi(a,t,r){if(Array.isArray(t))return d_(bi,a,t,r);ti.has(a)||ti.set(a,{});var n=ti.get(a);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),r.guid||(r.guid=ts()),n.handlers[t].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(i,s){if(!n.disabled){i=Qp(i);var l=n.handlers[i.type];if(l)for(var p=l.slice(0),y=0,k=p.length;y<k&&!i.isImmediatePropagationStopped();y++)try{p[y].call(a,i,s)}catch($){ar.error($)}}}),1===n.handlers[t].length)if(a.addEventListener){var e=!1;(function(){if("boolean"!=typeof $p){$p=!1;try{var t=Object.defineProperty({},"passive",{get:function(){$p=!0}});De().addEventListener("test",null,t),De().removeEventListener("test",null,t)}catch{}}return $p})()&&dA.indexOf(t)>-1&&(e={passive:!0}),a.addEventListener(t,n.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+t,n.dispatcher)}function Hn(a,t,r){if(ti.has(a)){var n=ti.get(a);if(n.handlers){if(Array.isArray(t))return d_(Hn,a,t,r);var e=function(y,k){n.handlers[k]=[],IE(y,k)};if(void 0===t){for(var i in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},i)&&e(a,i);return}var s=n.handlers[t];if(s){if(!r)return void e(a,t);if(r.guid)for(var l=0;l<s.length;l++)s[l].guid===r.guid&&s.splice(l--,1);IE(a,t)}}}}function Cl(a,t,r){var n=ti.has(a)?ti.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof t?t={type:t,target:a}:t.target||(t.target=a),t=Qp(t),n.dispatcher&&n.dispatcher.call(a,t,r),e&&!t.isPropagationStopped()&&!0===t.bubbles)Cl.call(null,e,t,r);else if(!e&&!t.defaultPrevented&&t.target&&t.target[t.type]){ti.has(t.target)||ti.set(t.target,{});var i=ti.get(t.target);t.target[t.type]&&(i.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),i.disabled=!1)}return!t.defaultPrevented}function Jp(a,t,r){if(Array.isArray(t))return d_(Jp,a,t,r);var n=function e(){Hn(a,t,e),r.apply(this,arguments)};n.guid=r.guid=r.guid||ts(),bi(a,t,n)}function LE(a,t,r){var n=function e(){Hn(a,t,e),r.apply(this,arguments)};n.guid=r.guid=r.guid||ts(),bi(a,t,n)}var qc,hA=Object.freeze({__proto__:null,fixEvent:Qp,on:bi,off:Hn,trigger:Cl,one:Jp,any:LE}),Nr=function(t,r,n){r.guid||(r.guid=ts());var e=r.bind(t);return e.guid=n?n+"_"+r.guid:r.guid,e},rs=function(t,r){var n=De().performance.now();return function(){var s=De().performance.now();s-n>=r&&(t.apply(void 0,arguments),n=s)}},bn=function(){};bn.prototype.allowedEvents_={},bn.prototype.on=function(a,t){var r=this.addEventListener;this.addEventListener=function(){},bi(this,a,t),this.addEventListener=r},bn.prototype.addEventListener=bn.prototype.on,bn.prototype.off=function(a,t){Hn(this,a,t)},bn.prototype.removeEventListener=bn.prototype.off,bn.prototype.one=function(a,t){var r=this.addEventListener;this.addEventListener=function(){},Jp(this,a,t),this.addEventListener=r},bn.prototype.any=function(a,t){var r=this.addEventListener;this.addEventListener=function(){},LE(this,a,t),this.addEventListener=r},bn.prototype.trigger=function(a){var t=a.type||a;"string"==typeof a&&(a={type:t}),a=Qp(a),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](a),Cl(this,a)},bn.prototype.dispatchEvent=bn.prototype.trigger,bn.prototype.queueTrigger=function(a){var t=this;qc||(qc=new Map);var r=a.type||a,n=qc.get(this);n||qc.set(this,n=new Map);var e=n.get(r);n.delete(r),De().clearTimeout(e);var i=De().setTimeout(function(){0===n.size&&(n=null,qc.delete(t)),t.trigger(a)},0);n.set(r,i)};var ev=function(t){return"function"==typeof t.name?t.name():"string"==typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},ns=function(t){return t instanceof bn||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(r){return"function"==typeof t[r]})},h_=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},tv=function(t,r,n){if(!t||!t.nodeName&&!ns(t))throw new Error("Invalid target for "+ev(r)+"#"+n+"; must be a DOM node or evented object.")},RE=function(t,r,n){if(!h_(t))throw new Error("Invalid event type for "+ev(r)+"#"+n+"; must be a non-empty string or array.")},ME=function(t,r,n){if("function"!=typeof t)throw new Error("Invalid listener for "+ev(r)+"#"+n+"; must be a function.")},p_=function(t,r,n){var i,s,l,e=r.length<3||r[0]===t||r[0]===t.eventBusEl_;return e?(i=t.eventBusEl_,r.length>=3&&r.shift(),s=r[0],l=r[1]):(i=r[0],s=r[1],l=r[2]),tv(i,t,n),RE(s,t,n),ME(l,t,n),{isTargetingSelf:e,target:i,type:s,listener:l=Nr(t,l)}},Ao=function(t,r,n,e){tv(t,t,r),t.nodeName?hA[r](t,n,e):t[r](n,e)},gA={on:function(){for(var t=this,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var i=p_(this,n,"on"),s=i.isTargetingSelf,l=i.target,p=i.type,y=i.listener;if(Ao(l,"on",p,y),!s){var k=function(){return t.off(l,p,y)};k.guid=y.guid;var $=function(){return t.off("dispose",k)};$.guid=y.guid,Ao(this,"on","dispose",k),Ao(l,"on","dispose",$)}},one:function(){for(var t=this,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var i=p_(this,n,"one"),s=i.isTargetingSelf,l=i.target,p=i.type,y=i.listener;if(s)Ao(l,"one",p,y);else{var k=function $(){t.off(l,p,$);for(var z=arguments.length,ae=new Array(z),pe=0;pe<z;pe++)ae[pe]=arguments[pe];y.apply(null,ae)};k.guid=y.guid,Ao(l,"one",p,k)}},any:function(){for(var t=this,r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var i=p_(this,n,"any"),s=i.isTargetingSelf,l=i.target,p=i.type,y=i.listener;if(s)Ao(l,"any",p,y);else{var k=function $(){t.off(l,p,$);for(var z=arguments.length,ae=new Array(z),pe=0;pe<z;pe++)ae[pe]=arguments[pe];y.apply(null,ae)};k.guid=y.guid,Ao(l,"any",p,k)}},off:function(t,r,n){if(!t||h_(t))Hn(this.eventBusEl_,t,r);else{var e=t,i=r;tv(e,this,"off"),RE(i,this,"off"),ME(n,this,"off"),n=Nr(this,n),this.off("dispose",n),e.nodeName?(Hn(e,i,n),Hn(e,"dispose",n)):ns(e)&&(e.off(i,n),e.off("dispose",n))}},trigger:function(t,r){if(tv(this.eventBusEl_,this,"trigger"),!h_(t&&"string"!=typeof t?t.type:t)){var e="Invalid event type for "+ev(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!t)throw new Error(e);(this.log||ar).error(e)}return Cl(this.eventBusEl_,t,r)}};function v_(a,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!a[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');a.eventBusEl_=a[n]}else a.eventBusEl_=hr("span",{className:"vjs-event-bus"});return Zr(a,gA),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(e){e()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(e){e&&ti.has(e)&&ti.delete(e)}),De().setTimeout(function(){a.eventBusEl_=null},0)}),a}var mA={state:{},setState:function(t){var n,r=this;return"function"==typeof t&&(t=t()),Tl(t,function(e,i){r.state[i]!==e&&((n=n||{})[i]={from:r.state[i],to:e}),r.state[i]=e}),n&&ns(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function kE(a,t){return Zr(a,mA),a.state=Zr({},a.state,t),"function"==typeof a.handleStateChanged&&ns(a)&&a.on("statechanged",a.handleStateChanged),a}var rv=function(t){return"string"!=typeof t?t:t.replace(/./,function(r){return r.toLowerCase()})},tn=function(t){return"string"!=typeof t?t:t.replace(/./,function(r){return r.toUpperCase()})};function jr(){for(var a={},t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(e){e&&Tl(e,function(i,s){Hc(i)?(Hc(a[s])||(a[s]={}),a[s]=jr(a[s],i)):a[s]=i})}),a}var _A=function(){function a(){this.map_={}}var t=a.prototype;return t.has=function(n){return n in this.map_},t.delete=function(n){var e=this.has(n);return delete this.map_[n],e},t.set=function(n,e){return this.map_[n]=e,this},t.forEach=function(n,e){for(var i in this.map_)n.call(e,this.map_[i],i,this)},a}(),TA=De().Map?De().Map:_A,EA=function(){function a(){this.set_={}}var t=a.prototype;return t.has=function(n){return n in this.set_},t.delete=function(n){var e=this.has(n);return delete this.set_[n],e},t.add=function(n){return this.set_[n]=1,this},t.forEach=function(n,e){for(var i in this.set_)n.call(e,i,i,this)},a}(),g_=De().Set?De().Set:EA,lt=function(){function a(r,n,e){var i=this;if(this.player_=!r&&this.play?r=this:r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=jr({},this.options_),n=this.options_=jr(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var s=r&&r.id&&r.id()||"no_player";this.id_=s+"_component_"+ts()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(l){return i.addClass(l)}),!1!==n.evented&&(v_(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),kE(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new g_,this.setIntervalIds_=new g_,this.rafIds_=new g_,this.namedRafs_=new TA,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(e),!1!==n.reportTouchActivity&&this.enableTouchActivity()}var t=a.prototype;return t.dispose=function(n){if(void 0===n&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(n){return n?(this.options_=jr(this.options_,n),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(n,e,i){return hr(n,e,i)},t.localize=function(n,e,i){void 0===i&&(i=n);var s=this.player_.language&&this.player_.language(),l=this.player_.languages&&this.player_.languages(),p=l&&l[s],y=s&&s.split("-")[0],k=l&&l[y],$=i;return p&&p[n]?$=p[n]:k&&k[n]&&($=k[n]),e&&($=$.replace(/\{(\d+)\}/g,function(z,ae){var pe=e[ae-1],me=pe;return typeof pe>"u"&&(me=z),me})),$},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(n){return this.childIndex_[n]},t.getChild=function(n){if(n)return this.childNameIndex_[n]},t.getDescendant=function(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];e=e.reduce(function(p,y){return p.concat(y)},[]);for(var s=this,l=0;l<e.length;l++)if(!(s=s.getChild(e[l]))||!s.getChild)return;return s},t.addChild=function(n,e,i){var s,l;if(void 0===e&&(e={}),void 0===i&&(i=this.children_.length),"string"==typeof n){l=tn(n);var p=e.componentClass||l;e.name=l;var y=a.getComponent(p);if(!y)throw new Error("Component "+p+" does not exist");if("function"!=typeof y)return null;s=new y(this.player_||this,e)}else s=n;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,"function"==typeof s.id&&(this.childIndex_[s.id()]=s),(l=l||s.name&&tn(s.name()))&&(this.childNameIndex_[l]=s,this.childNameIndex_[rv(l)]=s),"function"==typeof s.el&&s.el()){var k=null;this.children_[i+1]&&(this.children_[i+1].el_?k=this.children_[i+1].el_:xl(this.children_[i+1])&&(k=this.children_[i+1])),this.contentEl().insertBefore(s.el(),k)}return s},t.removeChild=function(n){if("string"==typeof n&&(n=this.getChild(n)),n&&this.children_){for(var e=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===n){e=!0,this.children_.splice(i,1);break}if(e){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[tn(n.name())]=null,this.childNameIndex_[rv(n.name())]=null;var s=n.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},t.initChildren=function(){var n=this,e=this.options_.children;if(e){var l,i=this.options_,p=a.getComponent("Tech");(l=Array.isArray(e)?e:Object.keys(e)).concat(Object.keys(this.options_).filter(function(y){return!l.some(function(k){return"string"==typeof k?y===k:y===k.name})})).map(function(y){var k,$;return"string"==typeof y?$=e[k=y]||n.options_[k]||{}:(k=y.name,$=y),{name:k,opts:$}}).filter(function(y){var k=a.getComponent(y.opts.componentClass||tn(y.name));return k&&!p.isTech(k)}).forEach(function(k){var $=k.name,z=k.opts;if(void 0!==i[$]&&(z=i[$]),!1!==z){!0===z&&(z={}),z.playerOptions=n.options_.playerOptions;var ae=n.addChild($,z);ae&&(n[$]=ae)}})}},t.buildCSSClass=function(){return""},t.ready=function(n,e){if(void 0===e&&(e=!1),n){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(n);e?n.call(this):this.setTimeout(n,1)}},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(n,e){return Ss(n,e||this.contentEl())},t.$$=function(n,e){return AE(n,e||this.contentEl())},t.hasClass=function(n){return So(this.el_,n)},t.addClass=function(n){Ja(this.el_,n)},t.removeClass=function(n){Kc(this.el_,n)},t.toggleClass=function(n,e){mE(this.el_,n,e)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(n){return _E(this.el_,n)},t.setAttribute=function(n,e){Sl(this.el_,n,e)},t.removeAttribute=function(n){Xp(this.el_,n)},t.width=function(n,e){return this.dimension("width",n,e)},t.height=function(n,e){return this.dimension("height",n,e)},t.dimensions=function(n,e){this.width(n,!0),this.height(e)},t.dimension=function(n,e,i){if(void 0!==e)return(null===e||e!=e)&&(e=0),this.el_.style[n]=-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?e:"auto"===e?"":e+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var s=this.el_.style[n],l=s.indexOf("px");return parseInt(-1!==l?s.slice(0,l):this.el_["offset"+tn(n)],10)},t.currentDimension=function(n){var e=0;if("width"!==n&&"height"!==n)throw new Error("currentDimension only accepts width or height value");if(e=Wc(this.el_,n),0===(e=parseFloat(e))||isNaN(e)){var i="offset"+tn(n);e=this.el_[i]}return e},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(n){this.player_&&(qt().isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},t.handleKeyPress=function(n){this.handleKeyDown(n)},t.emitTapEvents=function(){var l,n=0,e=null;this.on("touchstart",function(y){1===y.touches.length&&(e={pageX:y.touches[0].pageX,pageY:y.touches[0].pageY},n=De().performance.now(),l=!0)}),this.on("touchmove",function(y){if(y.touches.length>1)l=!1;else if(e){var k=y.touches[0].pageX-e.pageX,$=y.touches[0].pageY-e.pageY;Math.sqrt(k*k+$*$)>10&&(l=!1)}});var p=function(){l=!1};this.on("touchleave",p),this.on("touchcancel",p),this.on("touchend",function(y){e=null,!0===l&&De().performance.now()-n<200&&(y.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,n=Nr(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){n(),this.clearInterval(e),e=this.setInterval(n,250)});var i=function(l){n(),this.clearInterval(e)};this.on("touchmove",n),this.on("touchend",i),this.on("touchcancel",i)}},t.setTimeout=function(n,e){var s,i=this;return n=Nr(this,n),this.clearTimersOnDispose_(),s=De().setTimeout(function(){i.setTimeoutIds_.has(s)&&i.setTimeoutIds_.delete(s),n()},e),this.setTimeoutIds_.add(s),s},t.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),De().clearTimeout(n)),n},t.setInterval=function(n,e){n=Nr(this,n),this.clearTimersOnDispose_();var i=De().setInterval(n,e);return this.setIntervalIds_.add(i),i},t.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),De().clearInterval(n)),n},t.requestAnimationFrame=function(n){var i,e=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),n=Nr(this,n),i=De().requestAnimationFrame(function(){e.rafIds_.has(i)&&e.rafIds_.delete(i),n()}),this.rafIds_.add(i),i):this.setTimeout(n,1e3/60)},t.requestNamedAnimationFrame=function(n,e){var i=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),e=Nr(this,e);var s=this.requestAnimationFrame(function(){e(),i.namedRafs_.has(n)&&i.namedRafs_.delete(n)});return this.namedRafs_.set(n,s),n}},t.cancelNamedAnimationFrame=function(n){this.namedRafs_.has(n)&&(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},t.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),De().cancelAnimationFrame(n)),n):this.clearTimeout(n)},t.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var s=e[1];n[e[0]].forEach(function(l,p){return n[s](p)})}),n.clearingTimersOnDispose_=!1}))},a.registerComponent=function(n,e){if("string"!=typeof n||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var i=a.getComponent("Tech"),s=i&&i.isTech(e),l=a===e||a.prototype.isPrototypeOf(e.prototype);if(s||!l)throw new Error('Illegal component, "'+n+'"; '+(s?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");n=tn(n),a.components_||(a.components_={});var y=a.getComponent("Player");if("Player"===n&&y&&y.players){var k=y.players,$=Object.keys(k);if(k&&$.length>0&&$.map(function(z){return k[z]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[n]=e,a.components_[rv(n)]=e,e},a.getComponent=function(n){if(n&&a.components_)return a.components_[n]},a}();function FE(a,t,r,n){return function bA(a,t,r){if("number"!=typeof t||t<0||t>r)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+r+").")}(a,n,r.length-1),r[n][t]}function m_(a){var t;return t=void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:FE.bind(null,"start",0,a),end:FE.bind(null,"end",1,a)},De().Symbol&&De().Symbol.iterator&&(t[De().Symbol.iterator]=function(){return(a||[]).values()}),t}function Co(a,t){return Array.isArray(a)?m_(a):void 0===a||void 0===t?m_():m_([[a,t]])}function UE(a,t){var n,e,r=0;if(!t)return 0;(!a||!a.length)&&(a=Co(0,0));for(var i=0;i<a.length;i++)n=a.start(i),(e=a.end(i))>t&&(e=t),r+=e-n;return r/t}function ri(a){if(a instanceof ri)return a;"number"==typeof a?this.code=a:"string"==typeof a?this.message=a:Za(a)&&("number"==typeof a.code&&(this.code=a.code),Zr(this,a)),this.message||(this.message=ri.defaultMessages[this.code]||"")}lt.prototype.supportsRaf_="function"==typeof De().requestAnimationFrame&&"function"==typeof De().cancelAnimationFrame,lt.registerComponent("Component",lt),ri.prototype.code=0,ri.prototype.message="",ri.prototype.status=null,ri.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ri.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Dl=0;Dl<ri.errorTypes.length;Dl++)ri[ri.errorTypes[Dl]]=Dl,ri.prototype[ri.errorTypes[Dl]]=Dl;function Xc(a){return null!=a&&"function"==typeof a.then}function Ca(a){Xc(a)&&a.then(null,function(t){})}var y_=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,e,i){return t[e]&&(n[e]=t[e]),n},{cues:t.cues&&Array.prototype.map.call(t.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},__="vjs-modal-dialog",Pl=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).handleKeyDown_=function(s){return i.handleKeyDown(s)},i.close_=function(s){return i.close(s)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=hr("div",{className:__+"-content"},{role:"document"}),i.descEl_=hr("p",{className:__+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),xo(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},r.buildCSSClass=function(){return __+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(e){if("boolean"==typeof e){var i=this.closeable_=!!e,s=this.getChild("closeButton");if(i&&!s){var l=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=l,this.on(s,"close",this.close_)}!i&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(e){var i=this.contentEl(),s=i.parentNode,l=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(i),this.empty(),SE(i,e),this.trigger("modalfill"),l?s.insertBefore(i,l):s.appendChild(i);var p=this.getChild("closeButton");p&&s.appendChild(p.el_)},r.empty=function(){this.trigger("beforemodalempty"),o_(this.contentEl()),this.trigger("modalempty")},r.content=function(e){return typeof e<"u"&&(this.content_=e),this.content_},r.conditionalFocus_=function(){var e=mt().activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(e)||i===e)&&(this.previouslyActiveEl_=e,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(e){if(e.stopPropagation(),qt().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(qt().isEventKey(e,"Tab")){for(var l,i=this.focusableEls_(),s=this.el_.querySelector(":focus"),p=0;p<i.length;p++)if(s===i[p]){l=p;break}mt().activeElement===this.el_&&(l=0),e.shiftKey&&0===l?(i[i.length-1].focus(),e.preventDefault()):!e.shiftKey&&l===i.length-1&&(i[0].focus(),e.preventDefault())}},r.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(i){return(i instanceof De().HTMLAnchorElement||i instanceof De().HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof De().HTMLInputElement||i instanceof De().HTMLSelectElement||i instanceof De().HTMLTextAreaElement||i instanceof De().HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof De().HTMLIFrameElement||i instanceof De().HTMLObjectElement||i instanceof De().HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable")})},t}(lt);Pl.prototype.options_={pauseOnOpen:!0,temporary:!0},lt.registerComponent("ModalDialog",Pl);var wl=function(a){function t(n){var e;void 0===n&&(n=[]),(e=a.call(this)||this).tracks_=[],Object.defineProperty(zt()(e),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<n.length;i++)e.addTrack(n[i]);return e}ht()(t,a);var r=t.prototype;return r.addTrack=function(e){var i=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){i.trigger({track:e,type:"labelchange",target:i})},ns(e)&&e.addEventListener("labelchange",e.labelchange_)},r.removeTrack=function(e){for(var i,s=0,l=this.length;s<l;s++)if(this[s]===e){(i=this[s]).off&&i.off(),this.tracks_.splice(s,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})},r.getTrackById=function(e){for(var i=null,s=0,l=this.length;s<l;s++){var p=this[s];if(p.id===e){i=p;break}}return i},t}(bn);for(var AA in wl.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},wl.prototype.allowedEvents_)wl.prototype["on"+AA]=null;var T_=function(t,r){for(var n=0;n<t.length;n++)!Object.keys(t[n]).length||r.id===t[n].id||(t[n].enabled=!1)},CA=function(a){function t(n){var e;void 0===n&&(n=[]);for(var i=n.length-1;i>=0;i--)if(n[i].enabled){T_(n,n[i]);break}return(e=a.call(this,n)||this).changing_=!1,e}ht()(t,a);var r=t.prototype;return r.addTrack=function(e){var i=this;e.enabled&&T_(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){i.changing_||(i.changing_=!0,T_(i,e),i.changing_=!1,i.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},r.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},t}(wl),E_=function(t,r){for(var n=0;n<t.length;n++)!Object.keys(t[n]).length||r.id===t[n].id||(t[n].selected=!1)},DA=function(a){function t(n){var e;void 0===n&&(n=[]);for(var i=n.length-1;i>=0;i--)if(n[i].selected){E_(n,n[i]);break}return(e=a.call(this,n)||this).changing_=!1,Object.defineProperty(zt()(e),"selectedIndex",{get:function(){for(var l=0;l<this.length;l++)if(this[l].selected)return l;return-1},set:function(){}}),e}ht()(t,a);var r=t.prototype;return r.addTrack=function(e){var i=this;e.selected&&E_(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){i.changing_||(i.changing_=!0,E_(i,e),i.changing_=!1,i.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},r.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},t}(wl),NE=function(a){function t(){return a.apply(this,arguments)||this}ht()(t,a);var r=t.prototype;return r.addTrack=function(e){var i=this;a.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return i.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},r.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(wl),PA=function(){function a(r){void 0===r&&(r=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,e=r.length;n<e;n++)this.addTrackElement_(r[n])}var t=a.prototype;return t.addTrackElement_=function(n){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(n)&&this.trackElements_.push(n)},t.getTrackElementByTrack_=function(n){for(var e,i=0,s=this.trackElements_.length;i<s;i++)if(n===this.trackElements_[i].track){e=this.trackElements_[i];break}return e},t.removeTrackElement_=function(n){for(var e=0,i=this.trackElements_.length;e<i;e++)if(n===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},a}(),jE=function(){function a(r){a.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=a.prototype;return t.setCues_=function(n){var e=this.length||0,i=0,s=n.length;this.cues_=n,this.length_=n.length;var l=function(y){""+y in this||Object.defineProperty(this,""+y,{get:function(){return this.cues_[y]}})};if(e<s)for(i=e;i<s;i++)l.call(this,i)},t.getCueById=function(n){for(var e=null,i=0,s=this.length;i<s;i++){var l=this[i];if(l.id===n){e=l;break}}return e},a}(),wA={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},OA={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},IA={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},HE={disabled:"disabled",hidden:"hidden",showing:"showing"},b_=function(a){function t(r){var n;void 0===r&&(r={}),n=a.call(this)||this;var e={id:r.id||"vjs_track_"+ts(),kind:r.kind||"",language:r.language||""},i=r.label||"",s=function(y){Object.defineProperty(zt()(n),y,{get:function(){return e[y]},set:function(){}})};for(var l in e)s(l);return Object.defineProperty(zt()(n),"label",{get:function(){return i},set:function(y){y!==i&&(i=y,this.trigger("labelchange"))}}),n}return ht()(t,a),t}(bn),x_=function(t){var r=["protocol","hostname","port","pathname","search","hash","host"],n=mt().createElement("a");n.href=t;for(var e={},i=0;i<r.length;i++)e[r[i]]=n[r[i]];return"http:"===e.protocol&&(e.host=e.host.replace(/:80$/,"")),"https:"===e.protocol&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=De().location.protocol),e.host||(e.host=De().location.host),e},WE=function(t){if(!t.match(/^https?:\/\//)){var r=mt().createElement("a");r.href=t,t=r.href}return t},S_=function(t){if("string"==typeof t){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(n)return n.pop().toLowerCase()}return""},nv=function(t,r){void 0===r&&(r=De().location);var n=x_(t);return(":"===n.protocol?r.protocol:n.protocol)+n.host!==r.protocol+r.host},LA=Object.freeze({__proto__:null,parseUrl:x_,getAbsoluteURL:WE,getFileExtension:S_,isCrossOrigin:nv}),GE=function(t,r){var n=new(De().WebVTT.Parser)(De(),De().vttjs,De().WebVTT.StringDecoder()),e=[];n.oncue=function(i){r.addCue(i)},n.onparsingerror=function(i){e.push(i)},n.onflush=function(){r.trigger({type:"loadeddata",target:r})},n.parse(t),e.length>0&&(De().console&&De().console.groupCollapsed&&De().console.groupCollapsed("Text Track parsing errors for "+r.src),e.forEach(function(i){return ar.error(i)}),De().console&&De().console.groupEnd&&De().console.groupEnd()),n.flush()},VE=function(t,r){var n={uri:t},e=nv(t);e&&(n.cors=e);var i="use-credentials"===r.tech_.crossOrigin();i&&(n.withCredentials=i),pp()(n,Nr(this,function(s,l,p){if(s)return ar.error(s,l);r.loaded_=!0,"function"!=typeof De().WebVTT?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],function(y){if("vttjserror"!==y.type)return GE(p,r);ar.error("vttjs failed to load, stopping trying to process "+r.src)}):GE(p,r)}))},Zc=function(a){function t(n){var e;if(void 0===n&&(n={}),!n.tech)throw new Error("A tech was not provided.");var i=jr(n,{kind:IA[n.kind]||"subtitles",language:n.language||n.srclang||""}),s=HE[i.mode]||"disabled",l=i.default;("metadata"===i.kind||"chapters"===i.kind)&&(s="hidden"),(e=a.call(this,i)||this).tech_=i.tech,e.cues_=[],e.activeCues_=[],e.preload_=!1!==e.tech_.preloadTextTracks;var p=new jE(e.cues_),y=new jE(e.activeCues_),k=!1;return e.timeupdateHandler=Nr(zt()(e),function(z){if(void 0===z&&(z={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==z.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,k&&(this.trigger("cuechange"),k=!1),"timeupdate"!==z.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),e.tech_.one("dispose",function(){e.stopTracking()}),"disabled"!==s&&e.startTracking(),Object.defineProperties(zt()(e),{default:{get:function(){return l},set:function(){}},mode:{get:function(){return s},set:function(ae){HE[ae]&&s!==ae&&(s=ae,!this.preload_&&"disabled"!==s&&0===this.cues.length&&VE(this.src,this),this.stopTracking(),"disabled"!==s&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?p:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return y;for(var ae=this.tech_.currentTime(),pe=[],me=0,Ee=this.cues.length;me<Ee;me++){var We=this.cues[me];(We.startTime<=ae&&We.endTime>=ae||We.startTime===We.endTime&&We.startTime<=ae&&We.startTime+.5>=ae)&&pe.push(We)}if(k=!1,pe.length!==this.activeCues_.length)k=!0;else for(var et=0;et<pe.length;et++)-1===this.activeCues_.indexOf(pe[et])&&(k=!0);return this.activeCues_=pe,y.setCues_(this.activeCues_),y},set:function(){}}}),i.src?(e.src=i.src,e.preload_||(e.loaded_=!0),(e.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&VE(e.src,zt()(e))):e.loaded_=!0,e}ht()(t,a);var r=t.prototype;return r.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},r.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},r.addCue=function(e){var i=e;if(De().vttjs&&!(e instanceof De().vttjs.VTTCue)){for(var s in i=new(De().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)s in i||(i[s]=e[s]);i.id=e.id,i.originalCue_=e}for(var l=this.tech_.textTracks(),p=0;p<l.length;p++)l[p]!==this&&l[p].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)},r.removeCue=function(e){for(var i=this.cues_.length;i--;){var s=this.cues_[i];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}},t}(b_);Zc.prototype.allowedEvents_={cuechange:"cuechange"};var KE=function(a){function t(r){var n;void 0===r&&(r={});var e=jr(r,{kind:OA[r.kind]||""});n=a.call(this,e)||this;var i=!1;return Object.defineProperty(zt()(n),"enabled",{get:function(){return i},set:function(l){"boolean"!=typeof l||l===i||(i=l,this.trigger("enabledchange"))}}),e.enabled&&(n.enabled=e.enabled),n.loaded_=!0,n}return ht()(t,a),t}(b_),YE=function(a){function t(r){var n;void 0===r&&(r={});var e=jr(r,{kind:wA[r.kind]||""});n=a.call(this,e)||this;var i=!1;return Object.defineProperty(zt()(n),"selected",{get:function(){return i},set:function(l){"boolean"!=typeof l||l===i||(i=l,this.trigger("selectedchange"))}}),e.selected&&(n.selected=e.selected),n}return ht()(t,a),t}(b_),Ol=function(a){function t(r){var n;void 0===r&&(r={}),n=a.call(this)||this;var e,i=new Zc(r);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties(zt()(n),{readyState:{get:function(){return e}},track:{get:function(){return i}}}),e=0,i.addEventListener("loadeddata",function(){e=2,n.trigger({type:"load",target:zt()(n)})}),n}return ht()(t,a),t}(bn);Ol.prototype.allowedEvents_={load:"load"},Ol.NONE=0,Ol.LOADING=1,Ol.LOADED=2,Ol.ERROR=3;var ji={audio:{ListClass:CA,TrackClass:KE,capitalName:"Audio"},video:{ListClass:DA,TrackClass:YE,capitalName:"Video"},text:{ListClass:NE,TrackClass:Zc,capitalName:"Text"}};Object.keys(ji).forEach(function(a){ji[a].getterName=a+"Tracks",ji[a].privateName=a+"Tracks_"});var Il={remoteText:{ListClass:NE,TrackClass:Zc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:PA,TrackClass:Ol,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ni=Bi()({},ji,Il);Il.names=Object.keys(Il),ji.names=Object.keys(ji),ni.names=[].concat(Il.names).concat(ji.names);var Or=function(a){function t(n,e){var i;return void 0===n&&(n={}),void 0===e&&(e=function(){}),n.reportTouchActivity=!1,(i=a.call(this,null,n,e)||this).onDurationChange_=function(s){return i.onDurationChange(s)},i.trackProgress_=function(s){return i.trackProgress(s)},i.trackCurrentTime_=function(s){return i.trackCurrentTime(s)},i.stopTrackingCurrentTime_=function(s){return i.stopTrackingCurrentTime(s)},i.disposeSourceHandler_=function(s){return i.disposeSourceHandler(s)},i.queuedHanders_=new Set,i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),ni.names.forEach(function(s){var l=ni[s];n&&n[l.getterName]&&(i[l.privateName]=n[l.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){!1===n["native"+s+"Tracks"]&&(i["featuresNative"+s+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:(!0===n.nativeCaptions||!0===n.nativeTextTracks)&&(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==n.preloadTextTracks,i.autoRemoteTextTracks_=new ni.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}ht()(t,a);var r=t.prototype;return r.triggerSourceset=function(e){var i=this;this.isReady_||this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},r.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Nr(this,function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,1===i&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(e){this.duration_=this.duration()},r.buffered=function(){return Co(0,0)},r.bufferedPercent=function(){return UE(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(ji.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},r.clearTracks=function(e){var i=this;(e=[].concat(e)).forEach(function(s){for(var l=i[s+"Tracks"]()||[],p=l.length;p--;){var y=l[p];"text"===s&&i.removeRemoteTextTrack(y),l.removeTrack(y)}})},r.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],i=e.length;i--;)this.removeRemoteTextTrack(e[i])},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function(){},r.error=function(e){return void 0!==e&&(this.error_=new ri(e),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?Co(0,0):Co()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var e=this;ji.names.forEach(function(i){var l=function(){e.trigger(i+"trackchange")},p=e[ji[i].getterName]();p.addEventListener("removetrack",l),p.addEventListener("addtrack",l),e.on("dispose",function(){p.removeEventListener("removetrack",l),p.removeEventListener("addtrack",l)})})},r.addWebVttScript_=function(){var e=this;if(!De().WebVTT)if(mt().body.contains(this.el())){if(!this.options_["vtt.js"]&&Hc(vp())&&Object.keys(vp()).length>0)return void this.trigger("vttjsloaded");var i=mt().createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",i.onload=function(){e.trigger("vttjsloaded")},i.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){i.onload=null,i.onerror=null}),De().WebVTT=!0,this.el().parentNode.appendChild(i)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var e=this,i=this.textTracks(),s=this.remoteTextTracks(),l=function(z){return i.addTrack(z.track)},p=function(z){return i.removeTrack(z.track)};s.on("addtrack",l),s.on("removetrack",p),this.addWebVttScript_();var y=function(){return e.trigger("texttrackchange")},k=function(){y();for(var z=0;z<i.length;z++){var ae=i[z];ae.removeEventListener("cuechange",y),"showing"===ae.mode&&ae.addEventListener("cuechange",y)}};k(),i.addEventListener("change",k),i.addEventListener("addtrack",k),i.addEventListener("removetrack",k),this.on("dispose",function(){s.off("addtrack",l),s.off("removetrack",p),i.removeEventListener("change",k),i.removeEventListener("addtrack",k),i.removeEventListener("removetrack",k);for(var $=0;$<i.length;$++)i[$].removeEventListener("cuechange",y)})},r.addTextTrack=function(e,i,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return function kA(a,t,r,n,e){void 0===e&&(e={});var i=a.textTracks();e.kind=t,r&&(e.label=r),n&&(e.language=n),e.tech=a;var s=new ni.text.TrackClass(e);return i.addTrack(s),s}(this,e,i,s)},r.createRemoteTextTrack=function(e){var i=jr(e,{tech:this});return new Il.remoteTextEl.TrackClass(i)},r.addRemoteTextTrack=function(e,i){var s=this;void 0===e&&(e={});var l=this.createRemoteTextTrack(e);return!0!==i&&!1!==i&&(ar.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),!0!==i&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(l.track)}),l},r.removeRemoteTextTrack=function(e){var i=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var e=this.options_.Promise||De().Promise;if(e)return e.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.requestVideoFrameCallback=function(e){var i=this,s=ts();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){i.queuedHanders_.has(s)&&(i.queuedHanders_.delete(s),e())})):this.requestNamedAnimationFrame(s,e),s},r.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,i){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=tn(e),t.techs_[e]=i,t.techs_[rv(e)]=i,"Tech"!==e&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e){if(t.techs_&&t.techs_[e])return t.techs_[e];if(e=tn(e),De()&&De().videojs&&De().videojs[e])return ar.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),De().videojs[e]}},t}(lt);ni.names.forEach(function(a){var t=ni[a];Or.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Or.prototype.featuresVolumeControl=!0,Or.prototype.featuresMuteControl=!0,Or.prototype.featuresFullscreenResize=!1,Or.prototype.featuresPlaybackRate=!1,Or.prototype.featuresProgressEvents=!1,Or.prototype.featuresSourceset=!1,Or.prototype.featuresTimeupdateEvents=!1,Or.prototype.featuresNativeTextTracks=!1,Or.prototype.featuresVideoFrameCallback=!1,Or.withSourceHandlers=function(a){a.registerSourceHandler=function(r,n){var e=a.sourceHandlers;e||(e=a.sourceHandlers=[]),void 0===n&&(n=e.length),e.splice(n,0,r)},a.canPlayType=function(r){for(var e,n=a.sourceHandlers||[],i=0;i<n.length;i++)if(e=n[i].canPlayType(r))return e;return""},a.selectSourceHandler=function(r,n){for(var e=a.sourceHandlers||[],s=0;s<e.length;s++)if(e[s].canHandleSource(r,n))return e[s];return null},a.canPlaySource=function(r,n){var e=a.selectSourceHandler(r,n);return e?e.canHandleSource(r,n):""},["seekable","seeking","duration"].forEach(function(r){var n=this[r];"function"==typeof n&&(this[r]=function(){return this.sourceHandler_&&this.sourceHandler_[r]?this.sourceHandler_[r].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(r){var n=a.selectSourceHandler(r,this.options_);n||(a.nativeSourceHandler?n=a.nativeSourceHandler:ar.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==a.nativeSourceHandler&&(this.currentSource_=r),this.sourceHandler_=n.handleSource(r,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},lt.registerComponent("Tech",Or),Or.registerTech("Tech",Or),Or.defaultTechOrder_=[];var Do={},A_={},iv={};function UA(a,t,r){a.setTimeout(function(){return Po(t,Do[t.type],r,a)},1)}function XE(a,t,r,n){void 0===n&&(n=null);var e="call"+tn(r),i=a.reduce(C_(e),n),s=i===iv,l=s?null:t[r](i);return function GA(a,t,r,n){for(var e=a.length-1;e>=0;e--){var i=a[e];i[t]&&i[t](n,r)}}(a,r,l,s),l}var HA={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},WA={setCurrentTime:1,setMuted:1,setVolume:1},ZE={play:1,pause:1};function C_(a){return function(t,r){return t===iv?iv:r[a]?r[a](t):t}}function Po(a,t,r,n,e,i){void 0===a&&(a={}),void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===i&&(i=!1);var l=t[0],p=t.slice(1);if("string"==typeof l)Po(a,Do[l],r,n,e,i);else if(l){var y=function KA(a,t){var r=A_[a.id()],n=null;if(null==r)return n=t(a),A_[a.id()]=[[t,n]],n;for(var e=0;e<r.length;e++){var i=r[e];i[0]===t&&(n=i[1])}return null===n&&(n=t(a),r.push([t,n])),n}(n,l);if(!y.setSource)return e.push(y),Po(a,p,r,n,e,i);y.setSource(Zr({},a),function(k,$){if(k)return Po(a,p,r,n,e,i);e.push(y),Po($,a.type===$.type?p:Do[$.type],r,n,e,i)})}else p.length?Po(a,p,r,n,e,i):i?r(a,e):Po(a,Do["*"],r,n,e,!0)}var YA={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},av=function(t){void 0===t&&(t="");var r=S_(t);return YA[r.toLowerCase()]||""},qA=function a(t){if(Array.isArray(t)){var r=[];t.forEach(function(n){n=a(n),Array.isArray(n)?r=r.concat(n):Za(n)&&r.push(n)}),t=r}else t="string"==typeof t&&t.trim()?[QE({src:t})]:Za(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[QE(t)]:[];return t};function QE(a){if(!a.type){var t=av(a.src);t&&(a.type=t)}return a}var XA=function(a){function t(r,n,e){var i,s=jr({createEl:!1},n);if(i=a.call(this,r,s,e)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var l=0,p=n.playerOptions.techOrder;l<p.length;l++){var y=tn(p[l]),k=Or.getTech(y);if(y||(k=lt.getComponent(y)),k&&k.isSupported()){r.loadTech_(y);break}}return i}return ht()(t,a),t}(lt);lt.registerComponent("MediaLoader",XA);var sv=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(s){return i.handleMouseOver(s)},i.handleMouseOut_=function(s){return i.handleMouseOut(s)},i.handleClick_=function(s){return i.handleClick(s)},i.handleKeyDown_=function(s){return i.handleKeyDown(s)},i.emitTapEvents(),i.enable(),i}ht()(t,a);var r=t.prototype;return r.createEl=function(e,i,s){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===s&&(s={}),i=Zr({className:this.buildCSSClass(),tabIndex:0},i),"button"===e&&ar.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),s=Zr({role:"button"},s),this.tabIndex_=i.tabIndex;var l=hr(e,i,s);return l.appendChild(hr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(l),l},r.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},r.createControlTextEl=function(e){return this.controlTextEl_=hr("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},r.controlText=function(e,i){if(void 0===i&&(i=this.el()),void 0===e)return this.controlText_||"Need Text";var s=this.localize(e);this.controlText_=e,xo(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",s)},r.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},r.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},r.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},r.handleKeyDown=function(e){qt().isEventKey(e,"Space")||qt().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},t}(lt);lt.registerComponent("ClickableComponent",sv);var ZA=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).update(),i.update_=function(s){return i.update(s)},n.on("posterchange",i.update_),i}ht()(t,a);var r=t.prototype;return r.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},r.createEl=function(){return hr("div",{className:"vjs-poster",tabIndex:-1})},r.update=function(e){var i=this.player().poster();this.setSrc(i),i?this.show():this.hide()},r.setSrc=function(e){var i="";e&&(i='url("'+e+'")'),this.el_.style.backgroundImage=i},r.handleClick=function(e){if(this.player_.controls()){var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Vc||Gc)&&i)&&this.player_.tech(!0).focus(),this.player_.paused()?Ca(this.player_.play()):this.player_.pause()}},t}(sv);lt.registerComponent("PosterImage",ZA);var Hi="#222",QA={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function D_(a,t){var r;if(4===a.length)r=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else{if(7!==a.length)throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");r=a.slice(1)}return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+t+")"}function P_(a,t,r){try{a.style[t]=r}catch{return}}var $A=function(a){function t(n,e,i){var s;s=a.call(this,n,e,i)||this;var l=function(y){return s.updateDisplay(y)};return n.on("loadstart",function(p){return s.toggleDisplay(p)}),n.on("texttrackchange",l),n.on("loadedmetadata",function(p){return s.preselectTrack(p)}),n.ready(Nr(zt()(s),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",l),n.on("playerresize",l),De().addEventListener("orientationchange",l),n.on("dispose",function(){return De().removeEventListener("orientationchange",l)});for(var p=this.options_.playerOptions.tracks||[],y=0;y<p.length;y++)this.player_.addRemoteTextTrack(p[y],!0);this.preselectTrack()}})),s}ht()(t,a);var r=t.prototype;return r.preselectTrack=function(){for(var l,p,y,e={captions:1,subtitles:1},i=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,k=0;k<i.length;k++){var $=i[k];s&&s.enabled&&s.language&&s.language===$.language&&$.kind in e?$.kind===s.kind?y=$:y||(y=$):s&&!s.enabled?(y=null,l=null,p=null):$.default&&("descriptions"!==$.kind||l?$.kind in e&&!p&&(p=$):l=$)}y?y.mode="showing":p?p.mode="showing":l&&(l.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){"function"==typeof De().WebVTT&&De().WebVTT.processCues(De(),[],this.el_)},r.updateDisplay=function(){var e=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){for(var s=[],l=0;l<e.length;++l){var p=e[l];"showing"===p.mode&&s.push(p)}this.updateForTrack(s)}else{for(var y=null,k=null,$=e.length;$--;){var z=e[$];"showing"===z.mode&&("descriptions"===z.kind?y=z:k=z)}k?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(k)):y&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(y))}},r.updateDisplayState=function(e){for(var i=this.player_.textTrackSettings.getValues(),s=e.activeCues,l=s.length;l--;){var p=s[l];if(p){var y=p.displayState;if(i.color&&(y.firstChild.style.color=i.color),i.textOpacity&&P_(y.firstChild,"color",D_(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(y.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&P_(y.firstChild,"backgroundColor",D_(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?P_(y,"backgroundColor",D_(i.windowColor,i.windowOpacity)):y.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?y.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Hi:"raised"===i.edgeStyle?y.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Hi:"depressed"===i.edgeStyle?y.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Hi:"uniform"===i.edgeStyle&&(y.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Hi)),i.fontPercent&&1!==i.fontPercent){var k=De().parseFloat(y.style.fontSize);y.style.fontSize=k*i.fontPercent+"px",y.style.height="auto",y.style.top="auto"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?y.firstChild.style.fontVariant="small-caps":y.firstChild.style.fontFamily=QA[i.fontFamily])}}},r.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof De().WebVTT&&!e.every(function(ae){return!ae.activeCues})){for(var i=[],s=0;s<e.length;++s)for(var l=e[s],p=0;p<l.activeCues.length;++p)i.push(l.activeCues[p]);De().WebVTT.processCues(De(),i,this.el_);for(var y=0;y<e.length;++y){for(var k=e[y],$=0;$<k.activeCues.length;++$){var z=k.activeCues[$].displayState;Ja(z,"vjs-text-track-cue"),Ja(z,"vjs-text-track-cue-"+(k.language?k.language:y)),k.language&&Sl(z,"lang",k.language)}this.player_.textTrackSettings&&this.updateDisplayState(k)}}},t}(lt);lt.registerComponent("TextTrackDisplay",$A);var JA=function(a){function t(){return a.apply(this,arguments)||this}return ht()(t,a),t.prototype.createEl=function(){var e=this.player_.isAudio(),i=this.localize(e?"Audio Player":"Video Player"),s=hr("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),l=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return l.appendChild(s),l},t}(lt);lt.registerComponent("LoadingSpinner",JA);var sa=function(a){function t(){return a.apply(this,arguments)||this}ht()(t,a);var r=t.prototype;return r.createEl=function(e,i,s){void 0===i&&(i={}),void 0===s&&(s={});var l=hr("button",i=Zr({className:this.buildCSSClass()},i),s=Zr({type:"button"},s));return l.appendChild(hr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(l),l},r.addChild=function(e,i){return void 0===i&&(i={}),ar.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),lt.prototype.addChild.call(this,e,i)},r.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.handleKeyDown=function(e){qt().isEventKey(e,"Space")||qt().isEventKey(e,"Enter")?e.stopPropagation():a.prototype.handleKeyDown.call(this,e)},t}(sv);lt.registerComponent("Button",sa);var JE=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).mouseused_=!1,i.on("mousedown",function(s){return i.handleMouseDown(s)}),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.handleClick=function(e){var i=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Ca(i),void(this.player_.tech(!0)&&(!Vc&&!Gc||!s)&&this.player_.tech(!0).focus())}var l=this.player_.getChild("controlBar"),p=l&&l.getChild("playToggle");if(p){var y=function(){return p.focus()};Xc(i)?i.then(y,function(){}):this.setTimeout(y,1)}else this.player_.tech(!0).focus()},r.handleKeyDown=function(e){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,e)},r.handleMouseDown=function(e){this.mouseused_=!0},t}(sa);JE.prototype.controlText_="Play Video",lt.registerComponent("BigPlayButton",JE);var eC=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).controlText(e&&e.controlText||i.localize("Close")),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},r.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},r.handleKeyDown=function(e){qt().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},t}(sa);lt.registerComponent("CloseButton",eC);var eb=function(a){function t(n,e){var i;return void 0===e&&(e={}),i=a.call(this,n,e)||this,e.replay=void 0===e.replay||e.replay,i.on(n,"play",function(s){return i.handlePlay(s)}),i.on(n,"pause",function(s){return i.handlePause(s)}),e.replay&&i.on(n,"ended",function(s){return i.handleEnded(s)}),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},r.handleClick=function(e){this.player_.paused()?Ca(this.player_.play()):this.player_.pause()},r.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},r.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.handleEnded=function(e){var i=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return i.handleSeeked(s)})},t}(sa);eb.prototype.controlText_="Play",lt.registerComponent("PlayToggle",eb);var tb=function(t,r){t=t<0?0:t;var n=Math.floor(t%60),e=Math.floor(t/60%60),i=Math.floor(t/3600),s=Math.floor(r/60%60),l=Math.floor(r/3600);return(isNaN(t)||t===1/0)&&(i=e=n="-"),(i=i>0||l>0?i+":":"")+(e=((i||s>=10)&&e<10?"0"+e:e)+":")+(n<10?"0"+n:n)},w_=tb;function Ll(a,t){return void 0===t&&(t=a),w_(a,t)}var Rl=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).on(n,["timeupdate","ended"],function(s){return i.updateContent(s)}),i.updateTextNode_(),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){var e=this.buildCSSClass(),i=a.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),s=hr("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return i.appendChild(s),this.contentEl_=hr("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),i.appendChild(this.contentEl_),i},r.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},r.updateTextNode_=function(e){var i=this;void 0===e&&(e=0),e=Ll(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(i.contentEl_){var s=i.textNode_;s&&i.contentEl_.firstChild!==s&&(s=null,ar.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),i.textNode_=mt().createTextNode(i.formattedTime_),i.textNode_&&(s?i.contentEl_.replaceChild(i.textNode_,s):i.contentEl_.appendChild(i.textNode_))}}))},r.updateContent=function(e){},t}(lt);Rl.prototype.labelText_="Time",Rl.prototype.controlText_="Time",lt.registerComponent("TimeDisplay",Rl);var O_=function(a){function t(){return a.apply(this,arguments)||this}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updateContent=function(e){var i;i=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)},t}(Rl);O_.prototype.labelText_="Current Time",O_.prototype.controlText_="Current Time",lt.registerComponent("CurrentTimeDisplay",O_);var I_=function(a){function t(n,e){var i,s=function(p){return i.updateContent(p)};return(i=a.call(this,n,e)||this).on(n,"durationchange",s),i.on(n,"loadstart",s),i.on(n,"loadedmetadata",s),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updateContent=function(e){var i=this.player_.duration();this.updateTextNode_(i)},t}(Rl);I_.prototype.labelText_="Duration",I_.prototype.controlText_="Duration",lt.registerComponent("DurationDisplay",I_);var nC=function(a){function t(){return a.apply(this,arguments)||this}return ht()(t,a),t.prototype.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=a.prototype.createEl.call(this,"div"),s=a.prototype.createEl.call(this,"span",{textContent:"/"});return i.appendChild(s),e.appendChild(i),e},t}(lt);lt.registerComponent("TimeDivider",nC);var L_=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).on(n,"durationchange",function(s){return i.updateContent(s)}),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},r.createEl=function(){var e=a.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&e.insertBefore(hr("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},r.updateContent=function(e){var i;"number"==typeof this.player_.duration()&&(i=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(i))},t}(Rl);L_.prototype.labelText_="Remaining Time",L_.prototype.controlText_="Remaining Time",lt.registerComponent("RemainingTimeDisplay",L_);var iC=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).updateShowing(),i.on(i.player(),"durationchange",function(s){return i.updateShowing(s)}),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=hr("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(hr("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(mt().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},r.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},r.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(lt);lt.registerComponent("LiveDisplay",iC);var rb=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(s){return i.updateLiveEdgeStatus(s)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){var e=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=hr("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},r.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},r.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},r.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},t}(sa);rb.prototype.controlText_="Seek to live, currently playing live",lt.registerComponent("SeekToLive",rb);var ov=function(t,r,n){return t=Number(t),Math.min(n,Math.max(r,isNaN(t)?r:t))},R_=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).handleMouseDown_=function(s){return i.handleMouseDown(s)},i.handleMouseUp_=function(s){return i.handleMouseUp(s)},i.handleKeyDown_=function(s){return i.handleKeyDown(s)},i.handleClick_=function(s){return i.handleClick(s)},i.handleMouseMove_=function(s){return i.handleMouseMove(s)},i.update_=function(s){return i.update(s)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}ht()(t,a);var r=t.prototype;return r.enabled=function(){return this.enabled_},r.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.createEl=function(e,i,s){return void 0===i&&(i={}),void 0===s&&(s={}),i.className=i.className+" vjs-slider",i=Zr({tabIndex:0},i),s=Zr({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),a.prototype.createEl.call(this,e,i,s)},r.handleMouseDown=function(e){var i=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!$a&&e.preventDefault(),TE(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},r.handleMouseMove=function(e){},r.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;EE(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},r.update=function(){var e=this;if(this.el_&&this.bar){var i=this.getProgress();return i===this.progress_||(this.progress_=i,this.requestNamedAnimationFrame("Slider#update",function(){var s=e.vertical()?"height":"width";e.bar.el().style[s]=(100*i).toFixed(2)+"%"})),i}},r.getProgress=function(){return Number(ov(this.getPercent(),0,1).toFixed(4))},r.calculateDistance=function(e){var i=Zp(this.el_,e);return this.vertical()?i.y:i.x},r.handleKeyDown=function(e){qt().isEventKey(e,"Left")||qt().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):qt().isEventKey(e,"Right")||qt().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,e)},r.handleClick=function(e){e.stopPropagation(),e.preventDefault()},r.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},t}(lt);lt.registerComponent("Slider",R_);var M_=function(t,r){return ov(t/r*100,0,100).toFixed(2)+"%"},aC=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).partEls_=[],i.on(n,"progress",function(s){return i.update(s)}),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),i=hr("span",{className:"vjs-control-text"}),s=hr("span",{textContent:this.localize("Loaded")}),l=mt().createTextNode(": ");return this.percentageEl_=hr("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(i),i.appendChild(s),i.appendChild(l),i.appendChild(this.percentageEl_),e},r.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},r.update=function(e){var i=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=i.player_.liveTracker,l=i.player_.buffered(),p=s&&s.isLive()?s.seekableEnd():i.player_.duration(),y=i.player_.bufferedEnd(),k=i.partEls_,$=M_(y,p);i.percent_!==$&&(i.el_.style.width=$,xo(i.percentageEl_,$),i.percent_=$);for(var z=0;z<l.length;z++){var ae=l.start(z),pe=l.end(z),me=k[z];me||(me=i.el_.appendChild(hr()),k[z]=me),(me.dataset.start!==ae||me.dataset.end!==pe)&&(me.dataset.start=ae,me.dataset.end=pe,me.style.left=M_(ae,y),me.style.width=M_(pe-ae,y))}for(var Ee=k.length;Ee>l.length;Ee--)i.el_.removeChild(k[Ee-1]);k.length=l.length})},t}(lt);lt.registerComponent("LoadProgressBar",aC);var sC=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).update=rs(Nr(zt()(i),i.update),30),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},r.update=function(e,i,s){var l=Yc(this.el_),p=Al(this.player_.el()),y=e.width*i;if(p&&l){var k=e.left-p.left+y,$=e.width-y+(p.right-e.right),z=l.width/2;k<z?z+=z-k:$<z&&(z=$),z<0?z=0:z>l.width&&(z=l.width),z=Math.round(z),this.el_.style.right="-"+z+"px",this.write(s)}},r.write=function(e){xo(this.el_,e)},r.updateTime=function(e,i,s,l){var p=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var y,k=p.player_.duration();if(p.player_.liveTracker&&p.player_.liveTracker.isLive()){var $=p.player_.liveTracker.liveWindow(),z=$-i*$;y=(z<1?"":"-")+Ll(z,$)}else y=Ll(s,k);p.update(e,i,y),l&&l()})},t}(lt);lt.registerComponent("TimeTooltip",sC);var k_=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).update=rs(Nr(zt()(i),i.update),30),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},r.update=function(e,i){var s=this.getChild("timeTooltip");if(s){var l=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,i,l)}},t}(lt);k_.prototype.options_={children:[]},!ei&&!Qa&&k_.prototype.options_.children.push("timeTooltip"),lt.registerComponent("PlayProgressBar",k_);var nb=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).update=rs(Nr(zt()(i),i.update),30),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(e,i){var s=this,l=i*this.player_.duration();this.getChild("timeTooltip").updateTime(e,i,l,function(){s.el_.style.left=e.width*i+"px"})},t}(lt);nb.prototype.options_={children:["timeTooltip"]},lt.registerComponent("MouseTimeDisplay",nb);var F_=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).setEventHandlers_(),i}ht()(t,a);var r=t.prototype;return r.setEventHandlers_=function(){var e=this;this.update_=Nr(this,this.update),this.update=rs(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(i){return e.enableInterval_(i)},this.disableIntervalHandler_=function(i){return e.disableInterval_(i)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in mt()&&"visibilityState"in mt()&&this.on(mt(),"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(e){"hidden"===mt().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},r.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},r.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update=function(e){var i=this;if("hidden"!==mt().visibilityState){var s=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var l=i.player_.ended()?i.player_.duration():i.getCurrentTime_(),p=i.player_.liveTracker,y=i.player_.duration();p&&p.isLive()&&(y=i.player_.liveTracker.liveCurrentTime()),i.percent_!==s&&(i.el_.setAttribute("aria-valuenow",(100*s).toFixed(2)),i.percent_=s),(i.currentTime_!==l||i.duration_!==y)&&(i.el_.setAttribute("aria-valuetext",i.localize("progress bar timing: currentTime={1} duration={2}",[Ll(l,y),Ll(y,y)],"{1} of {2}")),i.currentTime_=l,i.duration_=y),i.bar&&i.bar.update(Al(i.el()),i.getProgress())}),s}},r.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.getPercent=function(){var i,e=this.getCurrentTime_(),s=this.player_.liveTracker;return s&&s.isLive()?(i=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(i=1)):i=e/this.player_.duration(),i},r.handleMouseDown=function(e){zc(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,e))},r.handleMouseMove=function(e,i){if(void 0===i&&(i=!1),zc(e)){!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,l=this.calculateDistance(e),p=this.player_.liveTracker;if(p&&p.isLive()){if(l>=.99)return void p.seekToLiveEdge();var y=p.seekableStart(),k=p.liveCurrentTime();if((s=y+l*p.liveWindow())>=k&&(s=k),s<=y&&(s=y+.1),s===1/0)return}else(s=l*this.player_.duration())===this.player_.duration()&&(s-=.1);this.userSeek_(s)}},r.enable=function(){a.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},r.disable=function(){a.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},r.handleMouseUp=function(e){a.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ca(this.player_.play()):this.update_()},r.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},r.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},r.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(e){var i=this.player_.liveTracker;if(qt().isEventKey(e,"Space")||qt().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(qt().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(qt().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(qt()(e))){e.preventDefault(),e.stopPropagation();var s=10*(qt().codes[qt()(e)]-qt().codes[0])/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else qt().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):qt().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,e)},r.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in mt()&&"visibilityState"in mt()&&this.off(mt(),"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},t}(R_);F_.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!ei&&!Qa&&F_.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),lt.registerComponent("SeekBar",F_);var ab=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).handleMouseMove=rs(Nr(zt()(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=rs(Nr(zt()(i),i.handleMouseSeek),30),i.handleMouseUpHandler_=function(s){return i.handleMouseUp(s)},i.handleMouseDownHandler_=function(s){return i.handleMouseDown(s)},i.enable(),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(e){var i=this.getChild("seekBar");if(i){var s=i.getChild("playProgressBar"),l=i.getChild("mouseTimeDisplay");if(s||l){var p=i.el(),y=Yc(p),k=Zp(p,e).x;k=ov(k,0,1),l&&l.update(y,k),s&&s.update(y,i.getProgress())}}},r.handleMouseSeek=function(e){var i=this.getChild("seekBar");i&&i.handleMouseMove(e)},r.enabled=function(){return this.enabled_},r.disable=function(){if(this.children().forEach(function(i){return i.disable&&i.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Ca(this.player_.play())}},r.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},r.handleMouseDown=function(e){var i=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(e){var i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(lt);ab.prototype.options_={children:["seekBar"]},lt.registerComponent("ProgressControl",ab);var sb=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).on(n,["enterpictureinpicture","leavepictureinpicture"],function(s){return i.handlePictureInPictureChange(s)}),i.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(s){return i.handlePictureInPictureEnabledChange(s)}),i.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===n.currentType().substring(0,5)||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),i.hide()):i.show()}),i.disable(),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnabledChange=function(){mt().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},r.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},r.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(sa);sb.prototype.controlText_="Picture-in-Picture",lt.registerComponent("PictureInPictureToggle",sb);var ob=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).on(n,"fullscreenchange",function(s){return i.handleFullscreenChange(s)}),!1===mt()[n.fsApi_.fullscreenEnabled]&&i.disable(),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(sa);ob.prototype.controlText_="Fullscreen",lt.registerComponent("FullscreenToggle",ob);var uC=function(a){function t(){return a.apply(this,arguments)||this}return ht()(t,a),t.prototype.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},t}(lt);lt.registerComponent("VolumeLevel",uC);var lC=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).update=rs(Nr(zt()(i),i.update),30),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},r.update=function(e,i,s,l){if(!s){var p=Al(this.el_),y=Al(this.player_.el()),k=e.width*i;if(!y||!p)return;var $=e.left-y.left+k,z=e.width-k+(y.right-e.right),ae=p.width/2;$<ae?ae+=ae-$:z<ae&&(ae=z),ae<0?ae=0:ae>p.width&&(ae=p.width),this.el_.style.right="-"+ae+"px"}this.write(l+"%")},r.write=function(e){xo(this.el_,e)},r.updateVolume=function(e,i,s,l,p){var y=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){y.update(e,i,s,l.toFixed(0)),p&&p()})},t}(lt);lt.registerComponent("VolumeLevelTooltip",lC);var ub=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).update=rs(Nr(zt()(i),i.update),30),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(e,i,s){var l=this,p=100*i;this.getChild("volumeLevelTooltip").updateVolume(e,i,s,p,function(){s?l.el_.style.bottom=e.height*i+"px":l.el_.style.left=e.width*i+"px"})},t}(lt);ub.prototype.options_={children:["volumeLevelTooltip"]},lt.registerComponent("MouseVolumeLevelDisplay",ub);var lv=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).on("slideractive",function(s){return i.updateLastVolume_(s)}),i.on(n,"volumechange",function(s){return i.updateARIAAttributes(s)}),n.ready(function(){return i.updateARIAAttributes()}),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.handleMouseDown=function(e){zc(e)&&a.prototype.handleMouseDown.call(this,e)},r.handleMouseMove=function(e){var i=this.getChild("mouseVolumeLevelDisplay");if(i){var s=this.el(),l=Al(s),p=this.vertical(),y=Zp(s,e);y=ov(y=p?y.y:y.x,0,1),i.update(l,y,p)}zc(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},r.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.updateARIAAttributes=function(e){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")},r.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},r.updateLastVolume_=function(){var e=this,i=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(i)})},t}(R_);lv.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!ei&&!Qa&&lv.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),lv.prototype.playerEvent="volumechange",lt.registerComponent("VolumeBar",lv);var lb=function(a){function t(n,e){var i;return void 0===e&&(e={}),e.vertical=e.vertical||!1,(typeof e.volumeBar>"u"||Hc(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),i=a.call(this,n,e)||this,function(t,r){r.tech_&&!r.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(zt()(i),n),i.throttledHandleMouseMove=rs(Nr(zt()(i),i.handleMouseMove),30),i.handleMouseUpHandler_=function(s){return i.handleMouseUp(s)},i.on("mousedown",function(s){return i.handleMouseDown(s)}),i.on("touchstart",function(s){return i.handleMouseDown(s)}),i.on("mousemove",function(s){return i.handleMouseMove(s)}),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},r.handleMouseDown=function(e){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(e){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},r.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(lt);lb.prototype.options_={children:["volumeBar"]},lt.registerComponent("VolumeControl",lb);var fb=function(a){function t(n,e){var i;return i=a.call(this,n,e)||this,function(t,r){r.tech_&&!r.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(r,"loadstart",function(){r.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(zt()(i),n),i.on(n,["loadstart","volumechange"],function(s){return i.update(s)}),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},r.handleClick=function(e){var i=this.player_.volume(),s=this.player_.lastVolume_();0===i?(this.player_.volume(s<.1?.1:s),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},r.update=function(e){this.updateIcon_(),this.updateControlText_()},r.updateIcon_=function(){var e=this.player_.volume(),i=3;ei&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?i=0:e<.33?i=1:e<.67&&(i=2);for(var s=0;s<4;s++)Kc(this.el_,"vjs-vol-"+s);Ja(this.el_,"vjs-vol-"+i)},r.updateControlText_=function(){var i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},t}(sa);fb.prototype.controlText_="Mute",lt.registerComponent("MuteToggle",fb);var cb=function(a){function t(n,e){var i;return void 0===e&&(e={}),e.inline=!(typeof e.inline<"u")||e.inline,(typeof e.volumeControl>"u"||Hc(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),(i=a.call(this,n,e)||this).handleKeyPressHandler_=function(s){return i.handleKeyPress(s)},i.on(n,["loadstart"],function(s){return i.volumePanelState_(s)}),i.on(i.muteToggle,"keyup",function(s){return i.handleKeyPress(s)}),i.on(i.volumeControl,"keyup",function(s){return i.handleVolumeControlKeyUp(s)}),i.on("keydown",function(s){return i.handleKeyPress(s)}),i.on("mouseover",function(s){return i.handleMouseOver(s)}),i.on("mouseout",function(s){return i.handleMouseOut(s)}),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}ht()(t,a);var r=t.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},r.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(e){qt().isEventKey(e,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(e){this.addClass("vjs-hover"),bi(mt(),"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(e){this.removeClass("vjs-hover"),Hn(mt(),"keyup",this.handleKeyPressHandler_)},r.handleKeyPress=function(e){qt().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(lt);cb.prototype.options_={children:["muteToggle","volumeControl"]},lt.registerComponent("VolumePanel",cb);var db=function(a){function t(n,e){var i;return i=a.call(this,n,e)||this,e&&(i.menuButton_=e.menuButton),i.focusedChild_=-1,i.on("keydown",function(s){return i.handleKeyDown(s)}),i.boundHandleBlur_=function(s){return i.handleBlur(s)},i.boundHandleTapClick_=function(s){return i.handleTapClick(s)},i}ht()(t,a);var r=t.prototype;return r.addEventListenerForItem=function(e){e instanceof lt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(e){e instanceof lt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),a.prototype.removeChild.call(this,e)},r.addItem=function(e){var i=this.addChild(e);i&&this.addEventListenerForItem(i)},r.createEl=function(){this.contentEl_=hr(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),bi(i,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),i},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},r.handleBlur=function(e){var i=e.relatedTarget||mt().activeElement;if(!this.children().some(function(l){return l.el()===i})){var s=this.menuButton_;s&&s.buttonPressed_&&i!==s.el().firstChild&&s.unpressButton()}},r.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var i=this.children();if(!Array.isArray(i))return;var s=i.filter(function(l){return l.el()===e.target})[0];if(!s)return;"CaptionSettingsMenuItem"!==s.name()&&this.menuButton_.focus()}},r.handleKeyDown=function(e){qt().isEventKey(e,"Left")||qt().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(qt().isEventKey(e,"Right")||qt().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},r.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.focus=function(e){void 0===e&&(e=0);var i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(e<0?e=0:e>=i.length&&(e=i.length-1),this.focusedChild_=e,i[e].el_.focus())},t}(lt);lt.registerComponent("Menu",db);var U_=function(a){function t(n,e){var i;void 0===e&&(e={}),(i=a.call(this,n,e)||this).menuButton_=new sa(n,e),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var s=sa.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+s,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var l=function(y){return i.handleClick(y)};return i.handleMenuKeyUp_=function(p){return i.handleMenuKeyUp(p)},i.on(i.menuButton_,"tap",l),i.on(i.menuButton_,"click",l),i.on(i.menuButton_,"keydown",function(p){return i.handleKeyDown(p)}),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),bi(mt(),"keyup",i.handleMenuKeyUp_)}),i.on("mouseleave",function(p){return i.handleMouseLeave(p)}),i.on("keydown",function(p){return i.handleSubmenuKeyDown(p)}),i}ht()(t,a);var r=t.prototype;return r.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},r.createMenu=function(){var e=new db(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var i=hr("li",{className:"vjs-menu-title",textContent:tn(this.options_.title),tabIndex:-1}),s=new lt(this.player_,{el:i});e.addItem(s)}if(this.items=this.createItems(),this.items)for(var l=0;l<this.items.length;l++)e.addItem(this.items[l]);return e},r.createItems=function(){},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+sa.prototype.buildCSSClass()+" "+a.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+a.prototype.buildCSSClass.call(this)},r.controlText=function(e,i){return void 0===i&&(i=this.menuButton_.el()),this.menuButton_.controlText(e,i)},r.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},r.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Hn(mt(),"keyup",this.handleMenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(e){qt().isEventKey(e,"Esc")||qt().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),qt().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(qt().isEventKey(e,"Up")||qt().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(e){(qt().isEventKey(e,"Esc")||qt().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},r.handleSubmenuKeyDown=function(e){(qt().isEventKey(e,"Esc")||qt().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),qt().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ei&&vE())return;this.menu.focus()}},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(lt);lt.registerComponent("MenuButton",U_);var B_=function(a){function t(r,n){var e,i=n.tracks;if((e=a.call(this,r,n)||this).items.length<=1&&e.hide(),!i)return zt()(e);var s=Nr(zt()(e),e.update);return i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),i.addEventListener("labelchange",s),e.player_.on("ready",s),e.player_.on("dispose",function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s),i.removeEventListener("labelchange",s)}),e}return ht()(t,a),t}(U_);lt.registerComponent("TrackButton",B_);var cC=["Tab","Esc","Up","Down","Right","Left"],Qc=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).selectable=e.selectable,i.isSelected_=e.selected||!1,i.multiSelectable=e.multiSelectable,i.selected(i.isSelected_),i.el_.setAttribute("role",i.selectable?i.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),i}ht()(t,a);var r=t.prototype;return r.createEl=function(e,i,s){this.nonIconControl=!0;var l=a.prototype.createEl.call(this,"li",Zr({className:"vjs-menu-item",tabIndex:-1},i),s);return l.replaceChild(hr("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),l.querySelector(".vjs-icon-placeholder")),l},r.handleKeyDown=function(e){cC.some(function(i){return qt().isEventKey(e,i)})||a.prototype.handleKeyDown.call(this,e)},r.handleClick=function(e){this.selected(!0)},r.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(sv);lt.registerComponent("MenuItem",Qc);var $c=function(a){function t(n,e){var i,s=e.track,l=n.textTracks();e.label=s.label||s.language||"Unknown",e.selected="showing"===s.mode,(i=a.call(this,n,e)||this).track=s,i.kinds=(e.kinds||[e.kind||i.track.kind]).filter(Boolean);var k,p=function(){for(var z=arguments.length,ae=new Array(z),pe=0;pe<z;pe++)ae[pe]=arguments[pe];i.handleTracksChange.apply(zt()(i),ae)},y=function(){for(var z=arguments.length,ae=new Array(z),pe=0;pe<z;pe++)ae[pe]=arguments[pe];i.handleSelectedLanguageChange.apply(zt()(i),ae)};return n.on(["loadstart","texttrackchange"],p),l.addEventListener("change",p),l.addEventListener("selectedlanguagechange",y),i.on("dispose",function(){n.off(["loadstart","texttrackchange"],p),l.removeEventListener("change",p),l.removeEventListener("selectedlanguagechange",y)}),void 0===l.onchange&&i.on(["tap","click"],function(){if("object"!=typeof De().Event)try{k=new(De().Event)("change")}catch{}k||(k=mt().createEvent("Event")).initEvent("change",!0,!0),l.dispatchEvent(k)}),i.handleTracksChange(),i}ht()(t,a);var r=t.prototype;return r.handleClick=function(e){var i=this.track,s=this.player_.textTracks();if(a.prototype.handleClick.call(this,e),s)for(var l=0;l<s.length;l++){var p=s[l];-1!==this.kinds.indexOf(p.kind)&&(p===i?"showing"!==p.mode&&(p.mode="showing"):"disabled"!==p.mode&&(p.mode="disabled"))}},r.handleTracksChange=function(e){var i="showing"===this.track.mode;i!==this.isSelected_&&this.selected(i)},r.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,a.prototype.dispose.call(this)},t}(Qc);lt.registerComponent("TextTrackMenuItem",$c);var hb=function(a){function t(n,e){return e.track={player:n,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.track.label=e.label?e.label:e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,a.call(this,n,e)||this}ht()(t,a);var r=t.prototype;return r.handleTracksChange=function(e){for(var i=this.player().textTracks(),s=!0,l=0,p=i.length;l<p;l++){var y=i[l];if(this.options_.kinds.indexOf(y.kind)>-1&&"showing"===y.mode){s=!1;break}}s!==this.isSelected_&&this.selected(s)},r.handleSelectedLanguageChange=function(e){for(var i=this.player().textTracks(),s=!0,l=0,p=i.length;l<p;l++){var y=i[l];if(["captions","descriptions","subtitles"].indexOf(y.kind)>-1&&"showing"===y.mode){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}($c);lt.registerComponent("OffTextTrackMenuItem",hb);var Ml=function(a){function t(n,e){return void 0===e&&(e={}),e.tracks=n.textTracks(),a.call(this,n,e)||this}return ht()(t,a),t.prototype.createItems=function(e,i){var s;void 0===e&&(e=[]),void 0===i&&(i=$c),this.label_&&(s=this.label_+" off"),e.push(new hb(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var l=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var p=0;p<l.length;p++){var y=l[p];if(this.kinds_.indexOf(y.kind)>-1){var k=new i(this.player_,{track:y,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});k.addClass("vjs-"+y.kind+"-menu-item"),e.push(k)}}return e},t}(B_);lt.registerComponent("TextTrackButton",Ml);var pb=function(a){function t(n,e){var i,s=e.track,l=e.cue,p=n.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=l.text,e.selected=l.startTime<=p&&p<l.endTime,(i=a.call(this,n,e)||this).track=s,i.cue=l,i}return ht()(t,a),t.prototype.handleClick=function(e){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(Qc);lt.registerComponent("ChaptersTrackMenuItem",pb);var N_=function(a){function t(n,e,i){var s;return(s=a.call(this,n,e,i)||this).selectCurrentItem_=function(){s.items.forEach(function(l){l.selected(s.track_.activeCues[0]===l.cue)})},s}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},r.update=function(e){if(!e||!e.track||"chapters"===e.track.kind){var i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),a.prototype.update.call(this)):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&a.prototype.update.call(this)}},r.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},r.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],i=e.length-1;i>=0;i--){var s=e[i];if(s.kind===this.kind_)return s}},r.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(tn(this.kind_))},r.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},r.createItems=function(){var e=[];if(!this.track_)return e;var i=this.track_.cues;if(!i)return e;for(var s=0,l=i.length;s<l;s++){var y=new pb(this.player_,{track:this.track_,cue:i[s]});e.push(y)}return e},t}(Ml);N_.prototype.kind_="chapters",N_.prototype.controlText_="Chapters",lt.registerComponent("ChaptersButton",N_);var j_=function(a){function t(n,e,i){var s;s=a.call(this,n,e,i)||this;var l=n.textTracks(),p=Nr(zt()(s),s.handleTracksChange);return l.addEventListener("change",p),s.on("dispose",function(){l.removeEventListener("change",p)}),s}ht()(t,a);var r=t.prototype;return r.handleTracksChange=function(e){for(var i=this.player().textTracks(),s=!1,l=0,p=i.length;l<p;l++){var y=i[l];if(y.kind!==this.kind_&&"showing"===y.mode){s=!0;break}}s?this.disable():this.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(Ml);j_.prototype.kind_="descriptions",j_.prototype.controlText_="Descriptions",lt.registerComponent("DescriptionsButton",j_);var H_=function(a){function t(n,e,i){return a.call(this,n,e,i)||this}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(Ml);H_.prototype.kind_="subtitles",H_.prototype.controlText_="Subtitles",lt.registerComponent("SubtitlesButton",H_);var W_=function(a){function t(n,e){var i;return e.track={player:n,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",(i=a.call(this,n,e)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+e.kind+" settings dialog"),i}return ht()(t,a),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}($c);lt.registerComponent("CaptionSettingsMenuItem",W_);var G_=function(a){function t(n,e,i){return a.call(this,n,e,i)||this}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new W_(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,e)},t}(Ml);G_.prototype.kind_="captions",G_.prototype.controlText_="Captions",lt.registerComponent("CaptionsButton",G_);var vb=function(a){function t(){return a.apply(this,arguments)||this}return ht()(t,a),t.prototype.createEl=function(e,i,s){var l=a.prototype.createEl.call(this,e,i,s),p=l.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(p.appendChild(hr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),p.appendChild(hr("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),l},t}($c);lt.registerComponent("SubsCapsMenuItem",vb);var V_=function(a){function t(n,e){var i;return void 0===e&&(e={}),(i=a.call(this,n,e)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(tn(i.label_)),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new W_(this.player_,{kind:this.label_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,e,vb)},t}(Ml);V_.prototype.kinds_=["captions","subtitles"],V_.prototype.controlText_="Subtitles",lt.registerComponent("SubsCapsButton",V_);var gb=function(a){function t(n,e){var i,s=e.track,l=n.audioTracks();e.label=s.label||s.language||"Unknown",e.selected=s.enabled,(i=a.call(this,n,e)||this).track=s,i.addClass("vjs-"+s.kind+"-menu-item");var p=function(){for(var k=arguments.length,$=new Array(k),z=0;z<k;z++)$[z]=arguments[z];i.handleTracksChange.apply(zt()(i),$)};return l.addEventListener("change",p),i.on("dispose",function(){l.removeEventListener("change",p)}),i}ht()(t,a);var r=t.prototype;return r.createEl=function(e,i,s){var l=a.prototype.createEl.call(this,e,i,s),p=l.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(p.appendChild(hr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),p.appendChild(hr("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),l},r.handleClick=function(e){if(a.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var i=this.player_.audioTracks(),s=0;s<i.length;s++){var l=i[s];l!==this.track&&(l.enabled=l===this.track)}},r.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Qc);lt.registerComponent("AudioTrackMenuItem",gb);var mb=function(a){function t(n,e){return void 0===e&&(e={}),e.tracks=n.audioTracks(),a.call(this,n,e)||this}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var i=this.player_.audioTracks(),s=0;s<i.length;s++)e.push(new gb(this.player_,{track:i[s],selectable:!0,multiSelectable:!1}));return e},t}(B_);mb.prototype.controlText_="Audio Track",lt.registerComponent("AudioTrackButton",mb);var K_=function(a){function t(n,e){var i,s=e.rate,l=parseFloat(s,10);return e.label=s,e.selected=l===n.playbackRate(),e.selectable=!0,e.multiSelectable=!1,(i=a.call(this,n,e)||this).label=s,i.rate=l,i.on(n,"ratechange",function(p){return i.update(p)}),i}ht()(t,a);var r=t.prototype;return r.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},r.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Qc);K_.prototype.contentElType="button",lt.registerComponent("PlaybackRateMenuItem",K_);var yb=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(n,"loadstart",function(s){return i.updateVisibility(s)}),i.on(n,"ratechange",function(s){return i.updateLabel(s)}),i.on(n,"playbackrateschange",function(s){return i.handlePlaybackRateschange(s)}),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){var e=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=hr("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},r.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){for(var e=this.playbackRates(),i=[],s=e.length-1;s>=0;s--)i.push(new K_(this.player(),{rate:e[s]+"x"}));return i},r.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.handleClick=function(e){var i=this.player().playbackRate(),s=this.playbackRates(),p=(s.indexOf(i)+1)%s.length;this.player().playbackRate(s[p])},r.handlePlaybackRateschange=function(e){this.update()},r.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},r.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(U_);yb.prototype.controlText_="Playback Rate",lt.registerComponent("PlaybackRateMenuButton",yb);var _b=function(a){function t(){return a.apply(this,arguments)||this}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},r.createEl=function(e,i,s){return void 0===e&&(e="div"),void 0===i&&(i={}),void 0===s&&(s={}),i.className||(i.className=this.buildCSSClass()),a.prototype.createEl.call(this,e,i,s)},t}(lt);lt.registerComponent("Spacer",_b);var dC=function(a){function t(){return a.apply(this,arguments)||this}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},t}(_b);lt.registerComponent("CustomControlSpacer",dC);var fv=function(a){function t(){return a.apply(this,arguments)||this}return ht()(t,a),t.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(lt);fv.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in mt()&&fv.prototype.options_.children.splice(fv.prototype.options_.children.length-1,0,"pictureInPictureToggle"),lt.registerComponent("ControlBar",fv);var Tb=function(a){function t(n,e){var i;return(i=a.call(this,n,e)||this).on(n,"error",function(s){return i.open(s)}),i}ht()(t,a);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},r.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Pl);Tb.prototype.options_=Bi()({},Pl.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),lt.registerComponent("ErrorDisplay",Tb);var Y_="vjs-text-track-settings",Eb=["#000","Black"],bb=["#00F","Blue"],xb=["#0FF","Cyan"],Sb=["#0F0","Green"],Ab=["#F0F","Magenta"],Cb=["#F00","Red"],Db=["#FFF","White"],Pb=["#FF0","Yellow"],z_=["1","Opaque"],q_=["0.5","Semi-Transparent"],wb=["0","Transparent"],wo={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Eb,Db,Cb,Sb,bb,Pb,Ab,xb]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[z_,q_,wb]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Db,Eb,Cb,Sb,bb,Pb,Ab,xb]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[z_,q_]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[wb,q_,z_]}};function Ob(a,t){if(t&&(a=t(a)),a&&"none"!==a)return a}wo.windowColor.options=wo.backgroundColor.options;var vC=function(a){function t(n,e){var i;return e.temporary=!1,(i=a.call(this,n,e)||this).updateDisplay=i.updateDisplay.bind(zt()(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=hr("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===e.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),Tl(wo,function(s){i.on(i.$(s.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}ht()(t,a);var r=t.prototype;return r.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},r.createElSelect_=function(e,i,s){var l=this;void 0===i&&(i=""),void 0===s&&(s="label");var p=wo[e],y=p.id.replace("%s",this.id_),k=[i,y].join(" ").trim();return["<"+s+' id="'+y+'" class="'+("label"===s?"vjs-label":"")+'">',this.localize(p.label),"</"+s+">",'<select aria-labelledby="'+k+'">'].concat(p.options.map(function($){var z=y+"-"+$[1].replace(/\W+/g,"");return['<option id="'+z+'" value="'+$[0]+'" ','aria-labelledby="'+k+" "+z+'">',l.localize($[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return hr("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return hr("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var e=this.localize("restore all settings to the default values");return hr("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var e=this;return function nA(a,t,r){return void 0===r&&(r=0),sE(a).reduce(function(n,e){return t(n,a[e],e)},r)}(wo,function(i,s,l){var p=function hC(a,t){return Ob(a.options[a.options.selectedIndex].value,t)}(e.$(s.selector),s.parser);return void 0!==p&&(i[l]=p),i},{})},r.setValues=function(e){var i=this;Tl(wo,function(s,l){!function pC(a,t,r){if(t)for(var n=0;n<a.options.length;n++)if(Ob(a.options[n].value,r)===t){a.selectedIndex=n;break}}(i.$(s.selector),e[l],s.parser)})},r.setDefaults=function(){var e=this;Tl(wo,function(i){var s=i.hasOwnProperty("default")?i.default:0;e.$(i.selector).selectedIndex=s})},r.restoreSettings=function(){var e;try{e=JSON.parse(De().localStorage.getItem(Y_))}catch(i){ar.warn(i)}e&&this.setValues(e)},r.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?De().localStorage.setItem(Y_,JSON.stringify(e)):De().localStorage.removeItem(Y_)}catch(i){ar.warn(i)}}},r.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,i=e&&e.subsCapsButton,s=e&&e.captionsButton;i?i.focus():s&&s.focus()},t}(Pl);lt.registerComponent("TextTrackSettings",vC);var gC=function(a){function t(n,e){var i,s=e.ResizeObserver||De().ResizeObserver;null===e.ResizeObserver&&(s=!1);var l=jr({createEl:!s,reportTouchActivity:!1},e);return(i=a.call(this,n,l)||this).ResizeObserver=e.ResizeObserver||De().ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(t,r,n,e){void 0===e&&(e=De());var i,l=function(){var y=this,k=arguments,$=function(){i=null,$=null,t.apply(y,k)};e.clearTimeout(i),i=e.setTimeout($,100)};return l.cancel=function(){e.clearTimeout(i),i=null},l}(function(){i.resizeHandler()},0,0,zt()(i)),s?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(n.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var p=i.debouncedHandler_,y=i.unloadListener_=function(){Hn(this,"resize",p),Hn(this,"unload",y),y=null};bi(i.el_.contentWindow,"unload",y),bi(i.el_.contentWindow,"resize",p)}},i.one("load",i.loadListener_)),i}ht()(t,a);var r=t.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},r.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},t}(lt);lt.registerComponent("ResizeManager",gC);var mC={trackingThreshold:20,liveTolerance:15},yC=function(a){function t(n,e){var i,s=jr(mC,e,{createEl:!1});return(i=a.call(this,n,s)||this).handleVisibilityChange_=function(l){return i.handleVisibilityChange(l)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(l){return i.handlePlay(l)},i.handleFirstTimeupdate_=function(l){return i.handleFirstTimeupdate(l)},i.handleSeeked_=function(l){return i.handleSeeked(l)},i.seekToLiveEdge_=function(l){return i.seekToLiveEdge(l)},i.reset_(),i.on(i.player_,"durationchange",function(l){return i.handleDurationchange(l)}),i.on(i.player_,"canplay",function(){return i.toggleTracking()}),Vc&&"hidden"in mt()&&"visibilityState"in mt()&&i.on(mt(),"visibilitychange",i.handleVisibilityChange_),i}ht()(t,a);var r=t.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(mt().hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var i=Number(De().performance.now().toFixed(4)),s=-1===this.lastTime_?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+s;var l=this.liveCurrentTime(),p=this.player_.currentTime(),y=this.player_.paused()||this.seekedBehindLive_||Math.abs(l-p)>this.options_.liveTolerance;(!this.timeupdateSeen_||l===1/0)&&(y=!1),y!==this.behindLiveEdge_&&(this.behindLiveEdge_=y,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},r.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},r.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},r.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var e=this.player_.seekable(),i=[],s=e?e.length:0;s--;)i.push(e.end(s));return i.length?i.sort()[i.length-1]:1/0},r.seekableStart=function(){for(var e=this.player_.seekable(),i=[],s=e?e.length:0;s--;)i.push(e.start(s));return i.length?i.sort()[0]:0},r.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return"number"==typeof this.trackingInterval_},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(mt(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},t}(lt);lt.registerComponent("LiveTracker",yC);var cv,X_=function(t){var r=t.el();if(r.hasAttribute("src"))return t.triggerSourceset(r.src),!0;var n=t.$$("source"),e=[],i="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var l=n[s].src;l&&-1===e.indexOf(l)&&e.push(l)}return!!e.length&&(1===e.length&&(i=e[0]),t.triggerSourceset(i),!0)},_C=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var r=mt().createElement(this.nodeName.toLowerCase());r.innerHTML=t;for(var n=mt().createDocumentFragment();r.childNodes.length;)n.appendChild(r.childNodes[0]);return this.innerText="",De().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Ib=function(t,r){for(var n={},e=0;e<t.length&&!((n=Object.getOwnPropertyDescriptor(t[e],r))&&n.set&&n.get);e++);return n.enumerable=!0,n.configurable=!0,n},Lb=function(t){var r=t.el();if(!r.resetSourceWatch_){var n={},e=function(t){return Ib([t.el(),De().HTMLMediaElement.prototype,De().Element.prototype,_C],"innerHTML")}(t),i=function(l){return function(){for(var p=arguments.length,y=new Array(p),k=0;k<p;k++)y[k]=arguments[k];var $=l.apply(r,y);return X_(t),$}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){r[s]&&(n[s]=r[s],r[s]=i(n[s]))}),Object.defineProperty(r,"innerHTML",jr(e,{set:i(e.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(n).forEach(function(s){r[s]=n[s]}),Object.defineProperty(r,"innerHTML",e)},t.one("sourceset",r.resetSourceWatch_)}},EC=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?WE(De().Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return De().Element.prototype.setAttribute.call(this,"src",t),t}}),Z_=function(t,r,n,e){void 0===e&&(e=!0);var i=function(p){return Object.defineProperty(t,r,{value:p,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var p=n();return i(p),p}};return e&&(s.set=i),Object.defineProperty(t,r,s)},At=function(a){function t(n,e){var i;i=a.call(this,n,e)||this;var s=n.source,l=!1;if(i.featuresVideoFrameCallback=i.featuresVideoFrameCallback&&"VIDEO"===i.el_.tagName,s&&(i.el_.currentSrc!==s.src||n.tag&&3===n.tag.initNetworkState_)?i.setSource(s):i.handleLateInit_(i.el_),n.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var p=i.el_.childNodes,y=p.length,k=[];y--;){var $=p[y];"track"===$.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_($),i.remoteTextTracks().addTrack($.track),i.textTracks().addTrack($.track),!l&&!i.el_.hasAttribute("crossorigin")&&nv($.src)&&(l=!0)):k.push($))}for(var ae=0;ae<k.length;ae++)i.el_.removeChild(k[ae])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&l&&ar.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(El||a_||lE)&&!0===n.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}ht()(t,a);var r=t.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){!function(t){if(t.featuresSourceset){var r=t.el();if(!r.resetSourceset_){var n=function(t){return Ib([t.el(),De().HTMLMediaElement.prototype,EC],"src")}(t),e=r.setAttribute,i=r.load;Object.defineProperty(r,"src",jr(n,{set:function(l){var p=n.set.call(r,l);return t.triggerSourceset(r.src),p}})),r.setAttribute=function(s,l){var p=e.call(r,s,l);return/src/i.test(s)&&t.triggerSourceset(r.src),p},r.load=function(){var s=i.call(r);return X_(t)||(t.triggerSourceset(""),Lb(t)),s},r.currentSrc?t.triggerSourceset(r.currentSrc):X_(t)||Lb(t),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=i,r.setAttribute=e,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}}(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var i,e=this.textTracks(),s=function(){i=[];for(var y=0;y<e.length;y++){var k=e[y];"metadata"===k.kind&&i.push({track:k,storedMode:k.mode})}};s(),e.addEventListener("change",s),this.on("dispose",function(){return e.removeEventListener("change",s)});var l=function p(){for(var y=0;y<i.length;y++){var k=i[y];"disabled"===k.track.mode&&k.track.mode!==k.storedMode&&(k.track.mode=k.storedMode)}e.removeEventListener("change",p)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",s),e.removeEventListener("change",l),e.addEventListener("change",l)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",l)})},r.overrideNative_=function(e,i){var s=this;if(i===this["featuresNative"+e+"Tracks"]){var l=e.toLowerCase();this[l+"TracksListeners_"]&&Object.keys(this[l+"TracksListeners_"]).forEach(function(p){s.el()[l+"Tracks"].removeEventListener(p,s[l+"TracksListeners_"][p])}),this["featuresNative"+e+"Tracks"]=!i,this[l+"TracksListeners_"]=null,this.proxyNativeTracksForType_(l)}},r.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},r.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},r.proxyNativeTracksForType_=function(e){var i=this,s=ji[e],l=this.el()[s.getterName],p=this[s.getterName]();if(this["featuresNative"+s.capitalName+"Tracks"]&&l&&l.addEventListener){var y={change:function(z){var ae={type:"change",target:p,currentTarget:p,srcElement:p};p.trigger(ae),"text"===e&&i[Il.remoteText.getterName]().trigger(ae)},addtrack:function(z){p.addTrack(z.track)},removetrack:function(z){p.removeTrack(z.track)}},k=function(){for(var z=[],ae=0;ae<p.length;ae++){for(var pe=!1,me=0;me<l.length;me++)if(l[me]===p[ae]){pe=!0;break}pe||z.push(p[ae])}for(;z.length;)p.removeTrack(z.shift())};this[s.getterName+"Listeners_"]=y,Object.keys(y).forEach(function($){var z=y[$];l.addEventListener($,z),i.on("dispose",function(ae){return l.removeEventListener($,z)})}),this.on("loadstart",k),this.on("dispose",function($){return i.off("loadstart",k)})}},r.proxyNativeTracks_=function(){var e=this;ji.names.forEach(function(i){e.proxyNativeTracksForType_(i)})},r.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=mt().createElement("video");var l=jr({},this.options_.tag&&es(this.options_.tag));(!El||!0!==this.options_.nativeControlsForTouch)&&delete l.controls,yE(e,Zr(l,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Sl(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var p=["loop","muted","playsinline","autoplay"],y=0;y<p.length;y++){var k=p[y],$=this.options_[k];typeof $<"u"&&($?Sl(e,k,k):Xp(e,k),e[k]=$)}return e},r.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var i=!1,s=function(){i=!0};this.on("loadstart",s);var l=function(){i||this.trigger("loadstart")};return this.on("loadedmetadata",l),void this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",l),i||this.trigger("loadstart")})}var p=["loadstart"];p.push("loadedmetadata"),e.readyState>=2&&p.push("loadeddata"),e.readyState>=3&&p.push("canplay"),e.readyState>=4&&p.push("canplaythrough"),this.ready(function(){p.forEach(function(y){this.trigger(y)},this)})}},r.setScrubbing=function(e){this.isScrubbing_=e},r.scrubbing=function(){return this.isScrubbing_},r.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&qp?this.el_.fastSeek(e):this.el_.currentTime=e}catch(i){ar(i,"Video is not ready. (Video.js)")}},r.duration=function(){var e=this;return this.el_.duration===1/0&&Qa&&$a&&0===this.el_.currentTime?(this.on("timeupdate",function s(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",s))}),NaN):this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var i=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",i),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){e.off("webkitbeginfullscreen",s),e.off("webkitendfullscreen",i)})}},r.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=De().navigator&&De().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},r.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Ca(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{e.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},r.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):a.prototype.requestVideoFrameCallback.call(this,e)},r.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):a.prototype.cancelVideoFrameCallback.call(this,e)},r.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},r.reset=function(){t.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(e){this.el_.controls=!!e},r.addTextTrack=function(e,i,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,i,s):a.prototype.addTextTrack.call(this,e,i,s)},r.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,e);var i=mt().createElement("track");return e.kind&&(i.kind=e.kind),e.label&&(i.label=e.label),(e.language||e.srclang)&&(i.srclang=e.language||e.srclang),e.default&&(i.default=e.default),e.id&&(i.id=e.id),e.src&&(i.src=e.src),i},r.addRemoteTextTrack=function(e,i){var s=a.prototype.addRemoteTextTrack.call(this,e,i);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},r.removeRemoteTextTrack=function(e){if(a.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var i=this.$$("track"),s=i.length;s--;)(e===i[s]||e===i[s].track)&&this.el().removeChild(i[s])},r.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),De().performance&&"function"==typeof De().performance.now?e.creationTime=De().performance.now():De().performance&&De().performance.timing&&"number"==typeof De().performance.timing.navigationStart&&(e.creationTime=De().Date.now()-De().performance.timing.navigationStart),e},t}(Or);Z_(At,"TEST_VID",function(){if(bl()){var a=mt().createElement("video"),t=mt().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",a.appendChild(t),a}}),At.isSupported=function(){try{At.TEST_VID.volume=.5}catch{return!1}return!(!At.TEST_VID||!At.TEST_VID.canPlayType)},At.canPlayType=function(a){return At.TEST_VID.canPlayType(a)},At.canPlaySource=function(a,t){return At.canPlayType(a.type)},At.canControlVolume=function(){try{var a=At.TEST_VID.volume;At.TEST_VID.volume=a/2+.1;var t=a!==At.TEST_VID.volume;return t&&ei?(De().setTimeout(function(){At&&At.prototype&&(At.prototype.featuresVolumeControl=a!==At.TEST_VID.volume)}),!1):t}catch{return!1}},At.canMuteVolume=function(){try{var a=At.TEST_VID.muted;return At.TEST_VID.muted=!a,At.TEST_VID.muted?Sl(At.TEST_VID,"muted","muted"):Xp(At.TEST_VID,"muted"),a!==At.TEST_VID.muted}catch{return!1}},At.canControlPlaybackRate=function(){if(Qa&&$a&&cE<58)return!1;try{var a=At.TEST_VID.playbackRate;return At.TEST_VID.playbackRate=a/2+.1,a!==At.TEST_VID.playbackRate}catch{return!1}},At.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(mt().createElement("video"),"src",{get:a,set:a}),Object.defineProperty(mt().createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(mt().createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(mt().createElement("audio"),"innerHTML",{get:a,set:a})}catch{return!1}return!0},At.supportsNativeTextTracks=function(){return qp||ei&&$a},At.supportsNativeVideoTracks=function(){return!(!At.TEST_VID||!At.TEST_VID.videoTracks)},At.supportsNativeAudioTracks=function(){return!(!At.TEST_VID||!At.TEST_VID.audioTracks)},At.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var r=a[1];Z_(At.prototype,a[0],function(){return At[r]()},!0)}),At.prototype.featuresVolumeControl=At.canControlVolume(),At.prototype.movingMediaElementInDOM=!ei,At.prototype.featuresFullscreenResize=!0,At.prototype.featuresProgressEvents=!0,At.prototype.featuresTimeupdateEvents=!0,At.prototype.featuresVideoFrameCallback=!(!At.TEST_VID||!At.TEST_VID.requestVideoFrameCallback),At.patchCanPlayType=function(){r_>=4&&!fE&&!$a&&(cv=At.TEST_VID&&At.TEST_VID.constructor.prototype.canPlayType,At.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(a)?"maybe":cv.call(this,a)})},At.unpatchCanPlayType=function(){var a=At.TEST_VID.constructor.prototype.canPlayType;return cv&&(At.TEST_VID.constructor.prototype.canPlayType=cv),a},At.patchCanPlayType(),At.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch{}}()}},At.resetMediaElement=function(a){if(a){for(var t=a.querySelectorAll("source"),r=t.length;r--;)a.removeChild(t[r]);a.removeAttribute("src"),"function"==typeof a.load&&function(){try{a.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){At.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){At.prototype["set"+tn(a)]=function(t){this.el_[a]=t,t?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){At.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){At.prototype["set"+tn(a)]=function(t){this.el_[a]=t}}),["pause","load","play"].forEach(function(a){At.prototype[a]=function(){return this.el_[a]()}}),Or.withSourceHandlers(At),At.nativeSourceHandler={},At.nativeSourceHandler.canPlayType=function(a){try{return At.TEST_VID.canPlayType(a)}catch{return""}},At.nativeSourceHandler.canHandleSource=function(a,t){if(a.type)return At.nativeSourceHandler.canPlayType(a.type);if(a.src){var r=S_(a.src);return At.nativeSourceHandler.canPlayType("video/"+r)}return""},At.nativeSourceHandler.handleSource=function(a,t,r){t.setSrc(a.src)},At.nativeSourceHandler.dispose=function(){},At.registerSourceHandler(At.nativeSourceHandler),Or.registerTech("Html5",At);var Rb=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Q_={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},$_=["tiny","xsmall","small","medium","large","xlarge","huge"],dv={};$_.forEach(function(a){var t="x"===a.charAt(0)?"x-"+a.substring(1):a;dv[a]="vjs-layout-"+t});var SC={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},on=function(a){function t(n,e,i){var s;if(n.id=n.id||e.id||"vjs_video_"+ts(),(e=Zr(t.getTagSettings(n),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof n.closest){var l=n.closest("[lang]");l&&l.getAttribute&&(e.language=l.getAttribute("lang"))}else for(var p=n;p&&1===p.nodeType;){if(es(p).hasOwnProperty("lang")){e.language=p.getAttribute("lang");break}p=p.parentNode}if((s=a.call(this,null,e,i)||this).boundDocumentFullscreenChange_=function(z){return s.documentFullscreenChange_(z)},s.boundFullWindowOnEscKey_=function(z){return s.fullWindowOnEscKey(z)},s.boundUpdateStyleEl_=function(z){return s.updateStyleEl_(z)},s.boundApplyInitTime_=function(z){return s.applyInitTime_(z)},s.boundUpdateCurrentBreakpoint_=function(z){return s.updateCurrentBreakpoint_(z)},s.boundHandleTechClick_=function(z){return s.handleTechClick_(z)},s.boundHandleTechDoubleClick_=function(z){return s.handleTechDoubleClick_(z)},s.boundHandleTechTouchStart_=function(z){return s.handleTechTouchStart_(z)},s.boundHandleTechTouchMove_=function(z){return s.handleTechTouchMove_(z)},s.boundHandleTechTouchEnd_=function(z){return s.handleTechTouchEnd_(z)},s.boundHandleTechTap_=function(z){return s.handleTechTap_(z)},s.isFullscreen_=!1,s.log=aE(s.id_),s.fsApi_=Vp,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&es(n),s.language(s.options_.language),e.languages){var y={};Object.getOwnPropertyNames(e.languages).forEach(function(z){y[z.toLowerCase()]=e.languages[z]}),s.languages_=y}else s.languages_=t.prototype.options_.languages;s.resetCache_(),s.poster_=e.poster||"",s.controls_=!!e.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(z){if("function"!=typeof s[z])throw new Error('plugin "'+z+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),v_(zt()(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(bi(mt(),s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var k=jr(s.options_);e.plugins&&Object.keys(e.plugins).forEach(function(z){s[z](e.plugins[z])}),e.debug&&s.debug(!0),s.options_.playerOptions=k,s.middleware_=[],s.playbackRates(e.playbackRates),s.initChildren(),s.isAudio("audio"===n.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),El&&s.addClass("vjs-touch-enabled"),ei||s.addClass("vjs-workinghover"),t.players[s.id_]=zt()(s);var $="7.20.3".split(".")[0];return s.addClass("vjs-v"+$),s.userActive(!0),s.reportUserActivity(),s.one("play",function(z){return s.listenForUserActivity_(z)}),s.on("stageclick",function(z){return s.handleStageClick_(z)}),s.on("keydown",function(z){return s.handleKeyDown(z)}),s.on("languagechange",function(z){return s.handleLanguagechange(z)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}ht()(t,a);var r=t.prototype;return r.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),Hn(mt(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Hn(mt(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function VA(a){A_[a.id()]=null}(this),ni.names.forEach(function(i){var l=e[ni[i].getterName]();l&&l.off&&l.off()}),a.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},r.createEl=function(){var i,e=this.tag,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),l="video-js"===this.tag.tagName.toLowerCase();s?i=this.el_=e.parentNode:l||(i=this.el_=a.prototype.createEl.call(this,"div"));var p=es(e);if(l){for(i=this.el_=e,e=this.tag=mt().createElement("video");i.children.length;)e.appendChild(i.firstChild);So(i,"video-js")||Ja(i,"video-js"),i.appendChild(e),s=this.playerElIngest_=i,Object.keys(i).forEach(function(pe){try{e[pe]=i[pe]}catch{}})}if(e.setAttribute("tabindex","-1"),p.tabindex="-1",(Vc||$a&&dE)&&(e.setAttribute("role","application"),p.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in p&&delete p.width,"height"in p&&delete p.height,Object.getOwnPropertyNames(p).forEach(function(pe){l&&"class"===pe||i.setAttribute(pe,p[pe]),l&&e.setAttribute(pe,p[pe])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused"),!0!==De().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=PE("vjs-styles-dimensions");var y=Ss(".vjs-styles-defaults"),k=Ss("head");k.insertBefore(this.styleEl_,y?y.nextSibling:k.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var $=e.getElementsByTagName("a"),z=0;z<$.length;z++){var ae=$.item(z);Ja(ae,"vjs-hidden"),ae.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(i,e),s_(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i},r.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):ar.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},r.width=function(e){return this.dimension("width",e)},r.height=function(e){return this.dimension("height",e)},r.dimension=function(e,i){var s=e+"_";if(void 0===i)return this[s]||0;if(""===i||"auto"===i)return this[s]=void 0,void this.updateStyleEl_();var l=parseFloat(i);isNaN(l)?ar.error('Improper value "'+i+'" supplied for for '+e):(this[s]=l,this.updateStyleEl_())},r.fluid=function(e){var i=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,ns(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),function(t,r){ns(t)?r():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(r))}(this,function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){if(!0!==De().VIDEOJS_NO_DYNAMIC_STYLE){var l,p,k,$=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),z=$[1]/$[0];l=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/z:this.videoWidth()||300,p=void 0!==this.height_?this.height_:l*z,k=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(k),wE(this.styleEl_,"\n      ."+k+" {\n        width: "+l+"px;\n        height: "+p+"px;\n      }\n\n      ."+k+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*z+"%;\n      }\n    ")}else{var e="number"==typeof this.width_?this.width_:this.options_.width,i="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(e>=0&&(s.width=e),i>=0&&(s.height=i))}},r.loadTech_=function(e,i){var s=this;this.tech_&&this.unloadTech_();var l=tn(e),p=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==l&&this.tag&&(Or.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=l,this.isReady_=!1;var y=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(y=!1);var k={source:i,autoplay:y,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+p+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ni.names.forEach(function(z){var ae=ni[z];k[ae.getterName]=s[ae.privateName]}),Zr(k,this.options_[l]),Zr(k,this.options_[p]),Zr(k,this.options_[e.toLowerCase()]),this.tag&&(k.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(k.startTime=this.cache_.currentTime);var $=Or.getTech(e);if(!$)throw new Error("No Tech named '"+l+"' exists! '"+l+"' should be registered using videojs.registerTech()'");this.tech_=new $(k),this.tech_.ready(Nr(this,this.handleTechReady_),!0),function(t,r){t.forEach(function(n){var e=r.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(i){return e.addCue(i)})}),r.textTracks()}(this.textTracksJson_||[],this.tech_),Rb.forEach(function(z){s.on(s.tech_,z,function(ae){return s["handleTech"+tn(z)+"_"](ae)})}),Object.keys(Q_).forEach(function(z){s.on(s.tech_,z,function(ae){0===s.tech_.playbackRate()&&s.tech_.seeking()?s.queuedCallbacks_.push({callback:s["handleTech"+Q_[z]+"_"].bind(s),event:ae}):s["handleTech"+Q_[z]+"_"](ae)})}),this.on(this.tech_,"loadstart",function(z){return s.handleTechLoadStart_(z)}),this.on(this.tech_,"sourceset",function(z){return s.handleTechSourceset_(z)}),this.on(this.tech_,"waiting",function(z){return s.handleTechWaiting_(z)}),this.on(this.tech_,"ended",function(z){return s.handleTechEnded_(z)}),this.on(this.tech_,"seeking",function(z){return s.handleTechSeeking_(z)}),this.on(this.tech_,"play",function(z){return s.handleTechPlay_(z)}),this.on(this.tech_,"firstplay",function(z){return s.handleTechFirstPlay_(z)}),this.on(this.tech_,"pause",function(z){return s.handleTechPause_(z)}),this.on(this.tech_,"durationchange",function(z){return s.handleTechDurationChange_(z)}),this.on(this.tech_,"fullscreenchange",function(z,ae){return s.handleTechFullscreenChange_(z,ae)}),this.on(this.tech_,"fullscreenerror",function(z,ae){return s.handleTechFullscreenError_(z,ae)}),this.on(this.tech_,"enterpictureinpicture",function(z){return s.handleTechEnterPictureInPicture_(z)}),this.on(this.tech_,"leavepictureinpicture",function(z){return s.handleTechLeavePictureInPicture_(z)}),this.on(this.tech_,"error",function(z){return s.handleTechError_(z)}),this.on(this.tech_,"posterchange",function(z){return s.handleTechPosterChange_(z)}),this.on(this.tech_,"textdata",function(z){return s.handleTechTextData_(z)}),this.on(this.tech_,"ratechange",function(z){return s.handleTechRateChange_(z)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==l||!this.tag)&&s_(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var e=this;ni.names.forEach(function(i){var s=ni[i];e[s.privateName]=e[s.getterName]()}),this.textTracksJson_=function(t){var r=t.$$("track"),n=Array.prototype.map.call(r,function(i){return i.track});return Array.prototype.map.call(r,function(i){var s=y_(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(t.textTracks(),function(i){return-1===n.indexOf(i)}).map(y_))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(e){return void 0===e&&ar.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(e){var i=this;if(this.tech_&&"string"==typeof e){var l,s=function(){var y=i.muted();i.muted(!0);var k=function(){i.muted(y)};i.playTerminatedQueue_.push(k);var $=i.play();if(Xc($))return $.catch(function(z){throw k(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(z||""))})};if("any"!==e||this.muted()?l="muted"!==e||this.muted()?this.play():s():Xc(l=this.play())&&(l=l.catch(s)),Xc(l))return l.then(function(){i.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){i.trigger({type:"autoplay-failure",autoplay:e})})}},r.updateSourceCaches_=function(e){void 0===e&&(e="");var i=e,s="";"string"!=typeof i&&(i=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!s&&(s=function(t,r){if(!r)return"";if(t.cache_.source.src===r&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter(function(l){return l.src===r});if(n.length)return n[0].type;for(var e=t.$$("source"),i=0;i<e.length;i++){var s=e[i];if(s.type&&s.src&&s.src===r)return s.type}return av(r)}(this,i)),this.cache_.source=jr({},e,{src:i,type:s});for(var l=this.cache_.sources.filter(function(ae){return ae.src&&ae.src===i}),p=[],y=this.$$("source"),k=[],$=0;$<y.length;$++){var z=es(y[$]);p.push(z),z.src&&z.src===i&&k.push(z.src)}k.length&&!l.length?this.cache_.sources=p:l.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i},r.handleTechSourceset_=function(e){var i=this;if(!this.changingSrc_){var s=function(k){return i.updateSourceCaches_(k)},l=this.currentSource().src,p=e.src;l&&!/^blob:/.test(l)&&/^blob:/.test(p)&&(!this.lastSource_||this.lastSource_.tech!==p&&this.lastSource_.player!==l)&&(s=function(){}),s(p),e.src||this.tech_.any(["sourceset","loadstart"],function(y){if("sourceset"!==y.type){var k=i.techGet("currentSrc");i.lastSource_.tech=k,i.updateSourceCaches_(k)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},r.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var i=this.currentTime();this.on("timeupdate",function l(){i!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",l))})},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(ar.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(e){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Ca(this.play()):this.pause())},r.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(e.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(e){var i=e.target.player;if(!i||i===this){var s=this.el(),l=mt()[this.fsApi_.fullscreenElement]===s;!l&&s.matches?l=s.matches(":"+this.fsApi_.fullscreen):!l&&s.msMatchesSelector&&(l=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(l)}},r.handleTechFullscreenChange_=function(e,i){var s=this;i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))},r.handleTechFullscreenError_=function(e,i){this.trigger("fullscreenerror",i)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var e=this.tech_.error();this.error(e)},r.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(e,i){this.ready(function(){if(e in WA)return function jA(a,t,r,n){return t[r](a.reduce(C_(r),n))}(this.middleware_,this.tech_,e,i);if(e in ZE)return XE(this.middleware_,this.tech_,e,i);try{this.tech_&&this.tech_[e](i)}catch(s){throw ar(s),s}},!0)},r.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in HA)return function NA(a,t,r){return a.reduceRight(C_(r),t[r]())}(this.middleware_,this.tech_,e);if(e in ZE)return XE(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(i){throw void 0===this.tech_[e]?(ar("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",i),i):"TypeError"===i.name?(ar("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",i),this.tech_.isReady_=!1,i):(ar(i),i)}}},r.play=function(){var e=this,i=this.options_.Promise||De().Promise;return i?new i(function(s){e.play_(s)}):this.play_()},r.play_=function(e){var i=this;void 0===e&&(e=Ca),this.playCallbacks_.push(e);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s)return this.waitToPlay_=function(p){i.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!s&&(qp||ei)&&this.load());var l=this.techGet_("play");null===l?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},r.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(i){i()})},r.runPlayCallbacks_=function(e){var i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(s){s(e)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return!1!==this.techGet_("paused")},r.played=function(){return this.techGet_("played")||Co(0,0)},r.scrubbing=function(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(e){return typeof e<"u"?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=Co(0,0)),e},r.bufferedPercent=function(){return UE(this.buffered(),this.duration())},r.bufferedEnd=function(){var e=this.buffered(),i=this.duration(),s=e.end(e.length-1);return s>i&&(s=i),s},r.volume=function(e){var i;return void 0!==e?(i=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=i,this.techCall_("setVolume",i),void(i>0&&this.lastVolume_(i))):(i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i)},r.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},r.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(e){if(void 0!==e){var i=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},r.requestFullscreen=function(e){var i=this.options_.Promise||De().Promise;if(i){var s=this;return new i(function(l,p){function y(){s.off("fullscreenerror",$),s.off("fullscreenchange",k)}function k(){y(),l()}function $(ae,pe){y(),p(pe)}s.one("fullscreenchange",k),s.one("fullscreenerror",$);var z=s.requestFullscreenHelper_(e);z&&(z.then(y,y),z.then(l,p))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(e){var s,i=this;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(s=e)),this.fsApi_.requestFullscreen){var l=this.el_[this.fsApi_.requestFullscreen](s);return l&&l.then(function(){return i.isFullscreen(!0)},function(){return i.isFullscreen(!1)}),l}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var e=this.options_.Promise||De().Promise;if(e){var i=this;return new e(function(s,l){function p(){i.off("fullscreenerror",k),i.off("fullscreenchange",y)}function y(){p(),s()}function k(z,ae){p(),l(ae)}i.one("fullscreenchange",y),i.one("fullscreenerror",k);var $=i.exitFullscreenHelper_();$&&($.then(p,p),$.then(s,l))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var i=mt()[this.fsApi_.exitFullscreen]();return i&&Ca(i.then(function(){return e.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=mt().documentElement.style.overflow,bi(mt(),"keydown",this.boundFullWindowOnEscKey_),mt().documentElement.style.overflow="hidden",Ja(mt().body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(e){qt().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Hn(mt(),"keydown",this.boundFullWindowOnEscKey_),mt().documentElement.style.overflow=this.docOrigOverflow,Kc(mt().body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in mt()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in mt())return mt().exitPictureInPicture()},r.handleKeyDown=function(e){var p,y,i=this.options_.userActions;i&&i.hotkeys&&(y=(p=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),p.isContentEditable||("input"===y?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(p.type):-1!==["textarea"].indexOf(y))||("function"==typeof i.hotkeys?i.hotkeys.call(this,e):this.handleHotkeys(e)))},r.handleHotkeys=function(e){var i=this.options_.userActions?this.options_.userActions.hotkeys:{},s=i.fullscreenKey,p=i.muteKey,y=void 0===p?function(me){return qt().isEventKey(me,"m")}:p,k=i.playPauseKey,$=void 0===k?function(me){return qt().isEventKey(me,"k")||qt().isEventKey(me,"Space")}:k;if((void 0===s?function(me){return qt().isEventKey(me,"f")}:s).call(this,e)){e.preventDefault(),e.stopPropagation();var z=lt.getComponent("FullscreenToggle");!1!==mt()[this.fsApi_.fullscreenEnabled]&&z.prototype.handleClick.call(this,e)}else y.call(this,e)?(e.preventDefault(),e.stopPropagation(),lt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):$.call(this,e)&&(e.preventDefault(),e.stopPropagation(),lt.getComponent("PlayToggle").prototype.handleClick.call(this,e))},r.canPlayType=function(e){for(var i,s=0,l=this.options_.techOrder;s<l.length;s++){var p=l[s],y=Or.getTech(p);if(y||(y=lt.getComponent(p)),y){if(y.isSupported()&&(i=y.canPlayType(e)))return i}else ar.error('The "'+p+'" tech is undefined. Skipped browser support check for that tech.')}return""},r.selectSource=function(e){var z,i=this,s=this.options_.techOrder.map(function($){return[$,Or.getTech($)]}).filter(function($){var z=$[0],ae=$[1];return ae?ae.isSupported():(ar.error('The "'+z+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),l=function(z,ae,pe){var me;return z.some(function(Ee){return ae.some(function(We){if(me=pe(Ee,We))return!0})}),me},k=function(z,ae){var pe=z[0];if(z[1].canPlaySource(ae,i.options_[pe.toLowerCase()]))return{source:ae,tech:pe}};return(this.options_.sourceOrder?l(e,s,(z=k,function(ae,pe){return z(pe,ae)})):l(s,e,k))||!1},r.handleSrc_=function(e,i){var s=this;if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var l=qA(e);if(l.length){if(this.changingSrc_=!0,i||(this.cache_.sources=l),this.updateSourceCaches_(l[0]),UA(this,l[0],function(k,$){if(s.middleware_=$,i||(s.cache_.sources=l),s.updateSourceCaches_(k),s.src_(k))return l.length>1?s.handleSrc_(l.slice(1)):(s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void s.triggerReady());!function BA(a,t){a.forEach(function(r){return r.setTech&&r.setTech(t)})}($,s.tech_)}),this.options_.retryOnError&&l.length>1){var p=function(){s.error(null),s.handleSrc_(l.slice(1),!0)},y=function(){s.off("error",p)};this.one("error",p),this.one("playing",y),this.resetRetryOnError_=function(){s.off("error",p),s.off("playing",y)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},r.src=function(e){return this.handleSrc_(e,!1)},r.src_=function(e){var i=this,s=this.selectSource([e]);return!s||(function(t,r){return tn(t)===tn(r)}(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){i.changingSrc_=!1}),!1))},r.load=function(){this.techCall_("load")},r.reset=function(){var e=this,i=this.options_.Promise||De().Promise;this.paused()||!i?this.doReset_():Ca(this.play().then(function(){return e.doReset_()}))},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ns(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},i=e.durationDisplay,s=e.remainingTimeDisplay;i&&i.updateContent(),s&&s.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){var e=this.currentSource(),i=[];return 0!==Object.keys(e).length&&i.push(e),this.cache_.sources||i},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},r.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var i;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),i=!1):this.options_.autoplay=!!e,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)},r.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},r.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},r.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(e){var i=this;if(void 0===e)return this.error_||null;if(xs("beforeerror").forEach(function(l){var p=l(i,e);Za(p)&&!Array.isArray(p)||"string"==typeof p||"number"==typeof p||null===p?e=p:i.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var s=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),void this.one("loadstart",function(){this.off(["click","touchstart"],s)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ri(e),this.addClass("vjs-error"),ar.error("(CODE:"+this.error_.code+" "+ri.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),xs("error").forEach(function(l){return l(i,i.error_)})},r.reportUserActivity=function(e){this.userActivity_=!0},r.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var e,i,s,l=Nr(this,this.reportUserActivity),k=function(pe){l(),this.clearInterval(e)};this.on("mousedown",function(){l(),this.clearInterval(e),e=this.setInterval(l,250)}),this.on("mousemove",function(pe){(pe.screenX!==i||pe.screenY!==s)&&(i=pe.screenX,s=pe.screenY,l())}),this.on("mouseup",k),this.on("mouseleave",k);var z,$=this.getChild("controlBar");$&&!ei&&!Qa&&($.on("mouseenter",function(ae){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),$.on("mouseleave",function(ae){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",l),this.on("keyup",l),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(z);var ae=this.options_.inactivityTimeout;ae<=0||(z=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},ae))}},250)},r.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},r.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},r.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var i=this.children(),s=this.getChild("ControlBar"),l=s&&s.currentHeight();i.forEach(function(p){p!==s&&p.el_&&!p.hasClass("vjs-hidden")&&(p.hide(),e.audioOnlyCache_.hiddenChildren.push(p))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(l),this.trigger("audioonlymodechange")},r.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},r.audioOnlyMode=function(e){var i=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var s=this.options_.Promise||De().Promise;if(s){if(e){var l=[];return this.isInPictureInPicture()&&l.push(this.exitPictureInPicture()),this.isFullscreen()&&l.push(this.exitFullscreen()),this.audioPosterMode()&&l.push(this.audioPosterMode(!1)),s.all(l).then(function(){return i.enableAudioOnlyUI_()})}return s.resolve().then(function(){return i.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},r.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.audioPosterMode=function(e){var i=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var s=this.options_.Promise||De().Promise;return s?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){i.enablePosterModeUI_()}):s.resolve().then(function(){i.enablePosterModeUI_()}):s.resolve().then(function(){i.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},r.addTextTrack=function(e,i,s){if(this.tech_)return this.tech_.addTextTrack(e,i,s)},r.addRemoteTextTrack=function(e,i){if(this.tech_)return this.tech_.addRemoteTextTrack(e,i)},r.removeRemoteTextTrack=function(e){void 0===e&&(e={});var s=e.track;if(s||(s=e),this.tech_)return this.tech_.removeRemoteTextTrack(s)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ns(this)&&this.trigger("languagechange"))},r.languages=function(){return jr(t.prototype.options_.languages,this.languages_)},r.toJSON=function(){var e=jr(this.options_),i=e.tracks;e.tracks=[];for(var s=0;s<i.length;s++){var l=i[s];(l=jr(l)).player=void 0,e.tracks[s]=l}return e},r.createModal=function(e,i){var s=this;(i=i||{}).content=e||"";var l=new Pl(this,i);return this.addChild(l),l.on("dispose",function(){s.removeChild(l)}),l.open(),l},r.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),i=this.currentWidth(),s=0;s<$_.length;s++){var l=$_[s];if(i<=this.breakpoints_[l]){if(e===l)return;e&&this.removeClass(dv[e]),this.addClass(dv[l]),this.breakpoint_=l;break}}},r.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},r.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Zr({},SC,e),this.updateCurrentBreakpoint_()),Zr(this.breakpoints_)},r.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return dv[this.breakpoint_]||""},r.loadMedia=function(e,i){var s=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=jr(e);var l=this.cache_.media,y=l.poster,k=l.src,$=l.textTracks;!l.artwork&&y&&(this.cache_.media.artwork=[{src:y,type:av(y)}]),k&&this.src(k),y&&this.poster(y),Array.isArray($)&&$.forEach(function(z){return s.addRemoteTextTrack(z,!1)}),this.ready(i)}},r.getMedia=function(){if(!this.cache_.media){var e=this.poster(),l={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(p){return{kind:p.kind,label:p.label,language:p.language,src:p.src}})};return e&&(l.poster=e,l.artwork=[{src:l.poster,type:av(l.poster)}]),l}return jr(this.cache_.media)},t.getTagSettings=function(e){var i={sources:[],tracks:[]},s=es(e),l=s["data-setup"];if(So(e,"vjs-fill")&&(s.fill=!0),So(e,"vjs-fluid")&&(s.fluid=!0),null!==l){var p=ey()(l||"{}"),y=p[0],k=p[1];y&&ar.error(y),Zr(s,k)}if(Zr(i,s),e.hasChildNodes())for(var $=e.childNodes,z=0,ae=$.length;z<ae;z++){var pe=$[z],me=pe.nodeName.toLowerCase();"source"===me?i.sources.push(es(pe)):"track"===me&&i.tracks.push(es(pe))}return i},r.flexNotSupported_=function(){var e=mt().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(i){return"number"==typeof i})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(lt);ni.names.forEach(function(a){var t=ni[a];on.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),on.prototype.crossorigin=on.prototype.crossOrigin,on.players={};var Jc=De().navigator;on.prototype.options_={techOrder:Or.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Jc&&(Jc.languages&&Jc.languages[0]||Jc.userLanguage||Jc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){on.prototype[a]=function(){return this.techGet_(a)}}),Rb.forEach(function(a){on.prototype["handleTech"+tn(a)+"_"]=function(){return this.trigger(a)}}),lt.registerComponent("Player",on);var hv="plugin",kl="activePlugins_",Fl={},pv=function(t){return Fl.hasOwnProperty(t)},vv=function(t){return pv(t)?Fl[t]:void 0},Mb=function(t,r){t[kl]=t[kl]||{},t[kl][r]=!0},gv=function(t,r,n){var e=(n?"before":"")+"pluginsetup";t.trigger(e,r),t.trigger(e+":"+r.name,r)},kb=function(t,r){return r.prototype.name=t,function(){gv(this,{name:t,plugin:r,instance:null},!0);for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];var s=ia()(r,[this].concat(e));return this[t]=function(){return s},gv(this,s.getEventHash()),s}},Da=function(){function a(r){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=r,this.log||(this.log=this.player.log.createLogger(this.name)),v_(this),delete this.trigger,kE(this,this.constructor.defaultState),Mb(r,this.name),this.dispose=this.dispose.bind(this),r.on("dispose",this.dispose)}var t=a.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(n){return void 0===n&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},t.trigger=function(n,e){return void 0===e&&(e={}),Cl(this.eventBusEl_,n,this.getEventHash(e))},t.handleStateChanged=function(n){},t.dispose=function(){var n=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[kl][n]=!1,this.player=this.state=null,e[n]=kb(n,Fl[n])},a.isBasic=function(n){var e="string"==typeof n?vv(n):n;return"function"==typeof e&&!a.prototype.isPrototypeOf(e.prototype)},a.registerPlugin=function(n,e){if("string"!=typeof n)throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(pv(n))ar.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(on.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if("function"!=typeof e)throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof e+".");return Fl[n]=e,n!==hv&&(on.prototype[n]=a.isBasic(e)?function(t,r){var n=function(){gv(this,{name:t,plugin:r,instance:null},!0);var i=r.apply(this,arguments);return Mb(this,t),gv(this,{name:t,plugin:r,instance:i}),i};return Object.keys(r).forEach(function(e){n[e]=r[e]}),n}(n,e):kb(n,e)),e},a.deregisterPlugin=function(n){if(n===hv)throw new Error("Cannot de-register base plugin.");pv(n)&&(delete Fl[n],delete on.prototype[n])},a.getPlugins=function(n){var e;return void 0===n&&(n=Object.keys(Fl)),n.forEach(function(i){var s=vv(i);s&&((e=e||{})[i]=s)}),e},a.getPluginVersion=function(n){var e=vv(n);return e&&e.VERSION||""},a}();Da.getPlugin=vv,Da.BASE_PLUGIN_NAME=hv,Da.registerPlugin(hv,Da),on.prototype.usingPlugin=function(a){return!!this[kl]&&!0===this[kl][a]},on.prototype.hasPlugin=function(a){return!!pv(a)};var Fb=function(t){return 0===t.indexOf("#")?t.slice(1):t};function ke(a,t,r){var n=ke.getPlayer(a);if(n)return t&&ar.warn('Player "'+a+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var e="string"==typeof a?Ss("#"+Fb(a)):a;if(!xl(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!e.ownerDocument.defaultView||!e.ownerDocument.body.contains(e))&&ar.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(e.parentNode&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),xs("beforesetup").forEach(function(s){var l=s(e,jr(t));Za(l)&&!Array.isArray(l)?t=jr(t,l):ar.error("please return an object in beforesetup hooks")});var i=lt.getComponent("Player");return n=new i(e,t,r),xs("setup").forEach(function(s){return s(n)}),n}if(ke.hooks_=Xa,ke.hooks=xs,ke.hook=function(t,r){xs(t,r)},ke.hookOnce=function(t,r){xs(t,[].concat(r).map(function(n){return function i(){return rE(t,i),n.apply(void 0,arguments)}}))},ke.removeHook=rE,!0!==De().VIDEOJS_NO_DYNAMIC_STYLE&&bl()){var mv=Ss(".vjs-styles-defaults");if(!mv){mv=PE("vjs-styles-defaults");var J_=Ss("head");J_&&J_.insertBefore(mv,J_.firstChild),wE(mv,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}f_(1,ke),ke.VERSION="7.20.3",ke.options=on.prototype.options_,ke.getPlayers=function(){return on.players},ke.getPlayer=function(a){var r,t=on.players;if("string"==typeof a){var n=Fb(a),e=t[n];if(e)return e;r=Ss("#"+n)}else r=a;if(xl(r)){var s=r.player,l=r.playerId;if(s||t[l])return s||t[l]}},ke.getAllPlayers=function(){return Object.keys(on.players).map(function(a){return on.players[a]}).filter(Boolean)},ke.players=on.players,ke.getComponent=lt.getComponent,ke.registerComponent=function(a,t){Or.isTech(t)&&ar.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),lt.registerComponent.call(lt,a,t)},ke.getTech=Or.getTech,ke.registerTech=Or.registerTech,ke.use=function FA(a,t){Do[a]=Do[a]||[],Do[a].push(t)},Object.defineProperty(ke,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(ke.middleware,"TERMINATOR",{value:iv,writeable:!1,enumerable:!0}),ke.browser=sA,ke.TOUCH_ENABLED=El,ke.extend=function(t,r){void 0===r&&(r={});var n=function(){t.apply(this,arguments)},e={};for(var i in"object"==typeof r?(r.constructor!==Object.prototype.constructor&&(n=r.constructor),e=r):"function"==typeof r&&(n=r),mp()(n,t),t&&(n.super_=t),e)e.hasOwnProperty(i)&&(n.prototype[i]=e[i]);return n},ke.mergeOptions=jr,ke.bind=Nr,ke.registerPlugin=Da.registerPlugin,ke.deregisterPlugin=Da.deregisterPlugin,ke.plugin=function(a,t){return ar.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Da.registerPlugin(a,t)},ke.getPlugins=Da.getPlugins,ke.getPlugin=Da.getPlugin,ke.getPluginVersion=Da.getPluginVersion,ke.addLanguage=function(a,t){var r;return a=(""+a).toLowerCase(),(ke.options.languages=jr(ke.options.languages,((r={})[a]=t,r)))[a]},ke.log=ar,ke.createLogger=aE,ke.createTimeRange=ke.createTimeRanges=Co,ke.formatTime=Ll,ke.setFormatTime=function tC(a){w_=a},ke.resetFormatTime=function rC(){w_=tb},ke.parseUrl=x_,ke.isCrossOrigin=nv,ke.EventTarget=bn,ke.on=bi,ke.one=Jp,ke.off=Hn,ke.trigger=Cl,ke.xhr=pp(),ke.TextTrack=Zc,ke.AudioTrack=KE,ke.VideoTrack=YE,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){ke[a]=function(){return ar.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),CE[a].apply(null,arguments)}}),ke.computedStyle=Wc,ke.dom=CE,ke.url=LA,ke.defineLazyProperty=Z_,ke.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var oa=dl,yv=function(t,r,n){return t&&n&&n.responseURL&&r!==n.responseURL?n.responseURL:r},ua=function(t){return ke.log.debug?ke.log.debug.bind(ke,"VHS:",t+" >"):function(){}},As=1/30,Pa=.1,Ub=function(t,r){var e,n=[];if(t&&t.length)for(e=0;e<t.length;e++)r(t.start(e),t.end(e))&&n.push([t.start(e),t.end(e)]);return ke.createTimeRanges(n)},Ul=function(t,r){return Ub(t,function(n,e){return n-Pa<=r&&e+Pa>=r})},_v=function(t,r){return Ub(t,function(n){return n-As>=r})},Bb=function(t){var r=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)r.push(t.start(n)+" => "+t.end(n));return r.join(", ")},Oo=function(t){for(var r=[],n=0;n<t.length;n++)r.push({start:t.start(n),end:t.end(n)});return r},Nb=function(t){if(t&&t.length&&t.end)return t.end(t.length-1)},eT=function(t,r){var n=0;if(!t||!t.length)return n;for(var e=0;e<t.length;e++){var i=t.start(e),s=t.end(e);if(!(r>s)){if(r>i&&r<=s){n+=s-r;continue}n+=s-i}}return n},jb=ke.createTimeRange,tT=function(t,r){if(!r.preload)return r.duration;var n=0;return(r.parts||[]).forEach(function(e){n+=e.duration}),(r.preloadHints||[]).forEach(function(e){"PART"===e.type&&(n+=t.partTargetDuration)}),n},rT=function(t){return(t.segments||[]).reduce(function(r,n,e){return n.parts?n.parts.forEach(function(i,s){r.push({duration:i.duration,segmentIndex:e,partIndex:s,part:i,segment:n})}):r.push({duration:n.duration,segmentIndex:e,partIndex:null,segment:n,part:null}),r},[])},Hb=function(t){var r=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return r&&r.parts||[]},Wb=function(t){var r=t.preloadSegment;if(r){var n=r.parts;return(r.preloadHints||[]).reduce(function(s,l){return s+("PART"===l.type?1:0)},0)+(n&&n.length?n.length:0)}},Gb=function(t,r){if(r.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var n=Hb(r).length>0;return n&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:n&&r.partTargetDuration?3*r.partTargetDuration:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?3*r.targetDuration:0},Vb=function(t,r,n){if(typeof r>"u"&&(r=t.mediaSequence+t.segments.length),r<t.mediaSequence)return 0;var e=function(t,r){var n=0,e=r-t.mediaSequence,i=t.segments[e];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;e--;){if(typeof(i=t.segments[e]).end<"u")return{result:n+i.end,precise:!0};if(n+=tT(t,i),typeof i.start<"u")return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(t,r);if(e.precise)return e.result;var i=function(t,r){for(var e,n=0,i=r-t.mediaSequence;i<t.segments.length;i++){if(typeof(e=t.segments[i]).start<"u")return{result:e.start-n,precise:!0};if(n+=tT(t,e),typeof e.end<"u")return{result:e.end-n,precise:!0}}return{result:-1,precise:!1}}(t,r);return i.precise?i.result:e.result+n},Kb=function(t,r,n){if(!t)return 0;if("number"!=typeof n&&(n=0),typeof r>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return De()[1/0]}return Vb(t,r,n)},ed=function(t){var r=t.defaultDuration,n=t.durationList,e=t.startIndex,i=t.endIndex,s=0;if(e>i){var l=[i,e];e=l[0],i=l[1]}if(e<0){for(var p=e;p<Math.min(0,i);p++)s+=r;e=0}for(var y=e;y<i;y++)s+=n[y].duration;return s},Yb=function(t,r,n,e){if(!t||!t.segments)return null;if(t.endList)return Kb(t);if(null===r)return null;var i=Vb(t,t.mediaSequence+t.segments.length,r=r||0);return n&&(i-=e="number"==typeof e?e:Gb(null,t)),Math.max(0,i)},zb=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},nT=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Tv=function(t){var r=zb(t);return!t.disabled&&!r},qb=function(t,r){return r.attributes&&r.attributes[t]},iT=function(t,r){if(1===t.playlists.length)return!0;var n=r.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(e){return!!Tv(e)&&(e.attributes.BANDWIDTH||0)<n}).length},aT=function(t,r){return!(!t&&!r||!t&&r||t&&!r||!(t===r||t.id&&r.id&&t.id===r.id||t.resolvedUri&&r.resolvedUri&&t.resolvedUri===r.resolvedUri||t.uri&&r.uri&&t.uri===r.uri))},Xb=function(t,r){var n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},e=!1;for(var i in n){for(var s in n[i])if(e=r(n[i][s]))break;if(e)break}return!!e},td=function(t){if(!t||!t.playlists||!t.playlists.length)return Xb(t,function(s){return s.playlists&&s.playlists.length||s.uri});for(var n=function(l){var p=t.playlists[l],y=p.attributes&&p.attributes.CODECS;return y&&y.split(",").every(function($){return Ep($)})||Xb(t,function($){return aT(p,$)})?"continue":{v:!1}},e=0;e<t.playlists.length;e++){var i=n(e);if("continue"!==i&&"object"==typeof i)return i.v}return!0},di={liveEdgeDelay:Gb,duration:Kb,seekable:function(t,r,n){var i=r||0,s=Yb(t,r,!0,n);return null===s?jb():jb(i,s)},getMediaInfoForTime:function(t){for(var r=t.playlist,n=t.currentTime,e=t.startingSegmentIndex,i=t.startingPartIndex,s=t.startTime,l=t.experimentalExactManifestTimings,p=n-s,y=rT(r),k=0,$=0;$<y.length;$++){var z=y[$];if(e===z.segmentIndex&&("number"!=typeof i||"number"!=typeof z.partIndex||i===z.partIndex)){k=$;break}}if(p<0){if(k>0)for(var ae=k-1;ae>=0;ae--){var pe=y[ae];if(p+=pe.duration,l){if(p<0)continue}else if(p+As<=0)continue;return{partIndex:pe.partIndex,segmentIndex:pe.segmentIndex,startTime:s-ed({defaultDuration:r.targetDuration,durationList:y,startIndex:k,endIndex:ae})}}return{partIndex:y[0]&&y[0].partIndex||null,segmentIndex:y[0]&&y[0].segmentIndex||0,startTime:n}}if(k<0){for(var me=k;me<0;me++)if((p-=r.targetDuration)<0)return{partIndex:y[0]&&y[0].partIndex||null,segmentIndex:y[0]&&y[0].segmentIndex||0,startTime:n};k=0}for(var Ee=k;Ee<y.length;Ee++){var We=y[Ee];if(p-=We.duration,l){if(p>0)continue}else if(p-As>=0)continue;return{partIndex:We.partIndex,segmentIndex:We.segmentIndex,startTime:s+ed({defaultDuration:r.targetDuration,durationList:y,startIndex:k,endIndex:Ee})}}return{segmentIndex:y[y.length-1].segmentIndex,partIndex:y[y.length-1].partIndex,startTime:n}},isEnabled:Tv,isDisabled:function(t){return t.disabled},isBlacklisted:zb,isIncompatible:nT,playlistEnd:Yb,isAes:function(t){for(var r=0;r<t.segments.length;r++)if(t.segments[r].key)return!0;return!1},hasAttribute:qb,estimateSegmentRequestTime:function(t,r,n,e){return void 0===e&&(e=0),qb("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*e)/r:NaN},isLowestEnabledRendition:iT,isAudioOnly:td,playlistMatch:aT,segmentDurationWithParts:tT},Zb=ke.log,sT=function(t,r){return t+"-"+r},rd=function(t,r){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(n){if(t.mediaGroups[n])for(var e in t.mediaGroups[n])for(var i in t.mediaGroups[n][e])r(t.mediaGroups[n][e][i],n,e,i)})},Qb=function(t){var r=t.playlist,n=t.uri;r.id=t.id,r.playlistErrors_=0,n&&(r.uri=n),r.attributes=r.attributes||{}},$b=function(t,r){t.uri=r;for(var n=0;n<t.playlists.length;n++)t.playlists[n].uri||(t.playlists[n].uri="placeholder-uri-"+n);var i=td(t);rd(t,function(s,l,p,y){var k="placeholder-uri-"+l+"-"+p+"-"+y;if(!s.playlists||!s.playlists.length){if(i&&"AUDIO"===l&&!s.uri)for(var $=0;$<t.playlists.length;$++){var z=t.playlists[$];if(z.attributes&&z.attributes.AUDIO&&z.attributes.AUDIO===p)return}s.playlists=[Bi()({},s)]}s.playlists.forEach(function(ae,pe){var me=sT(pe,k);ae.uri?ae.resolvedUri=ae.resolvedUri||oa(t.uri,ae.uri):(ae.uri=0===pe?k:me,ae.resolvedUri=ae.uri),ae.id=ae.id||me,ae.attributes=ae.attributes||{},t.playlists[ae.id]=ae,t.playlists[ae.uri]=ae})}),function(t){for(var r=t.playlists.length;r--;){var n=t.playlists[r];Qb({playlist:n,id:sT(r,n.uri)}),n.resolvedUri=oa(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||Zb.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(t),function(t){rd(t,function(r){r.uri&&(r.resolvedUri=oa(t.uri,r.uri))})}(t)},Ev=ke.mergeOptions,VC=function(t,r){if(!t)return r;var n=Ev(t,r);if(t.preloadHints&&!r.preloadHints&&delete n.preloadHints,t.parts&&!r.parts)delete n.parts;else if(t.parts&&r.parts)for(var e=0;e<r.parts.length;e++)t.parts&&t.parts[e]&&(n.parts[e]=Ev(t.parts[e],r.parts[e]));return!t.skipped&&r.skipped&&(n.skipped=!1),t.preload&&!r.preload&&(n.preload=!1),n},Jb=function(t,r){!t.resolvedUri&&t.uri&&(t.resolvedUri=oa(r,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=oa(r,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=oa(r,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=oa(r,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=oa(r,n.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=oa(r,n.uri))})},ex=function(t){var r=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return r;n.duration=t.targetDuration,n.preload=!0,r.push(n)}return r},tx=function(t,r){return t===r||t.segments&&r.segments&&t.segments.length===r.segments.length&&t.endList===r.endList&&t.mediaSequence===r.mediaSequence&&t.preloadSegment===r.preloadSegment},oT=function(t,r,n){void 0===n&&(n=tx);var e=Ev(t,{}),i=e.playlists[r.id];if(!i||n(i,r))return null;r.segments=ex(r);var s=Ev(i,r);if(s.preloadSegment&&!r.preloadSegment&&delete s.preloadSegment,i.segments){if(r.skip){r.segments=r.segments||[];for(var l=0;l<r.skip.skippedSegments;l++)r.segments.unshift({skipped:!0})}s.segments=function(t,r,n){var e=t.slice(),i=r.slice();n=n||0;for(var l,s=[],p=0;p<i.length;p++){var y=e[p+n],k=i[p];y?(l=y.map||l,s.push(VC(y,k))):(l&&!k.map&&(k.map=l),s.push(k))}return s}(i.segments,r.segments,r.mediaSequence-i.mediaSequence)}s.segments.forEach(function(y){Jb(y,s.resolvedUri)});for(var p=0;p<e.playlists.length;p++)e.playlists[p].id===r.id&&(e.playlists[p]=s);return e.playlists[r.id]=s,e.playlists[r.uri]=s,rd(t,function(y,k,$,z){if(y.playlists)for(var ae=0;ae<y.playlists.length;ae++)r.id===y.playlists[ae].id&&(y.playlists[ae]=s)}),e},uT=function(t,r){var n=t.segments||[],e=n[n.length-1],i=e&&e.parts&&e.parts[e.parts.length-1],s=i&&i.duration||e&&e.duration;return r&&s?1e3*s:500*(t.partTargetDuration||t.targetDuration||10)},Bl=function(a){function t(n,e,i){var s;if(void 0===i&&(i={}),s=a.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");s.logger_=ua("PlaylistLoader");var p=i.withCredentials,y=void 0!==p&&p,k=i.handleManifestRedirects,$=void 0!==k&&k;s.src=n,s.vhs_=e,s.withCredentials=y,s.handleManifestRedirects=$;var z=e.options_;return s.customTagParsers=z&&z.customTagParsers||[],s.customTagMappers=z&&z.customTagMappers||[],s.experimentalLLHLS=z&&z.experimentalLLHLS||!1,ke.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(zt()(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}ht()(t,a);var r=t.prototype;return r.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var i=this.media(),s=oa(this.master.uri,i.uri);this.experimentalLLHLS&&(s=function(t,r){if(r.endList||!r.serverControl)return t;var n={};if(r.serverControl.canBlockReload){var e=r.preloadSegment,i=r.mediaSequence+r.segments.length;if(e){var s=e.parts||[],l=Wb(r)-1;l>-1&&l!==s.length-1&&(n._HLS_part=l),(l>-1||s.length)&&i--}n._HLS_msn=i}if(r.serverControl&&r.serverControl.canSkipUntil&&(n._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var p=new(De().URL)(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(y){n.hasOwnProperty(y)&&p.searchParams.set(y,n[y])}),t=p.toString()}return t}(s,i)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(l,p){if(e.request){if(l)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},r.playlistRequestError=function(e,i,s){var l=i.uri,p=i.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[p],status:e.status,message:"HLS playlist request error at URL: "+l+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},r.parseManifest_=function(e){var i=this,s=e.url;return function(t){var r=t.onwarn,n=t.oninfo,e=t.manifestString,i=t.customTagParsers,s=void 0===i?[]:i,l=t.customTagMappers,p=void 0===l?[]:l,y=t.experimentalLLHLS,k=new ly;r&&k.on("warn",r),n&&k.on("info",n),s.forEach(function(me){return k.addParser(me)}),p.forEach(function(me){return k.addTagMapper(me)}),k.push(e),k.end();var $=k.manifest;if(y||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(me){$.hasOwnProperty(me)&&delete $[me]}),$.segments&&$.segments.forEach(function(me){["parts","preloadHints"].forEach(function(Ee){me.hasOwnProperty(Ee)&&delete me[Ee]})})),!$.targetDuration){var z=10;$.segments&&$.segments.length&&(z=$.segments.reduce(function(me,Ee){return Math.max(me,Ee.duration)},0)),r&&r("manifest has no targetDuration defaulting to "+z),$.targetDuration=z}var ae=Hb($);if(ae.length&&!$.partTargetDuration){var pe=ae.reduce(function(me,Ee){return Math.max(me,Ee.duration)},0);r&&(r("manifest has no partTargetDuration defaulting to "+pe),Zb.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),$.partTargetDuration=pe}return $}({onwarn:function(y){return i.logger_("m3u8-parser warn for "+s+": "+y.message)},oninfo:function(y){return i.logger_("m3u8-parser info for "+s+": "+y.message)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},r.haveMetadata=function(e){var i=e.playlistString,s=e.playlistObject,l=e.url,p=e.id;this.request=null,this.state="HAVE_METADATA";var y=s||this.parseManifest_({url:l,manifestString:i});y.lastRequest=Date.now(),Qb({playlist:y,uri:l,id:p});var k=oT(this.master,y);this.targetDuration=y.partTargetDuration||y.targetDuration,this.pendingMedia_=null,k?(this.master=k,this.media_=this.master.playlists[p]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(uT(this.media(),!!k)),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),De().clearTimeout(this.mediaUpdateTimeout),De().clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},r.media=function(e,i){var s=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(De().clearTimeout(this.finalRenditionTimeout),i){var l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=De().setTimeout(this.media.bind(this,e,!1),l)}else{var p=this.state,y=!this.media_||e.id!==this.media_.id,k=this.master.playlists[e.id];if(k&&k.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(y&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===p?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(uT(e,!0)),y){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function($,z){if(s.request){if(e.lastRequest=Date.now(),e.resolvedUri=yv(s.handleManifestRedirects,e.resolvedUri,z),$)return s.playlistRequestError(s.request,e,p);s.haveMetadata({playlistString:z.responseText,url:e.uri,id:e.id}),s.trigger("HAVE_MASTER"===p?"loadedmetadata":"mediachange")}})}}},r.pause=function(){this.mediaUpdateTimeout&&(De().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},r.load=function(e){var i=this;this.mediaUpdateTimeout&&(De().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(e){var l=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=De().setTimeout(function(){i.mediaUpdateTimeout=null,i.load()},l)}else this.started?this.trigger(s&&!s.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},r.updateMediaUpdateTimeout_=function(e){var i=this;this.mediaUpdateTimeout&&(De().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=De().setTimeout(function(){i.mediaUpdateTimeout=null,i.trigger("mediaupdatetimeout"),i.updateMediaUpdateTimeout_(e)},e))},r.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=De().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(i,s){if(e.request){if(e.request=null,i)return e.error={status:s.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:s.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=yv(e.handleManifestRedirects,e.src,s);var l=e.parseManifest_({manifestString:s.responseText,url:e.src});e.setupInitialPlaylist(l)}})},r.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},r.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,$b(this.master,this.srcUri()),e.playlists.forEach(function(s){s.segments=ex(s),s.segments.forEach(function(l){Jb(l,s.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var i=this.srcUri()||De().location.href;this.master=function(t,r){var n=sT(0,r),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:De().location.href,resolvedUri:De().location.href,playlists:[{uri:r,id:n,resolvedUri:r,attributes:{}}]};return e.playlists[n]=e.playlists[0],e.playlists[r]=e.playlists[0],e}(0,i),this.haveMetadata({playlistObject:e,url:i,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(ke.EventTarget),YC=ke.xhr,zC=ke.mergeOptions,lT=function(t,r,n,e){var i="arraybuffer"===t.responseType?t.response:t.responseText;!r&&i&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=i.byteLength||i.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),r&&"ETIMEDOUT"===r.code&&(t.timedout=!0),!r&&!t.aborted&&200!==n.statusCode&&206!==n.statusCode&&0!==n.statusCode&&(r=new Error("XHR Failed with a response of: "+(t&&(i||t.responseText)))),e(r,t)},rx=function(){var t=function r(n,e){n=zC({timeout:45e3},n);var i=r.beforeRequest||ke.Vhs.xhr.beforeRequest;if(i&&"function"==typeof i){var s=i(n);s&&(n=s)}var p=(!0===ke.Vhs.xhr.original?YC:ke.Vhs.xhr)(n,function(k,$){return lT(p,k,$,e)}),y=p.abort;return p.abort=function(){return p.aborted=!0,y.apply(p,arguments)},p.uri=n.uri,p.requestTime=Date.now(),p};return t.original=!0,t},fT=function(t){var r={};return t.byterange&&(r.Range=function(t){return"bytes="+t.offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?De().BigInt(t.offset)+De().BigInt(t.length)-De().BigInt(1):t.offset+t.length-1)}(t.byterange)),r},XC=function(t,r){return t.start(r)+"-"+t.end(r)},ZC=function(t,r){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(r%2?" ":"")},QC=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},nx=function(t){var r={};return Object.keys(t).forEach(function(n){var e=t[n];r[n]=Pp(e)?{bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:e}),r},bv=function(t){var r=t.byterange||{length:1/0,offset:0};return[r.length,r.offset,t.resolvedUri].join(",")},ix=function(t){return t.resolvedUri},ax=function(t){for(var r=Array.prototype.slice.call(t),n=16,e="",l=0;l<r.length/n;l++)e+=r.slice(l*n,l*n+n).map(ZC).join("")+" "+r.slice(l*n,l*n+n).map(QC).join("")+"\n";return e},e1=Object.freeze({__proto__:null,createTransferableMessage:nx,initSegmentId:bv,segmentKeyId:ix,hexDump:ax,tagDump:function(t){return ax(t.bytes)},textRanges:function(t){var n,r="";for(n=0;n<t.length;n++)r+=XC(t,n)+" ";return r}}),u1=function a(t){var r=t.programTime,n=t.playlist,e=t.retryCount,i=void 0===e?2:e,s=t.seekTo,l=t.pauseAfterSeek,p=void 0===l||l,y=t.tech,k=t.callback;if(!k)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!n||!s)return k({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!y.hasStarted_)return k({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var r=0;r<t.segments.length;r++)if(!t.segments[r].dateTimeObject)return!1;return!0}(n))return k({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var $=function(t,r){var n;try{n=new Date(t)}catch{return null}if(!r||!r.segments||0===r.segments.length)return null;var e=r.segments[0];if(n<e.dateTimeObject)return null;for(var i=0;i<r.segments.length-1&&(e=r.segments[i],!(n<r.segments[i+1].dateTimeObject));i++);var l=r.segments[r.segments.length-1],p=l.dateTimeObject,y=l.videoTimingInfo?function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds}(l.videoTimingInfo):l.duration+.25*l.duration;return n>new Date(p.getTime()+1e3*y)?null:(n>p&&(e=l),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:di.duration(r,r.mediaSequence+r.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})}(r,n);if(!$)return k({message:r+" was not found in the stream"});var z=$.segment,ae=function(t,r){var n,e;try{n=new Date(t),e=new Date(r)}catch{}var i=n.getTime();return(e.getTime()-i)/1e3}(z.dateTimeObject,r);if("estimate"===$.type)return 0===i?k({message:r+" is not buffered yet. Try again"}):(s($.estimatedStart+ae),void y.one("seeked",function(){a({programTime:r,playlist:n,retryCount:i-1,seekTo:s,pauseAfterSeek:p,tech:y,callback:k})}));var pe=z.start+ae;y.one("seeked",function(){return k(null,y.currentTime())}),p&&y.pause(),s(pe)},cT=function(t,r){if(4===t.readyState)return r()},ox=ke.mergeOptions,ux=function(t,r){if(!tx(t,r)||t.sidx&&r.sidx&&(t.sidx.offset!==r.sidx.offset||t.sidx.length!==r.sidx.length))return!1;if(!t.sidx&&r.sidx||t.sidx&&!r.sidx||t.segments&&!r.segments||!t.segments&&r.segments)return!1;if(!t.segments&&!r.segments)return!0;for(var n=0;n<t.segments.length;n++){var e=t.segments[n],i=r.segments[n];if(e.uri!==i.uri)return!1;if(e.byterange||i.byterange){var s=e.byterange,l=i.byterange;if(s&&!l||!s&&l||s.offset!==l.offset||s.length!==l.length)return!1}}return!0},h1=function(t,r){return(Boolean(!t.map&&!r.map)||Boolean(t.map&&r.map&&t.map.byterange.offset===r.map.byterange.offset&&t.map.byterange.length===r.map.byterange.length))&&t.uri===r.uri&&t.byterange.offset===r.byterange.offset&&t.byterange.length===r.byterange.length},lx=function(t,r){var n={};for(var e in t){var s=t[e].sidx;if(s){var l=Es(s);if(!r[l])break;h1(r[l].sidxInfo,s)&&(n[l]=r[l])}}return n},dT=function(a){function t(n,e,i,s){var l;void 0===i&&(i={}),(l=a.call(this)||this).masterPlaylistLoader_=s||zt()(l),s||(l.isMaster_=!0);var y=i.withCredentials,k=void 0!==y&&y,$=i.handleManifestRedirects,z=void 0!==$&&$;if(l.vhs_=e,l.withCredentials=k,l.handleManifestRedirects=z,!n)throw new Error("A non-empty playlist URL or object is required");return l.on("minimumUpdatePeriod",function(){l.refreshXml_()}),l.on("mediaupdatetimeout",function(){l.refreshMedia_(l.media().id)}),l.state="HAVE_NOTHING",l.loadedPlaylists_={},l.logger_=ua("DashPlaylistLoader"),l.isMaster_?(l.masterPlaylistLoader_.srcUrl=n,l.masterPlaylistLoader_.sidxMapping_={}):l.childPlaylist_=n,l}ht()(t,a);var r=t.prototype;return r.requestErrored_=function(e,i,s){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2}:e,s&&(this.state=s),this.trigger("error"),!0):void 0)},r.addSidxSegments_=function(e,i,s){var l=this,p=e.sidx&&Es(e.sidx);if(e.sidx&&p&&!this.masterPlaylistLoader_.sidxMapping_[p]){var y=yv(this.handleManifestRedirects,e.sidx.resolvedUri),k=function(z,ae){if(!l.requestErrored_(z,ae,i)){var me,pe=l.masterPlaylistLoader_.sidxMapping_;try{me=rt()(Rt(ae.response).subarray(8))}catch(Ee){return void l.requestErrored_(Ee,ae,i)}return pe[p]={sidxInfo:e.sidx,sidx:me},gl(e,me,e.sidx.resolvedUri),s(!0)}};this.request=function(t,r,n){var i,e=[],s=!1,l=function(z,ae,pe,me){return ae.abort(),s=!0,n(z,ae,pe,me)},p=function(z,ae){if(!s){if(z)return l(z,ae,"",e);var pe=ae.responseText.substring(e&&e.byteLength||0,ae.responseText.length);if(e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if((r=r.filter(function(l){return l&&(l.byteLength||l.length)&&"string"!=typeof l})).length<=1)return Rt(r[0]);var e=r.reduce(function(l,p,y){return l+(p.byteLength||p.length)},0),i=new Uint8Array(e),s=0;return r.forEach(function(l){l=Rt(l),i.set(l,s),s+=l.byteLength}),i}(e,Ip(pe,!0)),i=i||Ot(e),e.length<10||i&&e.length<i+2)return cT(ae,function(){return l(z,ae,"",e)});var me=t_(e);return"ts"===me&&e.length<188||!me&&e.length<376?cT(ae,function(){return l(z,ae,"",e)}):l(null,ae,me,e)}},k=r({uri:t,beforeSend:function(z){z.overrideMimeType("text/plain; charset=x-user-defined"),z.addEventListener("progress",function(ae){return lT(z,null,{statusCode:z.status},p)})}},function($,z){return lT(k,$,z,p)});return k}(y,this.vhs_.xhr,function($,z,ae,pe){if($)return k($,z);if(!ae||"mp4"!==ae)return k({status:z.status,message:"Unsupported "+(ae||"unknown")+" container type for sidx segment at URL: "+y,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},z);var me=e.sidx.byterange,Ee=me.offset,We=me.length;if(pe.length>=We+Ee)return k($,{response:pe.subarray(Ee,Ee+We),status:z.status,uri:z.uri});l.request=l.vhs_.xhr({uri:y,responseType:"arraybuffer",headers:fT({byterange:e.sidx.byterange})},k)})}else this.mediaRequest_=De().setTimeout(function(){return s(!1)},0)},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},De().clearTimeout(this.minimumUpdatePeriodTimeout_),De().clearTimeout(this.mediaRequest_),De().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},r.media=function(e){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var l=!this.media_||e.id!==this.media_.id;if(l&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(l&&(this.trigger("mediachanging"),this.trigger("mediachange")));l&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,s,function(p){i.haveMetadata({startingState:s,playlist:e})}))},r.haveMetadata=function(e){var i=e.startingState,s=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),this.trigger("HAVE_MASTER"===i?"loadedmetadata":"mediachange")},r.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),De().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(De().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},r.load=function(e){var i=this;De().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(e){var l=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=De().setTimeout(function(){return i.load()},l)}else this.started?s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},r.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(i,s){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=De().setTimeout(function(){return e.haveMaster_()},0)},r.requestMaster_=function(e){var i=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,l){if(!i.requestErrored_(s,l)){var p=l.responseText!==i.masterPlaylistLoader_.masterXml_;return i.masterPlaylistLoader_.masterXml_=l.responseText,i.masterLoaded_=l.responseHeaders&&l.responseHeaders.date?Date.parse(l.responseHeaders.date):Date.now(),i.masterPlaylistLoader_.srcUrl=yv(i.handleManifestRedirects,i.masterPlaylistLoader_.srcUrl,l),p?(i.handleMaster_(),void i.syncClientServerClock_(function(){return e(l,p)})):e(l,p)}"HAVE_NOTHING"===i.state&&(i.started=!1)})},r.syncClientServerClock_=function(e){var i=this,s=function(t){return function(t){var r=Yr(t,"UTCTiming")[0];if(!r)return null;var n=Tn(r);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(se(t))}(this.masterPlaylistLoader_.masterXml_);return null===s?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===s.method?(this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:oa(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(l,p){if(i.request){if(l)return i.masterPlaylistLoader_.clientOffset_=i.masterLoaded_-Date.now(),e();var y;y="HEAD"===s.method?p.responseHeaders&&p.responseHeaders.date?Date.parse(p.responseHeaders.date):i.masterLoaded_:Date.parse(p.responseText),i.masterPlaylistLoader_.clientOffset_=y-Date.now(),e()}}))},r.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},r.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,i=function(t){var n=t.srcUrl,l=function(t,r){void 0===r&&(r={});var n=function(t,r){void 0===r&&(r={});var n=r,e=n.manifestUri,i=void 0===e?"":e,s=n.NOW,l=void 0===s?Date.now():s,p=n.clientOffset,y=void 0===p?0:p,k=Yr(t,"Period");if(!k.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var $=Yr(t,"Location"),z=Tn(t),ae=yl([i],Yr(t,"BaseURL"));z.type=z.type||"static",z.sourceDuration=z.mediaPresentationDuration||0,z.NOW=l,z.clientOffset=y,$.length&&(z.locations=$.map(Uc));var pe=[];return k.forEach(function(me,Ee){var We=Tn(me),et=pe[Ee-1];We.start=function(t){var r=t.attributes,n=t.priorPeriodAttributes;return"number"==typeof r.start?r.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==t.mpdType?null:0}({attributes:We,priorPeriodAttributes:et?et.attributes:null,mpdType:z.type}),pe.push({node:me,attributes:We})}),{locations:z.locations,representationInfo:vl(pe.map(f(z,ae)))}}(se(t),r),e=function(t){return t.map(Yy)}(n.representationInfo);return Ny({dashPlaylists:e,locations:n.locations,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest})}(t.masterXml,{manifestUri:n,clientOffset:t.clientOffset,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest});return $b(l,n),l}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(i=function(t,r,n){for(var e=!0,i=ox(t,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts}),s=0;s<r.playlists.length;s++){var l=r.playlists[s];if(l.sidx){var p=Es(l.sidx);n&&n[p]&&n[p].sidx&&gl(l,n[p].sidx,l.sidx.resolvedUri)}var y=oT(i,l,ux);y&&(i=y,e=!1)}return rd(r,function(k,$,z,ae){if(k.playlists&&k.playlists.length){var pe=k.playlists[0].id,me=oT(i,k.playlists[0],ux);me&&((i=me).mediaGroups[$][z][ae].playlists[0]=i.playlists[pe],e=!1)}}),r.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(e=!1),e?null:i}(e,i,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=i||e;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(i)},r.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(De().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var i=e.master&&e.master.minimumUpdatePeriod;0===i&&(e.media()?i=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof i||i<=0?i<0&&this.logger_("found invalid minimumUpdatePeriod of "+i+", not setting a timeout"):this.createMUPTimeout_(i)},r.createMUPTimeout_=function(e){var i=this.masterPlaylistLoader_;i.minimumUpdatePeriodTimeout_=De().setTimeout(function(){i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(e)},e)},r.refreshXml_=function(){var e=this;this.requestMaster_(function(i,s){s&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=function(t,r){var e=lx(t.playlists,r);return rd(t,function(i,s,l,p){i.playlists&&i.playlists.length&&(e=ox(e,lx(i.playlists,r)))}),e}(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(l){e.refreshMedia_(e.media().id)}))})},r.refreshMedia_=function(e){var i=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,l=!this.media_||this.media_!==s[e];l?this.media_=s[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function y(){i.media().endList||(i.mediaUpdateTimeout=De().setTimeout(function(){i.trigger("mediaupdatetimeout"),y()},uT(i.media(),Boolean(l))))}(),this.trigger("loadedplaylist")},t}(ke.EventTarget),xn={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},fx=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},cx=function(t){return function(){var r=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{var r=new BlobBuilder;return r.append(t),URL.createObjectURL(r.getBlob())}}(t),n=fx(new Worker(r));n.objURL=r;var e=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(r),e.call(this)},n}},dx=function(t){return"var browserWorkerPolyFill = "+fx.toString()+";\nbrowserWorkerPolyFill(self);\n"+t},hx=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},m1=dx(hx(function(){var a=function(){this.init=function(){var D={};this.on=function(H,j){D[H]||(D[H]=[]),D[H]=D[H].concat(j)},this.off=function(H,j){var K;return!!D[H]&&(K=D[H].indexOf(j),D[H]=D[H].slice(),D[H].splice(K,1),K>-1)},this.trigger=function(H){var j,K,te,ie;if(j=D[H])if(2===arguments.length)for(te=j.length,K=0;K<te;++K)j[K].call(this,arguments[1]);else{for(ie=[],K=arguments.length,K=1;K<arguments.length;++K)ie.push(arguments[K]);for(te=j.length,K=0;K<te;++K)j[K].apply(this,ie)}},this.dispose=function(){D={}}}};a.prototype.pipe=function(le){return this.on("data",function(D){le.push(D)}),this.on("done",function(D){le.flush(D)}),this.on("partialdone",function(D){le.partialFlush(D)}),this.on("endedtimeline",function(D){le.endTimeline(D)}),this.on("reset",function(D){le.reset(D)}),le},a.prototype.push=function(le){this.trigger("data",le)},a.prototype.flush=function(le){this.trigger("done",le)},a.prototype.partialFlush=function(le){this.trigger("partialdone",le)},a.prototype.endTimeline=function(le){this.trigger("endedtimeline",le)},a.prototype.reset=function(le){this.trigger("reset",le)};var s,l,p,y,k,$,z,ae,pe,me,Ee,We,et,pt,Ye,ze,it,Xe,qe,at,$e,Lt,Tt,Ft,Sr,er,cr,Pr,Mr,dn,Tr,Cs,Sn,Wi,Ai,Ia,le,D,t=a,r=Math.pow(2,32),e={getUint64:function(D){var j,H=new DataView(D.buffer,D.byteOffset,D.byteLength);return H.getBigUint64?(j=H.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(j):j:H.getUint32(0)*r+H.getUint32(4)},MAX_UINT32:r},i=e.MAX_UINT32;(function(){var le;if(Tt={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(le in Tt)Tt.hasOwnProperty(le)&&(Tt[le]=[le.charCodeAt(0),le.charCodeAt(1),le.charCodeAt(2),le.charCodeAt(3)]);Ft=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),er=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Sr=new Uint8Array([0,0,0,1]),cr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Pr=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Mr={video:cr,audio:Pr},Cs=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Tr=new Uint8Array([0,0,0,0,0,0,0,0]),Sn=new Uint8Array([0,0,0,0,0,0,0,0]),Wi=Sn,Ai=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ia=Sn,dn=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(D){var K,te,H=[],j=0;for(K=1;K<arguments.length;K++)H.push(arguments[K]);for(K=H.length;K--;)j+=H[K].byteLength;for(te=new Uint8Array(j+8),new DataView(te.buffer,te.byteOffset,te.byteLength).setUint32(0,te.byteLength),te.set(D,4),K=0,j=8;K<H.length;K++)te.set(H[K],j),j+=H[K].byteLength;return te},l=function(){return s(Tt.dinf,s(Tt.dref,Cs))},p=function(D){return s(Tt.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,D.audioobjecttype<<3|D.samplingfrequencyindex>>>1,D.samplingfrequencyindex<<7|D.channelcount<<3,6,1,2]))},y=function(){return s(Tt.ftyp,Ft,Sr,Ft,er)},ze=function(D){return s(Tt.hdlr,Mr[D])},k=function(D){return s(Tt.mdat,D)},Ye=function(D){var H=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,D.duration>>>24&255,D.duration>>>16&255,D.duration>>>8&255,255&D.duration,85,196,0,0]);return D.samplerate&&(H[12]=D.samplerate>>>24&255,H[13]=D.samplerate>>>16&255,H[14]=D.samplerate>>>8&255,H[15]=255&D.samplerate),s(Tt.mdhd,H)},pt=function(D){return s(Tt.mdia,Ye(D),ze(D.type),z(D))},$=function(D){return s(Tt.mfhd,new Uint8Array([0,0,0,0,(4278190080&D)>>24,(16711680&D)>>16,(65280&D)>>8,255&D]))},z=function(D){return s(Tt.minf,"video"===D.type?s(Tt.vmhd,dn):s(Tt.smhd,Tr),l(),Xe(D))},ae=function(D,H){for(var j=[],K=H.length;K--;)j[K]=at(H[K]);return s.apply(null,[Tt.moof,$(D)].concat(j))},pe=function(D){for(var H=D.length,j=[];H--;)j[H]=We(D[H]);return s.apply(null,[Tt.moov,Ee(4294967295)].concat(j).concat(me(D)))},me=function(D){for(var H=D.length,j=[];H--;)j[H]=$e(D[H]);return s.apply(null,[Tt.mvex].concat(j))},Ee=function(D){var H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&D)>>24,(16711680&D)>>16,(65280&D)>>8,255&D,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(Tt.mvhd,H)},it=function(D){var K,te,H=D.samples||[],j=new Uint8Array(4+H.length);for(te=0;te<H.length;te++)j[te+4]=(K=H[te].flags).dependsOn<<4|K.isDependedOn<<2|K.hasRedundancy;return s(Tt.sdtp,j)},Xe=function(D){return s(Tt.stbl,qe(D),s(Tt.stts,Ia),s(Tt.stsc,Wi),s(Tt.stsz,Ai),s(Tt.stco,Sn))},qe=function(j){return s(Tt.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===j.type?le(j):D(j))},le=function(j){var xe,Ie,K=j.sps||[],te=j.pps||[],ie=[],_e=[];for(xe=0;xe<K.length;xe++)ie.push((65280&K[xe].byteLength)>>>8),ie.push(255&K[xe].byteLength),ie=ie.concat(Array.prototype.slice.call(K[xe]));for(xe=0;xe<te.length;xe++)_e.push((65280&te[xe].byteLength)>>>8),_e.push(255&te[xe].byteLength),_e=_e.concat(Array.prototype.slice.call(te[xe]));if(Ie=[Tt.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&j.width)>>8,255&j.width,(65280&j.height)>>8,255&j.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(Tt.avcC,new Uint8Array([1,j.profileIdc,j.profileCompatibility,j.levelIdc,255].concat([K.length],ie,[te.length],_e))),s(Tt.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],j.sarRatio){var Oe=j.sarRatio[0],Me=j.sarRatio[1];Ie.push(s(Tt.pasp,new Uint8Array([(4278190080&Oe)>>24,(16711680&Oe)>>16,(65280&Oe)>>8,255&Oe,(4278190080&Me)>>24,(16711680&Me)>>16,(65280&Me)>>8,255&Me])))}return s.apply(null,Ie)},D=function(j){return s(Tt.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&j.channelcount)>>8,255&j.channelcount,(65280&j.samplesize)>>8,255&j.samplesize,0,0,0,0,(65280&j.samplerate)>>8,255&j.samplerate,0,0]),p(j))},et=function(D){var H=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&D.id)>>24,(16711680&D.id)>>16,(65280&D.id)>>8,255&D.id,0,0,0,0,(4278190080&D.duration)>>24,(16711680&D.duration)>>16,(65280&D.duration)>>8,255&D.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&D.width)>>8,255&D.width,0,0,(65280&D.height)>>8,255&D.height,0,0]);return s(Tt.tkhd,H)},at=function(D){var H,j,K,te,_e,xe;return H=s(Tt.tfhd,new Uint8Array([0,0,0,58,(4278190080&D.id)>>24,(16711680&D.id)>>16,(65280&D.id)>>8,255&D.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),_e=Math.floor(D.baseMediaDecodeTime/i),xe=Math.floor(D.baseMediaDecodeTime%i),j=s(Tt.tfdt,new Uint8Array([1,0,0,0,_e>>>24&255,_e>>>16&255,_e>>>8&255,255&_e,xe>>>24&255,xe>>>16&255,xe>>>8&255,255&xe])),"audio"===D.type?(K=Lt(D,92),s(Tt.traf,H,j,K)):(te=it(D),K=Lt(D,te.length+92),s(Tt.traf,H,j,K,te))},We=function(D){return D.duration=D.duration||4294967295,s(Tt.trak,et(D),pt(D))},$e=function(D){var H=new Uint8Array([0,0,0,0,(4278190080&D.id)>>24,(16711680&D.id)>>16,(65280&D.id)>>8,255&D.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==D.type&&(H[H.length-1]=0),s(Tt.trex,H)},function(){var le,D,H;H=function(K,te){var ie=0,_e=0,xe=0,Ie=0;return K.length&&(void 0!==K[0].duration&&(ie=1),void 0!==K[0].size&&(_e=2),void 0!==K[0].flags&&(xe=4),void 0!==K[0].compositionTimeOffset&&(Ie=8)),[0,0,ie|_e|xe|Ie,1,(4278190080&K.length)>>>24,(16711680&K.length)>>>16,(65280&K.length)>>>8,255&K.length,(4278190080&te)>>>24,(16711680&te)>>>16,(65280&te)>>>8,255&te]},D=function(K,te){var ie,_e,xe,Ie,Oe,Me;for(xe=H(Ie=K.samples||[],te+=20+16*Ie.length),(_e=new Uint8Array(xe.length+16*Ie.length)).set(xe),ie=xe.length,Me=0;Me<Ie.length;Me++)_e[ie++]=(4278190080&(Oe=Ie[Me]).duration)>>>24,_e[ie++]=(16711680&Oe.duration)>>>16,_e[ie++]=(65280&Oe.duration)>>>8,_e[ie++]=255&Oe.duration,_e[ie++]=(4278190080&Oe.size)>>>24,_e[ie++]=(16711680&Oe.size)>>>16,_e[ie++]=(65280&Oe.size)>>>8,_e[ie++]=255&Oe.size,_e[ie++]=Oe.flags.isLeading<<2|Oe.flags.dependsOn,_e[ie++]=Oe.flags.isDependedOn<<6|Oe.flags.hasRedundancy<<4|Oe.flags.paddingValue<<1|Oe.flags.isNonSyncSample,_e[ie++]=61440&Oe.flags.degradationPriority,_e[ie++]=15&Oe.flags.degradationPriority,_e[ie++]=(4278190080&Oe.compositionTimeOffset)>>>24,_e[ie++]=(16711680&Oe.compositionTimeOffset)>>>16,_e[ie++]=(65280&Oe.compositionTimeOffset)>>>8,_e[ie++]=255&Oe.compositionTimeOffset;return s(Tt.trun,_e)},le=function(K,te){var ie,_e,xe,Ie,Oe,Me;for(xe=H(Ie=K.samples||[],te+=20+8*Ie.length),(ie=new Uint8Array(xe.length+8*Ie.length)).set(xe),_e=xe.length,Me=0;Me<Ie.length;Me++)ie[_e++]=(4278190080&(Oe=Ie[Me]).duration)>>>24,ie[_e++]=(16711680&Oe.duration)>>>16,ie[_e++]=(65280&Oe.duration)>>>8,ie[_e++]=255&Oe.duration,ie[_e++]=(4278190080&Oe.size)>>>24,ie[_e++]=(16711680&Oe.size)>>>16,ie[_e++]=(65280&Oe.size)>>>8,ie[_e++]=255&Oe.size;return s(Tt.trun,ie)},Lt=function(K,te){return"audio"===K.type?le(K,te):D(K,te)}}();var PT,OT,IT,Bv,LT,eS,tS,rS,Ci_mdat=k,Ci_moof=ae,Io=function(D,H){var j={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return j.dataOffset=H,j.compositionTimeOffset=D.pts-D.dts,j.duration=D.duration,j.size=4*D.length,j.size+=D.byteLength,D.keyFrame&&(j.flags.dependsOn=2,j.flags.isNonSyncSample=0),j},Ds=[33,16,5,32,164,27],DT=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ar=function(D){for(var H=[];D--;)H.push(0);return H};OT=function(D){return 9e4*D},IT=function(D,H){return D*H},Bv=function(D){return D/9e4},LT=function(D,H){return D/H},eS=function(D,H){return OT(LT(D,H))},tS=function(D,H){return IT(Bv(D),H)},rS=function(D,H,j){return Bv(j?D:D-H)};var Er_secondsToVideoTs=OT,Er_videoTsToSeconds=Bv,Er_audioTsToVideoTs=eS,Er_videoTsToAudioTs=tS,Er_metadataTsToSeconds=rS,Nv_prefixWithSilence=function(D,H,j,K){var te,Oe,Me,Qe,ie=0,_e=0,xe=0,Ie=0;if(H.length&&(te=Er_audioTsToVideoTs(D.baseMediaDecodeTime,D.samplerate),ie=Math.ceil(9e4/(D.samplerate/1024)),j&&K&&(_e=te-Math.max(j,K),Ie=(xe=Math.floor(_e/ie))*ie),!(xe<1||Ie>45e3))){for((Oe=function(){if(!PT){var D={96e3:[Ds,[227,64],Ar(154),[56]],88200:[Ds,[231],Ar(170),[56]],64e3:[Ds,[248,192],Ar(240),[56]],48e3:[Ds,[255,192],Ar(268),[55,148,128],Ar(54),[112]],44100:[Ds,[255,192],Ar(268),[55,163,128],Ar(84),[112]],32e3:[Ds,[255,192],Ar(268),[55,234],Ar(226),[112]],24e3:[Ds,[255,192],Ar(268),[55,255,128],Ar(268),[111,112],Ar(126),[224]],16e3:[Ds,[255,192],Ar(268),[55,255,128],Ar(268),[111,255],Ar(269),[223,108],Ar(195),[1,192]],12e3:[DT,Ar(268),[3,127,248],Ar(268),[6,255,240],Ar(268),[13,255,224],Ar(268),[27,253,128],Ar(259),[56]],11025:[DT,Ar(268),[3,127,248],Ar(268),[6,255,240],Ar(268),[13,255,224],Ar(268),[27,255,192],Ar(268),[55,175,128],Ar(108),[112]],8e3:[DT,Ar(268),[3,121,16],Ar(47),[7]]};PT=function(D){return Object.keys(D).reduce(function(H,j){return H[j]=new Uint8Array(D[j].reduce(function(K,te){return K.concat(te)},[])),H},{})}(D)}return PT}()[D.samplerate])||(Oe=H[0].data),Me=0;Me<xe;Me++)H.splice(0,0,{data:Oe,dts:(Qe=H[0]).dts-ie,pts:Qe.pts-ie});return D.baseMediaDecodeTime-=Math.floor(Er_videoTsToAudioTs(Ie,D.samplerate)),Ie}},fa_clearDtsInfo=function(D){delete D.minSegmentDts,delete D.maxSegmentDts,delete D.minSegmentPts,delete D.maxSegmentPts},fa_calculateTrackBaseMediaDecodeTime=function(D,H){var j,te=D.minSegmentDts;return H||(te-=D.timelineStartInfo.dts),j=D.timelineStartInfo.baseMediaDecodeTime,j+=te,j=Math.max(0,j),"audio"===D.type&&(j*=D.samplerate/9e4,j=Math.floor(j)),j},fa_collectDtsInfo=function(D,H){"number"==typeof H.pts&&(void 0===D.timelineStartInfo.pts&&(D.timelineStartInfo.pts=H.pts),D.minSegmentPts=void 0===D.minSegmentPts?H.pts:Math.min(D.minSegmentPts,H.pts),D.maxSegmentPts=void 0===D.maxSegmentPts?H.pts:Math.max(D.maxSegmentPts,H.pts)),"number"==typeof H.dts&&(void 0===D.timelineStartInfo.dts&&(D.timelineStartInfo.dts=H.dts),D.minSegmentDts=void 0===D.minSegmentDts?H.dts:Math.min(D.minSegmentDts,H.dts),D.maxSegmentDts=void 0===D.maxSegmentDts?H.dts:Math.max(D.maxSegmentDts,H.dts))},Di=function le(D){D=D||{},le.prototype.init.call(this),this.parse708captions_="boolean"!=typeof D.parse708captions||D.parse708captions,this.captionPackets_=[],this.ccStreams_=[new qr(0,0),new qr(0,1),new qr(1,0),new qr(1,1)],this.parse708captions_&&(this.cc708Stream_=new kr({captionServices:D.captionServices})),this.reset(),this.ccStreams_.forEach(function(H){H.on("data",this.trigger.bind(this,"data")),H.on("partialdone",this.trigger.bind(this,"partialdone")),H.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Di.prototype=new t).push=function(le){var D,H,j;if("sei_rbsp"===le.nalUnitType&&(D=function(D){for(var H=0,j={payloadType:-1,payloadSize:0},K=0,te=0;H<D.byteLength&&128!==D[H];){for(;255===D[H];)K+=255,H++;for(K+=D[H++];255===D[H];)te+=255,H++;if(te+=D[H++],!j.payload&&4===K){if("GA94"===String.fromCharCode(D[H+3],D[H+4],D[H+5],D[H+6])){j.payloadType=K,j.payloadSize=te,j.payload=D.subarray(H,H+te);break}j.payload=void 0}H+=te,K=0,te=0}return j}(le.escapedRBSP)).payload&&4===D.payloadType&&(H=function(D){return 181!==D.payload[0]||49!=(D.payload[1]<<8|D.payload[2])||"GA94"!==String.fromCharCode(D.payload[3],D.payload[4],D.payload[5],D.payload[6])||3!==D.payload[7]?null:D.payload.subarray(8,D.payload.length-1)}(D))){if(le.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(le.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));j=function(D,H){var K,te,ie,_e,j=[];if(!(64&H[0]))return j;for(te=31&H[0],K=0;K<te;K++)_e={type:3&H[2+(ie=3*K)],pts:D},4&H[ie+2]&&(_e.ccData=H[ie+3]<<8|H[ie+4],j.push(_e));return j}(le.pts,H),this.captionPackets_=this.captionPackets_.concat(j),this.latestDts_!==le.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=le.dts}},Di.prototype.flushCCStreams=function(le){this.ccStreams_.forEach(function(D){return"flush"===le?D.flush():D.partialFlush()},this)},Di.prototype.flushStream=function(le){this.captionPackets_.length?(this.captionPackets_.forEach(function(D,H){D.presortIndex=H}),this.captionPackets_.sort(function(D,H){return D.pts===H.pts?D.presortIndex-H.presortIndex:D.pts-H.pts}),this.captionPackets_.forEach(function(D){D.type<2?this.dispatchCea608Packet(D):this.dispatchCea708Packet(D)},this),this.captionPackets_.length=0,this.flushCCStreams(le)):this.flushCCStreams(le)},Di.prototype.flush=function(){return this.flushStream("flush")},Di.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Di.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(le){le.reset()})},Di.prototype.dispatchCea608Packet=function(le){this.setsTextOrXDSActive(le)?this.activeCea608Channel_[le.type]=null:this.setsChannel1Active(le)?this.activeCea608Channel_[le.type]=0:this.setsChannel2Active(le)&&(this.activeCea608Channel_[le.type]=1),null!==this.activeCea608Channel_[le.type]&&this.ccStreams_[(le.type<<1)+this.activeCea608Channel_[le.type]].push(le)},Di.prototype.setsChannel1Active=function(le){return 4096==(30720&le.ccData)},Di.prototype.setsChannel2Active=function(le){return 6144==(30720&le.ccData)},Di.prototype.setsTextOrXDSActive=function(le){return 256==(28928&le.ccData)||4138==(30974&le.ccData)||6186==(30974&le.ccData)},Di.prototype.dispatchCea708Packet=function(le){this.parse708captions_&&this.cc708Stream_.push(le)};var jP={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},jv=function(D){return 32<=D&&D<=127||160<=D&&D<=255},ss=function(D){this.windowNum=D,this.reset()};ss.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ss.prototype.getText=function(){return this.rows.join("\n")},ss.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ss.prototype.newLine=function(le){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(le),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ss.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ss.prototype.addText=function(le){this.rows[this.rowIdx]+=le},ss.prototype.backspace=function(){if(!this.isEmpty()){var le=this.rows[this.rowIdx];this.rows[this.rowIdx]=le.substr(0,le.length-1)}};var Hv=function(D,H,j){this.serviceNum=D,this.text="",this.currentWindow=new ss(-1),this.windows=[],this.stream=j,"string"==typeof H&&this.createTextDecoder(H)};Hv.prototype.init=function(le,D){this.startPts=le;for(var H=0;H<8;H++)this.windows[H]=new ss(H),"function"==typeof D&&(this.windows[H].beforeRowOverflow=D)},Hv.prototype.setCurrentWindow=function(le){this.currentWindow=this.windows[le]},Hv.prototype.createTextDecoder=function(le){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(le)}catch(D){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+le+" encoding. "+D})}};var kr=function le(D){D=D||{},le.prototype.init.call(this);var te,H=this,j=D.captionServices||{},K={};Object.keys(j).forEach(function(ie){te=j[ie],/^SERVICE/.test(ie)&&(K[ie]=te.encoding)}),this.serviceEncodings=K,this.current708Packet=null,this.services={},this.push=function(ie){3===ie.type?(H.new708Packet(),H.add708Bytes(ie)):(null===H.current708Packet&&H.new708Packet(),H.add708Bytes(ie))}};kr.prototype=new t,kr.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},kr.prototype.add708Bytes=function(le){var D=le.ccData,H=D>>>8,j=255&D;this.current708Packet.ptsVals.push(le.pts),this.current708Packet.data.push(H),this.current708Packet.data.push(j)},kr.prototype.push708Packet=function(){var le=this.current708Packet,D=le.data,H=null,j=null,K=0,te=D[K++];for(le.seq=te>>6,le.sizeCode=63&te;K<D.length;K++)j=31&(te=D[K++]),7==(H=te>>5)&&j>0&&(H=te=D[K++]),this.pushServiceBlock(H,K,j),j>0&&(K+=j-1)},kr.prototype.pushServiceBlock=function(le,D,H){var j,K=D,te=this.current708Packet.data,ie=this.services[le];for(ie||(ie=this.initService(le,K));K<D+H&&K<te.length;K++)jv(j=te[K])?K=this.handleText(K,ie):24===j?K=this.multiByteCharacter(K,ie):16===j?K=this.extendedCommands(K,ie):128<=j&&j<=135?K=this.setCurrentWindow(K,ie):152<=j&&j<=159?K=this.defineWindow(K,ie):136===j?K=this.clearWindows(K,ie):140===j?K=this.deleteWindows(K,ie):137===j?K=this.displayWindows(K,ie):138===j?K=this.hideWindows(K,ie):139===j?K=this.toggleWindows(K,ie):151===j?K=this.setWindowAttributes(K,ie):144===j?K=this.setPenAttributes(K,ie):145===j?K=this.setPenColor(K,ie):146===j?K=this.setPenLocation(K,ie):143===j?ie=this.reset(K,ie):8===j?ie.currentWindow.backspace():12===j?ie.currentWindow.clearText():13===j?ie.currentWindow.pendingNewLine=!0:14===j?ie.currentWindow.clearText():141===j&&K++},kr.prototype.extendedCommands=function(le,D){var j=this.current708Packet.data[++le];return jv(j)&&(le=this.handleText(le,D,{isExtended:!0})),le},kr.prototype.getPts=function(le){return this.current708Packet.ptsVals[Math.floor(le/2)]},kr.prototype.initService=function(le,D){var j,K,H=this;return(j="SERVICE"+le)in this.serviceEncodings&&(K=this.serviceEncodings[j]),this.services[le]=new Hv(le,K,H),this.services[le].init(this.getPts(D),function(te){H.flushDisplayed(te,H.services[le])}),this.services[le]},kr.prototype.handleText=function(le,D,H){var Oe,Me,j=H&&H.isExtended,te=this.current708Packet.data,ie=j?4096:0,_e=te[le],Ie=D.currentWindow;return D.textDecoder_&&!j?(H&&H.isMultiByte?(Me=[_e,te[le+1]],le++):Me=[_e],Oe=D.textDecoder_.decode(new Uint8Array(Me))):Oe=function(D){var H=jP[D]||D;return 4096&D&&D===H?"":String.fromCharCode(H)}(ie|_e),Ie.pendingNewLine&&!Ie.isEmpty()&&Ie.newLine(this.getPts(le)),Ie.pendingNewLine=!1,Ie.addText(Oe),le},kr.prototype.multiByteCharacter=function(le,D){var H=this.current708Packet.data,K=H[le+2];return jv(H[le+1])&&jv(K)&&(le=this.handleText(++le,D,{isMultiByte:!0})),le},kr.prototype.setCurrentWindow=function(le,D){return D.setCurrentWindow(7&this.current708Packet.data[le]),le},kr.prototype.defineWindow=function(le,D){var H=this.current708Packet.data,j=H[le];D.setCurrentWindow(7&j);var te=D.currentWindow;return j=H[++le],te.visible=(32&j)>>5,te.rowLock=(16&j)>>4,te.columnLock=(8&j)>>3,te.priority=7&j,j=H[++le],te.relativePositioning=(128&j)>>7,te.anchorVertical=127&j,j=H[++le],te.anchorHorizontal=j,j=H[++le],te.anchorPoint=(240&j)>>4,te.rowCount=15&j,j=H[++le],te.columnCount=63&j,j=H[++le],te.windowStyle=(56&j)>>3,te.penStyle=7&j,te.virtualRowCount=te.rowCount+1,le},kr.prototype.setWindowAttributes=function(le,D){var H=this.current708Packet.data,j=H[le],K=D.currentWindow.winAttr;return j=H[++le],K.fillOpacity=(192&j)>>6,K.fillRed=(48&j)>>4,K.fillGreen=(12&j)>>2,K.fillBlue=3&j,j=H[++le],K.borderType=(192&j)>>6,K.borderRed=(48&j)>>4,K.borderGreen=(12&j)>>2,K.borderBlue=3&j,j=H[++le],K.borderType+=(128&j)>>5,K.wordWrap=(64&j)>>6,K.printDirection=(48&j)>>4,K.scrollDirection=(12&j)>>2,K.justify=3&j,j=H[++le],K.effectSpeed=(240&j)>>4,K.effectDirection=(12&j)>>2,K.displayEffect=3&j,le},kr.prototype.flushDisplayed=function(le,D){for(var H=[],j=0;j<8;j++)D.windows[j].visible&&!D.windows[j].isEmpty()&&H.push(D.windows[j].getText());D.endPts=le,D.text=H.join("\n\n"),this.pushCaption(D),D.startPts=le},kr.prototype.pushCaption=function(le){""!==le.text&&(this.trigger("data",{startPts:le.startPts,endPts:le.endPts,text:le.text,stream:"cc708_"+le.serviceNum}),le.text="",le.startPts=le.endPts)},kr.prototype.displayWindows=function(le,D){var j=this.current708Packet.data[++le],K=this.getPts(le);this.flushDisplayed(K,D);for(var te=0;te<8;te++)j&1<<te&&(D.windows[te].visible=1);return le},kr.prototype.hideWindows=function(le,D){var j=this.current708Packet.data[++le],K=this.getPts(le);this.flushDisplayed(K,D);for(var te=0;te<8;te++)j&1<<te&&(D.windows[te].visible=0);return le},kr.prototype.toggleWindows=function(le,D){var j=this.current708Packet.data[++le],K=this.getPts(le);this.flushDisplayed(K,D);for(var te=0;te<8;te++)j&1<<te&&(D.windows[te].visible^=1);return le},kr.prototype.clearWindows=function(le,D){var j=this.current708Packet.data[++le],K=this.getPts(le);this.flushDisplayed(K,D);for(var te=0;te<8;te++)j&1<<te&&D.windows[te].clearText();return le},kr.prototype.deleteWindows=function(le,D){var j=this.current708Packet.data[++le],K=this.getPts(le);this.flushDisplayed(K,D);for(var te=0;te<8;te++)j&1<<te&&D.windows[te].reset();return le},kr.prototype.setPenAttributes=function(le,D){var H=this.current708Packet.data,j=H[le],K=D.currentWindow.penAttr;return j=H[++le],K.textTag=(240&j)>>4,K.offset=(12&j)>>2,K.penSize=3&j,j=H[++le],K.italics=(128&j)>>7,K.underline=(64&j)>>6,K.edgeType=(56&j)>>3,K.fontStyle=7&j,le},kr.prototype.setPenColor=function(le,D){var H=this.current708Packet.data,j=H[le],K=D.currentWindow.penColor;return j=H[++le],K.fgOpacity=(192&j)>>6,K.fgRed=(48&j)>>4,K.fgGreen=(12&j)>>2,K.fgBlue=3&j,j=H[++le],K.bgOpacity=(192&j)>>6,K.bgRed=(48&j)>>4,K.bgGreen=(12&j)>>2,K.bgBlue=3&j,j=H[++le],K.edgeRed=(48&j)>>4,K.edgeGreen=(12&j)>>2,K.edgeBlue=3&j,le},kr.prototype.setPenLocation=function(le,D){var H=this.current708Packet.data,j=H[le],K=D.currentWindow.penLoc;return D.currentWindow.pendingNewLine=!0,j=H[++le],K.row=15&j,j=H[++le],K.column=63&j,le},kr.prototype.reset=function(le,D){var H=this.getPts(le);return this.flushDisplayed(H,D),this.initService(D.serviceNum,le)};var WP={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Wv=function(D){return null===D?"":(D=WP[D]||D,String.fromCharCode(D))},GP=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Lo=function(){for(var D=[],H=15;H--;)D.push("");return D},qr=function le(D,H){le.prototype.init.call(this),this.field_=D||0,this.dataChannel_=H||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(j){var K,te,ie,_e,xe;if((K=32639&j.ccData)!==this.lastControlCode_){if(4096==(61440&K)?this.lastControlCode_=K:K!==this.PADDING_&&(this.lastControlCode_=null),ie=K>>>8,_e=255&K,K!==this.PADDING_)if(K===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(K===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(j.pts),this.flushDisplayed(j.pts),te=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=te,this.startPts_=j.pts;else if(K===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(j.pts);else if(K===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(j.pts);else if(K===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(j.pts);else if(K===this.CARRIAGE_RETURN_)this.clearFormatting(j.pts),this.flushDisplayed(j.pts),this.shiftRowsUp_(),this.startPts_=j.pts;else if(K===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(K===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(j.pts),this.displayed_=Lo();else if(K===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Lo();else if(K===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(j.pts),this.displayed_=Lo()),this.mode_="paintOn",this.startPts_=j.pts;else if(this.isSpecialCharacter(ie,_e))xe=Wv((ie=(3&ie)<<8)|_e),this[this.mode_](j.pts,xe),this.column_++;else if(this.isExtCharacter(ie,_e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),xe=Wv((ie=(3&ie)<<8)|_e),this[this.mode_](j.pts,xe),this.column_++;else if(this.isMidRowCode(ie,_e))this.clearFormatting(j.pts),this[this.mode_](j.pts," "),this.column_++,14==(14&_e)&&this.addFormatting(j.pts,["i"]),1==(1&_e)&&this.addFormatting(j.pts,["u"]);else if(this.isOffsetControlCode(ie,_e))this.column_+=3&_e;else if(this.isPAC(ie,_e)){var Ie=GP.indexOf(7968&K);"rollUp"===this.mode_&&(Ie-this.rollUpRows_+1<0&&(Ie=this.rollUpRows_-1),this.setRollUp(j.pts,Ie)),Ie!==this.row_&&(this.clearFormatting(j.pts),this.row_=Ie),1&_e&&-1===this.formatting_.indexOf("u")&&this.addFormatting(j.pts,["u"]),16==(16&K)&&(this.column_=4*((14&K)>>1)),this.isColorPAC(_e)&&14==(14&_e)&&this.addFormatting(j.pts,["i"])}else this.isNormalChar(ie)&&(0===_e&&(_e=null),xe=Wv(ie),xe+=Wv(_e),this[this.mode_](j.pts,xe),this.column_+=xe.length)}else this.lastControlCode_=null}};qr.prototype=new t,qr.prototype.flushDisplayed=function(le){var D=this.displayed_.map(function(H,j){try{return H.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+j+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");D.length&&this.trigger("data",{startPts:this.startPts_,endPts:le,text:D,stream:this.name_})},qr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Lo(),this.nonDisplayed_=Lo(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},qr.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},qr.prototype.isSpecialCharacter=function(le,D){return le===this.EXT_&&D>=48&&D<=63},qr.prototype.isExtCharacter=function(le,D){return(le===this.EXT_+1||le===this.EXT_+2)&&D>=32&&D<=63},qr.prototype.isMidRowCode=function(le,D){return le===this.EXT_&&D>=32&&D<=47},qr.prototype.isOffsetControlCode=function(le,D){return le===this.OFFSET_&&D>=33&&D<=35},qr.prototype.isPAC=function(le,D){return le>=this.BASE_&&le<this.BASE_+8&&D>=64&&D<=127},qr.prototype.isColorPAC=function(le){return le>=64&&le<=79||le>=96&&le<=127},qr.prototype.isNormalChar=function(le){return le>=32&&le<=127},qr.prototype.setRollUp=function(le,D){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(le),this.nonDisplayed_=Lo(),this.displayed_=Lo()),void 0!==D&&D!==this.row_)for(var H=0;H<this.rollUpRows_;H++)this.displayed_[D-H]=this.displayed_[this.row_-H],this.displayed_[this.row_-H]="";void 0===D&&(D=this.row_),this.topRow_=D-this.rollUpRows_+1},qr.prototype.addFormatting=function(le,D){this.formatting_=this.formatting_.concat(D);var H=D.reduce(function(j,K){return j+"<"+K+">"},"");this[this.mode_](le,H)},qr.prototype.clearFormatting=function(le){if(this.formatting_.length){var D=this.formatting_.reverse().reduce(function(H,j){return H+"</"+j+">"},"");this.formatting_=[],this[this.mode_](le,D)}},qr.prototype.popOn=function(le,D){var H=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=H+=D},qr.prototype.rollUp=function(le,D){var H=this.displayed_[this.row_];this.displayed_[this.row_]=H+=D},qr.prototype.shiftRowsUp_=function(){var le;for(le=0;le<this.topRow_;le++)this.displayed_[le]="";for(le=this.row_+1;le<15;le++)this.displayed_[le]="";for(le=this.topRow_;le<this.row_;le++)this.displayed_[le]=this.displayed_[le+1];this.displayed_[this.row_]=""},qr.prototype.paintOn=function(le,D){var H=this.displayed_[this.row_];this.displayed_[this.row_]=H+=D};var Vv={CaptionStream:Di,Cea608Stream:qr,Cea708Stream:kr},On={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},RT=function(D,H){var j=1;for(D>H&&(j=-1);Math.abs(H-D)>4294967296;)D+=8589934592*j;return D},aS=function le(D){var H,j;le.prototype.init.call(this),this.type_=D||"shared",this.push=function(K){"shared"!==this.type_&&K.type!==this.type_||(void 0===j&&(j=K.dts),K.dts=RT(K.dts,j),K.pts=RT(K.pts,j),H=K.dts,this.trigger("data",K))},this.flush=function(){j=H,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){j=void 0,H=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};aS.prototype=new t;var zv,sS_TimestampRolloverStream=aS,sS_handleRollover=RT,oS=function(D,H,j){var K,te="";for(K=H;K<j;K++)te+="%"+("00"+D[K].toString(16)).slice(-2);return te},Kv=function(D,H,j){return decodeURIComponent(oS(D,H,j))},YP=function(D,H,j){return unescape(oS(D,H,j))},Yv=function(D){return D[0]<<21|D[1]<<14|D[2]<<7|D[3]},uS={TXXX:function(D){var H;if(3===D.data[0]){for(H=1;H<D.data.length;H++)if(0===D.data[H]){D.description=Kv(D.data,1,H),D.value=Kv(D.data,H+1,D.data.length).replace(/\0*$/,"");break}D.data=D.value}},WXXX:function(D){var H;if(3===D.data[0])for(H=1;H<D.data.length;H++)if(0===D.data[H]){D.description=Kv(D.data,1,H),D.url=Kv(D.data,H+1,D.data.length);break}},PRIV:function(D){var H;for(H=0;H<D.data.length;H++)if(0===D.data[H]){D.owner=YP(D.data,0,H);break}D.privateData=D.data.subarray(H+1),D.data=D.privateData}};zv=function(D){var ie,H={descriptor:D&&D.descriptor},j=0,K=[],te=0;if(zv.prototype.init.call(this),this.dispatchType=On.METADATA_STREAM_TYPE.toString(16),H.descriptor)for(ie=0;ie<H.descriptor.length;ie++)this.dispatchType+=("00"+H.descriptor[ie].toString(16)).slice(-2);this.push=function(_e){var xe,Ie,Oe,Me,Qe;if("timed-metadata"===_e.type){if(_e.dataAlignmentIndicator&&(te=0,K.length=0),0===K.length&&(_e.data.length<10||_e.data[0]!=="I".charCodeAt(0)||_e.data[1]!=="D".charCodeAt(0)||_e.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(K.push(_e),te+=_e.data.byteLength,1===K.length&&(j=Yv(_e.data.subarray(6,10)),j+=10),!(te<j)){for(xe={data:new Uint8Array(j),frames:[],pts:K[0].pts,dts:K[0].dts},Qe=0;Qe<j;)xe.data.set(K[0].data.subarray(0,j-Qe),Qe),Qe+=K[0].data.byteLength,te-=K[0].data.byteLength,K.shift();Ie=10,64&xe.data[5]&&(Ie+=4,Ie+=Yv(xe.data.subarray(10,14)),j-=Yv(xe.data.subarray(16,20)));do{if((Oe=Yv(xe.data.subarray(Ie+4,Ie+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Me={id:String.fromCharCode(xe.data[Ie],xe.data[Ie+1],xe.data[Ie+2],xe.data[Ie+3]),data:xe.data.subarray(Ie+10,Ie+Oe+10)}).key=Me.id,uS[Me.id]&&(uS[Me.id](Me),"com.apple.streaming.transportStreamTimestamp"===Me.owner)){var Dt=Me.data,vt=(1&Dt[3])<<30|Dt[4]<<22|Dt[5]<<14|Dt[6]<<6|Dt[7]>>>2;vt*=4,Me.timeStamp=vt+=3&Dt[7],void 0===xe.pts&&void 0===xe.dts&&(xe.pts=Me.timeStamp,xe.dts=Me.timeStamp),this.trigger("timestamp",Me)}xe.frames.push(Me),Ie+=10,Ie+=Oe}while(Ie<j);this.trigger("data",xe)}}}},zv.prototype=new t;var qv,ld,Xv,zP=zv,qP=sS_TimestampRolloverStream;qv=function(){var D=new Uint8Array(188),H=0;qv.prototype.init.call(this),this.push=function(j){var ie,K=0,te=188;for(H?((ie=new Uint8Array(j.byteLength+H)).set(D.subarray(0,H)),ie.set(j,H),H=0):ie=j;te<ie.byteLength;)71!==ie[K]||71!==ie[te]?(K++,te++):(this.trigger("data",ie.subarray(K,te)),K+=188,te+=188);K<ie.byteLength&&(D.set(ie.subarray(K),0),H=ie.byteLength-K)},this.flush=function(){188===H&&71===D[0]&&(this.trigger("data",D),H=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){H=0,this.trigger("reset")}},qv.prototype=new t,ld=function(){var D,H,j,K;ld.prototype.init.call(this),K=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,D=function(ie,_e){var xe=0;_e.payloadUnitStartIndicator&&(xe+=ie[xe]+1),"pat"===_e.type?H(ie.subarray(xe),_e):j(ie.subarray(xe),_e)},H=function(ie,_e){_e.section_number=ie[7],_e.last_section_number=ie[8],K.pmtPid=(31&ie[10])<<8|ie[11],_e.pmtPid=K.pmtPid},j=function(ie,_e){var Ie,Me;if(1&ie[5]){for(K.programMapTable={video:null,audio:null,"timed-metadata":{}},Ie=3+((15&ie[1])<<8|ie[2])-4,Me=12+((15&ie[10])<<8|ie[11]);Me<Ie;){var Qe=ie[Me],Et=(31&ie[Me+1])<<8|ie[Me+2];Qe===On.H264_STREAM_TYPE&&null===K.programMapTable.video?K.programMapTable.video=Et:Qe===On.ADTS_STREAM_TYPE&&null===K.programMapTable.audio?K.programMapTable.audio=Et:Qe===On.METADATA_STREAM_TYPE&&(K.programMapTable["timed-metadata"][Et]=Qe),Me+=5+((15&ie[Me+3])<<8|ie[Me+4])}_e.programMapTable=K.programMapTable}},this.push=function(te){var ie={},_e=4;if(ie.payloadUnitStartIndicator=!!(64&te[1]),ie.pid=31&te[1],ie.pid<<=8,ie.pid|=te[2],(48&te[3])>>>4>1&&(_e+=te[_e]+1),0===ie.pid)ie.type="pat",D(te.subarray(_e),ie),this.trigger("data",ie);else if(ie.pid===this.pmtPid)for(ie.type="pmt",D(te.subarray(_e),ie),this.trigger("data",ie);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([te,_e,ie]):this.processPes_(te,_e,ie)},this.processPes_=function(te,ie,_e){_e.streamType=_e.pid===this.programMapTable.video?On.H264_STREAM_TYPE:_e.pid===this.programMapTable.audio?On.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][_e.pid],_e.type="pes",_e.data=te.subarray(ie),this.trigger("data",_e)}},ld.prototype=new t,ld.STREAM_TYPES={h264:27,adts:15},Xv=function(){var ie,D=this,H=!1,j={data:[],size:0},K={data:[],size:0},te={data:[],size:0},xe=function(Oe,Me,Qe){var ai,Et=new Uint8Array(Oe.size),Dt={type:Me},vt=0,Vt=0,hn=!1;if(Oe.data.length&&!(Oe.size<9)){for(Dt.trackId=Oe.data[0].pid,vt=0;vt<Oe.data.length;vt++)Et.set((ai=Oe.data[vt]).data,Vt),Vt+=ai.data.byteLength;(function(Oe,Me){var Qe,Et=Oe[0]<<16|Oe[1]<<8|Oe[2];Me.data=new Uint8Array,1===Et&&(Me.packetLength=6+(Oe[4]<<8|Oe[5]),Me.dataAlignmentIndicator=0!=(4&Oe[6]),192&(Qe=Oe[7])&&(Me.pts=(14&Oe[9])<<27|(255&Oe[10])<<20|(254&Oe[11])<<12|(255&Oe[12])<<5|(254&Oe[13])>>>3,Me.pts*=4,Me.pts+=(6&Oe[13])>>>1,Me.dts=Me.pts,64&Qe&&(Me.dts=(14&Oe[14])<<27|(255&Oe[15])<<20|(254&Oe[16])<<12|(255&Oe[17])<<5|(254&Oe[18])>>>3,Me.dts*=4,Me.dts+=(6&Oe[18])>>>1)),Me.data=Oe.subarray(9+Oe[8]))})(Et,Dt),hn="video"===Me||Dt.packetLength<=Oe.size,(Qe||hn)&&(Oe.size=0,Oe.data.length=0),hn&&D.trigger("data",Dt)}};Xv.prototype.init.call(this),this.push=function(Ie){({pat:function(){},pes:function(){var Me,Qe;switch(Ie.streamType){case On.H264_STREAM_TYPE:Me=j,Qe="video";break;case On.ADTS_STREAM_TYPE:Me=K,Qe="audio";break;case On.METADATA_STREAM_TYPE:Me=te,Qe="timed-metadata";break;default:return}Ie.payloadUnitStartIndicator&&xe(Me,Qe,!0),Me.data.push(Ie),Me.size+=Ie.data.byteLength},pmt:function(){var Me={type:"metadata",tracks:[]};null!==(ie=Ie.programMapTable).video&&Me.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ie.video,codec:"avc",type:"video"}),null!==ie.audio&&Me.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ie.audio,codec:"adts",type:"audio"}),H=!0,D.trigger("data",Me)}})[Ie.type]()},this.reset=function(){j.size=0,j.data.length=0,K.size=0,K.data.length=0,this.trigger("reset")},this.flushStreams_=function(){xe(j,"video"),xe(K,"audio"),xe(te,"timed-metadata")},this.flush=function(){if(!H&&ie){var Ie={type:"metadata",tracks:[]};null!==ie.video&&Ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ie.video,codec:"avc",type:"video"}),null!==ie.audio&&Ie.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ie.audio,codec:"adts",type:"audio"}),D.trigger("data",Ie)}H=!1,this.flushStreams_(),this.trigger("done")}},Xv.prototype=new t;var lS={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:qv,TransportParseStream:ld,ElementaryStream:Xv,TimestampRolloverStream:qP,CaptionStream:Vv.CaptionStream,Cea608Stream:Vv.Cea608Stream,Cea708Stream:Vv.Cea708Stream,MetadataStream:zP};for(var kT in On)On.hasOwnProperty(kT)&&(lS[kT]=On[kT]);var Zv,os=lS,fS=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Zv=function(D){var H,j=0;Zv.prototype.init.call(this),this.skipWarn_=function(K,te){this.trigger("log",{level:"warn",message:"adts skiping bytes "+K+" to "+te+" in frame "+j+" outside syncword"})},this.push=function(K){var ie,_e,xe,Ie,Oe,te=0;if(D||(j=0),"audio"===K.type){H&&H.length?(xe=H,(H=new Uint8Array(xe.byteLength+K.data.byteLength)).set(xe),H.set(K.data,xe.byteLength)):H=K.data;for(var Me;te+7<H.length;)if(255===H[te]&&240==(246&H[te+1])){if("number"==typeof Me&&(this.skipWarn_(Me,te),Me=null),_e=2*(1&~H[te+1]),Oe=9e4*(Ie=1024*(1+(3&H[te+6])))/fS[(60&H[te+2])>>>2],H.byteLength-te<(ie=(3&H[te+3])<<11|H[te+4]<<3|(224&H[te+5])>>5))break;this.trigger("data",{pts:K.pts+j*Oe,dts:K.dts+j*Oe,sampleCount:Ie,audioobjecttype:1+(H[te+2]>>>6&3),channelcount:(1&H[te+2])<<2|(192&H[te+3])>>>6,samplerate:fS[(60&H[te+2])>>>2],samplingfrequencyindex:(60&H[te+2])>>>2,samplesize:16,data:H.subarray(te+7+_e,te+ie)}),j++,te+=ie}else"number"!=typeof Me&&(Me=te),te++;"number"==typeof Me&&(this.skipWarn_(Me,te),Me=null),H=H.subarray(te)}},this.flush=function(){j=0,this.trigger("done")},this.reset=function(){H=void 0,this.trigger("reset")},this.endTimeline=function(){H=void 0,this.trigger("endedtimeline")}},Zv.prototype=new t;var dS,cS=Zv;dS=function(D){var H=D.byteLength,j=0,K=0;this.length=function(){return 8*H},this.bitsAvailable=function(){return 8*H+K},this.loadWord=function(){var te=D.byteLength-H,ie=new Uint8Array(4),_e=Math.min(4,H);if(0===_e)throw new Error("no bytes available");ie.set(D.subarray(te,te+_e)),j=new DataView(ie.buffer).getUint32(0),K=8*_e,H-=_e},this.skipBits=function(te){var ie;K>te?(j<<=te,K-=te):(te-=K,te-=8*(ie=Math.floor(te/8)),H-=ie,this.loadWord(),j<<=te,K-=te)},this.readBits=function(te){var ie=Math.min(K,te),_e=j>>>32-ie;return(K-=ie)>0?j<<=ie:H>0&&this.loadWord(),(ie=te-ie)>0?_e<<ie|this.readBits(ie):_e},this.skipLeadingZeros=function(){var te;for(te=0;te<K;++te)if(j&2147483648>>>te)return j<<=te,K-=te,te;return this.loadWord(),te+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var te=this.skipLeadingZeros();return this.readBits(te+1)-1},this.readExpGolomb=function(){var te=this.readUnsignedExpGolomb();return 1&te?1+te>>>1:-1*(te>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Qv,fd,hS,ZP=dS;fd=function(){var H,j,D=0;fd.prototype.init.call(this),this.push=function(K){var te;j?((te=new Uint8Array(j.byteLength+K.data.byteLength)).set(j),te.set(K.data,j.byteLength),j=te):j=K.data;for(var ie=j.byteLength;D<ie-3;D++)if(1===j[D+2]){H=D+5;break}for(;H<ie;)switch(j[H]){case 0:if(0!==j[H-1]){H+=2;break}if(0!==j[H-2]){H++;break}D+3!==H-2&&this.trigger("data",j.subarray(D+3,H-2));do{H++}while(1!==j[H]&&H<ie);D=H-2,H+=3;break;case 1:if(0!==j[H-1]||0!==j[H-2]){H+=3;break}this.trigger("data",j.subarray(D+3,H-2)),D=H-2,H+=3;break;default:H+=3}j=j.subarray(D),H-=D,D=0},this.reset=function(){j=null,D=0,this.trigger("reset")},this.flush=function(){j&&j.byteLength>3&&this.trigger("data",j.subarray(D+3)),j=null,D=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},fd.prototype=new t,hS={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Qv=function(){var H,j,K,te,ie,_e,xe,D=new fd;Qv.prototype.init.call(this),H=this,this.push=function(Ie){"video"===Ie.type&&(j=Ie.trackId,K=Ie.pts,te=Ie.dts,D.push(Ie))},D.on("data",function(Ie){var Oe={trackId:j,pts:K,dts:te,data:Ie,nalUnitTypeCode:31&Ie[0]};switch(Oe.nalUnitTypeCode){case 5:Oe.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Oe.nalUnitType="sei_rbsp",Oe.escapedRBSP=ie(Ie.subarray(1));break;case 7:Oe.nalUnitType="seq_parameter_set_rbsp",Oe.escapedRBSP=ie(Ie.subarray(1)),Oe.config=_e(Oe.escapedRBSP);break;case 8:Oe.nalUnitType="pic_parameter_set_rbsp";break;case 9:Oe.nalUnitType="access_unit_delimiter_rbsp"}H.trigger("data",Oe)}),D.on("done",function(){H.trigger("done")}),D.on("partialdone",function(){H.trigger("partialdone")}),D.on("reset",function(){H.trigger("reset")}),D.on("endedtimeline",function(){H.trigger("endedtimeline")}),this.flush=function(){D.flush()},this.partialFlush=function(){D.partialFlush()},this.reset=function(){D.reset()},this.endTimeline=function(){D.endTimeline()},xe=function(Oe,Me){var Dt,Qe=8,Et=8;for(Dt=0;Dt<Oe;Dt++)0!==Et&&(Et=(Qe+Me.readExpGolomb()+256)%256),Qe=0===Et?Qe:Et},ie=function(Oe){for(var Dt,vt,Me=Oe.byteLength,Qe=[],Et=1;Et<Me-2;)0===Oe[Et]&&0===Oe[Et+1]&&3===Oe[Et+2]?(Qe.push(Et+2),Et+=2):Et++;if(0===Qe.length)return Oe;Dt=Me-Qe.length,vt=new Uint8Array(Dt);var Vt=0;for(Et=0;Et<Dt;Vt++,Et++)Vt===Qe[0]&&(Vt++,Qe.shift()),vt[Et]=Oe[Vt];return vt},_e=function(Oe){var vt,Vt,hn,ai,Fo,HT,LS,RS,MS,WT,kS,Uo,Me=0,Qe=0,Et=0,Dt=0,rn=[1,1];if(Vt=(vt=new ZP(Oe)).readUnsignedByte(),ai=vt.readUnsignedByte(),hn=vt.readUnsignedByte(),vt.skipUnsignedExpGolomb(),hS[Vt]&&(3===(Fo=vt.readUnsignedExpGolomb())&&vt.skipBits(1),vt.skipUnsignedExpGolomb(),vt.skipUnsignedExpGolomb(),vt.skipBits(1),vt.readBoolean()))for(kS=3!==Fo?8:12,Uo=0;Uo<kS;Uo++)vt.readBoolean()&&xe(Uo<6?16:64,vt);if(vt.skipUnsignedExpGolomb(),0===(HT=vt.readUnsignedExpGolomb()))vt.readUnsignedExpGolomb();else if(1===HT)for(vt.skipBits(1),vt.skipExpGolomb(),vt.skipExpGolomb(),LS=vt.readUnsignedExpGolomb(),Uo=0;Uo<LS;Uo++)vt.skipExpGolomb();if(vt.skipUnsignedExpGolomb(),vt.skipBits(1),RS=vt.readUnsignedExpGolomb(),MS=vt.readUnsignedExpGolomb(),0===(WT=vt.readBits(1))&&vt.skipBits(1),vt.skipBits(1),vt.readBoolean()&&(Me=vt.readUnsignedExpGolomb(),Qe=vt.readUnsignedExpGolomb(),Et=vt.readUnsignedExpGolomb(),Dt=vt.readUnsignedExpGolomb()),vt.readBoolean()&&vt.readBoolean())switch(vt.readUnsignedByte()){case 1:rn=[1,1];break;case 2:rn=[12,11];break;case 3:rn=[10,11];break;case 4:rn=[16,11];break;case 5:rn=[40,33];break;case 6:rn=[24,11];break;case 7:rn=[20,11];break;case 8:rn=[32,11];break;case 9:rn=[80,33];break;case 10:rn=[18,11];break;case 11:rn=[15,11];break;case 12:rn=[64,33];break;case 13:rn=[160,99];break;case 14:rn=[4,3];break;case 15:rn=[3,2];break;case 16:rn=[2,1];break;case 255:rn=[vt.readUnsignedByte()<<8|vt.readUnsignedByte(),vt.readUnsignedByte()<<8|vt.readUnsignedByte()]}return{profileIdc:Vt,levelIdc:hn,profileCompatibility:ai,width:16*(RS+1)-2*Me-2*Qe,height:(2-WT)*(MS+1)*16-2*Et-2*Dt,sarRatio:rn}}},Qv.prototype=new t;var Jv,QP={H264Stream:Qv,NalByteStream:fd},$P=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],pS=function(D,H){var j=D[H+6]<<21|D[H+7]<<14|D[H+8]<<7|D[H+9];return j=j>=0?j:0,(16&D[H+5])>>4?j+20:j+10},JP=function le(D,H){return D.length-H<10||D[H]!=="I".charCodeAt(0)||D[H+1]!=="D".charCodeAt(0)||D[H+2]!=="3".charCodeAt(0)?H:le(D,H+=pS(D,H))},vS=function(D){return D[0]<<21|D[1]<<14|D[2]<<7|D[3]},rw=function(D,H,j){return unescape(function(D,H,j){var K,te="";for(K=H;K<j;K++)te+="%"+("00"+D[K].toString(16)).slice(-2);return te}(D,H,j))},$v={isLikelyAacData:function(D){var H=JP(D,0);return D.length>=H+2&&255==(255&D[H])&&240==(240&D[H+1])&&16==(22&D[H+1])},parseId3TagSize:pS,parseAdtsSize:function(D,H){return 6144&D[H+3]|D[H+4]<<3|(224&D[H+5])>>5},parseType:function(D,H){return D[H]==="I".charCodeAt(0)&&D[H+1]==="D".charCodeAt(0)&&D[H+2]==="3".charCodeAt(0)?"timed-metadata":!0&D[H]&&240==(240&D[H+1])?"audio":null},parseSampleRate:function(D){for(var H=0;H+5<D.length;){if(255===D[H]&&240==(246&D[H+1]))return $P[(60&D[H+2])>>>2];H++}return null},parseAacTimestamp:function(D){var H,j,K;H=10,64&D[5]&&(H+=4,H+=vS(D.subarray(10,14)));do{if((j=vS(D.subarray(H+4,H+8)))<1)return null;if("PRIV"===String.fromCharCode(D[H],D[H+1],D[H+2],D[H+3])){K=D.subarray(H+10,H+j+10);for(var ie=0;ie<K.byteLength;ie++)if(0===K[ie]){if("com.apple.streaming.transportStreamTimestamp"===rw(K,0,ie)){var xe=K.subarray(ie+1),Ie=(1&xe[3])<<30|xe[4]<<22|xe[5]<<14|xe[6]<<6|xe[7]>>>2;return(Ie*=4)+(3&xe[7])}break}}H+=10,H+=j}while(H<D.byteLength);return null}};Jv=function(){var D=new Uint8Array,H=0;Jv.prototype.init.call(this),this.setTimestamp=function(j){H=j},this.push=function(j){var _e,xe,Ie,K=0,te=0;for(D.length?(Ie=D.length,(D=new Uint8Array(j.byteLength+Ie)).set(D.subarray(0,Ie)),D.set(j,Ie)):D=j;D.length-te>=3;)if(D[te]!=="I".charCodeAt(0)||D[te+1]!=="D".charCodeAt(0)||D[te+2]!=="3".charCodeAt(0))if(255!=(255&D[te])||240!=(240&D[te+1]))te++;else{if(D.length-te<7||te+(K=$v.parseAdtsSize(D,te))>D.length)break;xe={type:"audio",data:D.subarray(te,te+K),pts:H,dts:H},this.trigger("data",xe),te+=K}else{if(D.length-te<10||te+(K=$v.parseId3TagSize(D,te))>D.length)break;_e={type:"timed-metadata",data:D.subarray(te,te+K)},this.trigger("data",_e),te+=K}D=D.length-te>0?D.subarray(te):new Uint8Array},this.reset=function(){D=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){D=new Uint8Array,this.trigger("endedtimeline")}},Jv.prototype=new t;var cd,Wl,eg,Ro,ow=Jv,FT=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],UT=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],fw=QP.H264Stream,cw=$v.isLikelyAacData,hw=function(D,H){H.stream=D,this.trigger("log",H)},gS=function(D,H){for(var j=Object.keys(H),K=0;K<j.length;K++){var te=j[K];"headOfPipeline"===te||!H[te].on||H[te].on("log",hw.bind(D,te))}},mS=function(D,H){var j;if(D.length!==H.length)return!1;for(j=0;j<D.length;j++)if(D[j]!==H[j])return!1;return!0},BT=function(D,H,j,K,te,ie){return{start:{dts:D,pts:D+(j-H)},end:{dts:D+(K-H),pts:D+(te-j)},prependedContentDuration:ie,baseMediaDecodeTime:D}};Wl=function(D,H){var K,j=[],te=0,ie=0,_e=1/0;K=(H=H||{}).firstSequenceNumber||0,Wl.prototype.init.call(this),this.push=function(xe){fa_collectDtsInfo(D,xe),D&&FT.forEach(function(Ie){D[Ie]=xe[Ie]}),j.push(xe)},this.setEarliestDts=function(xe){te=xe},this.setVideoBaseMediaDecodeTime=function(xe){_e=xe},this.setAudioAppendStart=function(xe){ie=xe},this.flush=function(){var xe,Ie,Oe,Me,Qe,Et,Dt;0!==j.length?(xe=function(D,H,j){return H.minSegmentDts>=j?D:(H.minSegmentDts=1/0,D.filter(function(K){return K.dts>=j&&(H.minSegmentDts=Math.min(H.minSegmentDts,K.dts),H.minSegmentPts=H.minSegmentDts,!0)}))}(j,D,te),D.baseMediaDecodeTime=fa_calculateTrackBaseMediaDecodeTime(D,H.keepOriginalTimestamps),Dt=Nv_prefixWithSilence(D,xe,ie,_e),D.samples=function(D){var H,K=[];for(H=0;H<D.length;H++)K.push({size:D[H].data.byteLength,duration:1024});return K}(xe),Oe=Ci_mdat(function(D){var H,j,K=0,te=new Uint8Array(function(D){var H,K=0;for(H=0;H<D.length;H++)K+=D[H].data.byteLength;return K}(D));for(H=0;H<D.length;H++)te.set((j=D[H]).data,K),K+=j.data.byteLength;return te}(xe)),j=[],Ie=Ci_moof(K,[D]),Me=new Uint8Array(Ie.byteLength+Oe.byteLength),K++,Me.set(Ie),Me.set(Oe,Ie.byteLength),fa_clearDtsInfo(D),Qe=Math.ceil(9216e4/D.samplerate),xe.length&&(Et=xe.length*Qe,this.trigger("segmentTimingInfo",BT(Er_audioTsToVideoTs(D.baseMediaDecodeTime,D.samplerate),xe[0].dts,xe[0].pts,xe[0].dts+Et,xe[0].pts+Et,Dt||0)),this.trigger("timingInfo",{start:xe[0].pts,end:xe[0].pts+Et})),this.trigger("data",{track:D,boxes:Me}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){fa_clearDtsInfo(D),j=[],this.trigger("reset")}},Wl.prototype=new t,cd=function(D,H){var j,ie,_e,K=[],te=[];j=(H=H||{}).firstSequenceNumber||0,cd.prototype.init.call(this),delete D.minPTS,this.gopCache_=[],this.push=function(xe){fa_collectDtsInfo(D,xe),"seq_parameter_set_rbsp"===xe.nalUnitType&&!ie&&(ie=xe.config,D.sps=[xe.data],UT.forEach(function(Ie){D[Ie]=ie[Ie]},this)),"pic_parameter_set_rbsp"===xe.nalUnitType&&!_e&&(_e=xe.data,D.pps=[xe.data]),K.push(xe)},this.flush=function(){for(var xe,Ie,Oe,Me,Qe,Et,vt,Vt,Dt=0;K.length&&"access_unit_delimiter_rbsp"!==K[0].nalUnitType;)K.shift();if(0===K.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(xe=function(D){var H,j,K=[],te=[];for(te.byteLength=0,te.nalCount=0,te.duration=0,K.byteLength=0,H=0;H<D.length;H++)"access_unit_delimiter_rbsp"===(j=D[H]).nalUnitType?(K.length&&(K.duration=j.dts-K.dts,te.byteLength+=K.byteLength,te.nalCount+=K.length,te.duration+=K.duration,te.push(K)),(K=[j]).byteLength=j.data.byteLength,K.pts=j.pts,K.dts=j.dts):("slice_layer_without_partitioning_rbsp_idr"===j.nalUnitType&&(K.keyFrame=!0),K.duration=j.dts-K.dts,K.byteLength+=j.data.byteLength,K.push(j));return te.length&&(!K.duration||K.duration<=0)&&(K.duration=te[te.length-1].duration),te.byteLength+=K.byteLength,te.nalCount+=K.length,te.duration+=K.duration,te.push(K),te}(K),(Oe=function(D){var H,j,K=[],te=[];for(K.byteLength=0,K.nalCount=0,K.duration=0,K.pts=D[0].pts,K.dts=D[0].dts,te.byteLength=0,te.nalCount=0,te.duration=0,te.pts=D[0].pts,te.dts=D[0].dts,H=0;H<D.length;H++)(j=D[H]).keyFrame?(K.length&&(te.push(K),te.byteLength+=K.byteLength,te.nalCount+=K.nalCount,te.duration+=K.duration),(K=[j]).nalCount=j.length,K.byteLength=j.byteLength,K.pts=j.pts,K.dts=j.dts,K.duration=j.duration):(K.duration+=j.duration,K.nalCount+=j.length,K.byteLength+=j.byteLength,K.push(j));return te.length&&K.duration<=0&&(K.duration=te[te.length-1].duration),te.byteLength+=K.byteLength,te.nalCount+=K.nalCount,te.duration+=K.duration,te.push(K),te}(xe))[0][0].keyFrame||((Ie=this.getGopForFusion_(K[0],D))?(Dt=Ie.duration,Oe.unshift(Ie),Oe.byteLength+=Ie.byteLength,Oe.nalCount+=Ie.nalCount,Oe.pts=Ie.pts,Oe.dts=Ie.dts,Oe.duration+=Ie.duration):Oe=function(D){var H;return!D[0][0].keyFrame&&D.length>1&&(H=D.shift(),D.byteLength-=H.byteLength,D.nalCount-=H.nalCount,D[0][0].dts=H.dts,D[0][0].pts=H.pts,D[0][0].duration+=H.duration),D}(Oe)),te.length){var hn;if(!(hn=H.alignGopsAtEnd?this.alignGopsAtEnd_(Oe):this.alignGopsAtStart_(Oe)))return this.gopCache_.unshift({gop:Oe.pop(),pps:D.pps,sps:D.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),K=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");fa_clearDtsInfo(D),Oe=hn}fa_collectDtsInfo(D,Oe),D.samples=function(D,H){var j,K,te,ie,xe=H||0,Ie=[];for(j=0;j<D.length;j++)for(ie=D[j],K=0;K<ie.length;K++)xe+=(te=Io(ie[K],xe)).size,Ie.push(te);return Ie}(Oe),Qe=Ci_mdat(function(D){var H,j,K,te,ie,_e,xe=0,Qe=new Uint8Array(D.byteLength+4*D.nalCount),Et=new DataView(Qe.buffer);for(H=0;H<D.length;H++)for(te=D[H],j=0;j<te.length;j++)for(ie=te[j],K=0;K<ie.length;K++)Et.setUint32(xe,(_e=ie[K]).data.byteLength),Qe.set(_e.data,xe+=4),xe+=_e.data.byteLength;return Qe}(Oe)),D.baseMediaDecodeTime=fa_calculateTrackBaseMediaDecodeTime(D,H.keepOriginalTimestamps),this.trigger("processedGopsInfo",Oe.map(function(ai){return{pts:ai.pts,dts:ai.dts,byteLength:ai.byteLength}})),this.trigger("segmentTimingInfo",BT(D.baseMediaDecodeTime,(vt=Oe[0]).dts,vt.pts,(Vt=Oe[Oe.length-1]).dts+Vt.duration,Vt.pts+Vt.duration,Dt)),this.trigger("timingInfo",{start:Oe[0].pts,end:Oe[Oe.length-1].pts+Oe[Oe.length-1].duration}),this.gopCache_.unshift({gop:Oe.pop(),pps:D.pps,sps:D.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),K=[],this.trigger("baseMediaDecodeTime",D.baseMediaDecodeTime),this.trigger("timelineStartInfo",D.timelineStartInfo),Me=Ci_moof(j,[D]),Et=new Uint8Array(Me.byteLength+Qe.byteLength),j++,Et.set(Me),Et.set(Qe,Me.byteLength),this.trigger("data",{track:D,boxes:Et}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),K=[],this.gopCache_.length=0,te.length=0,this.trigger("reset")},this.resetStream_=function(){fa_clearDtsInfo(D),ie=void 0,_e=void 0},this.getGopForFusion_=function(xe){var Qe,Et,Dt,vt,Vt,Me=1/0;for(Vt=0;Vt<this.gopCache_.length;Vt++)Dt=(vt=this.gopCache_[Vt]).gop,D.pps&&mS(D.pps[0],vt.pps[0])&&D.sps&&mS(D.sps[0],vt.sps[0])&&(Dt.dts<D.timelineStartInfo.dts||(Qe=xe.dts-Dt.dts-Dt.duration)>=-1e4&&Qe<=45e3&&(!Et||Me>Qe)&&(Et=vt,Me=Qe));return Et?Et.gop:null},this.alignGopsAtStart_=function(xe){var Ie,Oe,Me,Qe,Et,Dt,vt,Vt;for(Et=xe.byteLength,Dt=xe.nalCount,vt=xe.duration,Ie=Oe=0;Ie<te.length&&Oe<xe.length&&(Me=te[Ie]).pts!==(Qe=xe[Oe]).pts;)Qe.pts>Me.pts?Ie++:(Oe++,Et-=Qe.byteLength,Dt-=Qe.nalCount,vt-=Qe.duration);return 0===Oe?xe:Oe===xe.length?null:((Vt=xe.slice(Oe)).byteLength=Et,Vt.duration=vt,Vt.nalCount=Dt,Vt.pts=Vt[0].pts,Vt.dts=Vt[0].dts,Vt)},this.alignGopsAtEnd_=function(xe){var Ie,Oe,Me,Qe,Et,Dt,vt;for(Ie=te.length-1,Oe=xe.length-1,Et=null,Dt=!1;Ie>=0&&Oe>=0;){if((Me=te[Ie]).pts===(Qe=xe[Oe]).pts){Dt=!0;break}Me.pts>Qe.pts?Ie--:(Ie===te.length-1&&(Et=Oe),Oe--)}if(!Dt&&null===Et)return null;if(0===(vt=Dt?Oe:Et))return xe;var Vt=xe.slice(vt),hn=Vt.reduce(function(ai,Fo){return ai.byteLength+=Fo.byteLength,ai.duration+=Fo.duration,ai.nalCount+=Fo.nalCount,ai},{byteLength:0,duration:0,nalCount:0});return Vt.byteLength=hn.byteLength,Vt.duration=hn.duration,Vt.nalCount=hn.nalCount,Vt.pts=Vt[0].pts,Vt.dts=Vt[0].dts,Vt},this.alignGopsWith=function(xe){te=xe}},cd.prototype=new t,Ro=function(D,H){this.numberOfTracks=0,this.metadataStream=H,this.remuxTracks=!(typeof(D=D||{}).remux<"u"&&!D.remux),this.keepOriginalTimestamps="boolean"==typeof D.keepOriginalTimestamps&&D.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ro.prototype.init.call(this),this.push=function(j){return j.text?this.pendingCaptions.push(j):j.frames?this.pendingMetadata.push(j):(this.pendingTracks.push(j.track),this.pendingBytes+=j.boxes.byteLength,"video"===j.track.type&&(this.videoTrack=j.track,this.pendingBoxes.push(j.boxes)),void("audio"===j.track.type&&(this.audioTrack=j.track,this.pendingBoxes.unshift(j.boxes))))}},Ro.prototype=new t,Ro.prototype.flush=function(le){var j,K,te,_e,D=0,H={captions:[],captionStreams:{},metadata:[],info:{}},ie=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==le&&"AudioSegmentStream"!==le)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(ie=this.videoTrack.timelineStartInfo.pts,UT.forEach(function(xe){H.info[xe]=this.videoTrack[xe]},this)):this.audioTrack&&(ie=this.audioTrack.timelineStartInfo.pts,FT.forEach(function(xe){H.info[xe]=this.audioTrack[xe]},this)),this.videoTrack||this.audioTrack){for(H.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,te=function(D){var K,H=y(),j=pe(D);return(K=new Uint8Array(H.byteLength+j.byteLength)).set(H),K.set(j,H.byteLength),K}(this.pendingTracks),H.initSegment=new Uint8Array(te.byteLength),H.initSegment.set(te),H.data=new Uint8Array(this.pendingBytes),_e=0;_e<this.pendingBoxes.length;_e++)H.data.set(this.pendingBoxes[_e],D),D+=this.pendingBoxes[_e].byteLength;for(_e=0;_e<this.pendingCaptions.length;_e++)(j=this.pendingCaptions[_e]).startTime=Er_metadataTsToSeconds(j.startPts,ie,this.keepOriginalTimestamps),j.endTime=Er_metadataTsToSeconds(j.endPts,ie,this.keepOriginalTimestamps),H.captionStreams[j.stream]=!0,H.captions.push(j);for(_e=0;_e<this.pendingMetadata.length;_e++)(K=this.pendingMetadata[_e]).cueTime=Er_metadataTsToSeconds(K.pts,ie,this.keepOriginalTimestamps),H.metadata.push(K);for(H.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",H),_e=0;_e<H.captions.length;_e++)this.trigger("caption",j=H.captions[_e]);for(_e=0;_e<H.metadata.length;_e++)this.trigger("id3Frame",K=H.metadata[_e])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ro.prototype.setRemux=function(le){this.remuxTracks=le},eg=function(D){var K,te,H=this,j=!0;eg.prototype.init.call(this),this.baseMediaDecodeTime=(D=D||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var ie={};this.transmuxPipeline_=ie,ie.type="aac",ie.metadataStream=new os.MetadataStream,ie.aacStream=new ow,ie.audioTimestampRolloverStream=new os.TimestampRolloverStream("audio"),ie.timedMetadataTimestampRolloverStream=new os.TimestampRolloverStream("timed-metadata"),ie.adtsStream=new cS,ie.coalesceStream=new Ro(D,ie.metadataStream),ie.headOfPipeline=ie.aacStream,ie.aacStream.pipe(ie.audioTimestampRolloverStream).pipe(ie.adtsStream),ie.aacStream.pipe(ie.timedMetadataTimestampRolloverStream).pipe(ie.metadataStream).pipe(ie.coalesceStream),ie.metadataStream.on("timestamp",function(_e){ie.aacStream.setTimestamp(_e.timeStamp)}),ie.aacStream.on("data",function(_e){"timed-metadata"!==_e.type&&"audio"!==_e.type||ie.audioSegmentStream||(te=te||{timelineStartInfo:{baseMediaDecodeTime:H.baseMediaDecodeTime},codec:"adts",type:"audio"},ie.coalesceStream.numberOfTracks++,ie.audioSegmentStream=new Wl(te,D),ie.audioSegmentStream.on("log",H.getLogTrigger_("audioSegmentStream")),ie.audioSegmentStream.on("timingInfo",H.trigger.bind(H,"audioTimingInfo")),ie.adtsStream.pipe(ie.audioSegmentStream).pipe(ie.coalesceStream),H.trigger("trackinfo",{hasAudio:!!te,hasVideo:!!K}))}),ie.coalesceStream.on("data",this.trigger.bind(this,"data")),ie.coalesceStream.on("done",this.trigger.bind(this,"done")),gS(this,ie)},this.setupTsPipeline=function(){var ie={};this.transmuxPipeline_=ie,ie.type="ts",ie.metadataStream=new os.MetadataStream,ie.packetStream=new os.TransportPacketStream,ie.parseStream=new os.TransportParseStream,ie.elementaryStream=new os.ElementaryStream,ie.timestampRolloverStream=new os.TimestampRolloverStream,ie.adtsStream=new cS,ie.h264Stream=new fw,ie.captionStream=new os.CaptionStream(D),ie.coalesceStream=new Ro(D,ie.metadataStream),ie.headOfPipeline=ie.packetStream,ie.packetStream.pipe(ie.parseStream).pipe(ie.elementaryStream).pipe(ie.timestampRolloverStream),ie.timestampRolloverStream.pipe(ie.h264Stream),ie.timestampRolloverStream.pipe(ie.adtsStream),ie.timestampRolloverStream.pipe(ie.metadataStream).pipe(ie.coalesceStream),ie.h264Stream.pipe(ie.captionStream).pipe(ie.coalesceStream),ie.elementaryStream.on("data",function(_e){var xe;if("metadata"===_e.type){for(xe=_e.tracks.length;xe--;)K||"video"!==_e.tracks[xe].type?!te&&"audio"===_e.tracks[xe].type&&((te=_e.tracks[xe]).timelineStartInfo.baseMediaDecodeTime=H.baseMediaDecodeTime):(K=_e.tracks[xe]).timelineStartInfo.baseMediaDecodeTime=H.baseMediaDecodeTime;K&&!ie.videoSegmentStream&&(ie.coalesceStream.numberOfTracks++,ie.videoSegmentStream=new cd(K,D),ie.videoSegmentStream.on("log",H.getLogTrigger_("videoSegmentStream")),ie.videoSegmentStream.on("timelineStartInfo",function(Ie){te&&!D.keepOriginalTimestamps&&(te.timelineStartInfo=Ie,ie.audioSegmentStream.setEarliestDts(Ie.dts-H.baseMediaDecodeTime))}),ie.videoSegmentStream.on("processedGopsInfo",H.trigger.bind(H,"gopInfo")),ie.videoSegmentStream.on("segmentTimingInfo",H.trigger.bind(H,"videoSegmentTimingInfo")),ie.videoSegmentStream.on("baseMediaDecodeTime",function(Ie){te&&ie.audioSegmentStream.setVideoBaseMediaDecodeTime(Ie)}),ie.videoSegmentStream.on("timingInfo",H.trigger.bind(H,"videoTimingInfo")),ie.h264Stream.pipe(ie.videoSegmentStream).pipe(ie.coalesceStream)),te&&!ie.audioSegmentStream&&(ie.coalesceStream.numberOfTracks++,ie.audioSegmentStream=new Wl(te,D),ie.audioSegmentStream.on("log",H.getLogTrigger_("audioSegmentStream")),ie.audioSegmentStream.on("timingInfo",H.trigger.bind(H,"audioTimingInfo")),ie.audioSegmentStream.on("segmentTimingInfo",H.trigger.bind(H,"audioSegmentTimingInfo")),ie.adtsStream.pipe(ie.audioSegmentStream).pipe(ie.coalesceStream)),H.trigger("trackinfo",{hasAudio:!!te,hasVideo:!!K})}}),ie.coalesceStream.on("data",this.trigger.bind(this,"data")),ie.coalesceStream.on("id3Frame",function(_e){_e.dispatchType=ie.metadataStream.dispatchType,H.trigger("id3Frame",_e)}),ie.coalesceStream.on("caption",this.trigger.bind(this,"caption")),ie.coalesceStream.on("done",this.trigger.bind(this,"done")),gS(this,ie)},this.setBaseMediaDecodeTime=function(ie){var _e=this.transmuxPipeline_;D.keepOriginalTimestamps||(this.baseMediaDecodeTime=ie),te&&(te.timelineStartInfo.dts=void 0,te.timelineStartInfo.pts=void 0,fa_clearDtsInfo(te),_e.audioTimestampRolloverStream&&_e.audioTimestampRolloverStream.discontinuity()),K&&(_e.videoSegmentStream&&(_e.videoSegmentStream.gopCache_=[]),K.timelineStartInfo.dts=void 0,K.timelineStartInfo.pts=void 0,fa_clearDtsInfo(K),_e.captionStream.reset()),_e.timestampRolloverStream&&_e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(ie){te&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(ie)},this.setRemux=function(ie){var _e=this.transmuxPipeline_;D.remux=ie,_e&&_e.coalesceStream&&_e.coalesceStream.setRemux(ie)},this.alignGopsWith=function(ie){K&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(ie)},this.getLogTrigger_=function(ie){var _e=this;return function(xe){xe.stream=ie,_e.trigger("log",xe)}},this.push=function(ie){if(j){var _e=cw(ie);_e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!_e&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),j=!1}this.transmuxPipeline_.headOfPipeline.push(ie)},this.flush=function(){j=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},eg.prototype=new t;var SS,DS,NT,pw={Transmuxer:eg,VideoSegmentStream:cd,AudioSegmentStream:Wl,AUDIO_PROPERTIES:FT,VIDEO_PROPERTIES:UT,generateSegmentTimingInfo:BT},tg_toUnsigned=function(D){return D>>>0},Mo=function(D){var H="";return H+=String.fromCharCode(D[0]),H+=String.fromCharCode(D[1]),(H+=String.fromCharCode(D[2]))+String.fromCharCode(D[3])},yw=tg_toUnsigned,Wr=function le(D,H){var K,te,ie,_e,xe,j=[];if(!H.length)return null;for(K=0;K<D.byteLength;)te=yw(D[K]<<24|D[K+1]<<16|D[K+2]<<8|D[K+3]),ie=Mo(D.subarray(K+4,K+8)),_e=te>1?K+te:D.byteLength,ie===H[0]&&(1===H.length?j.push(D.subarray(K+8,_e)):(xe=le(D.subarray(K+8,_e),H.slice(1))).length&&(j=j.concat(xe))),K=_e;return j},Tw=tg_toUnsigned,Ew=e.getUint64,_S=function(D){return{isLeading:(12&D[0])>>>2,dependsOn:3&D[0],isDependedOn:(192&D[1])>>>6,hasRedundancy:(48&D[1])>>>4,paddingValue:(14&D[1])>>>1,isNonSyncSample:1&D[1],degradationPriority:D[2]<<8|D[3]}},bS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hd=typeof window<"u"?window:typeof bS<"u"?bS:typeof self<"u"?self:{},Cw=function(D){for(var te,ie,H=D.byteLength,j=[],K=1;K<H-2;)0===D[K]&&0===D[K+1]&&3===D[K+2]?(j.push(K+2),K+=2):K++;if(0===j.length)return D;te=H-j.length,ie=new Uint8Array(te);var _e=0;for(K=0;K<te;_e++,K++)_e===j[0]&&(_e++,j.shift()),ie[K]=D[_e];return ie},Dw=Vv.CaptionStream,Pw=function(D,H){for(var j=D,K=0;K<H.length;K++){var te=H[K];if(j<te.size)return te;j-=te.size}return null},Iw=function(D,H){var j=Wr(D,["moof","traf"]),K=Wr(D,["mdat"]),te={},ie=[];return K.forEach(function(_e,xe){ie.push({mdat:_e,traf:j[xe]})}),ie.forEach(function(_e){var Vt,hn,xe=_e.mdat,Ie=_e.traf,Me=function(D){var Me,H=new DataView(D.buffer,D.byteOffset,D.byteLength),j={version:D[0],flags:new Uint8Array(D.subarray(1,4)),trackId:H.getUint32(4)},K=1&j.flags[2],te=2&j.flags[2],ie=8&j.flags[2],_e=16&j.flags[2],xe=32&j.flags[2],Ie=65536&j.flags[0],Oe=131072&j.flags[0];return Me=8,K&&(Me+=4,j.baseDataOffset=H.getUint32(12),Me+=4),te&&(j.sampleDescriptionIndex=H.getUint32(Me),Me+=4),ie&&(j.defaultSampleDuration=H.getUint32(Me),Me+=4),_e&&(j.defaultSampleSize=H.getUint32(Me),Me+=4),xe&&(j.defaultSampleFlags=H.getUint32(Me)),Ie&&(j.durationIsEmpty=!0),!K&&Oe&&(j.baseDataOffsetIsMoof=!0),j}(Wr(Ie,["tfhd"])[0]),Qe=Me.trackId,Et=Wr(Ie,["tfdt"]),Dt=Et.length>0?function(D){var H={version:D[0],flags:new Uint8Array(D.subarray(1,4))};return H.baseMediaDecodeTime=1===H.version?Ew(D.subarray(4)):Tw(D[4]<<24|D[5]<<16|D[6]<<8|D[7]),H}(Et[0]).baseMediaDecodeTime:0,vt=Wr(Ie,["trun"]);H===Qe&&vt.length>0&&(Vt=function(D,H,j){var K=H,te=j.defaultSampleDuration||0,ie=j.defaultSampleSize||0,_e=j.trackId,xe=[];return D.forEach(function(Ie){var Me=function(D){var Qe,H={version:D[0],flags:new Uint8Array(D.subarray(1,4)),samples:[]},j=new DataView(D.buffer,D.byteOffset,D.byteLength),K=1&H.flags[2],te=4&H.flags[2],ie=1&H.flags[1],_e=2&H.flags[1],xe=4&H.flags[1],Ie=8&H.flags[1],Oe=j.getUint32(4),Me=8;for(K&&(H.dataOffset=j.getInt32(Me),Me+=4),te&&Oe&&(Qe={flags:_S(D.subarray(Me,Me+4))},Me+=4,ie&&(Qe.duration=j.getUint32(Me),Me+=4),_e&&(Qe.size=j.getUint32(Me),Me+=4),Ie&&(Qe.compositionTimeOffset=1===H.version?j.getInt32(Me):j.getUint32(Me),Me+=4),H.samples.push(Qe),Oe--);Oe--;)Qe={},ie&&(Qe.duration=j.getUint32(Me),Me+=4),_e&&(Qe.size=j.getUint32(Me),Me+=4),xe&&(Qe.flags=_S(D.subarray(Me,Me+4)),Me+=4),Ie&&(Qe.compositionTimeOffset=1===H.version?j.getInt32(Me):j.getUint32(Me),Me+=4),H.samples.push(Qe);return H}(Ie).samples;Me.forEach(function(Qe){void 0===Qe.duration&&(Qe.duration=te),void 0===Qe.size&&(Qe.size=ie),Qe.trackId=_e,Qe.dts=K,void 0===Qe.compositionTimeOffset&&(Qe.compositionTimeOffset=0),"bigint"==typeof K?(Qe.pts=K+hd.BigInt(Qe.compositionTimeOffset),K+=hd.BigInt(Qe.duration)):(Qe.pts=K+Qe.compositionTimeOffset,K+=Qe.duration)}),xe=xe.concat(Me)}),xe}(vt,Dt,Me),hn=function(D,H,j){var ie,_e,xe,Ie,K=new DataView(D.buffer,D.byteOffset,D.byteLength),te={logs:[],seiNals:[]};for(_e=0;_e+4<D.length;_e+=xe)if(xe=K.getUint32(_e),_e+=4,!(xe<=0))switch(31&D[_e]){case 6:var Oe=D.subarray(_e+1,_e+1+xe),Me=Pw(_e,H);if(ie={nalUnitType:"sei_rbsp",size:xe,data:Oe,escapedRBSP:Cw(Oe),trackId:j},Me)ie.pts=Me.pts,ie.dts=Me.dts,Ie=Me;else{if(!Ie){te.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+_e+" for trackId "+j+". See mux.js#223."});break}ie.pts=Ie.pts,ie.dts=Ie.dts}te.seiNals.push(ie)}return te}(xe,Vt,Qe),te[Qe]||(te[Qe]={seiNals:[],logs:[]}),te[Qe].seiNals=te[Qe].seiNals.concat(hn.seiNals),te[Qe].logs=te[Qe].logs.concat(hn.logs))}),te},Mw=function(){var H,j,K,te,ie,_e,D=!1;this.isInitialized=function(){return D},this.init=function(xe){H=new Dw,D=!0,_e=!!xe&&xe.isPartial,H.on("data",function(Ie){Ie.startTime=Ie.startPts/te,Ie.endTime=Ie.endPts/te,ie.captions.push(Ie),ie.captionStreams[Ie.stream]=!0}),H.on("log",function(Ie){ie.logs.push(Ie)})},this.isNewInit=function(xe,Ie){return!(xe&&0===xe.length||Ie&&"object"==typeof Ie&&0===Object.keys(Ie).length||K===xe[0]&&te===Ie[K])},this.parse=function(xe,Ie,Oe){var Me;if(!this.isInitialized())return null;if(!Ie||!Oe)return null;if(this.isNewInit(Ie,Oe))te=Oe[K=Ie[0]];else if(null===K||!te)return j.push(xe),null;for(;j.length>0;){var Qe=j.shift();this.parse(Qe,Ie,Oe)}return Me=function(D,H,j){if(null===H)return null;var te=Iw(D,H)[H]||{};return{seiNals:te.seiNals,logs:te.logs,timescale:j}}(xe,K,te),Me&&Me.logs&&(ie.logs=ie.logs.concat(Me.logs)),null!==Me&&Me.seiNals?(this.pushNals(Me.seiNals),this.flushStream(),ie):ie.logs.length?{logs:ie.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(xe){if(!this.isInitialized()||!xe||0===xe.length)return null;xe.forEach(function(Ie){H.push(Ie)})},this.flushStream=function(){if(!this.isInitialized())return null;_e?H.partialFlush():H.flush()},this.clearParsedCaptions=function(){ie.captions=[],ie.captionStreams={},ie.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;H.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){j=[],K=null,te=null,ie?this.clearParsedCaptions():ie={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},rg=tg_toUnsigned,pd=function(D){return("00"+D.toString(16)).slice(-2)},kw=e.getUint64;SS=function(D,H){var K=Wr(H,["moof","traf"]).reduce(function(te,ie){var Qe,Et,_e=Wr(ie,["tfhd"])[0],xe=rg(_e[4]<<24|_e[5]<<16|_e[6]<<8|_e[7]),Ie=D[xe]||9e4,Oe=Wr(ie,["tfdt"])[0],Me=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength);return"bigint"==typeof(Qe=1===Oe[0]?kw(Oe.subarray(4,12)):Me.getUint32(4))?Et=Qe/hd.BigInt(Ie):"number"==typeof Qe&&!isNaN(Qe)&&(Et=Qe/Ie),Et<Number.MAX_SAFE_INTEGER&&(Et=Number(Et)),Et<te&&(te=Et),te},1/0);return"bigint"==typeof K||isFinite(K)?K:0},NT=function(D){var j=0===D[0]?12:20;return rg(D[j]<<24|D[j+1]<<16|D[j+2]<<8|D[j+3])},DS=function(D){var H=Wr(D,["moov","trak"]),j=[];return H.forEach(function(K){var _e,xe,te={},ie=Wr(K,["tkhd"])[0];ie&&(xe=(_e=new DataView(ie.buffer,ie.byteOffset,ie.byteLength)).getUint8(0),te.id=_e.getUint32(0===xe?12:20));var Ie=Wr(K,["mdia","hdlr"])[0];if(Ie){var Oe=Mo(Ie.subarray(8,12));te.type="vide"===Oe?"video":"soun"===Oe?"audio":Oe}var Me=Wr(K,["mdia","minf","stbl","stsd"])[0];if(Me){var Qe=Me.subarray(8);te.codec=Mo(Qe.subarray(4,8));var Dt,Et=Wr(Qe,[te.codec])[0];Et&&(/^[asm]vc[1-9]$/i.test(te.codec)?(Dt=Et.subarray(78),"avcC"===Mo(Dt.subarray(4,8))&&Dt.length>11?(te.codec+=".",te.codec+=pd(Dt[9]),te.codec+=pd(Dt[10]),te.codec+=pd(Dt[11])):te.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(te.codec)?(Dt=Et.subarray(28),"esds"===Mo(Dt.subarray(4,8))&&Dt.length>20&&0!==Dt[19]?(te.codec+="."+pd(Dt[19]),te.codec+="."+pd(Dt[20]>>>2&63).replace(/^0/,"")):te.codec="mp4a.40.2"):te.codec=te.codec.toLowerCase())}var Vt=Wr(K,["mdia","mdhd"])[0];Vt&&(te.timescale=NT(Vt)),j.push(te)}),j};var PS_startTime=SS,PS_tracks=DS,wS=function(D){var H=31&D[1];return(H<<=8)|D[2]},ng=function(D){return!!(64&D[1])},ig=function(D){var H=0;return(48&D[3])>>>4>1&&(H+=D[4]+1),H},jT=function(D){switch(D){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ww={parseType:function(D,H){var j=wS(D);return 0===j?"pat":j===H?"pmt":H?"pes":null},parsePat:function(D){var H=ng(D),j=4+ig(D);return H&&(j+=D[j]+1),(31&D[j+10])<<8|D[j+11]},parsePmt:function(D){var H={},j=ng(D),K=4+ig(D);if(j&&(K+=D[K]+1),1&D[K+5]){var ie;ie=3+((15&D[K+1])<<8|D[K+2])-4;for(var xe=12+((15&D[K+10])<<8|D[K+11]);xe<ie;){var Ie=K+xe;H[(31&D[Ie+1])<<8|D[Ie+2]]=D[Ie],xe+=5+((15&D[Ie+3])<<8|D[Ie+4])}return H}},parsePayloadUnitStartIndicator:ng,parsePesType:function(D,H){switch(H[wS(D)]){case On.H264_STREAM_TYPE:return"video";case On.ADTS_STREAM_TYPE:return"audio";case On.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(D){if(!ng(D))return null;var j=4+ig(D);if(j>=D.byteLength)return null;var te,K=null;return 192&(te=D[j+7])&&((K={}).pts=(14&D[j+9])<<27|(255&D[j+10])<<20|(254&D[j+11])<<12|(255&D[j+12])<<5|(254&D[j+13])>>>3,K.pts*=4,K.pts+=(6&D[j+13])>>>1,K.dts=K.pts,64&te&&(K.dts=(14&D[j+14])<<27|(255&D[j+15])<<20|(254&D[j+16])<<12|(255&D[j+17])<<5|(254&D[j+18])>>>3,K.dts*=4,K.dts+=(6&D[j+18])>>>1)),K},videoPacketContainsKeyFrame:function(D){for(var H=4+ig(D),j=D.subarray(H),K=0,te=0,ie=!1;te<j.byteLength-3;te++)if(1===j[te+2]){K=te+5;break}for(;K<j.byteLength;)switch(j[K]){case 0:if(0!==j[K-1]){K+=2;break}if(0!==j[K-2]){K++;break}te+3!==K-2&&"slice_layer_without_partitioning_rbsp_idr"===jT(31&j[te+3])&&(ie=!0);do{K++}while(1!==j[K]&&K<j.length);te=K-2,K+=3;break;case 1:if(0!==j[K-1]||0!==j[K-2]){K+=3;break}"slice_layer_without_partitioning_rbsp_idr"===jT(31&j[te+3])&&(ie=!0),te=K-2,K+=3;break;default:K+=3}return j=j.subarray(te),K-=te,te=0,j&&j.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===jT(31&j[te+3])&&(ie=!0),ie}},Gl=sS_handleRollover,Cr={};Cr.ts=Ww,Cr.aac=$v;var ko=9e4,ii=188,OS=function(D,H,j){for(var ie,xe,Ie,Oe,K=0,te=ii,Me=!1;te<=D.byteLength;)if(71!==D[K]||71!==D[te]&&te!==D.byteLength)K++,te++;else{if("pes"===(ie=D.subarray(K,te),Cr.ts.parseType(ie,H.pid))&&(xe=Cr.ts.parsePesType(ie,H.table),Ie=Cr.ts.parsePayloadUnitStartIndicator(ie),"audio"===xe&&Ie&&(Oe=Cr.ts.parsePesTime(ie))&&(Oe.type="audio",j.audio.push(Oe),Me=!0)),Me)break;K+=ii,te+=ii}for(K=(te=D.byteLength)-ii,Me=!1;K>=0;)if(71!==D[K]||71!==D[te]&&te!==D.byteLength)K--,te--;else{if("pes"===(ie=D.subarray(K,te),Cr.ts.parseType(ie,H.pid))&&(xe=Cr.ts.parsePesType(ie,H.table),Ie=Cr.ts.parsePayloadUnitStartIndicator(ie),"audio"===xe&&Ie&&(Oe=Cr.ts.parsePesTime(ie))&&(Oe.type="audio",j.audio.push(Oe),Me=!0)),Me)break;K-=ii,te-=ii}},Vw=function(D,H,j){for(var ie,xe,Ie,Oe,Me,Qe,Et,K=0,te=ii,Dt=!1,vt={data:[],size:0};te<D.byteLength;)if(71!==D[K]||71!==D[te])K++,te++;else{if("pes"===(ie=D.subarray(K,te),Cr.ts.parseType(ie,H.pid))&&(xe=Cr.ts.parsePesType(ie,H.table),Ie=Cr.ts.parsePayloadUnitStartIndicator(ie),"video"===xe&&(Ie&&!Dt&&(Oe=Cr.ts.parsePesTime(ie))&&(Oe.type="video",j.video.push(Oe),Dt=!0),!j.firstKeyFrame))){if(Ie&&0!==vt.size){for(Me=new Uint8Array(vt.size),Qe=0;vt.data.length;)Et=vt.data.shift(),Me.set(Et,Qe),Qe+=Et.byteLength;if(Cr.ts.videoPacketContainsKeyFrame(Me)){var Vt=Cr.ts.parsePesTime(Me);Vt?(j.firstKeyFrame=Vt,j.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}vt.size=0}vt.data.push(ie),vt.size+=ie.byteLength}if(Dt&&j.firstKeyFrame)break;K+=ii,te+=ii}for(K=(te=D.byteLength)-ii,Dt=!1;K>=0;)if(71!==D[K]||71!==D[te])K--,te--;else{if("pes"===(ie=D.subarray(K,te),Cr.ts.parseType(ie,H.pid))&&(xe=Cr.ts.parsePesType(ie,H.table),Ie=Cr.ts.parsePayloadUnitStartIndicator(ie),"video"===xe&&Ie&&(Oe=Cr.ts.parsePesTime(ie))&&(Oe.type="video",j.video.push(Oe),Dt=!0)),Dt)break;K-=ii,te-=ii}},Xw_inspect=function(D,H){var K;return K=Cr.aac.isLikelyAacData(D)?function(D){for(var xe,H=!1,j=0,K=null,te=null,ie=0,_e=0;D.length-_e>=3;){switch(Cr.aac.parseType(D,_e)){case"timed-metadata":if(D.length-_e<10){H=!0;break}if((ie=Cr.aac.parseId3TagSize(D,_e))>D.length){H=!0;break}null===te&&(xe=D.subarray(_e,_e+ie),te=Cr.aac.parseAacTimestamp(xe)),_e+=ie;break;case"audio":if(D.length-_e<7){H=!0;break}if((ie=Cr.aac.parseAdtsSize(D,_e))>D.length){H=!0;break}null===K&&(xe=D.subarray(_e,_e+ie),K=Cr.aac.parseSampleRate(xe)),j++,_e+=ie;break;default:_e++}if(H)return null}if(null===K||null===te)return null;var Oe=ko/K;return{audio:[{type:"audio",dts:te,pts:te},{type:"audio",dts:te+1024*j*Oe,pts:te+1024*j*Oe}]}}(D):function(D){var H={pid:null,table:null},j={};for(var K in function(D,H){for(var te,j=0,K=ii;K<D.byteLength;)if(71!==D[j]||71!==D[K])j++,K++;else{switch(te=D.subarray(j,K),Cr.ts.parseType(te,H.pid)){case"pat":H.pid=Cr.ts.parsePat(te);break;case"pmt":var _e=Cr.ts.parsePmt(te);H.table=H.table||{},Object.keys(_e).forEach(function(xe){H.table[xe]=_e[xe]})}j+=ii,K+=ii}}(D,H),H.table)if(H.table.hasOwnProperty(K))switch(H.table[K]){case On.H264_STREAM_TYPE:j.video=[],Vw(D,H,j),0===j.video.length&&delete j.video;break;case On.ADTS_STREAM_TYPE:j.audio=[],OS(D,H,j),0===j.audio.length&&delete j.audio}return j}(D),K&&(K.audio||K.video)?(function(D,H){if(D.audio&&D.audio.length){var j=H;(typeof j>"u"||isNaN(j))&&(j=D.audio[0].dts),D.audio.forEach(function(ie){ie.dts=Gl(ie.dts,j),ie.pts=Gl(ie.pts,j),ie.dtsTime=ie.dts/ko,ie.ptsTime=ie.pts/ko})}if(D.video&&D.video.length){var K=H;if((typeof K>"u"||isNaN(K))&&(K=D.video[0].dts),D.video.forEach(function(ie){ie.dts=Gl(ie.dts,K),ie.pts=Gl(ie.pts,K),ie.dtsTime=ie.dts/ko,ie.ptsTime=ie.pts/ko}),D.firstKeyFrame){var te=D.firstKeyFrame;te.dts=Gl(te.dts,K),te.pts=Gl(te.pts,K),te.dtsTime=te.dts/ko,te.ptsTime=te.pts/ko}}}(K,H),K):null},IS=function(){function le(H,j){this.options=j||{},this.self=H,this.init()}var D=le.prototype;return D.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new pw.Transmuxer(this.options),function(D,H){H.on("data",function(j){var K=j.initSegment;j.initSegment={data:K.buffer,byteOffset:K.byteOffset,byteLength:K.byteLength};var te=j.data;j.data=te.buffer,D.postMessage({action:"data",segment:j,byteOffset:te.byteOffset,byteLength:te.byteLength},[j.data])}),H.on("done",function(j){D.postMessage({action:"done"})}),H.on("gopInfo",function(j){D.postMessage({action:"gopInfo",gopInfo:j})}),H.on("videoSegmentTimingInfo",function(j){var K={start:{decode:Er_videoTsToSeconds(j.start.dts),presentation:Er_videoTsToSeconds(j.start.pts)},end:{decode:Er_videoTsToSeconds(j.end.dts),presentation:Er_videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:Er_videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(K.prependedContentDuration=Er_videoTsToSeconds(j.prependedContentDuration)),D.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:K})}),H.on("audioSegmentTimingInfo",function(j){var K={start:{decode:Er_videoTsToSeconds(j.start.dts),presentation:Er_videoTsToSeconds(j.start.pts)},end:{decode:Er_videoTsToSeconds(j.end.dts),presentation:Er_videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:Er_videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(K.prependedContentDuration=Er_videoTsToSeconds(j.prependedContentDuration)),D.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:K})}),H.on("id3Frame",function(j){D.postMessage({action:"id3Frame",id3Frame:j})}),H.on("caption",function(j){D.postMessage({action:"caption",caption:j})}),H.on("trackinfo",function(j){D.postMessage({action:"trackinfo",trackInfo:j})}),H.on("audioTimingInfo",function(j){D.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Er_videoTsToSeconds(j.start),end:Er_videoTsToSeconds(j.end)}})}),H.on("videoTimingInfo",function(j){D.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Er_videoTsToSeconds(j.start),end:Er_videoTsToSeconds(j.end)}})}),H.on("log",function(j){D.postMessage({action:"log",log:j})})}(this.self,this.transmuxer)},D.pushMp4Captions=function(j){this.captionParser||(this.captionParser=new Mw,this.captionParser.init());var K=new Uint8Array(j.data,j.byteOffset,j.byteLength),te=this.captionParser.parse(K,j.trackIds,j.timescales);this.self.postMessage({action:"mp4Captions",captions:te&&te.captions||[],logs:te&&te.logs||[],data:K.buffer},[K.buffer])},D.probeMp4StartTime=function(j){var te=j.data,ie=PS_startTime(j.timescales,te);this.self.postMessage({action:"probeMp4StartTime",startTime:ie,data:te},[te.buffer])},D.probeMp4Tracks=function(j){var K=j.data,te=PS_tracks(K);this.self.postMessage({action:"probeMp4Tracks",tracks:te,data:K},[K.buffer])},D.probeTs=function(j){var K=j.data,te=j.baseStartTime,ie="number"!=typeof te||isNaN(te)?void 0:9e4*te,_e=Xw_inspect(K,ie),xe=null;_e&&((xe={hasVideo:_e.video&&2===_e.video.length||!1,hasAudio:_e.audio&&2===_e.audio.length||!1}).hasVideo&&(xe.videoStart=_e.video[0].ptsTime),xe.hasAudio&&(xe.audioStart=_e.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:xe,data:K},[K.buffer])},D.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},D.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},D.push=function(j){var K=new Uint8Array(j.data,j.byteOffset,j.byteLength);this.transmuxer.push(K)},D.reset=function(){this.transmuxer.reset()},D.setTimestampOffset=function(j){this.transmuxer.setBaseMediaDecodeTime(Math.round(Er_secondsToVideoTs(j.timestampOffset||0)))},D.setAudioAppendStart=function(j){this.transmuxer.setAudioAppendStart(Math.ceil(Er_secondsToVideoTs(j.appendStart)))},D.setRemux=function(j){this.transmuxer.setRemux(j.remux)},D.flush=function(j){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},D.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},D.alignGopsWith=function(j){this.transmuxer.alignGopsWith(j.gopsToAlignWith.slice())},le}();self.onmessage=function(le){"init"===le.data.action&&le.data.options?this.messageHandlers=new IS(self,le.data.options):(this.messageHandlers||(this.messageHandlers=new IS(self)),le.data&&le.data.action&&"init"!==le.data.action&&this.messageHandlers[le.data.action]&&this.messageHandlers[le.data.action](le.data))}})),y1=cx(m1),px=function(t){var r=t.transmuxer,n=t.bytes,e=t.audioAppendStart,i=t.gopsToAlignWith,s=t.remux,l=t.onData,p=t.onTrackInfo,y=t.onAudioTimingInfo,k=t.onVideoTimingInfo,$=t.onVideoSegmentTimingInfo,z=t.onAudioSegmentTimingInfo,ae=t.onId3,pe=t.onCaptions,me=t.onDone,Ee=t.onEndedTimeline,We=t.onTransmuxerLog,et=t.isEndOfTimeline,pt={buffer:[]},Ye=et;if(r.onmessage=function(at){r.currentTransmux===t&&("data"===at.data.action&&function(t,r,n){var e=t.data.segment,i=e.type,s=e.initSegment,k=e.videoFrameDtsTime,$=e.videoFramePtsTime;r.buffer.push({captions:e.captions,captionStreams:e.captionStreams,metadata:e.metadata});var z=t.data.segment.boxes||{data:t.data.segment.data},ae={type:i,data:new Uint8Array(z.data,z.data.byteOffset,z.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof k<"u"&&(ae.videoFrameDtsTime=k),typeof $<"u"&&(ae.videoFramePtsTime=$),n(ae)}(at,pt,l),"trackinfo"===at.data.action&&p(at.data.trackInfo),"gopInfo"===at.data.action&&function(t,r){r.gopInfo=t.data.gopInfo}(at,pt),"audioTimingInfo"===at.data.action&&y(at.data.audioTimingInfo),"videoTimingInfo"===at.data.action&&k(at.data.videoTimingInfo),"videoSegmentTimingInfo"===at.data.action&&$(at.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===at.data.action&&z(at.data.audioSegmentTimingInfo),"id3Frame"===at.data.action&&ae([at.data.id3Frame],at.data.id3Frame.dispatchType),"caption"===at.data.action&&pe(at.data.caption),"endedtimeline"===at.data.action&&(Ye=!1,Ee()),"log"===at.data.action&&We(at.data.log),"transmuxed"===at.data.type&&(Ye||(r.onmessage=null,function(t){var r=t.transmuxedData,n=t.callback;r.buffer=[],n(r)}({transmuxedData:pt,callback:me}),vx(r))))},e&&r.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(i)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&r.postMessage({action:"setRemux",remux:s}),n.byteLength){var it=n instanceof ArrayBuffer?n:n.buffer,Xe=n instanceof ArrayBuffer?0:n.byteOffset;r.postMessage({action:"push",data:it,byteOffset:Xe,byteLength:n.byteLength},[it])}et&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},vx=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),"function"==typeof t.currentTransmux?t.currentTransmux():px(t.currentTransmux))},gx=function(t,r){t.postMessage({action:r}),vx(t)},hT_reset=function(t){!function(t,r){if(!r.currentTransmux)return r.currentTransmux=t,void gx(r,t);r.transmuxQueue.push(gx.bind(null,r,t))}("reset",t)},xv=function(t){var r=t.transmuxer,n=t.endAction||t.action,e=t.callback,i=Bi()({},t,{endAction:null,transmuxer:null,callback:null});if(r.addEventListener("message",function y(k){k.data.action===n&&(r.removeEventListener("message",y),k.data.data&&(k.data.data=new Uint8Array(k.data.data,t.byteOffset||0,t.byteLength||k.data.data.byteLength),t.data&&(t.data=k.data.data)),e(k.data))}),t.data){var l=t.data instanceof ArrayBuffer;i.byteOffset=l?0:t.data.byteOffset,i.byteLength=t.data.byteLength,r.postMessage(i,[l?t.data:t.data.buffer])}else r.postMessage(i)},pT=function(t){t.forEach(function(r){r.abort()})},vT=function(t,r){return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:-101,xhr:r}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:-102,xhr:r}:t?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:2,xhr:r}:"arraybuffer"===r.responseType&&0===r.response.byteLength?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:2,xhr:r}:null},_x=function(t,r,n){return function(e,i){var s=i.response,l=vT(e,i);if(l)return n(l,t);if(16!==s.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},t);for(var p=new DataView(s),y=new Uint32Array([p.getUint32(0),p.getUint32(4),p.getUint32(8),p.getUint32(12)]),k=0;k<r.length;k++)r[k].bytes=y;return n(null,t)}},Tx=function(t,r){var n=t_(t.map.bytes);if("mp4"!==n)return r({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+(t.map.resolvedUri||t.map.uri),code:2});xv({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(s){var l=s.tracks;return t.map.bytes=s.data,l.forEach(function(y){t.map.tracks=t.map.tracks||{},!t.map.tracks[y.type]&&(t.map.tracks[y.type]=y,"number"==typeof y.id&&y.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[y.id]=y.timescale))}),r(null)}})},w1=function(t){var r=t.segment,n=t.bytes,e=t.trackInfoFn,i=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,l=t.audioSegmentTimingInfoFn,p=t.id3Fn,y=t.captionsFn,k=t.isEndOfTimeline,$=t.endedTimelineFn,z=t.dataFn,ae=t.doneFn,pe=t.onTransmuxerLog,me=r.map&&r.map.tracks||{},Ee=Boolean(me.audio&&me.video),We=i.bind(null,r,"audio","start"),et=i.bind(null,r,"audio","end"),pt=i.bind(null,r,"video","start"),Ye=i.bind(null,r,"video","end");xv({action:"probeTs",transmuxer:r.transmuxer,data:n,baseStartTime:r.baseStartTime,callback:function(Xe){r.bytes=n=Xe.data;var qe=Xe.result;qe&&(e(r,{hasAudio:qe.hasAudio,hasVideo:qe.hasVideo,isMuxed:Ee}),e=null,qe.hasAudio&&!Ee&&We(qe.audioStart),qe.hasVideo&&pt(qe.videoStart),We=null,pt=null),function(t){if(!t.transmuxer.currentTransmux)return t.transmuxer.currentTransmux=t,void px(t);t.transmuxer.transmuxQueue.push(t)}({bytes:n,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:Ee,onData:function(qe){qe.type="combined"===qe.type?"video":qe.type,z(r,qe)},onTrackInfo:function(qe){e&&(Ee&&(qe.isMuxed=!0),e(r,qe))},onAudioTimingInfo:function(qe){We&&typeof qe.start<"u"&&(We(qe.start),We=null),et&&typeof qe.end<"u"&&et(qe.end)},onVideoTimingInfo:function(qe){pt&&typeof qe.start<"u"&&(pt(qe.start),pt=null),Ye&&typeof qe.end<"u"&&Ye(qe.end)},onVideoSegmentTimingInfo:function(qe){s(qe)},onAudioSegmentTimingInfo:function(qe){l(qe)},onId3:function(qe,at){p(r,qe,at)},onCaptions:function(qe){y(r,[qe])},isEndOfTimeline:k,onEndedTimeline:function(){$()},onTransmuxerLog:pe,onDone:function(qe){ae&&(qe.type="combined"===qe.type?"video":qe.type,ae(null,r,qe))}})}})},Ex=function(t){var r=t.segment,n=t.bytes,e=t.trackInfoFn,i=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,l=t.audioSegmentTimingInfoFn,p=t.id3Fn,y=t.captionsFn,k=t.isEndOfTimeline,$=t.endedTimelineFn,z=t.dataFn,ae=t.doneFn,pe=t.onTransmuxerLog,me=new Uint8Array(n);if(function(t){return Vr(t,["moof"]).length>0}(me)){r.isFmp4=!0;var Ee=r.map.tracks,We={isFmp4:!0,hasVideo:!!Ee.video,hasAudio:!!Ee.audio};Ee.audio&&Ee.audio.codec&&"enca"!==Ee.audio.codec&&(We.audioCodec=Ee.audio.codec),Ee.video&&Ee.video.codec&&"encv"!==Ee.video.codec&&(We.videoCodec=Ee.video.codec),Ee.video&&Ee.audio&&(We.isMuxed=!0),e(r,We);var et=function(Ye){z(r,{data:me,type:We.hasAudio&&!We.isMuxed?"audio":"video"}),Ye&&Ye.length&&y(r,Ye),ae(null,r,{})};xv({action:"probeMp4StartTime",timescales:r.map.timescales,data:me,transmuxer:r.transmuxer,callback:function(Ye){var ze=Ye.data,it=Ye.startTime;n=ze.buffer,r.bytes=me=ze,We.hasAudio&&!We.isMuxed&&i(r,"audio","start",it),We.hasVideo&&i(r,"video","start",it),Ee.video&&ze.byteLength&&r.transmuxer?xv({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:me,timescales:r.map.timescales,trackIds:[Ee.video.id],callback:function(qe){n=qe.data.buffer,r.bytes=me=qe.data,qe.logs.forEach(function(at){pe(ke.mergeOptions(at,{stream:"mp4CaptionParser"}))}),et(qe.captions)}}):et()}})}else{if(r.transmuxer)return typeof r.container>"u"&&(r.container=t_(me)),"ts"!==r.container&&"aac"!==r.container?(e(r,{hasAudio:!1,hasVideo:!1}),void ae(null,r,{})):void w1({segment:r,bytes:n,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:l,id3Fn:p,captionsFn:y,isEndOfTimeline:k,endedTimelineFn:$,dataFn:z,doneFn:ae,onTransmuxerLog:pe});ae(null,r,{})}},bx=function(t,r){var p,n=t.id,e=t.key,i=t.encryptedBytes,s=t.decryptionWorker;s.addEventListener("message",function y(k){if(k.data.source===n){s.removeEventListener("message",y);var $=k.data.decrypted;r(new Uint8Array($.bytes,$.byteOffset,$.byteLength))}}),p=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(nx({source:n,encrypted:i,key:p,iv:e.iv}),[i.buffer,p.buffer])},M1=function(t){var r=t.xhr,n=t.xhrOptions,i=t.segment,s=t.abortFn,l=t.progressFn,p=t.trackInfoFn,y=t.timingInfoFn,k=t.videoSegmentTimingInfoFn,$=t.audioSegmentTimingInfoFn,z=t.id3Fn,ae=t.captionsFn,pe=t.isEndOfTimeline,me=t.endedTimelineFn,Ee=t.dataFn,pt=[],Ye=function(t){var r=t.activeXhrs,n=t.decryptionWorker,e=t.trackInfoFn,i=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,l=t.audioSegmentTimingInfoFn,p=t.id3Fn,y=t.captionsFn,k=t.isEndOfTimeline,$=t.endedTimelineFn,z=t.dataFn,ae=t.doneFn,pe=t.onTransmuxerLog,me=0,Ee=!1;return function(We,et){if(!Ee){if(We)return Ee=!0,pT(r),ae(We,et);if((me+=1)===r.length){var pt=function(){if(et.encryptedBytes)return function(t){var n=t.segment,e=t.trackInfoFn,i=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,l=t.audioSegmentTimingInfoFn,p=t.id3Fn,y=t.captionsFn,k=t.isEndOfTimeline,$=t.endedTimelineFn,z=t.dataFn,ae=t.doneFn,pe=t.onTransmuxerLog;bx({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t.decryptionWorker},function(me){n.bytes=me,Ex({segment:n,bytes:n.bytes,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:l,id3Fn:p,captionsFn:y,isEndOfTimeline:k,endedTimelineFn:$,dataFn:z,doneFn:ae,onTransmuxerLog:pe})})}({decryptionWorker:n,segment:et,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:l,id3Fn:p,captionsFn:y,isEndOfTimeline:k,endedTimelineFn:$,dataFn:z,doneFn:ae,onTransmuxerLog:pe});Ex({segment:et,bytes:et.bytes,trackInfoFn:e,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:l,id3Fn:p,captionsFn:y,isEndOfTimeline:k,endedTimelineFn:$,dataFn:z,doneFn:ae,onTransmuxerLog:pe})};if(et.endOfAllRequests=Date.now(),et.map&&et.map.encryptedBytes&&!et.map.bytes)return bx({decryptionWorker:n,id:et.requestId+"-init",encryptedBytes:et.map.encryptedBytes,key:et.map.key},function(Ye){et.map.bytes=Ye,Tx(et,function(ze){if(ze)return pT(r),ae(ze,et);pt()})});pt()}}}}({activeXhrs:pt,decryptionWorker:t.decryptionWorker,trackInfoFn:p,timingInfoFn:y,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:$,id3Fn:z,captionsFn:ae,isEndOfTimeline:pe,endedTimelineFn:me,dataFn:Ee,doneFn:t.doneFn,onTransmuxerLog:t.onTransmuxerLog});if(i.key&&!i.key.bytes){var ze=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&ze.push(i.map.key);var qe=r(ke.mergeOptions(n,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),_x(i,ze,Ye));pt.push(qe)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){var Tt=r(ke.mergeOptions(n,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),_x(i,[i.map.key],Ye));pt.push(Tt)}var Ft=ke.mergeOptions(n,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:fT(i.map)}),Sr=function(t){var r=t.segment,n=t.finishProcessingFn;return function(e,i){var s=vT(e,i);if(s)return n(s,r);var l=new Uint8Array(i.response);if(r.map.key)return r.map.encryptedBytes=l,n(null,r);r.map.bytes=l,Tx(r,function(p){if(p)return p.xhr=i,p.status=i.status,n(p,r);n(null,r)})}}({segment:i,finishProcessingFn:Ye}),er=r(Ft,Sr);pt.push(er)}var cr=ke.mergeOptions(n,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:fT(i)}),Mr=r(cr,function(t){var r=t.segment,n=t.finishProcessingFn,e=t.responseType;return function(i,s){var l=vT(i,s);if(l)return n(l,r);var p="arraybuffer"!==e&&s.responseText?function(t){for(var r=new Uint8Array(new ArrayBuffer(t.length)),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}(s.responseText.substring(r.lastReachedChar||0)):s.response;return r.stats=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}}(s),r.key?r.encryptedBytes=new Uint8Array(p):r.bytes=new Uint8Array(p),n(null,r)}}({segment:i,finishProcessingFn:Ye,responseType:cr.responseType}));Mr.addEventListener("progress",function(t){var r=t.segment,n=t.progressFn;return function(e){if(!e.target.aborted)return r.stats=ke.mergeOptions(r.stats,function(t){var r=t.target,e={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0};return e.bytesReceived=t.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e}(e)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),n(e,r)}}({segment:i,progressFn:l,trackInfoFn:p,timingInfoFn:y,videoSegmentTimingInfoFn:k,audioSegmentTimingInfoFn:$,id3Fn:z,captionsFn:ae,isEndOfTimeline:pe,endedTimelineFn:me,dataFn:Ee})),pt.push(Mr);var dn={};return pt.forEach(function(Tr){Tr.addEventListener("loadend",function(t){var r=t.loadendState,n=t.abortFn;return function(e){e.target.aborted&&n&&!r.calledAbortFn&&(n(),r.calledAbortFn=!0)}}({loadendState:dn,abortFn:s}))}),function(){return pT(pt)}},k1=ua("CodecUtils"),xx=function(t,r){var n=r.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},Sv=function(t){var r={};return t.forEach(function(n){var e=n.mediaType,i=n.type,s=n.details;r[e]=r[e]||[],r[e].push(go(""+i+s))}),Object.keys(r).forEach(function(n){if(r[n].length>1)return k1("multiple "+n+" codecs found as attributes: "+r[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(r[n]=null);r[n]=r[n][0]}),r},Sx=function(t){var r=0;return t.audio&&r++,t.video&&r++,r},nd=function(t,r){var n=r.attributes||{},e=Sv(function(t){var r=t.attributes||{};if(r.CODECS)return Ni(r.CODECS)}(r)||[]);if(xx(t,r)&&!e.audio&&!function(t,r){if(!xx(t,r))return!0;var e=t.mediaGroups.AUDIO[(r.attributes||{}).AUDIO];for(var i in e)if(!e[i].uri&&!e[i].playlists)return!0;return!1}(t,r)){var i=Sv(function(t,r){if(!t.mediaGroups.AUDIO||!r)return null;var n=t.mediaGroups.AUDIO[r];if(!n)return null;for(var e in n){var i=n[e];if(i.default&&i.playlists)return Ni(i.playlists[0].attributes.CODECS)}return null}(t,n.AUDIO)||[]);i.audio&&(e.audio=i.audio)}return e},Av=ua("PlaylistSelector"),Ax=function(t){if(t&&t.playlist){var r=t.playlist;return JSON.stringify({id:r.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:r.attributes&&r.attributes.CODECS||""})}},Cv=function(t,r){if(!t)return"";var n=De().getComputedStyle(t);return n?n[r]:""},Nl=function(t,r){var n=t.slice();t.sort(function(e,i){var s=r(e,i);return 0===s?n.indexOf(e)-n.indexOf(i):s})},gT=function(t,r){var n,e;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||De().Number.MAX_VALUE,r.attributes.BANDWIDTH&&(e=r.attributes.BANDWIDTH),n-(e||De().Number.MAX_VALUE)},Cx=function(t,r,n,e,i,s){if(t){var l={bandwidth:r,width:n,height:e,limitRenditionByPlayerDimensions:i},p=t.playlists;di.isAudioOnly(t)&&(p=s.getAudioTrackPlaylists_(),l.audioOnly=!0);var y=p.map(function($e){var Tt=$e.attributes&&$e.attributes.RESOLUTION&&$e.attributes.RESOLUTION.width,Ft=$e.attributes&&$e.attributes.RESOLUTION&&$e.attributes.RESOLUTION.height;return{bandwidth:$e.attributes&&$e.attributes.BANDWIDTH||De().Number.MAX_VALUE,width:Tt,height:Ft,playlist:$e}});Nl(y,function($e,Lt){return $e.bandwidth-Lt.bandwidth});var k=(y=y.filter(function($e){return!di.isIncompatible($e.playlist)})).filter(function($e){return di.isEnabled($e.playlist)});k.length||(k=y.filter(function($e){return!di.isDisabled($e.playlist)}));var $=k.filter(function($e){return $e.bandwidth*xn.BANDWIDTH_VARIANCE<r}),z=$[$.length-1],ae=$.filter(function($e){return $e.bandwidth===z.bandwidth})[0];if(!1===i){var pe=ae||k[0]||y[0];if(pe&&pe.playlist){var me="sortedPlaylistReps";return ae&&(me="bandwidthBestRep"),k[0]&&(me="enabledPlaylistReps"),Av("choosing "+Ax(pe)+" using "+me+" with options",l),pe.playlist}return Av("could not choose a playlist with options",l),null}var Ee=$.filter(function($e){return $e.width&&$e.height});Nl(Ee,function($e,Lt){return $e.width-Lt.width});var We=Ee.filter(function($e){return $e.width===n&&$e.height===e});z=We[We.length-1];var pt,Ye,ze,it,et=We.filter(function($e){return $e.bandwidth===z.bandwidth})[0];if(et||(Ye=(pt=Ee.filter(function($e){return $e.width>n||$e.height>e})).filter(function($e){return $e.width===pt[0].width&&$e.height===pt[0].height}),z=Ye[Ye.length-1],ze=Ye.filter(function($e){return $e.bandwidth===z.bandwidth})[0]),s.experimentalLeastPixelDiffSelector){var Xe=Ee.map(function($e){return $e.pixelDiff=Math.abs($e.width-n)+Math.abs($e.height-e),$e});Nl(Xe,function($e,Lt){return $e.pixelDiff===Lt.pixelDiff?Lt.bandwidth-$e.bandwidth:$e.pixelDiff-Lt.pixelDiff}),it=Xe[0]}var qe=it||ze||et||ae||k[0]||y[0];if(qe&&qe.playlist){var at="sortedPlaylistReps";return it?at="leastPixelDiffRep":ze?at="resolutionPlusOneRep":et?at="resolutionBestRep":ae?at="bandwidthBestRep":k[0]&&(at="enabledPlaylistReps"),Av("choosing "+Ax(qe)+" using "+at+" with options",l),qe.playlist}return Av("could not choose a playlist with options",l),null}},Dx=function(){var t=this.useDevicePixelRatio&&De().devicePixelRatio||1;return Cx(this.playlists.master,this.systemBandwidth,parseInt(Cv(this.tech_.el(),"width"),10)*t,parseInt(Cv(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},id=function(t,r,n){var e,i;if(n&&n.cues)for(e=n.cues.length;e--;)(i=n.cues[e]).startTime>=t&&i.endTime<=r&&n.removeCue(i)},wx=function(t){return"number"==typeof t&&isFinite(t)},Dv=1/60,jl=function(t){var r=t.startOfSegment,n=t.duration,e=t.segment,i=t.part,s=t.playlist,l=s.mediaSequence,p=s.id,y=s.segments,$=t.mediaIndex,z=t.partIndex,ae=t.timeline,pe=(void 0===y?[]:y).length-1,me="mediaIndex/partIndex increment";t.getMediaInfoForTime?me="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(me="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(me+=" with independent "+t.independent);var Ee="number"==typeof z,We=t.segment.uri?"segment":"pre-segment",et=Ee?Wb({preloadSegment:e})-1:0;return We+" ["+(l+$)+"/"+(l+pe)+"]"+(Ee?" part ["+z+"/"+et+"]":"")+" segment start/end ["+e.start+" => "+e.end+"]"+(Ee?" part start/end ["+i.start+" => "+i.end+"]":"")+" startOfSegment ["+r+"] duration ["+n+"] timeline ["+ae+"] selected by ["+me+"] playlist ["+p+"]"},Ox=function(t){return t+"TimingInfo"},Ix=function(t){var r=t.timelineChangeController,e=t.segmentTimeline,i=t.loaderType,s=t.audioDisabled;if(t.currentTimeline===e)return!1;if("audio"===i){var l=r.lastTimelineChange({type:"main"});return!l||l.to!==e}if("main"===i&&s){var p=r.pendingTimelineChange({type:"audio"});return!(p&&p.to===e)}return!1},Lx=function(t){var r=t.segmentDuration,n=t.maxDuration;return!!r&&Math.round(r)>n+As},mT=function(a){function t(n,e){var i;if(i=a.call(this)||this,!n)throw new TypeError("Initialization settings are required");if("function"!=typeof n.currentTime)throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=n.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=n.hasPlayed,i.currentTime_=n.currentTime,i.seekable_=n.seekable,i.seeking_=n.seeking,i.duration_=n.duration,i.mediaSource_=n.mediaSource,i.vhs_=n.vhs,i.loaderType_=n.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=n.segmentMetadataTrack,i.goalBufferLength_=n.goalBufferLength,i.sourceType_=n.sourceType,i.sourceUpdater_=n.sourceUpdater,i.inbandTextTracks_=n.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=n.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=n.parse708captions,i.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,i.captionServices_=n.captionServices,i.experimentalExactManifestTimings=n.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=ke.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=n.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=n.decrypter,i.syncController_=n.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",function(){i.isEndOfStream_()||(i.ended_=!1)}),i.fetchAtBuffer_=!1,i.logger_=ua("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(zt()(i),"state",{get:function(){return this.state_},set:function(l){l!==this.state_&&(this.logger_(this.state_+" -> "+l),this.state_=l,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),i}ht()(t,a);var r=t.prototype;return r.createTransmuxer_=function(){return function(t){var r=new y1;r.currentTransmux=null,r.transmuxQueue=[];var n=r.terminate;return r.terminate=function(){return r.currentTransmux=null,r.transmuxQueue.length=0,n.call(r)},r.postMessage({action:"init",options:t}),r}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&De().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,De().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},r.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},r.error=function(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&hT_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return ke.createTimeRanges();if("main"===this.loaderType_){var s=e.hasVideo;if(s&&e.hasAudio&&!this.audioDisabled_&&!e.isMuxed)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(e,i){if(void 0===i&&(i=!1),!e)return null;var s=bv(e),l=this.initSegments_[s];return i&&!l&&e.bytes&&(this.initSegments_[s]=l={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),l||e},r.segmentKey=function(e,i){if(void 0===i&&(i=!1),!e)return null;var s=ix(e),l=this.keyCache_[s];this.cacheEncryptionKeys_&&i&&!l&&e.bytes&&(this.keyCache_[s]=l={resolvedUri:e.resolvedUri,bytes:e.bytes});var p={resolvedUri:(l||e).resolvedUri};return l&&(p.bytes=l.bytes),p},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(e,i){if(void 0===i&&(i={}),e){var s=this.playlist_,l=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var p=null;if(s&&(s.id?p=s.id:s.uri&&(p=s.uri)),this.logger_("playlist update ["+p+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var y=e.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+y+"]"),null!==this.mediaIndex)if(this.mediaIndex-=y,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var k=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!k.parts||!k.parts.length||!k.parts[this.partIndex])){var $=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=$}}l&&(l.mediaIndex-=y,l.mediaIndex<0?(l.mediaIndex=null,l.partIndex=null):(l.mediaIndex>=0&&(l.segment=e.segments[l.mediaIndex]),l.partIndex>=0&&l.segment.parts&&(l.part=l.segment.parts[l.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}},r.pause=function(){this.checkBufferTimeout_&&(De().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return null===this.checkBufferTimeout_},r.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&hT_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(e,i,s,l){if(void 0===s&&(s=function(){}),void 0===l&&(l=!1),i===1/0&&(i=this.duration_()),i<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var p=1,y=function(){0==--p&&s()};for(var k in(l||!this.audioDisabled_)&&(p++,this.sourceUpdater_.removeAudio(e,i,y)),(l||"main"===this.loaderType_)&&(this.gopBuffer_=function(t,r,n,e){for(var i=Math.ceil((r-e)*Gp.ONE_SECOND_IN_TS),s=Math.ceil((n-e)*Gp.ONE_SECOND_IN_TS),l=t.slice(),p=t.length;p--&&!(t[p].pts<=s););if(-1===p)return l;for(var y=p+1;y--&&!(t[y].pts<=i););return y=Math.max(y,0),l.splice(y,p-y+1),l}(this.gopBuffer_,e,i,this.timeMapping_),p++,this.sourceUpdater_.removeVideo(e,i,y)),this.inbandTextTracks_)id(e,i,this.inbandTextTracks_[k]);id(e,i,this.segmentMetadataTrack_),y()}else this.logger_("skipping remove because no source updater or starting media info")},r.monitorBuffer_=function(){this.checkBufferTimeout_&&De().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=De().setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&De().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=De().setTimeout(this.monitorBufferTick_.bind(this),500)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},r.isEndOfStream_=function(e,i,s){if(void 0===e&&(e=this.mediaIndex),void 0===i&&(i=this.playlist_),void 0===s&&(s=this.partIndex),!i||!this.mediaSource_)return!1;var l="number"==typeof e&&i.segments[e];return i.endList&&"open"===this.mediaSource_.readyState&&e+1===i.segments.length&&(!l||!l.parts||s+1===l.parts.length)},r.chooseNextRequest_=function(){var e=this.buffered_(),i=Nb(e)||0,s=eT(e,this.currentTime_()),l=!this.hasPlayed_()&&s>=1,p=s>=this.goalBufferLength_(),y=this.playlist_.segments;if(!y.length||l||p)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var k={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(k.isSyncRequest)k.mediaIndex=function(t,r,n){r=r||[];for(var e=[],i=0,s=0;s<r.length;s++){var l=r[s];if(t===l.timeline&&(e.push(s),(i+=l.duration)>n))return s}return 0===e.length?0:e[e.length-1]}(this.currentTimeline_,y,i);else if(null!==this.mediaIndex){var $=y[this.mediaIndex],z="number"==typeof this.partIndex?this.partIndex:-1;k.startOfSegment=$.end?$.end:i,$.parts&&$.parts[z+1]?(k.mediaIndex=this.mediaIndex,k.partIndex=z+1):k.mediaIndex=this.mediaIndex+1}else{var ae=di.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?i:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),pe=ae.segmentIndex,me=ae.startTime,Ee=ae.partIndex;k.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+i:"currentTime "+this.currentTime_(),k.mediaIndex=pe,k.startOfSegment=me,k.partIndex=Ee}var We=y[k.mediaIndex],et=We&&"number"==typeof k.partIndex&&We.parts&&We.parts[k.partIndex];if(!We||"number"==typeof k.partIndex&&!et)return null;if("number"!=typeof k.partIndex&&We.parts&&(k.partIndex=0,et=We.parts[0]),!s&&et&&!et.independent)if(0===k.partIndex){var pt=y[k.mediaIndex-1],Ye=pt.parts&&pt.parts.length&&pt.parts[pt.parts.length-1];Ye&&Ye.independent&&(k.mediaIndex-=1,k.partIndex=pt.parts.length-1,k.independent="previous segment")}else We.parts[k.partIndex-1].independent&&(k.partIndex-=1,k.independent="previous part");return k.mediaIndex>=y.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(k)},r.generateSegmentInfo_=function(e){var i=e.independent,s=e.playlist,l=e.mediaIndex,p=e.startOfSegment,y=e.isSyncRequest,k=e.partIndex,$=e.forceTimestampOffset,z=e.getMediaInfoForTime,ae=s.segments[l],pe="number"==typeof k&&ae.parts[k],me={requestId:"segment-loader-"+Math.random(),uri:pe&&pe.resolvedUri||ae.resolvedUri,mediaIndex:l,partIndex:pe?k:null,isSyncRequest:y,startOfSegment:p,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:ae.timeline,duration:pe&&pe.duration||ae.duration,segment:ae,part:pe,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:z,independent:i},Ee=typeof $<"u"?$:this.isPendingTimestampOffset_;me.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:ae.timeline,currentTimeline:this.currentTimeline_,startOfSegment:p,buffered:this.buffered_(),overrideCheck:Ee});var We=Nb(this.sourceUpdater_.audioBuffered());return"number"==typeof We&&(me.audioAppendStart=We-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(me.gopsToAlignWith=function(t,r,n){if(typeof r>"u"||null===r||!t.length)return[];var i,e=Math.ceil((r-n+3)*Gp.ONE_SECOND_IN_TS);for(i=0;i<t.length&&!(t[i].pts>e);i++);return t.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),me},r.timestampOffsetForSegment_=function(e){return function(t){var r=t.segmentTimeline,n=t.currentTimeline,e=t.startOfSegment,i=t.buffered;return t.overrideCheck||r!==n?r<n?e:i.length?i.end(i.length-1):e:null}(e)},r.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var i=this.currentTime_(),s=e.bandwidth,l=this.pendingSegment_.duration,p=di.estimateSegmentRequestTime(l,s,this.playlist_,e.bytesReceived),y=function(t,r,n){return void 0===n&&(n=1),((t.length?t.end(t.length-1):0)-r)/n}(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(!(p<=y)){var k=function(t){var n=t.currentTime,e=t.bandwidth,i=t.duration,s=t.segmentDuration,l=t.timeUntilRebuffer,p=t.currentTimeline,y=t.syncController,k=t.master.playlists.filter(function(me){return!di.isIncompatible(me)}),$=k.filter(di.isEnabled);$.length||($=k.filter(function(me){return!di.isDisabled(me)}));var ae=$.filter(di.hasAttribute.bind(null,"BANDWIDTH")).map(function(me){var We=y.getSyncPoint(me,i,p,n)?1:2;return{playlist:me,rebufferingImpact:di.estimateSegmentRequestTime(s,e,me)*We-l}}),pe=ae.filter(function(me){return me.rebufferingImpact<=0});return Nl(pe,function(me,Ee){return gT(Ee.playlist,me.playlist)}),pe.length?pe[0]:(Nl(ae,function(me,Ee){return me.rebufferingImpact-Ee.rebufferingImpact}),ae[0]||null)}({master:this.vhs_.playlists.master,currentTime:i,bandwidth:s,duration:this.duration_(),segmentDuration:l,timeUntilRebuffer:y,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(k){var ae=.5;y<=As&&(ae=1),k.playlist&&k.playlist.uri!==this.playlist_.uri&&!(p-y-k.rebufferingImpact<ae)&&(this.bandwidth=k.playlist.attributes.BANDWIDTH*xn.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(e){this.logger_("Aborting "+jl(e)),this.mediaRequestsAborted+=1},r.handleProgress_=function(e,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")},r.handleTrackInfo_=function(e,i){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(i)||(function(t,r){if(!t&&!r||!t&&r||t&&!r)return!1;if(t===r)return!0;var n=Object.keys(t).sort(),e=Object.keys(r).sort();if(n.length!==e.length)return!1;for(var i=0;i<n.length;i++){var s=n[i];if(s!==e[i]||t[s]!==r[s])return!1}return!0}(this.currentMediaInfo_,i=i||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},r.handleTimingInfo_=function(e,i,s,l){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var p=this.pendingSegment_,y=Ox(i);p[y]=p[y]||{},p[y][s]=l,this.logger_("timinginfo: "+i+" - "+s+" - "+l),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(e,i){var s=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(0===i.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,i));var p=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),y={};i.forEach(function(k){y[k.stream]=y[k.stream]||{startTime:1/0,captions:[],endTime:0};var $=y[k.stream];$.startTime=Math.min($.startTime,k.startTime+p),$.endTime=Math.max($.endTime,k.endTime+p),$.captions.push(k)}),Object.keys(y).forEach(function(k){var $=y[k],z=$.startTime,ae=$.endTime,pe=$.captions,me=s.inbandTextTracks_;s.logger_("adding cues from "+z+" -> "+ae+" for "+k),function(t,r,n){if(!t[n]){r.trigger({type:"usage",name:"vhs-608"}),r.trigger({type:"usage",name:"hls-608"});var e=n;/^cc708_/.test(n)&&(e="SERVICE"+n.split("_")[1]);var i=r.textTracks().getTrackById(e);if(i)t[n]=i;else{var l=n,p=n,y=!1,k=(r.options_.vhs&&r.options_.vhs.captionServices||{})[e];k&&(l=k.label,p=k.language,y=k.default),t[n]=r.addRemoteTextTrack({kind:"captions",id:e,default:y,label:l,language:p},!1).track}}}(me,s.vhs_.tech_,k),id(z,ae,me[k]),function(t){var r=t.inbandTextTracks,n=t.captionArray,e=t.timestampOffset;if(n){var i=De().WebKitDataCue||De().VTTCue;n.forEach(function(s){r[s.stream].addCue(new i(s.startTime+e,s.endTime+e,s.text))})}}({captionArray:pe,inbandTextTracks:me,timestampOffset:p})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},r.handleId3_=function(e,i,s){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,i,s));var p=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(t,r,n){t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=r)})(this.inbandTextTracks_,s,this.vhs_.tech_),function(t){var r=t.inbandTextTracks,n=t.metadataArray,e=t.timestampOffset,i=t.videoDuration;if(n){var s=De().WebKitDataCue||De().VTTCue,l=r.metadataTrack_;if(l&&(n.forEach(function(ae){var pe=ae.cueTime+e;"number"!=typeof pe||De().isNaN(pe)||pe<0||!(pe<1/0)||ae.frames.forEach(function(me){var Ee=new s(pe,pe,me.value||me.url||me.data||"");Ee.frame=me,Ee.value=me,function(t){Object.defineProperties(t.frame,{id:{get:function(){return ke.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return ke.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return ke.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(Ee),l.addCue(Ee)})}),l.cues&&l.cues.length)){for(var p=l.cues,y=[],k=0;k<p.length;k++)p[k]&&y.push(p[k]);var $=y.reduce(function(ae,pe){var me=ae[pe.startTime]||[];return me.push(pe),ae[pe.startTime]=me,ae},{}),z=Object.keys($).sort(function(ae,pe){return Number(ae)-Number(pe)});z.forEach(function(ae,pe){var me=$[ae],Ee=Number(z[pe+1])||i;me.forEach(function(We){We.endTime=Ee})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:p,videoDuration:this.duration_()})}},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(i){return i()})},r.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(i){return i()})},r.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Ix({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},r.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,i=this.getCurrentMediaInfo_();return!(!e||!i||i.hasVideo&&!e.videoTimingInfo||i.hasAudio&&!this.audioDisabled_&&!i.isMuxed&&!e.audioTimingInfo||Ix({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.handleData_=function(e,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,i));var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[Ox(i.type)].start;else{var y,l=this.getCurrentMediaInfo_(),p="main"===this.loaderType_&&l&&l.hasVideo;p&&(y=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:p,firstVideoFrameTimeForData:y,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,i.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:"main"===this.loaderType_});var k=this.chooseNextRequest_();if(k.mediaIndex!==s.mediaIndex||k.partIndex!==s.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,i)}}},r.updateAppendInitSegmentStatus=function(e,i){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==e.playlist&&(this.appendInitSegment_[i]=!0)},r.getInitSegmentAndUpdateState_=function(e){var i=e.type,s=e.initSegment,l=e.map,p=e.playlist;if(l){var y=bv(l);if(this.activeInitSegmentId_===y)return null;s=this.initSegmentForMap(l,!0).bytes,this.activeInitSegmentId_=y}return s&&this.appendInitSegment_[i]?(this.playlistOfLastInitSegment_[i]=p,this.appendInitSegment_[i]=!1,this.activeInitSegmentId_=null,s):null},r.handleQuotaExceededError_=function(e,i){var s=this,l=e.segmentInfo,p=e.type,y=e.bytes,k=this.sourceUpdater_.audioBuffered(),$=this.sourceUpdater_.videoBuffered();k.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Oo(k).join(", ")),$.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Oo($).join(", "));var z=k.length?k.start(0):0,ae=k.length?k.end(k.length-1):0,pe=$.length?$.start(0):0,me=$.length?$.end($.length-1):0;if(ae-z<=1&&me-pe<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+y.byteLength+", audio buffer: "+Oo(k).join(", ")+", video buffer: "+Oo($).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:l,type:p,bytes:y}));var We=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+We),this.remove(0,We,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=De().setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},1e3)},!0)},r.handleAppendError_=function(e,i){var s=e.segmentInfo,l=e.type,p=e.bytes;if(i){if(22===i.code)return void this.handleQuotaExceededError_({segmentInfo:s,type:l,bytes:p});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(l+" append of "+p.length+"b failed for segment #"+s.mediaIndex+" in playlist "+s.playlist.id),this.trigger("appenderror")}},r.appendToSourceBuffer_=function(e){var i=e.segmentInfo,s=e.type,l=e.initSegment,p=e.data,y=e.bytes;if(!y){var k=[p],$=p.byteLength;l&&(k.unshift(l),$+=l.byteLength),y=function(t){var n,r=0;return t.bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach(function(e){n.set(e,r),r+=e.byteLength})),n}({bytes:$,segments:k})}this.sourceUpdater_.appendBuffer({segmentInfo:i,type:s,bytes:y},this.handleAppendError_.bind(this,{segmentInfo:i,type:s,bytes:y}))},r.handleSegmentTimingInfo_=function(e,i,s){if(this.pendingSegment_&&i===this.pendingSegment_.requestId){var l=this.pendingSegment_.segment,p=e+"TimingInfo";l[p]||(l[p]={}),l[p].transmuxerPrependedSeconds=s.prependedContentDuration||0,l[p].transmuxedPresentationStart=s.start.presentation,l[p].transmuxedDecodeStart=s.start.decode,l[p].transmuxedPresentationEnd=s.end.presentation,l[p].transmuxedDecodeEnd=s.end.decode,l[p].baseMediaDecodeTime=s.baseMediaDecodeTime}},r.appendData_=function(e,i){var s=i.type,l=i.data;if(l&&l.byteLength&&("audio"!==s||!this.audioDisabled_)){var p=this.getInitSegmentAndUpdateState_({type:s,initSegment:i.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:p,data:l})}},r.loadSegment_=function(e){var i=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var s=Bi()({},e,{forceTimestampOffset:!0});Bi()(e,i.generateSegmentInfo_(s)),i.isPendingTimestampOffset_=!1,i.updateTransmuxerAndRequestSegment_(e)})},r.updateTransmuxerAndRequestSegment_=function(e){var i=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var s=this.createSimplifiedSegmentObj_(e),k=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_("Requesting "+jl(e)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=M1({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:k,endedTimelineFn:function(){i.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(z){var ae=z.message,pe=z.level,me=z.stream;i.logger_(jl(e)+" logged from transmuxer stream "+me+" as a "+pe+": "+ae)}})},r.trimBackBuffer_=function(e){var i=function(t,r,n){var e=r-xn.BACK_BUFFER_LENGTH;return t.length&&(e=Math.max(e,t.start(0))),Math.min(r-n,e)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)},r.createSimplifiedSegmentObj_=function(e){var i=e.segment,s=e.part,l={resolvedUri:s?s.resolvedUri:i.resolvedUri,byterange:s?s.byterange:i.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},p=e.playlist.segments[e.mediaIndex-1];if(p&&p.timeline===i.timeline&&(p.videoTimingInfo?l.baseStartTime=p.videoTimingInfo.transmuxedDecodeEnd:p.audioTimingInfo&&(l.baseStartTime=p.audioTimingInfo.transmuxedDecodeEnd)),i.key){var y=i.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);l.key=this.segmentKey(i.key),l.key.iv=y}return i.map&&(l.map=this.initSegmentForMap(i.map)),l},r.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},r.saveBandwidthRelatedStats_=function(e,i){this.pendingSegment_.byteLength=i.bytesReceived,e<Dv?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+Dv):(this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime)},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},r.segmentRequestFinished_=function(e,i,s){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,i,s));else if(this.saveTransferStats_(i.stats),this.pendingSegment_&&i.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,i.stats),l.endOfAllRequests=i.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=function(t,r,n){if(!r.length)return t;if(n)return r.slice();for(var e=r[0].pts,i=0;i<t.length&&!(t[i].pts>=e);i++);return t.slice(0,i).concat(r)}(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(l)}},r.setTimeMapping_=function(e){var i=this.syncController_.mappingForTimeline(e);null!==i&&(this.timeMapping_=i)},r.updateMediaSecondsLoaded_=function(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},r.trueSegmentStart_=function(e){var i=e.currentStart,l=e.mediaIndex,p=e.firstVideoFrameTimeForData;if(typeof i<"u")return i;if(!e.useVideoTimingInfo)return e.audioTimingInfo.start;var ae=e.playlist.segments[l-1];return 0===l||!ae||typeof ae.start>"u"||ae.end!==p+e.currentVideoTimestampOffset?p:e.videoTimingInfo.start},r.waitForAppendsToComplete_=function(e){var i=this.getCurrentMediaInfo_(e);if(!i)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var y="main"===this.loaderType_&&i.hasVideo,k=!this.audioDisabled_&&i.hasAudio&&!i.isMuxed;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);y&&e.waitingOnAppends++,k&&e.waitingOnAppends++,y&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),k&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},r.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(e){var i=function(t,r,n){return"main"===t&&r&&n?n.hasAudio||n.hasVideo?r.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!i&&(this.error({message:i,blacklistDuration:1/0}),this.trigger("error"),!0)},r.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var i=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),i=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}},r.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var i=e.videoTimingInfo,s=e.audioTimingInfo,l=e.timingInfo;return this.useDtsForTimestampOffset_?i&&"number"==typeof i.transmuxedDecodeStart?i.transmuxedDecodeStart:s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:l.start:l.start},r.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var i=this.getMediaInfo_(),l="main"===this.loaderType_&&i&&i.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;l&&(e.timingInfo.end="number"==typeof l.end?l.end:l.start+e.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var i=function(t,r){if("hls"!==r)return null;var n=function(t){var r=0;return["video","audio"].forEach(function(n){var e=t[n+"TimingInfo"];if(e){var l,i=e.start,s=e.end;"bigint"==typeof i||"bigint"==typeof s?l=De().BigInt(s)-De().BigInt(i):"number"==typeof i&&"number"==typeof s&&(l=s-i),typeof l<"u"&&l>r&&(r=l)}}),"bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r}({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!n)return null;var e=t.playlist.targetDuration,i=Lx({segmentDuration:n,maxDuration:2*e}),s=Lx({segmentDuration:n,maxDuration:e});return i||s?{severity:i?"warn":"info",message:"Segment with index "+t.mediaIndex+" from playlist "+t.playlist.id+" has a duration of "+n+" when the reported duration is "+t.duration+" and the target duration is "+e+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(e,this.sourceType_);if(i&&("warn"===i.severity?ke.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+jl(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var s=e.segment,l=e.part,p=s.end&&this.currentTime_()-s.end>3*e.playlist.targetDuration,y=l&&l.end&&this.currentTime_()-l.end>3*e.playlist.partTargetDuration;if(p||y)return this.logger_("bad "+(p?"segment":"part")+" "+jl(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+jl(e))},r.recordThroughput_=function(e){if(e.duration<Dv)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+Dv);else{var i=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,l=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(l-i)/++this.throughput.count}},r.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var i=e.segment,s=i.start,l=i.end;if(wx(s)&&wx(l)){id(s,l,this.segmentMetadataTrack_);var p=De().WebKitDataCue||De().VTTCue,y={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:l},$=new p(s,l,JSON.stringify(y));$.value=y,this.segmentMetadataTrack_.addCue($)}}},t}(ke.EventTarget);function is(){}var as,Rx=function(t){return"string"!=typeof t?t:t.replace(/./,function(r){return r.toUpperCase()})},sD=["video","audio"],yT=function(t,r){var n=r[t+"Buffer"];return n&&n.updating||r.queuePending[t]},_T=function a(t,r){if(0!==r.queue.length){var n=0,e=r.queue[n];if("mediaSource"===e.type)return void(!r.updating()&&"closed"!==r.mediaSource.readyState&&(r.queue.shift(),e.action(r),e.doneFn&&e.doneFn(),a("audio",r),a("video",r)));if("mediaSource"!==t&&r.ready()&&"closed"!==r.mediaSource.readyState&&!yT(t,r)){if(e.type!==t){if(n=function(t,r){for(var n=0;n<r.length;n++){var e=r[n];if("mediaSource"===e.type)return null;if(e.type===t)return n}return null}(t,r.queue),null===n)return;e=r.queue[n]}if(r.queue.splice(n,1),r.queuePending[t]=e,e.action(t,r),!e.doneFn)return r.queuePending[t]=null,void a(t,r)}}},Mx=function(t,r){var n=r[t+"Buffer"],e=Rx(t);n&&(n.removeEventListener("updateend",r["on"+e+"UpdateEnd_"]),n.removeEventListener("error",r["on"+e+"Error_"]),r.codecs[t]=null,r[t+"Buffer"]=null)},Oa=function(t,r){return t&&r&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,r)},xi_appendBuffer=function(t,r,n){return function(e,i){var s=i[e+"Buffer"];if(Oa(i.mediaSource,s)){i.logger_("Appending segment "+r.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");try{s.appendBuffer(t)}catch(l){i.logger_("Error with code "+l.code+" "+(22===l.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+r.mediaIndex+" to "+e+"Buffer"),i.queuePending[e]=null,n(l)}}}},xi_remove=function(t,r){return function(n,e){var i=e[n+"Buffer"];if(Oa(e.mediaSource,i)){e.logger_("Removing "+t+" to "+r+" from "+n+"Buffer");try{i.remove(t,r)}catch{e.logger_("Remove "+t+" to "+r+" from "+n+"Buffer failed")}}}},xi_timestampOffset=function(t){return function(r,n){var e=n[r+"Buffer"];Oa(n.mediaSource,e)&&(n.logger_("Setting "+r+"timestampOffset to "+t),e.timestampOffset=t)}},xi_callback=function(t){return function(r,n){t()}},xi_endOfStream=function(t){return function(r){if("open"===r.mediaSource.readyState){r.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{r.mediaSource.endOfStream(t)}catch(n){ke.log.warn("Failed to call media source endOfStream",n)}}}},xi_duration=function(t){return function(r){r.logger_("Setting mediaSource duration to "+t);try{r.mediaSource.duration=t}catch(n){ke.log.warn("Failed to set media source duration",n)}}},xi_addSourceBuffer=function(t,r){return function(n){var e=Rx(t),i=mo(r);n.logger_("Adding "+t+"Buffer with codec "+r+" to mediaSource");var s=n.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",n["on"+e+"UpdateEnd_"]),s.addEventListener("error",n["on"+e+"Error_"]),n.codecs[t]=r,n[t+"Buffer"]=s}},xi_removeSourceBuffer=function(t){return function(r){var n=r[t+"Buffer"];if(Mx(t,r),Oa(r.mediaSource,n)){r.logger_("Removing "+t+"Buffer with codec "+r.codecs[t]+" from mediaSource");try{r.mediaSource.removeSourceBuffer(n)}catch(e){ke.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},xi_changeType=function(t){return function(r,n){var e=n[r+"Buffer"],i=mo(t);Oa(n.mediaSource,e)&&n.codecs[r]!==t&&(n.logger_("changing "+r+"Buffer codec from "+n.codecs[r]+" to "+t),e.changeType(i),n.codecs[r]=t)}},Si=function(t){var r=t.type,n=t.sourceUpdater;n.queue.push({type:r,action:t.action,doneFn:t.doneFn,name:t.name}),_T(r,n)},kx=function(t,r){return function(n){if(r.queuePending[t]){var e=r.queuePending[t].doneFn;r.queuePending[t]=null,e&&e(r[t+"Error_"])}_T(t,r)}},Fx=function(a){function t(n){var e;return(e=a.call(this)||this).mediaSource=n,e.sourceopenListener_=function(){return _T("mediaSource",zt()(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=ua("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=kx("video",zt()(e)),e.onAudioUpdateEnd_=kx("audio",zt()(e)),e.onVideoError_=function(i){e.videoError_=i},e.onAudioError_=function(i){e.audioError_=i},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}ht()(t,a);var r=t.prototype;return r.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},r.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},r.hasInitializedAnyEme=function(){return this.initializedEme_},r.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},r.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},r.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},r.addSourceBuffer=function(e,i){Si({type:"mediaSource",sourceUpdater:this,action:xi_addSourceBuffer(e,i),name:"addSourceBuffer"})},r.abort=function(e){Si({type:e,sourceUpdater:this,action:function(t,r){if("open"===r.mediaSource.readyState){var n=r[t+"Buffer"];if(Oa(r.mediaSource,n)){r.logger_("calling abort on "+t+"Buffer");try{n.abort()}catch(e){ke.log.warn("Failed to abort on "+t+"Buffer",e)}}}},name:"abort"})},r.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Si({type:"mediaSource",sourceUpdater:this,action:xi_removeSourceBuffer(e),name:"removeSourceBuffer"}):ke.log.error("removeSourceBuffer is not supported!")},r.canRemoveSourceBuffer=function(){return!ke.browser.IE_VERSION&&!ke.browser.IS_FIREFOX&&De().MediaSource&&De().MediaSource.prototype&&"function"==typeof De().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return De().SourceBuffer&&De().SourceBuffer.prototype&&"function"==typeof De().SourceBuffer.prototype.changeType},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(e,i){this.canChangeType()?Si({type:e,sourceUpdater:this,action:xi_changeType(i),name:"changeType"}):ke.log.error("changeType is not supported!")},r.addOrChangeSourceBuffers=function(e){var i=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(s){var l=e[s];if(!i.hasCreatedSourceBuffers())return i.addSourceBuffer(s,l);i.canChangeType()&&i.changeType(s,l)})},r.appendBuffer=function(e,i){var s=this,l=e.segmentInfo,p=e.type,y=e.bytes;if(this.processedAppend_=!0,"audio"===p&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,i]),void this.logger_("delayed audio append of "+y.length+" until video append");if(Si({type:p,sourceUpdater:this,action:xi_appendBuffer(y,l||{mediaIndex:-1},i),doneFn:i,name:"appendBuffer"}),"video"===p){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var $=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+$.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,$.forEach(function(z){s.appendBuffer.apply(s,z)})}},r.audioBuffered=function(){return Oa(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ke.createTimeRange()},r.videoBuffered=function(){return Oa(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ke.createTimeRange()},r.buffered=function(){var e=Oa(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=Oa(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!e?this.audioBuffered():e&&!i?this.videoBuffered():function(t,r){var n=null,e=null,i=0,s=[],l=[];if(!(t&&t.length&&r&&r.length))return ke.createTimeRange();for(var p=t.length;p--;)s.push({time:t.start(p),type:"start"}),s.push({time:t.end(p),type:"end"});for(p=r.length;p--;)s.push({time:r.start(p),type:"start"}),s.push({time:r.end(p),type:"end"});for(s.sort(function(y,k){return y.time-k.time}),p=0;p<s.length;p++)"start"===s[p].type?2==++i&&(n=s[p].time):"end"===s[p].type&&1==--i&&(e=s[p].time),null!==n&&null!==e&&(l.push([n,e]),n=null,e=null);return ke.createTimeRanges(l)}(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(e,i){void 0===i&&(i=is),Si({type:"mediaSource",sourceUpdater:this,action:xi_duration(e),name:"duration",doneFn:i})},r.endOfStream=function(e,i){void 0===e&&(e=null),void 0===i&&(i=is),"string"!=typeof e&&(e=void 0),Si({type:"mediaSource",sourceUpdater:this,action:xi_endOfStream(e),name:"endOfStream",doneFn:i})},r.removeAudio=function(e,i,s){void 0===s&&(s=is),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Si({type:"audio",sourceUpdater:this,action:xi_remove(e,i),doneFn:s,name:"remove"}):s()},r.removeVideo=function(e,i,s){void 0===s&&(s=is),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Si({type:"video",sourceUpdater:this,action:xi_remove(e,i),doneFn:s,name:"remove"}):s()},r.updating=function(){return!(!yT("audio",this)&&!yT("video",this))},r.audioTimestampOffset=function(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Si({type:"audio",sourceUpdater:this,action:xi_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},r.videoTimestampOffset=function(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Si({type:"video",sourceUpdater:this,action:xi_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},r.audioQueueCallback=function(e){this.audioBuffer&&Si({type:"audio",sourceUpdater:this,action:xi_callback(e),name:"callback"})},r.videoQueueCallback=function(e){this.videoBuffer&&Si({type:"video",sourceUpdater:this,action:xi_callback(e),name:"callback"})},r.dispose=function(){var e=this;this.trigger("dispose"),sD.forEach(function(i){e.abort(i),e.canRemoveSourceBuffer()?e.removeSourceBuffer(i):e[i+"QueueCallback"](function(){return Mx(i,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(ke.EventTarget),Ux=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},Bx=new Uint8Array("\n\n".split("").map(function(a){return a.charCodeAt(0)})),uD=function(a){function t(n,e){var i;return void 0===e&&(e={}),(i=a.call(this,n,e)||this).mediaSource_=null,i.subtitlesTrack_=null,i.loaderType_="subtitle",i.featuresNativeTextTracks_=n.featuresNativeTextTracks,i.shouldSaveSegmentTimingInfo_=!1,i}ht()(t,a);var r=t.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return ke.createTimeRanges();var e=this.subtitlesTrack_.cues;return ke.createTimeRanges([[e[0].startTime,e[e.length-1].startTime]])},r.initSegmentForMap=function(e,i){if(void 0===i&&(i=!1),!e)return null;var s=bv(e),l=this.initSegments_[s];if(i&&!l&&e.bytes){var y=new Uint8Array(Bx.byteLength+e.bytes.byteLength);y.set(e.bytes),y.set(Bx,e.bytes.byteLength),this.initSegments_[s]=l={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:y}}return l||e},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(e){return typeof e>"u"||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},r.remove=function(e,i){id(e,i,this.subtitlesTrack_)},r.fillBuffer_=function(){var e=this,i=this.chooseNextRequest_();if(i){if(null===this.syncController_.timestampOffsetForTimeline(i.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(i)}},r.timestampOffsetForSegment_=function(){return null},r.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},r.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},r.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(e,i,s){var l=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(i.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var p=this.pendingSegment_;this.saveBandwidthRelatedStats_(p.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");var y=p.segment;if(y.map&&(y.map.bytes=i.map.bytes),p.bytes=i.bytes,"function"!=typeof De().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var k,$=function(){l.subtitlesTrack_.tech_.off("vttjsloaded",k),l.stopForError({message:"Error loading vtt.js"})};return k=function(){l.subtitlesTrack_.tech_.off("vttjserror",$),l.segmentRequestFinished_(e,i,s)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",k),void this.subtitlesTrack_.tech_.one("vttjserror",$)}y.requested=!0;try{this.parseVTTCues_(p)}catch(z){return void this.stopForError({message:z.message})}if(this.updateTimeMapping_(p,this.syncController_.timelines[p.timeline],this.playlist_),p.timingInfo=p.cues.length?{start:p.cues[0].startTime,end:p.cues[p.cues.length-1].endTime}:{start:p.startOfSegment,end:p.startOfSegment+p.duration},p.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");p.byteLength=p.bytes.byteLength,this.mediaSecondsLoaded+=y.duration,p.cues.forEach(function(z){l.subtitlesTrack_.addCue(l.featuresNativeTextTracks_?new(De().VTTCue)(z.startTime,z.endTime,z.text):z)}),function(t){var r=t.cues;if(r)for(var n=0;n<r.length;n++){for(var e=[],i=0,s=0;s<r.length;s++)r[n].startTime===r[s].startTime&&r[n].endTime===r[s].endTime&&r[n].text===r[s].text&&++i>1&&e.push(r[s]);e.length&&e.forEach(function(l){return t.removeCue(l)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(e){var i,s=!1;"function"==typeof De().TextDecoder?i=new(De().TextDecoder)("utf8"):(i=De().WebVTT.StringDecoder(),s=!0);var l=new(De().WebVTT.Parser)(De(),De().vttjs,i);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},l.oncue=e.cues.push.bind(e.cues),l.ontimestampmap=function(k){e.timestampmap=k},l.onparsingerror=function(k){ke.log.warn("Error encountered when parsing cues: "+k.message)},e.segment.map){var p=e.segment.map.bytes;s&&(p=Ux(p)),l.parse(p)}var y=e.bytes;s&&(y=Ux(y)),l.parse(y),l.flush()},r.updateTimeMapping_=function(e,i,s){var l=e.segment;if(i){if(!e.cues.length)return void(l.empty=!0);var p=e.timestampmap,y=p.MPEGTS/Gp.ONE_SECOND_IN_TS-p.LOCAL+i.mapping;e.cues.forEach(function(z){z.startTime+=y,z.endTime+=y}),s.syncInfo||(s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-l.duration)})}},t}(mT),lD=function(t,r){for(var n=t.cues,e=0;e<n.length;e++){var i=n[e];if(r>=i.adStartTime&&r<=i.adEndTime)return i}return null},Nx=[{name:"VOD",run:function(t,r,n,e,i){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(t,r,n,e,i){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,l=null,p=rT(r);i=i||0;for(var y=0;y<p.length;y++){var $=p[r.endList||0===i?y:p.length-(y+1)],z=$.segment,ae=t.timelineToDatetimeMappings[z.timeline];if(ae&&z.dateTimeObject){var me=z.dateTimeObject.getTime()/1e3+ae;if(z.parts&&"number"==typeof $.partIndex)for(var Ee=0;Ee<$.partIndex;Ee++)me+=z.parts[Ee].duration;var We=Math.abs(i-me);if(null!==l&&(0===We||l<We))break;l=We,s={time:me,segmentIndex:$.segmentIndex,partIndex:$.partIndex}}}return s}},{name:"Segment",run:function(t,r,n,e,i){var s=null,l=null;i=i||0;for(var p=rT(r),y=0;y<p.length;y++){var $=p[r.endList||0===i?y:p.length-(y+1)],z=$.segment,ae=$.part&&$.part.start||z&&z.start;if(z.timeline===e&&typeof ae<"u"){var pe=Math.abs(i-ae);if(null!==l&&l<pe)break;(!s||null===l||l>=pe)&&(l=pe,s={time:ae,segmentIndex:$.segmentIndex,partIndex:$.partIndex})}}return s}},{name:"Discontinuity",run:function(t,r,n,e,i){var s=null;if(i=i||0,r.discontinuityStarts&&r.discontinuityStarts.length)for(var l=null,p=0;p<r.discontinuityStarts.length;p++){var y=r.discontinuityStarts[p],$=t.discontinuities[r.discontinuitySequence+p+1];if($){var z=Math.abs(i-$.time);if(null!==l&&l<z)break;(!s||null===l||l>=z)&&(l=z,s={time:$.time,segmentIndex:y,partIndex:null})}}return s}},{name:"Playlist",run:function(t,r,n,e,i){return r.syncInfo?{time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null}:null}}],dD=function(a){function t(n){var e;return(e=a.call(this)||this).timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=ua("SyncController"),e}ht()(t,a);var r=t.prototype;return r.getSyncPoint=function(e,i,s,l){var p=this.runStrategies_(e,i,s,l);return p.length?this.selectSyncPoint_(p,{key:"time",value:l}):null},r.getExpiredTime=function(e,i){if(!e||!e.segments)return null;var s=this.runStrategies_(e,i,e.discontinuitySequence,0);if(!s.length)return null;var l=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return l.segmentIndex>0&&(l.time*=-1),Math.abs(l.time+ed({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:l.segmentIndex,endIndex:0}))},r.runStrategies_=function(e,i,s,l){for(var p=[],y=0;y<Nx.length;y++){var k=Nx[y],$=k.run(this,e,i,s,l);$&&($.strategy=k.name,p.push({strategy:k.name,syncPoint:$}))}return p},r.selectSyncPoint_=function(e,i){for(var s=e[0].syncPoint,l=Math.abs(e[0].syncPoint[i.key]-i.value),p=e[0].strategy,y=1;y<e.length;y++){var k=Math.abs(e[y].syncPoint[i.key]-i.value);k<l&&(l=k,s=e[y].syncPoint,p=e[y].strategy)}return this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy ["+p+"]: [time:"+s.time+", segmentIndex:"+s.segmentIndex+("number"==typeof s.partIndex?",partIndex:"+s.partIndex:"")+"]"),s},r.saveExpiredSegmentInfo=function(e,i){var s=i.mediaSequence-e.mediaSequence;if(s>86400)ke.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");else for(var l=s-1;l>=0;l--){var p=e.segments[l];if(p&&typeof p.start<"u"){i.syncInfo={mediaSequence:e.mediaSequence+l,time:p.start},this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+", mediaSequence: "+i.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},r.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var i=e.segments[0],s=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-s}},r.saveSegmentTimingInfo=function(e){var i=e.segmentInfo,s=e.shouldSaveTimelineMapping,l=this.calculateSegmentTimeMapping_(i,i.timingInfo,s),p=i.segment;l&&(this.saveDiscontinuitySyncInfo_(i),i.playlist.syncInfo||(i.playlist.syncInfo={mediaSequence:i.playlist.mediaSequence+i.mediaIndex,time:p.start}));var y=p.dateTimeObject;p.discontinuity&&s&&y&&(this.timelineToDatetimeMappings[p.timeline]=-y.getTime()/1e3)},r.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time},r.mappingForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping},r.calculateSegmentTimeMapping_=function(e,i,s){var k,$,l=e.segment,p=e.part,y=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)y={time:e.startOfSegment,mapping:e.startOfSegment-i.start},s&&(this.timelines[e.timeline]=y,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+y.time+"] [mapping: "+y.mapping+"]")),k=e.startOfSegment,$=i.end+y.mapping;else{if(!y)return!1;k=i.start+y.mapping,$=i.end+y.mapping}return p&&(p.start=k,p.end=$),(!l.start||k<l.start)&&(l.start=k),l.end=$,!0},r.saveDiscontinuitySyncInfo_=function(e){var i=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(var l=0;l<i.discontinuityStarts.length;l++){var p=i.discontinuityStarts[l],y=i.discontinuitySequence+l+1,k=p-e.mediaIndex,$=Math.abs(k);if(!this.discontinuities[y]||this.discontinuities[y].accuracy>$){var z;z=k<0?s.start-ed({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex,endIndex:p}):s.end+ed({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:e.mediaIndex+1,endIndex:p}),this.discontinuities[y]={time:z,accuracy:$}}}},r.dispose=function(){this.trigger("dispose"),this.off()},t}(ke.EventTarget),hD=function(a){function t(){var n;return(n=a.call(this)||this).pendingTimelineChanges_={},n.lastTimelineChanges_={},n}ht()(t,a);var r=t.prototype;return r.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(e){var i=e.type,s=e.from,l=e.to;return"number"==typeof s&&"number"==typeof l&&(this.pendingTimelineChanges_[i]={type:i,from:s,to:l},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[i]},r.lastTimelineChange=function(e){var i=e.type,s=e.from,l=e.to;return"number"==typeof s&&"number"==typeof l&&(this.lastTimelineChanges_[i]={type:i,from:s,to:l},delete this.pendingTimelineChanges_[i],this.trigger("timelinechange")),this.lastTimelineChanges_[i]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(ke.EventTarget),pD=dx(hx(function(){var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t(Ye,ze,it){return Ye(it={path:ze,exports:{},require:function(qe,at){return function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},it.exports),it.exports}var n=t(function(Ye){function ze(Xe,qe){for(var at=0;at<qe.length;at++){var $e=qe[at];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Xe,$e.key,$e)}}Ye.exports=function it(Xe,qe,at){return qe&&ze(Xe.prototype,qe),at&&ze(Xe,at),Xe},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0}),e=t(function(Ye){function ze(it,Xe){return Ye.exports=ze=Object.setPrototypeOf||function(at,$e){return at.__proto__=$e,at},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0,ze(it,Xe)}Ye.exports=ze,Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0}),i=t(function(Ye){Ye.exports=function ze(it,Xe){it.prototype=Object.create(Xe.prototype),it.prototype.constructor=it,e(it,Xe)},Ye.exports.default=Ye.exports,Ye.exports.__esModule=!0}),s=function(){function Ye(){this.listeners={}}var ze=Ye.prototype;return ze.on=function(Xe,qe){this.listeners[Xe]||(this.listeners[Xe]=[]),this.listeners[Xe].push(qe)},ze.off=function(Xe,qe){if(!this.listeners[Xe])return!1;var at=this.listeners[Xe].indexOf(qe);return this.listeners[Xe]=this.listeners[Xe].slice(0),this.listeners[Xe].splice(at,1),at>-1},ze.trigger=function(Xe){var qe=this.listeners[Xe];if(qe)if(2===arguments.length)for(var at=qe.length,$e=0;$e<at;++$e)qe[$e].call(this,arguments[1]);else for(var Lt=Array.prototype.slice.call(arguments,1),Tt=qe.length,Ft=0;Ft<Tt;++Ft)qe[Ft].apply(this,Lt)},ze.dispose=function(){this.listeners={}},ze.pipe=function(Xe){this.on("data",function(qe){Xe.push(qe)})},Ye}(),y=null,k=function(){function Ye(it){y||(y=function(){var $e,Lt,Tt,er,cr,Mr,dn,Tr,ze=[[[],[],[],[],[]],[[],[],[],[],[]]],it=ze[0],Xe=ze[1],qe=it[4],at=Xe[4],Ft=[],Sr=[];for($e=0;$e<256;$e++)Sr[(Ft[$e]=$e<<1^283*($e>>7))^$e]=$e;for(Lt=Tt=0;!qe[Lt];Lt^=er||1,Tt=Sr[Tt]||1)for(qe[Lt]=Mr=(Mr=Tt^Tt<<1^Tt<<2^Tt<<3^Tt<<4)>>8^255&Mr^99,at[Mr]=Lt,Tr=16843009*Ft[cr=Ft[er=Ft[Lt]]]^65537*cr^257*er^16843008*Lt,dn=257*Ft[Mr]^16843008*Mr,$e=0;$e<4;$e++)it[$e][Lt]=dn=dn<<24^dn>>>8,Xe[$e][Mr]=Tr=Tr<<24^Tr>>>8;for($e=0;$e<5;$e++)it[$e]=it[$e].slice(0),Xe[$e]=Xe[$e].slice(0);return ze}()),this._tables=[[y[0][0].slice(),y[0][1].slice(),y[0][2].slice(),y[0][3].slice(),y[0][4].slice()],[y[1][0].slice(),y[1][1].slice(),y[1][2].slice(),y[1][3].slice(),y[1][4].slice()]];var Xe,qe,at,$e=this._tables[0][4],Lt=this._tables[1],Tt=it.length,Ft=1;if(4!==Tt&&6!==Tt&&8!==Tt)throw new Error("Invalid aes key size");var Sr=it.slice(0),er=[];for(this._key=[Sr,er],Xe=Tt;Xe<4*Tt+28;Xe++)at=Sr[Xe-1],(Xe%Tt==0||8===Tt&&Xe%Tt==4)&&(at=$e[at>>>24]<<24^$e[at>>16&255]<<16^$e[at>>8&255]<<8^$e[255&at],Xe%Tt==0&&(at=at<<8^at>>>24^Ft<<24,Ft=Ft<<1^283*(Ft>>7))),Sr[Xe]=Sr[Xe-Tt]^at;for(qe=0;Xe;qe++,Xe--)at=Sr[3&qe?Xe:Xe-4],er[qe]=Xe<=4||qe<4?at:Lt[0][$e[at>>>24]]^Lt[1][$e[at>>16&255]]^Lt[2][$e[at>>8&255]]^Lt[3][$e[255&at]]}return Ye.prototype.decrypt=function(Xe,qe,at,$e,Lt,Tt){var Mr,dn,Tr,Sn,Ft=this._key[1],Sr=Xe^Ft[0],er=$e^Ft[1],cr=at^Ft[2],Pr=qe^Ft[3],Cs=Ft.length/4-2,Wi=4,Ai=this._tables[1],Ia=Ai[0],Ci=Ai[1],la=Ai[2],Hr=Ai[3],pr=Ai[4];for(Sn=0;Sn<Cs;Sn++)Mr=Ia[Sr>>>24]^Ci[er>>16&255]^la[cr>>8&255]^Hr[255&Pr]^Ft[Wi],dn=Ia[er>>>24]^Ci[cr>>16&255]^la[Pr>>8&255]^Hr[255&Sr]^Ft[Wi+1],Tr=Ia[cr>>>24]^Ci[Pr>>16&255]^la[Sr>>8&255]^Hr[255&er]^Ft[Wi+2],Pr=Ia[Pr>>>24]^Ci[Sr>>16&255]^la[er>>8&255]^Hr[255&cr]^Ft[Wi+3],Wi+=4,Sr=Mr,er=dn,cr=Tr;for(Sn=0;Sn<4;Sn++)Lt[(3&-Sn)+Tt]=pr[Sr>>>24]<<24^pr[er>>16&255]<<16^pr[cr>>8&255]<<8^pr[255&Pr]^Ft[Wi++],Mr=Sr,Sr=er,er=cr,cr=Pr,Pr=Mr},Ye}(),$=function(Ye){function ze(){var Xe;return(Xe=Ye.call(this,s)||this).jobs=[],Xe.delay=1,Xe.timeout_=null,Xe}i(ze,Ye);var it=ze.prototype;return it.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},it.push=function(qe){this.jobs.push(qe),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},ze}(s),z=function(ze){return ze<<24|(65280&ze)<<8|(16711680&ze)>>8|ze>>>24},pe=function(){function Ye(it,Xe,qe,at){var $e=Ye.STEP,Lt=new Int32Array(it.buffer),Tt=new Uint8Array(it.byteLength),Ft=0;for(this.asyncStream_=new $,this.asyncStream_.push(this.decryptChunk_(Lt.subarray(Ft,Ft+$e),Xe,qe,Tt)),Ft=$e;Ft<Lt.length;Ft+=$e)qe=new Uint32Array([z(Lt[Ft-4]),z(Lt[Ft-3]),z(Lt[Ft-2]),z(Lt[Ft-1])]),this.asyncStream_.push(this.decryptChunk_(Lt.subarray(Ft,Ft+$e),Xe,qe,Tt));this.asyncStream_.push(function(){at(null,function l(Ye){return Ye.subarray(0,Ye.byteLength-Ye[Ye.byteLength-1])}(Tt))})}return Ye.prototype.decryptChunk_=function(Xe,qe,at,$e){return function(){var Lt=function(ze,it,Xe){var Tt,Ft,Sr,er,cr,Pr,Mr,dn,Tr,qe=new Int32Array(ze.buffer,ze.byteOffset,ze.byteLength>>2),at=new k(Array.prototype.slice.call(it)),$e=new Uint8Array(ze.byteLength),Lt=new Int32Array($e.buffer);for(Tt=Xe[0],Ft=Xe[1],Sr=Xe[2],er=Xe[3],Tr=0;Tr<qe.length;Tr+=4)cr=z(qe[Tr]),Pr=z(qe[Tr+1]),Mr=z(qe[Tr+2]),dn=z(qe[Tr+3]),at.decrypt(cr,Pr,Mr,dn,Lt,Tr),Lt[Tr]=z(Lt[Tr]^Tt),Lt[Tr+1]=z(Lt[Tr+1]^Ft),Lt[Tr+2]=z(Lt[Tr+2]^Sr),Lt[Tr+3]=z(Lt[Tr+3]^er),Tt=cr,Ft=Pr,Sr=Mr,er=dn;return $e}(Xe,qe,at);$e.set(Lt,Xe.byteOffset)}},n(Ye,null,[{key:"STEP",get:function(){return 32e3}}]),Ye}(),et=(typeof window<"u"?window:typeof a<"u"?a:typeof self<"u"?self:{}).BigInt||Number;et("0x1"),et("0x100"),et("0x10000"),et("0x1000000"),et("0x100000000"),et("0x10000000000"),et("0x1000000000000"),et("0x100000000000000"),et("0x10000000000000000");self.onmessage=function(Ye){var ze=Ye.data,it=new Uint8Array(ze.encrypted.bytes,ze.encrypted.byteOffset,ze.encrypted.byteLength),Xe=new Uint32Array(ze.key.bytes,ze.key.byteOffset,ze.key.byteLength/4),qe=new Uint32Array(ze.iv.bytes,ze.iv.byteOffset,ze.iv.byteLength/4);new pe(it,Xe,qe,function(at,$e){self.postMessage(function(ze){var it={};return Object.keys(ze).forEach(function(Xe){var qe=ze[Xe];it[Xe]=function(ze){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(ze):ze&&ze.buffer instanceof ArrayBuffer}(qe)?{bytes:qe.buffer,byteOffset:qe.byteOffset,byteLength:qe.byteLength}:qe}),it}({source:ze.source,decrypted:$e}),[$e.buffer])})}})),vD=cx(pD),gD=function(t){var r=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},Pv=function(t,r){t.abort(),t.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},TT=function(t,r){r.activePlaylistLoader=t,t.load()},wv={AUDIO:function(t,r){return function(){var e=r.mediaTypes[t],i=r.blacklistCurrentPlaylist;Pv(r.segmentLoaders[t],e);var s=e.activeTrack(),l=e.activeGroup(),p=(l.filter(function($){return $.default})[0]||l[0]).id,y=e.tracks[p];if(s!==y){for(var k in ke.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[k].enabled=e.tracks[k]===y;e.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,r){return function(){var n=r.segmentLoaders[t],e=r.mediaTypes[t];ke.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Pv(n,e);var i=e.activeTrack();i&&(i.mode="disabled"),e.onTrackChanged()}}},jx={AUDIO:function(t,r,n){if(r){var e=n.tech,i=n.requestOptions,s=n.segmentLoaders[t];r.on("loadedmetadata",function(){var l=r.media();s.playlist(l,i),(!e.paused()||l.endList&&"none"!==e.preload())&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),i),e.paused()||s.load()}),r.on("error",wv[t](t,n))}},SUBTITLES:function(t,r,n){var e=n.tech,i=n.requestOptions,s=n.segmentLoaders[t],l=n.mediaTypes[t];r.on("loadedmetadata",function(){var p=r.media();s.playlist(p,i),s.track(l.activeTrack()),(!e.paused()||p.endList&&"none"!==e.preload())&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),i),e.paused()||s.load()}),r.on("error",wv[t](t,n))}},TD={AUDIO:function(t,r){var n=r.vhs,e=r.sourceType,i=r.segmentLoaders[t],s=r.requestOptions,l=r.master.mediaGroups,p=r.mediaTypes[t],y=p.groups,k=p.tracks,$=p.logger_,z=r.masterPlaylistLoader,ae=td(z.master);for(var pe in(!l[t]||0===Object.keys(l[t]).length)&&(l[t]={main:{default:{default:!0}}},ae&&(l[t].main.default.playlists=z.master.playlists)),l[t])for(var me in y[pe]||(y[pe]=[]),l[t][pe]){var Ee=l[t][pe][me],We=void 0;if(ae?($("AUDIO group '"+pe+"' label '"+me+"' is a master playlist"),Ee.isMasterPlaylist=!0,We=null):We="vhs-json"===e&&Ee.playlists?new Bl(Ee.playlists[0],n,s):Ee.resolvedUri?new Bl(Ee.resolvedUri,n,s):Ee.playlists&&"dash"===e?new dT(Ee.playlists[0],n,s,z):null,Ee=ke.mergeOptions({id:me,playlistLoader:We},Ee),jx[t](t,Ee.playlistLoader,r),y[pe].push(Ee),typeof k[me]>"u"){var et=new ke.AudioTrack({id:me,kind:gD(Ee),enabled:!1,language:Ee.language,default:Ee.default,label:me});k[me]=et}}i.on("error",wv[t](t,r))},SUBTITLES:function(t,r){var n=r.tech,e=r.vhs,i=r.sourceType,s=r.segmentLoaders[t],l=r.requestOptions,p=r.master.mediaGroups,y=r.mediaTypes[t],k=y.groups,$=y.tracks,z=r.masterPlaylistLoader;for(var ae in p[t])for(var pe in k[ae]||(k[ae]=[]),p[t][ae])if(!p[t][ae][pe].forced){var me=p[t][ae][pe],Ee=void 0;if("hls"===i)Ee=new Bl(me.resolvedUri,e,l);else if("dash"===i){if(!me.playlists.filter(function(pt){return pt.excludeUntil!==1/0}).length)return;Ee=new dT(me.playlists[0],e,l,z)}else"vhs-json"===i&&(Ee=new Bl(me.playlists?me.playlists[0]:me.resolvedUri,e,l));if(me=ke.mergeOptions({id:pe,playlistLoader:Ee},me),jx[t](t,me.playlistLoader,r),k[ae].push(me),typeof $[pe]>"u"){var et=n.addRemoteTextTrack({id:pe,kind:"subtitles",default:me.default&&me.autoselect,language:me.language,label:pe},!1).track;$[pe]=et}}s.on("error",wv[t](t,r))},"CLOSED-CAPTIONS":function(t,r){var n=r.tech,e=r.master.mediaGroups,i=r.mediaTypes[t],s=i.groups,l=i.tracks;for(var p in e[t])for(var y in s[p]||(s[p]=[]),e[t][p]){var k=e[t][p][y];if(/^(?:CC|SERVICE)/.test(k.instreamId)){var $=n.options_.vhs&&n.options_.vhs.captionServices||{},z={label:y,language:k.language,instreamId:k.instreamId,default:k.default&&k.autoselect};if($[z.instreamId]&&(z=ke.mergeOptions(z,$[z.instreamId])),void 0===z.default&&delete z.default,s[p].push(ke.mergeOptions({id:y},k)),typeof l[y]>"u"){var ae=n.addRemoteTextTrack({id:z.instreamId,kind:"captions",default:z.default,language:z.language,label:z.label},!1).track;l[y]=ae}}}}},ED=function a(t,r){for(var n=0;n<t.length;n++)if(aT(r,t[n])||t[n].playlists&&a(t[n].playlists,r))return!0;return!1},xD={AUDIO:function(t,r){return function(){var n=r.mediaTypes[t].tracks;for(var e in n)if(n[e].enabled)return n[e];return null}},SUBTITLES:function(t,r){return function(){var n=r.mediaTypes[t].tracks;for(var e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}}},PD=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],wD=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},ID=function(a){function t(n){var e;e=a.call(this)||this;var i=n.src,s=n.handleManifestRedirects,l=n.withCredentials,p=n.tech,y=n.bandwidth,k=n.externVhs,$=n.useCueTags,z=n.blacklistDuration,ae=n.enableLowInitialPlaylist,pe=n.sourceType,me=n.cacheEncryptionKeys,Ee=n.experimentalBufferBasedABR,We=n.experimentalLeastPixelDiffSelector,et=n.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var pt=n.maxPlaylistRetries;(null===pt||typeof pt>"u")&&(pt=1/0),as=k,e.experimentalBufferBasedABR=Boolean(Ee),e.experimentalLeastPixelDiffSelector=Boolean(We),e.withCredentials=l,e.tech_=p,e.vhs_=p.vhs,e.sourceType_=pe,e.useCueTags_=$,e.blacklistDuration=z,e.maxPlaylistRetries=pt,e.enableLowInitialPlaylist=ae,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:l,handleManifestRedirects:s,maxPlaylistRetries:pt,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(r){t[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:is,activeTrack:is,getActiveGroup:is,onGroupChanged:is,onTrackChanged:is,lastTrack_:null,logger_:ua("MediaGroups["+r+"]")}}),t}(),e.mediaSource=new(De().MediaSource),e.handleDurationChange_=e.handleDurationChange_.bind(zt()(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(zt()(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(zt()(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=ke.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new dD(n),e.segmentMetadataTrack_=p.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new vD,e.sourceUpdater_=new Fx(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new hD;var Ye={vhs:e.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:et,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:y,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:me,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};e.masterPlaylistLoader_="dash"===e.sourceType_?new dT(i,e.vhs_,e.requestOptions_):new Bl(i,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new mT(ke.mergeOptions(Ye,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),n),e.audioSegmentLoader_=new mT(ke.mergeOptions(Ye,{loaderType:"audio"}),n),e.subtitleSegmentLoader_=new uD(ke.mergeOptions(Ye,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks}),n),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),PD.forEach(function(it){e[it+"_"]=wD.bind(zt()(e),it)}),e.logger_=ua("MPC"),e.triggeredFmp4Usage=!1,"none"===e.tech_.preload()?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var ze="none"===e.tech_.preload()?"play":"loadstart";return e.tech_.one(ze,function(){var it=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-it,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}ht()(t,a);var r=t.prototype;return r.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},r.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},r.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return-1===e||-1===i?-1:e+i},r.timeToLoadedData_=function(){return this.timeToLoadedData__},r.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},r.switchMedia_=function(e,i,s){var l=this.media(),p=l&&(l.id||l.uri),y=e.id||e.uri;p&&p!==y&&(this.logger_("switch media "+p+" -> "+y+" from "+i),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+i})),this.masterPlaylistLoader_.media(e,s)},r.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=De().setInterval(function(){return e.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(De().clearInterval(this.abrTimer_),this.abrTimer_=null)},r.getAudioTrackPlaylists_=function(){var e=this.master(),i=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return i;var p,s=e.mediaGroups.AUDIO,l=Object.keys(s);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)p=this.mediaTypes_.AUDIO.activeTrack();else{var y=s.main||l.length&&s[l[0]];for(var k in y)if(y[k].default){p={label:k};break}}if(!p)return i;var $=[];for(var z in s)if(s[z][p.label]){var ae=s[z][p.label];if(ae.playlists&&ae.playlists.length)$.push.apply($,ae.playlists);else if(ae.uri)$.push(ae);else if(e.playlists.length)for(var pe=0;pe<e.playlists.length;pe++){var me=e.playlists[pe];me.attributes&&me.attributes.AUDIO&&me.attributes.AUDIO===z&&$.push(me)}}return $.length?$:i},r.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var i=e.masterPlaylistLoader_.media(),s=1.5*i.targetDuration*1e3;e.requestOptions_.timeout=iT(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:s,i.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.mainSegmentLoader_.load()),function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(pe){TD[pe](pe,t)});var r=t.mediaTypes,n=t.masterPlaylistLoader,e=t.tech,i=t.vhs,s=t.segmentLoaders,l=s.AUDIO,p=s.main;["AUDIO","SUBTITLES"].forEach(function(pe){r[pe].activeGroup=function(t,r){return function(n){var i=r.mediaTypes[t].groups,s=r.masterPlaylistLoader.media();if(!s)return null;var l=null;s.attributes[t]&&(l=i[s.attributes[t]]);var p=Object.keys(i);if(!l)if("AUDIO"===t&&p.length>1&&td(r.master))for(var y=0;y<p.length;y++){var k=i[p[y]];if(ED(k,s)){l=k;break}}else i.main?l=i.main:1===p.length&&(l=i[p[0]]);return typeof n>"u"?l:null!==n&&l&&l.filter(function($){return $.id===n.id})[0]||null}}(pe,t),r[pe].activeTrack=xD[pe](pe,t),r[pe].onGroupChanged=function(t,r){return function(){var n=r.segmentLoaders,e=n[t],i=n.main,s=r.mediaTypes[t],l=s.activeTrack(),p=s.getActiveGroup(),y=s.activePlaylistLoader,k=s.lastGroup_;if((!p||!k||p.id!==k.id)&&(s.lastGroup_=p,s.lastTrack_=l,Pv(e,s),p&&!p.isMasterPlaylist)){if(!p.playlistLoader)return void(y&&i.resetEverything());e.resyncLoader(),TT(p.playlistLoader,s)}}}(pe,t),r[pe].onGroupChanging=function(t,r){return function(){var n=r.segmentLoaders[t];r.mediaTypes[t].lastGroup_=null,n.abort(),n.pause()}}(pe,t),r[pe].onTrackChanged=function(t,r){return function(){var n=r.masterPlaylistLoader,e=r.segmentLoaders,i=e[t],s=e.main,l=r.mediaTypes[t],p=l.activeTrack(),y=l.getActiveGroup(),k=l.activePlaylistLoader,$=l.lastTrack_;if((!$||!p||$.id!==p.id)&&(l.lastGroup_=y,l.lastTrack_=p,Pv(i,l),y)){if(y.isMasterPlaylist){if(!p||!$||p.id===$.id)return;var z=r.vhs.masterPlaylistController_,ae=z.selectPlaylist();if(z.media()===ae)return;return l.logger_("track change. Switching master audio from "+$.id+" to "+p.id),n.pause(),s.resetEverything(),void z.fastQualityChange_(ae)}if("AUDIO"===t){if(!y.playlistLoader)return s.setAudio(!0),void s.resetEverything();i.setAudio(!0),s.setAudio(!1)}if(k===y.playlistLoader)return void TT(y.playlistLoader,l);i.track&&i.track(p),i.resetEverything(),TT(y.playlistLoader,l)}}}(pe,t),r[pe].getActiveGroup=function(t,r){var n=r.mediaTypes;return function(){var e=n[t].activeTrack();return e?n[t].activeGroup(e):null}}(pe,t)});var y=r.AUDIO.activeGroup();if(y){var k=(y.filter(function(pe){return pe.default})[0]||y[0]).id;r.AUDIO.tracks[k].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged(),r.AUDIO.getActiveGroup().playlistLoader?(p.setAudio(!1),l.setAudio(!0)):p.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(pe){return r[pe].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(pe){return r[pe].onGroupChanging()})});var z=function(){r.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};for(var ae in e.audioTracks().addEventListener("change",z),e.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),i.on("dispose",function(){e.audioTracks().removeEventListener("change",z),e.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),e.clearTracks("audio"),r.AUDIO.tracks)e.audioTracks().addTrack(r.AUDIO.tracks[ae])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),i),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var i=e.masterPlaylistLoader_.media();if(!i){var s;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(s=e.selectInitialPlaylist()),s||(s=e.selectPlaylist()),!s||!e.shouldSwitchToMedia_(s))return;if(e.initialMedia_=s,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;i=e.initialMedia_}e.handleUpdatedMediaPlaylist(i)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var i=e.masterPlaylistLoader_.media(),s=1.5*i.targetDuration*1e3;e.requestOptions_.timeout=iT(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:s,e.mainSegmentLoader_.playlist(i,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var i=e.masterPlaylistLoader_.media();"playlist-unchanged"!==i.lastExcludeReason_&&e.stuckAtPlaylistEnd_(i)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(e,i){var s=e.mediaGroups||{},l=!0,p=Object.keys(s.AUDIO);for(var y in s.AUDIO)for(var k in s.AUDIO[y])s.AUDIO[y][k].uri||(l=!1);l&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),as.Playlist.isAes(i)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),p.length&&Object.keys(s.AUDIO[p[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(e){var i=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),l=this.bufferLowWaterLine(),p=this.bufferHighWaterLine();return function(t){var r=t.currentPlaylist,n=t.buffered,e=t.currentTime,i=t.nextPlaylist,s=t.bufferLowWaterLine,l=t.bufferHighWaterLine,p=t.duration,y=t.experimentalBufferBasedABR,k=t.log;if(!i)return ke.log.warn("We received no playlist to switch to. Please check your stream."),!1;var $="allowing switch "+(r&&r.id||"null")+" -> "+i.id;if(!r)return k($+" as current playlist is not set"),!0;if(i.id===r.id)return!1;var z=Boolean(Ul(n,e).length);if(!r.endList)return z||"number"!=typeof r.partTargetDuration?(k($+" as current playlist is live"),!0):(k("not "+$+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var ae=eT(n,e),pe=y?xn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:xn.MAX_BUFFER_LOW_WATER_LINE;if(p<pe)return k($+" as duration < max low water line ("+p+" < "+pe+")"),!0;var me=i.attributes.BANDWIDTH,Ee=r.attributes.BANDWIDTH;if(me<Ee&&(!y||ae<l)){var We=$+" as next bandwidth < current bandwidth ("+me+" < "+Ee+")";return y&&(We+=" and forwardBuffer < bufferHighWaterLine ("+ae+" < "+l+")"),k(We),!0}if((!y||me>Ee)&&ae>=s){var et=$+" as forwardBuffer >= bufferLowWaterLine ("+ae+" >= "+s+")";return y&&(et+=" and next bandwidth > current bandwidth ("+me+" > "+Ee+")"),k(et),!0}return k("not "+$+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:s,currentPlaylist:i,nextPlaylist:e,bufferLowWaterLine:l,bufferHighWaterLine:p,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var s=e.selectPlaylist();e.shouldSwitchToMedia_(s)&&e.switchMedia_(s,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var i=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var l=e.getCodecsOrExclude_();l&&e.sourceUpdater_.addOrChangeSourceBuffers(l)};this.mainSegmentLoader_.on("trackinfo",i),this.audioSegmentLoader_.on("trackinfo",i),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},r.fastQualityChange_=function(e){var i=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){i.tech_.setCurrentTime(ke.browser.IE_VERSION||ke.browser.IS_EDGE?i.tech_.currentTime()+.04:i.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},r.setupFirstPlay=function(){var e=this,i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_)return!1;if(!i.endList){var s=this.seekable();if(!s.length)return!1;if(ke.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(s.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&"function"==typeof e.then&&e.then(null,function(i){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var i=this.duration();e[e.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var i=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!i||i.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var s=this.syncController_.getExpiredTime(e,this.duration());if(null===s)return!1;var l=as.Playlist.playlistEnd(e,s),p=this.tech_.currentTime(),y=this.tech_.buffered();if(!y.length)return l-p<=Pa;var k=y.end(y.length-1);return k-p<=Pa&&l-k<=Pa},r.blacklistCurrentPlaylist=function(e,i){void 0===e&&(e={});var s=e.playlist||this.masterPlaylistLoader_.media();if(i=i||e.blacklistDuration||this.blacklistDuration,!s)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));s.playlistErrors_++;var $,l=this.masterPlaylistLoader_.master.playlists,p=l.filter(Tv),y=1===p.length&&p[0]===s;if(1===l.length&&i!==1/0)return ke.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(y);if(y){var k=!1;l.forEach(function(We){if(We!==s){var et=We.excludeUntil;typeof et<"u"&&et!==1/0&&(k=!0,delete We.excludeUntil)}}),k&&(ke.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}$=s.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*i,s.excludeUntil=$,e.reason&&(s.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var z=this.selectPlaylist();if(!z)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(e.internal?this.logger_:ke.log.warn)((e.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(e.message?" "+e.message:"")+" Switching to playlist "+z.id+"."),z.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),z.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var me=z.targetDuration/2*1e3||5e3,Ee="number"==typeof z.lastRequest&&Date.now()-z.lastRequest<=me;return this.switchMedia_(z,"exclude",y||Ee)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(e,i){var s=this,l=[],p="all"===e;(p||"main"===e)&&l.push(this.masterPlaylistLoader_);var y=[];(p||"audio"===e)&&y.push("AUDIO"),(p||"subtitle"===e)&&(y.push("CLOSED-CAPTIONS"),y.push("SUBTITLES")),y.forEach(function(k){var $=s.mediaTypes_[k]&&s.mediaTypes_[k].activePlaylistLoader;$&&l.push($)}),["main","audio","subtitle"].forEach(function(k){var $=s[k+"SegmentLoader_"];$&&(e===k||"all"===e)&&l.push($)}),l.forEach(function(k){return i.forEach(function($){"function"==typeof k[$]&&k[$]()})})},r.setCurrentTime=function(e){var i=Ul(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?i&&i.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:as.Playlist.duration(e):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var s=this.syncController_.getExpiredTime(i,this.duration());if(null!==s){var y,k,l=this.masterPlaylistLoader_.master,p=as.Playlist.seekable(i,s,as.Playlist.liveEdgeDelay(l,i));0===p.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(s=this.syncController_.getExpiredTime(i,this.duration()))||0===(e=as.Playlist.seekable(i,s,as.Playlist.liveEdgeDelay(l,i))).length)||(this.seekable_&&this.seekable_.length&&(y=this.seekable_.end(0),k=this.seekable_.start(0)),this.seekable_=e?e.start(0)>p.end(0)||p.start(0)>e.end(0)?p:ke.createTimeRanges([[e.start(0)>p.start(0)?e.start(0):p.start(0),e.end(0)<p.end(0)?e.end(0):p.end(0)]]):p,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==y||this.seekable_.start(0)!==k)&&(this.logger_("seekable updated ["+Bb(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},r.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var i=this.seekable();if(!i.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1))}else{var s=this.tech_.buffered(),l=as.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(l=Math.max(l,s.end(s.length-1))),this.mediaSource.duration!==l&&this.sourceUpdater_.setDuration(l)}},r.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(i){var s=e.mediaTypes_[i].groups;for(var l in s)s[l].forEach(function(p){p.playlistLoader&&p.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!i||!s)},r.getCodecsOrExclude_=function(){var e=this,i={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};i.video=i.main;var s=nd(this.master(),this.media()),l={},p=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(i.main.hasVideo&&(l.video=s.video||i.main.videoCodec||"avc1.4d400d"),i.main.isMuxed&&(l.video+=","+(s.audio||i.main.audioCodec||bp)),(i.main.hasAudio&&!i.main.isMuxed||i.audio.hasAudio||p)&&(l.audio=s.audio||i.main.audioCodec||i.audio.audioCodec||bp,i.audio.isFmp4=i.main.hasAudio&&!i.main.isMuxed?i.main.isFmp4:i.audio.isFmp4),l.audio||l.video){var $,k={};if(["video","audio"].forEach(function(me){if(l.hasOwnProperty(me)&&!function(Ee,We){return Ee?yo(We):Dc(We)}(i[me].isFmp4,l[me])){var Ee=i[me].isFmp4?"browser":"muxer";k[Ee]=k[Ee]||[],k[Ee].push(l[me]),"audio"===me&&($=Ee)}}),p&&$&&this.media().attributes.AUDIO){var z=this.media().attributes.AUDIO;this.master().playlists.forEach(function(me){(me.attributes&&me.attributes.AUDIO)===z&&me!==e.media()&&(me.excludeUntil=1/0)}),this.logger_("excluding audio group "+z+" as "+$+' does not support codec(s): "'+l.audio+'"')}if(!Object.keys(k).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var pe=[];if(["video","audio"].forEach(function(me){var Ee=(Ni(e.sourceUpdater_.codecs[me]||"")[0]||{}).type,We=(Ni(l[me]||"")[0]||{}).type;Ee&&We&&Ee.toLowerCase()!==We.toLowerCase()&&pe.push('"'+e.sourceUpdater_.codecs[me]+'" -> "'+l[me]+'"')}),pe.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+pe.join(", ")+".",blacklistDuration:1/0,internal:!0})}return l}var ae=Object.keys(k).reduce(function(me,Ee){return me&&(me+=", "),me+(Ee+' does not support codec(s): "')+k[Ee].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:ae,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},r.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var i=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}}},r.excludeUnsupportedVariants_=function(){var e=this,i=this.master().playlists,s=[];Object.keys(i).forEach(function(l){var p=i[l];if(-1===s.indexOf(p.id)){s.push(p.id);var y=nd(e.master,p),k=[];y.audio&&!Dc(y.audio)&&!yo(y.audio)&&k.push("audio codec "+y.audio),y.video&&!Dc(y.video)&&!yo(y.video)&&k.push("video codec "+y.video),y.text&&"stpp.ttml.im1t"===y.text&&k.push("text codec "+y.text),k.length&&(p.excludeUntil=1/0,e.logger_("excluding "+p.id+" for unsupported: "+k.join(", ")))}})},r.excludeIncompatibleVariants_=function(e){var i=this,s=[],l=this.master().playlists,p=Sv(Ni(e)),y=Sx(p),k=p.video&&Ni(p.video)[0]||null,$=p.audio&&Ni(p.audio)[0]||null;Object.keys(l).forEach(function(z){var ae=l[z];if(-1===s.indexOf(ae.id)&&ae.excludeUntil!==1/0){s.push(ae.id);var pe=[],me=nd(i.masterPlaylistLoader_.master,ae),Ee=Sx(me);if(me.audio||me.video){if(Ee!==y&&pe.push('codec count "'+Ee+'" !== "'+y+'"'),!i.sourceUpdater_.canChangeType()){var We=me.video&&Ni(me.video)[0]||null,et=me.audio&&Ni(me.audio)[0]||null;We&&k&&We.type.toLowerCase()!==k.type.toLowerCase()&&pe.push('video codec "'+We.type+'" !== "'+k.type+'"'),et&&$&&et.type.toLowerCase()!==$.type.toLowerCase()&&pe.push('audio codec "'+et.type+'" !== "'+$.type+'"')}pe.length&&(ae.excludeUntil=1/0,i.logger_("blacklisting "+ae.id+": "+pe.join(" && ")))}}})},r.updateAdCues_=function(e){var i=0,s=this.seekable();s.length&&(i=s.start(0)),function(t,r,n){if(void 0===n&&(n=0),t.segments)for(var i,e=n,s=0;s<t.segments.length;s++){var l=t.segments[s];if(i||(i=lD(r,e+l.duration/2)),i){if("cueIn"in l){i.endTime=e,i.adEndTime=e,e+=l.duration,i=null;continue}if(e<i.endTime){e+=l.duration;continue}i.endTime+=l.duration}else if("cueOut"in l&&((i=new(De().VTTCue)(e,e+l.duration,l.cueOut)).adStartTime=e,i.adEndTime=e+parseFloat(l.cueOut),r.addCue(i)),"cueOutCont"in l){var p=l.cueOutCont.split("/").map(parseFloat),y=p[0],k=p[1];(i=new(De().VTTCue)(e,e+l.duration,"")).adStartTime=e-y,i.adEndTime=i.adStartTime+k,r.addCue(i)}e+=l.duration}}(e,this.cueTagsTrack_,i)},r.goalBufferLength=function(){var e=this.tech_.currentTime(),i=xn.GOAL_BUFFER_LENGTH,s=xn.GOAL_BUFFER_LENGTH_RATE,l=Math.max(i,xn.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+e*s,l)},r.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),i=xn.BUFFER_LOW_WATER_LINE,s=xn.BUFFER_LOW_WATER_LINE_RATE,l=Math.max(i,xn.MAX_BUFFER_LOW_WATER_LINE),p=Math.max(i,xn.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+e*s,this.experimentalBufferBasedABR?p:l)},r.bufferHighWaterLine=function(){return xn.BUFFER_HIGH_WATER_LINE},t}(ke.EventTarget),RD=function(t,r,n){var e=t.masterPlaylistController_,l=e[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(e);if(r.attributes){var p=r.attributes.RESOLUTION;this.width=p&&p.width,this.height=p&&p.height,this.bandwidth=r.attributes.BANDWIDTH}this.codecs=nd(e.master(),r),this.playlist=r,this.id=n,this.enabled=function(t,r,n){return function(e){var i=t.master.playlists[r],s=nT(i),l=Tv(i);return typeof e>"u"?l:(e?delete i.disabled:i.disabled=!0,e!==l&&!s&&(n(),t.trigger(e?"renditionenabled":"renditiondisabled")),e)}}(t.playlists,r.id,l)},Hx=["seeking","seeked","pause","playing","error"],kD=function(){function a(r){var n=this;this.masterPlaylistController_=r.masterPlaylistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=ua("PlaybackWatcher"),this.logger_("initialize");var e=function(){return n.monitorCurrentTime_()},i=function(){return n.monitorCurrentTime_()},s=function(){return n.techWaiting_()},l=function(){return n.cancelTimer_()},p=this.masterPlaylistController_,y=["main","subtitle","audio"],k={};y.forEach(function(z){k[z]={reset:function(){return n.resetSegmentDownloads_(z)},updateend:function(){return n.checkSegmentDownloads_(z)}},p[z+"SegmentLoader_"].on("appendsdone",k[z].updateend),p[z+"SegmentLoader_"].on("playlistupdate",k[z].reset),n.tech_.on(["seeked","seeking"],k[z].reset)});var $=function(ae){["main","audio"].forEach(function(pe){p[pe+"SegmentLoader_"][ae]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),$("off"))},this.clearSeekingAppendCheck_=function(){return $("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),$("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(Hx,l),this.tech_.on("canplay",i),this.tech_.one("play",e),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",s),n.tech_.off(Hx,l),n.tech_.off("canplay",i),n.tech_.off("play",e),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),y.forEach(function(z){p[z+"SegmentLoader_"].off("appendsdone",k[z].updateend),p[z+"SegmentLoader_"].off("playlistupdate",k[z].reset),n.tech_.off(["seeked","seeking"],k[z].reset)}),n.checkCurrentTimeTimeout_&&De().clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var t=a.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&De().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=De().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(n){var e=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=e.buffered_()},t.checkSegmentDownloads_=function(n){var e=this.masterPlaylistController_,i=e[n+"SegmentLoader_"],s=i.buffered_(),l=function(t,r){if(t===r)return!1;if(!t&&r||!r&&t||t.length!==r.length)return!0;for(var n=0;n<t.length;n++)if(t.start(n)!==r.start(n)||t.end(n)!==r.end(n))return!0;return!1}(this[n+"Buffered_"],s);this[n+"Buffered_"]=s,l?this.resetSegmentDownloads_(n):(this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:i.playlist_&&i.playlist_.id,buffered:Oo(s)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),"subtitle"!==n&&e.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var n=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===n&&(!e.length||n+Pa>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var l,e=this.seekable(),i=this.tech_.currentTime();if(this.afterSeekableWindow_(e,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(l=e.end(e.length-1)),this.beforeSeekableWindow_(e,i)){var y=e.start(0);l=y+(y===e.end(0)?0:Pa)}if(typeof l<"u")return this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+Bb(e)+". Seeking to "+l+"."),this.tech_.setCurrentTime(l),!0;for(var k=this.masterPlaylistController_.sourceUpdater_,$=this.tech_.buffered(),z=k.audioBuffer?k.audioBuffered():null,ae=k.videoBuffer?k.videoBuffered():null,pe=this.media(),me=pe.partTargetDuration?pe.partTargetDuration:2*(pe.targetDuration-As),Ee=[z,ae],We=0;We<Ee.length;We++)if(Ee[We]&&eT(Ee[We],i)<me)return!1;var pt=_v($,i);return 0!==pt.length&&(l=pt.start(0)+Pa,this.logger_("Buffered region starts ("+pt.start(0)+")  just beyond seek point ("+i+"). Seeking to "+l+"."),this.tech_.setCurrentTime(l),!0)},t.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),e=this.tech_.buffered(),i=Ul(e,n);if(i.length&&n+3<=i.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},t.techWaiting_=function(){var n=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(n,e)){var i=n.end(n.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,l=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:e}))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var y=_v(l,e);if(y.length>0){var k=y.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+k+", seeking to "+y.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*k,e),!0}return!1},t.afterSeekableWindow_=function(n,e,i,s){if(void 0===s&&(s=!1),!n.length)return!1;var l=n.end(n.length-1)+Pa;return!i.endList&&s&&(l=n.end(n.length-1)+3*i.targetDuration),e>l},t.beforeSeekableWindow_=function(n,e){return!!(n.length&&n.start(0)>0&&e<n.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(n){var e=n.videoBuffered,i=n.audioBuffered,s=n.currentTime;if(e){var l;if(e.length&&i.length){var p=Ul(e,s-3),y=Ul(e,s),k=Ul(i,s);k.length&&!y.length&&p.length&&(l={start:p.end(0),end:k.end(0)})}else _v(e,s).length||(l=this.gapFromVideoUnderflow_(e,s));return!!l&&(this.logger_("Encountered a gap in video from "+l.start+" to "+l.end+". Seeking to current time "+s),!0)}},t.skipTheGap_=function(n){var e=this.tech_.buffered(),i=this.tech_.currentTime(),s=_v(e,i);this.cancelTimer_(),0!==s.length&&i===n&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",n,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+As),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(n,e){for(var i=function(t){if(t.length<2)return ke.createTimeRanges();for(var r=[],n=1;n<t.length;n++){var e=t.end(n-1),i=t.start(n);r.push([e,i])}return ke.createTimeRanges(r)}(n),s=0;s<i.length;s++){var l=i.start(s),p=i.end(s);if(e-l<4&&e-l>2)return{start:l,end:p}}return null},a}(),FD={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},UD=function a(t,r){var n=0,e=0,i=ke.mergeOptions(FD,r);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){e&&t.currentTime(e)},l=function(z){null!=z&&(e=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(z),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},p=function(){return Date.now()-n<1e3*i.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):i.getSource&&"function"==typeof i.getSource?(n=Date.now(),i.getSource.call(t,l)):void ke.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},y=function $(){t.off("loadedmetadata",s),t.off("error",p),t.off("dispose",$)};t.on("error",p),t.on("dispose",y),t.reloadSourceOnError=function(z){y(),a(t,z)}},wn={PlaylistLoader:Bl,Playlist:di,utils:e1,STANDARD_PLAYLIST_SELECTOR:Dx,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,r=this.playlists.master.playlists.filter(di.isEnabled);return Nl(r,function(e,i){return gT(e,i)}),r.filter(function(e){return!!nd(t.playlists.master,e).video})[0]||null},lastBandwidthSelector:Dx,movingAverageBandwidthSelector:function(t){var r=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&De().devicePixelRatio||1;return r<0&&(r=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(r=t*this.systemBandwidth+(1-t)*r,n=this.systemBandwidth),Cx(this.playlists.master,r,parseInt(Cv(this.tech_.el(),"width"),10)*e,parseInt(Cv(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:gT,comparePlaylistResolution:function(t,r){var n,e;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||De().Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(e=r.attributes.RESOLUTION.width),n===(e=e||De().Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?t.attributes.BANDWIDTH-r.attributes.BANDWIDTH:n-e},xhr:rx()};Object.keys(xn).forEach(function(a){Object.defineProperty(wn,a,{get:function(){return ke.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),xn[a]},set:function(r){ke.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),"number"!=typeof r||r<0?ke.log.warn("value of Vhs."+a+" must be greater than or equal to 0"):xn[a]=r}})});var Gx="videojs-vhs",Vx=function(t,r){for(var n=r.media(),e=-1,i=0;i<t.length;i++)if(t[i].id===n.id){e=i;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})};wn.canPlaySource=function(){return ke.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Kx=function(){if(!De().localStorage)return null;var t=De().localStorage.getItem(Gx);if(!t)return null;try{return JSON.parse(t)}catch{return null}};wn.supportsNativeHls=function(){if(!mt()||!mt().createElement)return!1;var a=mt().createElement("video");return!!ke.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(r){return/maybe|probably/i.test(a.canPlayType(r))})}(),wn.supportsNativeDash=!!(mt()&&mt().createElement&&ke.getTech("Html5").isSupported())&&/maybe|probably/i.test(mt().createElement("video").canPlayType("application/dash+xml")),wn.supportsTypeNatively=function(a){return"hls"===a?wn.supportsNativeHls:"dash"===a&&wn.supportsNativeDash},wn.isSupported=function(){return ke.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ET=function(a){function t(n,e,i){var s;if(s=a.call(this,e,ke.mergeOptions(i.hls,i.vhs))||this,i.hls&&Object.keys(i.hls).length&&ke.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof i.initialBandwidth&&(s.options_.bandwidth=i.initialBandwidth),s.logger_=ua("VhsHandler"),e.options_&&e.options_.playerId){var l=ke(e.options_.playerId);l.hasOwnProperty("hls")||Object.defineProperty(l,"hls",{get:function(){return ke.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),zt()(s)},configurable:!0}),l.hasOwnProperty("vhs")||Object.defineProperty(l,"vhs",{get:function(){return ke.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),zt()(s)},configurable:!0}),l.hasOwnProperty("dash")||Object.defineProperty(l,"dash",{get:function(){return ke.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),zt()(s)},configurable:!0}),s.player_=l}if(s.tech_=e,s.source_=n,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(mt(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(p){var y=mt().fullscreenElement||mt().webkitFullscreenElement||mt().mozFullScreenElement||mt().msFullscreenElement;y&&y.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}ht()(t,a);var r=t.prototype;return r.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var i=Kx();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=xn.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===xn.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof e.source_[s]<"u"&&(e.options_[s]=e.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(e,i){var s=this;if(e){this.setOptions_(),this.options_.src=function(t){return 0===t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(t.substring(t.indexOf(",")+1)):t}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=wn,this.options_.sourceType=Sp(i),this.options_.seekTo=function(y){s.tech_.setCurrentTime(y)},this.options_.smoothQualityChange&&ke.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new ID(this.options_);var l=ke.mergeOptions({liveRangeSafeTimeDelta:Pa},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new kD(l),this.masterPlaylistController_.on("error",function(){var y=ke.players[s.tech_.options_.playerId],k=s.masterPlaylistController_.error;"object"!=typeof k||k.code?"string"==typeof k&&(k={message:k,code:3}):k.code=3,y.error(k)});var p=this.options_.experimentalBufferBasedABR?wn.movingAverageBandwidthSelector(.55):wn.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):p.bind(this),this.masterPlaylistController_.selectInitialPlaylist=wn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(k){this.masterPlaylistController_.selectPlaylist=k.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(k){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=k,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var k=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,$=De().navigator.connection||De().navigator.mozConnection||De().navigator.webkitConnection,z=1e7;if(this.options_.useNetworkInformationApi&&$){var ae=1e3*$.downlink*1e3;k=ae>=z&&k>=z?Math.max(k,ae):ae}return k},set:function(k){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=k,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){ke.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Oo(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Oo(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&function(t){if(!De().localStorage)return!1;var r=Kx();r=r?ke.mergeOptions(r,t):t;try{De().localStorage.setItem(Gx,JSON.stringify(r))}catch{return!1}}({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t){t.representations=function(){var r=t.masterPlaylistController_.master(),n=td(r)?t.masterPlaylistController_.getAudioTrackPlaylists_():r.playlists;return n?n.filter(function(e){return!nT(e)}).map(function(e,i){return new RD(t,e,e.id)}):[]}}(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=De().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},r.createKeySessions_=function(){var e=this,i=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(t){var r=t.player,n=t.sourceKeySystems,e=t.audioMedia,i=t.mainPlaylists;if(!r.eme.initializeMediaKeys)return Promise.resolve();var l=function(t,r){return t.reduce(function(n,e){if(!e.contentProtection)return n;var i=r.reduce(function(s,l){var p=e.contentProtection[l];return p&&p.pssh&&(s[l]={pssh:p.pssh}),s},{});return Object.keys(i).length&&n.push(i),n},[])}(e?i.concat([e]):i,Object.keys(n)),p=[],y=[];return l.forEach(function(k){y.push(new Promise(function($,z){r.tech_.one("keysessioncreated",$)})),p.push(new Promise(function($,z){r.eme.initializeMediaKeys({keySystems:k},function(ae){ae?z(ae):$()})}))}),Promise.race([Promise.all(p),Promise.race(y)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:i&&i.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){e.logger_("error while creating EME key session",s),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},r.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},r.setupEme_=function(){var e=this,i=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=function(t){var r=t.player,s=function(t,r,n){if(!t)return t;var e={};r&&r.attributes&&r.attributes.CODECS&&(e=Sv(Ni(r.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(e.audio=n.attributes.CODECS);var i=mo(e.video),s=mo(e.audio),l={};for(var p in t)l[p]={},s&&(l[p].audioContentType=s),i&&(l[p].videoContentType=i),r.contentProtection&&r.contentProtection[p]&&r.contentProtection[p].pssh&&(l[p].pssh=r.contentProtection[p].pssh),"string"==typeof t[p]&&(l[p].url=t[p]);return ke.mergeOptions(t,l)}(t.sourceKeySystems,t.media,t.audioMedia);return!(!s||(r.currentSource().keySystems=s,s&&!r.eme&&(ke.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:i&&i.media()});this.player_.tech_.on("keystatuschange",function(l){if("output-restricted"===l.status){var p=e.masterPlaylistController_.master();if(p&&p.playlists){var k,y=[];p.playlists.forEach(function($){$&&$.attributes&&$.attributes.RESOLUTION&&$.attributes.RESOLUTION.height>=720&&(!$.excludeUntil||$.excludeUntil<1/0)&&($.excludeUntil=1/0,y.push($))}),y.length&&((k=ke.log).warn.apply(k,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(y)),e.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==ke.browser.IE_VERSION&&s?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},r.setupQualityLevels_=function(){var e=this,i=ke.players[this.tech_.options_.playerId];!i||!i.qualityLevels||this.qualityLevels_||(this.qualityLevels_=i.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t,r){r.representations().forEach(function(n){t.addQualityLevel(n)}),Vx(t,r.playlists)}(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Vx(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":"2.14.3","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return Fx.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&De().URL.revokeObjectURL&&(De().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},r.convertToProgramTime=function(e,i){return function(t){var r=t.playlist,n=t.time,e=void 0===n?void 0:n,i=t.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!r||void 0===e)return i({message:"getProgramTime: playlist and time must be provided"});var s=function(t,r){if(!r||!r.segments||0===r.segments.length)return null;for(var e,n=0,i=0;i<r.segments.length&&!(t<=(n=(e=r.segments[i]).videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:n+e.duration));i++);var s=r.segments[r.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>n){if(t>n+.25*s.duration)return null;e=s}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:n-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}}(e,r);if(!s)return i({message:"valid programTime was not found"});if("estimate"===s.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var l={mediaSeconds:e},p=function(t,r){if(!r.dateTimeObject)return null;var s=t-(r.videoTimingInfo.transmuxedPresentationStart+r.videoTimingInfo.transmuxerPrependedSeconds);return new Date(r.dateTimeObject.getTime()+1e3*s)}(e,s.segment);return p&&(l.programDateTime=p.toISOString()),i(null,l)}({playlist:this.masterPlaylistController_.media(),time:e,callback:i})},r.seekToProgramTime=function(e,i,s,l){return void 0===s&&(s=!0),void 0===l&&(l=2),u1({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:l,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})},t}(ke.getComponent("Component")),Ov={name:"videojs-http-streaming",VERSION:"2.14.3",canHandleSource:function(t,r){void 0===r&&(r={});var n=ke.mergeOptions(ke.options,r);return Ov.canPlayType(t.type,n)},handleSource:function(t,r,n){void 0===n&&(n={});var e=ke.mergeOptions(ke.options,n);return r.vhs=new ET(t,r,e),ke.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return ke.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),r.vhs},configurable:!0}),r.vhs.xhr=rx(),r.vhs.src(t.src,t.type),r.vhs},canPlayType:function(t,r){void 0===r&&(r={});var n=ke.mergeOptions(ke.options,r),e=n.vhs,i=(e=void 0===e?{}:e).overrideNative,s=void 0===i?!ke.browser.IS_ANY_SAFARI:i,l=n.hls,p=(l=void 0===l?{}:l).overrideNative,y=void 0!==p&&p,k=Sp(t);return k&&(!wn.supportsTypeNatively(k)||y||s)?"maybe":""}};yo("avc1.4d400d,mp4a.40.2")&&ke.getTech("Html5").registerSourceHandler(Ov,0),ke.VhsHandler=ET,Object.defineProperty(ke,"HlsHandler",{get:function(){return ke.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),ET},configurable:!0}),ke.VhsSourceHandler=Ov,Object.defineProperty(ke,"HlsSourceHandler",{get:function(){return ke.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Ov},configurable:!0}),ke.Vhs=wn,Object.defineProperty(ke,"Hls",{get:function(){return ke.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),wn},configurable:!0}),ke.use||(ke.registerComponent("Hls",wn),ke.registerComponent("Vhs",wn)),ke.options.vhs=ke.options.vhs||{},ke.options.hls=ke.options.hls||{},ke.getPlugin&&ke.getPlugin("reloadSourceOnError")||(ke.registerPlugin||ke.plugin)("reloadSourceOnError",function(t){UD(this,t)});const Qr=ke;var Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},bT=(function(){function a(r){this.value=r}function t(r){var n,e;function s(p,y){try{var k=r[p](y),$=k.value;$ instanceof a?Promise.resolve($.value).then(function(z){s("next",z)},function(z){s("throw",z)}):l(k.done?"return":"normal",k.value)}catch(z){l("throw",z)}}function l(p,y){switch(p){case"return":n.resolve({value:y,done:!0});break;case"throw":n.reject(y);break;default:n.resolve({value:y,done:!1})}(n=n.next)?s(n.key,n.arg):e=null}this._invoke=function i(p,y){return new Promise(function(k,$){var z={key:p,arg:y,resolve:k,reject:$,next:null};e?e=e.next=z:(n=e=z,s(p,y))})},"function"!=typeof r.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(r){return this._invoke("next",r)},t.prototype.throw=function(r){return this._invoke("throw",r)},t.prototype.return=function(r){return this._invoke("return",r)}}(),function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}),zx=function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(a,t):a.__proto__=t)},qx=function(a,t){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?a:t},eP=Qr.getComponent("MenuButton"),tP=Qr.getComponent("Menu"),rP=Qr.getComponent("Component"),nP=Qr.dom;function iP(a){return"string"!=typeof a?a:a.charAt(0).toUpperCase()+a.slice(1)}var aP=function(a){function t(r){return bT(this,t),qx(this,a.call(this,r,{title:r.localize("Quality"),name:"QualityButton"}))}return zx(t,a),t.prototype.createItems=function(){return[]},t.prototype.createMenu=function(){var n=new tP(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=nP.createEl("li",{className:"vjs-menu-title",innerHTML:iP(this.options_.title),tabIndex:-1}),i=new rP(this.player_,{el:e});this.hideThreshold_+=1,n.addItem(i)}if(this.items=this.createItems(),this.items)for(var s=0;s<this.items.length;s++)n.addItem(this.items[s]);return n},t}(eP),oP=function(a){function t(r,n,e,i){bT(this,t);var s=qx(this,a.call(this,r,{label:n.label,selectable:!0,selected:n.selected||!1}));return s.item=n,s.qualityButton=e,s.plugin=i,s}return zx(t,a),t.prototype.handleClick=function(){for(var n=0;n<this.qualityButton.items.length;++n)this.qualityButton.items[n].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},t}(Qr.getComponent("MenuItem")),uP={},lP=Qr.registerPlugin||Qr.plugin,fP=function(){function a(t,r){bT(this,a),this.player=t,this.config=r,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return a.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},a.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},a.prototype.createQualityButton=function(){var r=this.player;this._qualityButton=new aP(r);var n=r.controlBar.children().length-2,e=r.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},this.config.placementIndex||n);if(e.addClass("vjs-quality-selector"),this.config.displayCurrentQuality)this.setButtonInnerText("auto");else{var i=" "+(this.config.vjsIconClass||"vjs-icon-hd");e.menuButton_.$(".vjs-icon-placeholder").className+=i}e.removeClass("vjs-hidden")},a.prototype.setButtonInnerText=function(r){this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML=r},a.prototype.getQualityMenuItem=function(r){return new oP(this.player,r,this._qualityButton,this)},a.prototype.onAddQualityLevel=function(){for(var r=this,n=this.player,i=n.qualityLevels().levels_||[],s=[],l=function(k){if(!s.filter(function(z){return z.item&&z.item.value===i[k].height}).length){var $=r.getQualityMenuItem.call(r,{label:i[k].height+"p",value:i[k].height});s.push($)}},p=0;p<i.length;++p)l(p);s.sort(function(y,k){return"object"!==(typeof y>"u"?"undefined":Yx(y))||"object"!==(typeof k>"u"?"undefined":Yx(k))||y.item.value<k.item.value?-1:y.item.value>k.item.value?1:0}),s.push(this.getQualityMenuItem.call(this,{label:n.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return s},this._qualityButton.update())},a.prototype.setQuality=function(r){var n=this.player.qualityLevels();this._currentQuality=r,this.config.displayCurrentQuality&&this.setButtonInnerText("auto"===r?r:r+"p");for(var e=0;e<n.length;++e){var i=n[e];i.enabled=i.height===r||"auto"===r}this._qualityButton.unpressButton()},a.prototype.getCurrentQuality=function(){return this._currentQuality||"auto"},a}(),Xx=function(t){var r=this;this.ready(function(){!function(t,r){t.addClass("vjs-hls-quality-selector"),t.hlsQualitySelector=new fP(t,r)}(r,Qr.mergeOptions(uP,t))})};function xT(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}lP("hlsQualitySelector",Xx),Xx.VERSION="1.1.4";var hP=function(t){var r=this;return r.id=t.id,r.label=r.id,r.width=t.width,r.height=t.height,r.bitrate=t.bandwidth,r.frameRate=t.frameRate,r.enabled_=t.enabled,Object.defineProperty(r,"enabled",{get:function(){return r.enabled_()},set:function(e){r.enabled_(e)}}),r},Iv=function(a){function t(){var n,e=xT(xT(n=a.call(this)||this));return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:function(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get:function(){return e.levels_.length}}),e||xT(n)}!function dP(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}(t,a);var r=t.prototype;return r.addQualityLevel=function(e){var i=this.getQualityLevelById(e.id);if(i)return i;var s=this.levels_.length;return i=new hP(e),""+s in this||Object.defineProperty(this,s,{get:function(){return this.levels_[s]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i},r.removeQualityLevel=function(e){for(var i=null,s=0,l=this.length;s<l;s++)if(this[s]===e){i=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),i},r.getQualityLevelById=function(e){for(var i=0,s=this.length;i<s;i++){var l=this[i];if(l.id===e)return l}return null},r.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},t}(Qr.EventTarget);for(var pP in Iv.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},Iv.prototype.allowedEvents_)Iv.prototype["on"+pP]=null;var Qx=function(t){return function(t,r){var n=t.qualityLevels,e=new Iv;return t.on("dispose",function s(){e.dispose(),t.qualityLevels=n,t.off("dispose",s)}),t.qualityLevels=function(){return e},t.qualityLevels.VERSION="2.2.0",e}(this,Qr.mergeOptions({},t))};function ST(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}function $x(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(Qr.registerPlugin||Qr.plugin)("qualityLevels",Qx),Qx.VERSION="2.2.0";var Lv=Qr.getComponent("MenuButton"),yP=function(a){function t(n,e){var i;return i=a.call(this,n,{name:"ResizerButton"})||this,Lv.apply($x(i),arguments),i.controlText(n.localize("Aspect Ratio")),i}ST(t,a);var r=t.prototype;return r.createEl=function(){return Qr.dom.createEl("div",{className:"vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},r.buildCSSClass=function(){return Lv.prototype.buildCSSClass.call(this)+" vjs-icon-cog"},r.update=function(){return Lv.prototype.update.call(this)},r.handleClick=function(){this.player().getChild("ResizerPanel").toggleClass("vjs-hidden")},t}(Lv),Jx=Qr.getComponent("Component"),_P=function(a){function t(n,e){var i;i=a.call(this,n,e)||this,Jx.apply($x(i),arguments),i.aspectRadio="origin",i.percent=100,i.radioWidth=1,i.radioHeight=1,i.currentHeight=i.player().currentHeight(),i.currentWidth=i.player().currentWidth();var s=i.el();s.childNodes[1].childNodes[1].onclick=function(){i.toggleClass("vjs-hidden")},window.addEventListener("resize",function(){(i.currentHeight!=i.player().currentHeight()||i.currentWidth!=i.player().currentWidth())&&(i.currentHeight=i.player().currentHeight(),i.currentWidth=i.player().currentWidth(),i.resize())}),s.onmouseup=function(){s.onmousemove=null};var l=s.childNodes[1].childNodes[5].childNodes[1].childNodes[3];i.setScrollFunc(s,l,function(ae){i.setPercent(ae)}),i.player().on("play",function(){i.resize()});for(var p=s.childNodes[1].childNodes[5].childNodes[3].childNodes,y=[p[1],p[5],p[9],p[13]],k="origin",$=0;$<y.length;$++)y[$].onchange=function(ae){ae.target.value!==k&&(k=ae.target.value,i.setAspectRadio(ae.target.value))};var z=s.childNodes[1].childNodes[5].childNodes[5].childNodes[1];return z.onclick=function(ae){y[0].checked=!0,i.reset()},i}ST(t,a);var r=t.prototype;return r.setAspectRadio=function(e){switch(e){case"origin":this.aspectRadio="origin";break;case"fill":this.aspectRadio="fill";break;case"16:9":this.aspectRadio="16:9",this.radioWidth=16,this.radioHeight=9;break;case"4:3":this.aspectRadio="4:3",this.radioWidth=4,this.radioHeight=3}this.resize()},r.setPercent=function(e){this.percent=e,this.resize()},r.reset=function(){this.player().tech_.el().style.objectFit="contain",this.aspectRadio="origin",this.percent=100;var e=this.el().childNodes[1].childNodes[5].childNodes[1].childNodes[3];e.childNodes[1].style.left="255px",e.childNodes[3].style.width="255px",this.resize()},r.resize=function(){if(this.player().tech_.el().style.objectFit="origin"!=this.aspectRadio?"fill":"contain","origin"!=this.aspectRadio&&"fill"!=this.aspectRadio){var l=this.currentWidth,p=l*this.radioHeight/this.radioWidth;this.currentWidth/this.currentHeight>this.radioWidth/this.radioHeight&&(l=(p=this.currentHeight)*this.radioWidth/this.radioHeight),this.setPadding((this.currentWidth-l*this.percent/100)/2,(this.currentHeight-p*this.percent/100)/2)}else this.setPadding(this.currentWidth*(100-this.percent)/100/2,this.currentHeight*(100-this.percent)/100/2)},r.setPadding=function(e,i){e<0&&(e=0),this.player().tech_.el().style.paddingLeft=e+"px",this.player().tech_.el().style.paddingRight=e+"px",i<0&&(i=0),this.player().tech_.el().style.paddingTop=i+"px",this.player().tech_.el().style.paddingBottom=i+"px"},r.setScrollFunc=function(e,i,s){var p=i.childNodes[3],y=0;i.childNodes[1].onmousedown=function(k){var z=(k||window.event).clientX-this.offsetLeft,ae=this;e.onmousemove=function(pe){var me=pe||window.event;(y=me.clientX-z)<0?y=0:y>255&&(y=255),p.style.width=y+"px",ae.style.left=y+"px",s(parseInt(y/255*100)),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}}},r.createEl=function(){return Qr.dom.createEl("div",{className:"vjs-resizer-modal vjs-hidden",innerHTML:'\n        <div class="vjs-resizer-modal-content">\n        <span class="vjs-resizer-modal-close">&times;</span>\n          <div class="vjs-resizer-modal-title">Aspect Ratio</div>\n          <div class="vjs-resizer-wrap">\n            <div class="vjs-resizer-size">\n              <span class="size-title">Size</span>\n              <div class="size-scroll" id="size-scroll">\n                <div class="size-scroll-bar"></div>\n                <div class="size-scroll-mask"></div>\n              </div>\n            </div>\n            <div class="radios">\n              Ratio\n              <input type="radio" name="radio" id="origin" value="origin" checked >\n              <label for="origin">Default</label>\n              <input type="radio" name="radio" id="4:3" value="4:3">\n              <label for="4:3">4:3</label>\n              <input type="radio" name="radio" id="16:9" value="16:9">\n              <label for="16:9">16:9</label>\n              <input type="radio" name="radio" id="fill" value="fill">\n              <label for="fill">Full</label>\n            </div>\n            <ul style="clear:both">\n                <li id="vjs-resizer-reset">Reset</li>\n            </ul>\n          </div>\n        </div>\n        '})},t}(Jx),TP=Qr.getPlugin("plugin"),EP={},AT=function(a){function t(r,n){var e;return(e=a.call(this,r)||this).options=Qr.mergeOptions(EP,n),e.player.ready(function(){if(e.player.addClass("vjs-aspect-ratio-panel"),"Html5"!=r.techName_)return!1;r.on(["loadedmetadata"],function(i){if("undefined"!=r.aspect_ratio_initialized&&1!=r.aspect_ratio_initialized){r.aspect_ratio_initialized=!0;var s=r.controlBar,l=s.getChild("fullscreenToggle").el();s.el().insertBefore(s.addChild("ResizerButton").el(),l),r.addChild("ResizerPanel")}})}),Qr.registerComponent("ResizerButton",yP),Qr.registerComponent("ResizerPanel",_P),e}return ST(t,a),t}(TP);AT.defaultState={},AT.VERSION="0.0.1",Qr.registerPlugin("aspectRatioPanel",AT);const bP=["target"];class Rv{ngOnInit(){this.player=Qr(this.target.nativeElement,{...this.options,autoplay:!0},function(){this.volume(100)}),this.player.hlsQualitySelector({displayCurrentQuality:!0}),this.player.aspectRatioPanel()}ngOnChanges(t){t.options.previousValue&&this.player.src(t.options.currentValue.sources[0])}ngOnDestroy(){this.player&&this.player.dispose()}static#e=this.\u0275fac=function(r){return new(r||Rv)};static#t=this.\u0275cmp=u.Xpm({type:Rv,selectors:[["app-vjs-player"]],viewQuery:function(r,n){if(1&r&&u.Gf(bP,7),2&r){let e;u.iGM(e=u.CRH())&&(n.target=e.first)}},inputs:{options:"options"},features:[u.TTD],decls:3,vars:0,consts:[["controls","","muted","","playsinline","","preload","none","data-setup",'{"liveui": true, "muted": false}',1,"video-js"],["target",""]],template:function(r,n){1&r&&(u._UZ(0,"video",0,1),u._uU(2,"\n"))},styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.video-js{position:relative!important;width:100%!important;height:calc(100vh - 54px)}.hide-captions .vjs-texttrack-settings,.hide-captions .vjs-text-track-display,.hide-captions .vjs-subs-caps-button{display:none}\n'],encapsulation:2})}var CT=Ne(23267);const xP=[{path:"",component:po}];class Mv{static#e=this.\u0275fac=function(r){return new(r||Mv)};static#t=this.\u0275mod=u.oAB({type:Mv});static#r=this.\u0275inj=u.cJS({imports:[de.ez,Ge.U8,Se.Bz.forChild(xP),ue.m]})}u.B6R(po,function(){return[de.O5,Se.rH,CT.jA,CT.kh,CT.LW,Ce,_t,st,pn,vi,Rv]},function(){return[de.Ov]})},3992:(ft,dt,Ne)=>{"use strict";var Ge=Ne(69226);ft.exports=function(N,ee){return void 0===ee&&(ee=!1),function(G,V,q){if(G)N(G);else if(V.statusCode>=400&&V.statusCode<=599){var u=q;if(ee)if(Ge.TextDecoder){var Y=function Se(ue){return void 0===ue&&(ue=""),ue.toLowerCase().split(";").reduce(function(N,ee){var G=ee.split("="),q=G[1];return"charset"===G[0].trim()?q.trim():N},"utf-8")}(V.headers&&V.headers["content-type"]);try{u=new TextDecoder(Y).decode(q)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(q));N({cause:u})}else N(null,q)}}},30745:(ft,dt,Ne)=>{"use strict";var Ge=Ne(69226),de=Ne(10434),Se=Ne(72703);function G(B,F,O){var W=B;return Se(F)?(O=F,"string"==typeof B&&(W={uri:B})):W=de({},F,{uri:B}),W.callback=O,W}function V(B,F,O){return q(F=G(B,F,O))}function q(B){if(typeof B.callback>"u")throw new Error("callback argument missing");var F=!1,O=function(C,x,T){F||(F=!0,B.callback(C,x,T))};function U(){var m=void 0;if(m=b.response?b.response:b.responseText||function u(B){try{if("document"===B.responseType)return B.responseXML;if(""===B.responseType&&(!B.responseXML||"parsererror"!==B.responseXML.documentElement.nodeName))return B.responseXML}catch{}return null}(b),h)try{m=JSON.parse(m)}catch{}return m}function R(m){return clearTimeout(d),m instanceof Error||(m=new Error(""+(m||"Unknown XMLHttpRequest Error"))),m.statusCode=0,O(m,P)}function M(){if(!v){var m;clearTimeout(d);var C=P,x=null;return 0!==(m=B.useXDR&&void 0===b.status?200:1223===b.status?204:b.status)?(C={body:U(),statusCode:m,method:w,headers:{},url:S,rawRequest:b},b.getAllResponseHeaders&&(C.headers=function(F){var O={};return F&&F.trim().split("\n").forEach(function(W){var U=W.indexOf(":"),R=W.slice(0,U).trim().toLowerCase(),M=W.slice(U+1).trim();typeof O[R]>"u"?O[R]=M:Array.isArray(O[R])?O[R].push(M):O[R]=[O[R],M]}),O}(b.getAllResponseHeaders()))):x=new Error("Internal XMLHttpRequest Error"),O(x,C,C.body)}}var b=B.xhr||null;b||(b=B.cors||B.useXDR?new V.XDomainRequest:new V.XMLHttpRequest);var g,v,d,S=b.url=B.uri||B.url,w=b.method=B.method||"GET",E=B.body||B.data,_=b.headers=B.headers||{},c=!!B.sync,h=!1,P={body:void 0,headers:{},statusCode:0,method:w,url:S,rawRequest:b};if("json"in B&&!1!==B.json&&(h=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==w&&"HEAD"!==w&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),E=JSON.stringify(!0===B.json?E:B.json))),b.onreadystatechange=function W(){4===b.readyState&&setTimeout(M,0)},b.onload=M,b.onerror=R,b.onprogress=function(){},b.onabort=function(){v=!0},b.ontimeout=R,b.open(w,S,!c,B.username,B.password),c||(b.withCredentials=!!B.withCredentials),!c&&B.timeout>0&&(d=setTimeout(function(){if(!v){v=!0,b.abort("timeout");var m=new Error("XMLHttpRequest timeout");m.code="ETIMEDOUT",R(m)}},B.timeout)),b.setRequestHeader)for(g in _)_.hasOwnProperty(g)&&b.setRequestHeader(g,_[g]);else if(B.headers&&!function ee(B){for(var F in B)if(B.hasOwnProperty(F))return!1;return!0}(B.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in B&&(b.responseType=B.responseType),"beforeSend"in B&&"function"==typeof B.beforeSend&&B.beforeSend(b),b.send(E||null),b}V.httpHandler=Ne(3992),ft.exports=V,ft.exports.default=V,V.XMLHttpRequest=Ge.XMLHttpRequest||function Y(){},V.XDomainRequest="withCredentials"in new V.XMLHttpRequest?V.XMLHttpRequest:Ge.XDomainRequest,function N(B,F){for(var O=0;O<B.length;O++)F(B[O])}(["get","put","post","patch","head","delete"],function(B){V["delete"===B?"del":B]=function(F,O,W){return(O=G(F,O,W)).method=B.toUpperCase(),q(O)}})},59401:(ft,dt)=>{"use strict";function Ge(ue,N){return void 0===N&&(N=Object),N&&"function"==typeof N.freeze?N.freeze(ue):ue}var de=Ge({HTML:"text/html",isHTML:function(ue){return ue===de.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Se=Ge({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(ue){return ue===Se.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});dt.find=function Ne(ue,N,ee){if(void 0===ee&&(ee=Array.prototype),ue&&"function"==typeof ee.find)return ee.find.call(ue,N);for(var G=0;G<ue.length;G++)if(Object.prototype.hasOwnProperty.call(ue,G)){var V=ue[G];if(N.call(void 0,V,G,ue))return V}},dt.freeze=Ge,dt.MIME_TYPE=de,dt.NAMESPACE=Se},91991:(ft,dt,Ne)=>{var de=Ne(59401),Se=Ne(26853),ue=Ne(64436),N=Ne(68702),ee=Se.DOMImplementation,G=de.NAMESPACE,V=N.ParseError,q=N.XMLReader;function u(R){this.options=R||{locator:{}}}function B(){this.cdata=!1}function F(R,M){M.lineNumber=R.lineNumber,M.columnNumber=R.columnNumber}function O(R){if(R)return"\n@"+(R.systemId||"")+"#[line:"+R.lineNumber+",col:"+R.columnNumber+"]"}function W(R,M,b){return"string"==typeof R?R.substr(M,b):R.length>=M+b||M?new java.lang.String(R,M,b)+"":R}function U(R,M){R.currentElement?R.currentElement.appendChild(M):R.doc.appendChild(M)}u.prototype.parseFromString=function(R,M){var b=this.options,g=new q,v=b.domBuilder||new B,S=b.errorHandler,w=b.locator,E=b.xmlns||{},_=/\/x?html?$/.test(M),c=_?ue.HTML_ENTITIES:ue.XML_ENTITIES;return w&&v.setDocumentLocator(w),g.errorHandler=function Y(R,M,b){if(!R){if(M instanceof B)return M;R=M}var g={},v=R instanceof Function;function S(w){var E=R[w];!E&&v&&(E=2==R.length?function(_){R(w,_)}:R),g[w]=E&&function(_){E("[xmldom "+w+"]\t"+_+O(b))}||function(){}}return b=b||{},S("warning"),S("error"),S("fatalError"),g}(S,v,w),g.domBuilder=b.domBuilder||v,_&&(E[""]=G.HTML),E.xml=E.xml||G.XML,R&&"string"==typeof R?g.parse(R,E,c):g.errorHandler.error("invalid doc source"),v.doc},B.prototype={startDocument:function(){this.doc=(new ee).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(R,M,b,g){var v=this.doc,S=v.createElementNS(R,b||M),w=g.length;U(this,S),this.currentElement=S,this.locator&&F(this.locator,S);for(var E=0;E<w;E++){R=g.getURI(E);var _=g.getValue(E),c=(b=g.getQName(E),v.createAttributeNS(R,b));this.locator&&F(g.getLocator(E),c),c.value=c.nodeValue=_,S.setAttributeNode(c)}},endElement:function(R,M,b){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(R,M){},endPrefixMapping:function(R){},processingInstruction:function(R,M){var b=this.doc.createProcessingInstruction(R,M);this.locator&&F(this.locator,b),U(this,b)},ignorableWhitespace:function(R,M,b){},characters:function(R,M,b){if(R=W.apply(this,arguments)){if(this.cdata)var g=this.doc.createCDATASection(R);else g=this.doc.createTextNode(R);this.currentElement?this.currentElement.appendChild(g):/^\s*$/.test(R)&&this.doc.appendChild(g),this.locator&&F(this.locator,g)}},skippedEntity:function(R){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(R){(this.locator=R)&&(R.lineNumber=0)},comment:function(R,M,b){R=W.apply(this,arguments);var g=this.doc.createComment(R);this.locator&&F(this.locator,g),U(this,g)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(R,M,b){var g=this.doc.implementation;if(g&&g.createDocumentType){var v=g.createDocumentType(R,M,b);this.locator&&F(this.locator,v),U(this,v),this.doc.doctype=v}},warning:function(R){console.warn("[xmldom warning]\t"+R,O(this.locator))},error:function(R){console.error("[xmldom error]\t"+R,O(this.locator))},fatalError:function(R){throw new V(R,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(R){B.prototype[R]=function(){return null}}),dt.DOMParser=u},26853:(ft,dt,Ne)=>{var Ge=Ne(59401),de=Ge.find,Se=Ge.NAMESPACE;function ue(fe){return""!==fe}function ee(fe,ve){return fe.hasOwnProperty(ve)||(fe[ve]=!0),fe}function G(fe){if(!fe)return[];var ve=function N(fe){return fe?fe.split(/[\t\n\f\r ]+/).filter(ue):[]}(fe);return Object.keys(ve.reduce(ee,{}))}function q(fe,ve){for(var Ae in fe)Object.prototype.hasOwnProperty.call(fe,Ae)&&(ve[Ae]=fe[Ae])}function u(fe,ve){var Ae=fe.prototype;if(!(Ae instanceof ve)){let gt=function(){};gt.prototype=ve.prototype,gt=new gt,q(Ae,gt),fe.prototype=Ae=gt}Ae.constructor!=fe&&("function"!=typeof fe&&console.error("unknown Class:"+fe),Ae.constructor=fe)}var Y={},B=Y.ELEMENT_NODE=1,F=Y.ATTRIBUTE_NODE=2,O=Y.TEXT_NODE=3,W=Y.CDATA_SECTION_NODE=4,U=Y.ENTITY_REFERENCE_NODE=5,R=Y.ENTITY_NODE=6,M=Y.PROCESSING_INSTRUCTION_NODE=7,b=Y.COMMENT_NODE=8,g=Y.DOCUMENT_NODE=9,v=Y.DOCUMENT_TYPE_NODE=10,S=Y.DOCUMENT_FRAGMENT_NODE=11,w=Y.NOTATION_NODE=12,E={},_={},d=(E.INDEX_SIZE_ERR=(_[1]="Index size error",1),E.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),E.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),T=(E.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),E.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),E.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),E.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),E.NOT_FOUND_ERR=(_[8]="Not found",8)),L=(E.NOT_SUPPORTED_ERR=(_[9]="Not supported",9),E.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10));function ye(fe,ve){if(ve instanceof Error)var Ae=ve;else Ae=this,Error.call(this,_[fe]),this.message=_[fe],Error.captureStackTrace&&Error.captureStackTrace(this,ye);return Ae.code=fe,ve&&(this.message=this.message+": "+ve),Ae}function Ce(){}function we(fe,ve){this._node=fe,this._refresh=ve,Be(this)}function Be(fe){var ve=fe._node._inc||fe._node.ownerDocument._inc;if(fe._inc!=ve){var Ae=fe._refresh(fe._node);Oi(fe,"length",Ae.length),q(Ae,fe),fe._inc=ve}}function Ze(){}function st(fe,ve){for(var Ae=fe.length;Ae--;)if(fe[Ae]===ve)return Ae}function ct(fe,ve,Ae,Ke){if(Ke?ve[st(ve,Ke)]=Ae:ve[ve.length++]=Ae,fe){Ae.ownerElement=fe;var gt=fe.ownerDocument;gt&&(Ke&&Kt(gt,fe,Ke),function Ht(fe,ve,Ae){fe&&fe._inc++,Ae.namespaceURI===Se.XMLNS&&(ve._nsMap[Ae.prefix?Ae.localName:""]=Ae.value)}(gt,fe,Ae))}}function yt(fe,ve,Ae){var Ke=st(ve,Ae);if(!(Ke>=0))throw new ye(T,new Error(fe.tagName+"@"+Ae));for(var gt=ve.length-1;Ke<gt;)ve[Ke]=ve[++Ke];if(ve.length=gt,fe){var Mt=fe.ownerDocument;Mt&&(Kt(Mt,fe,Ae),Ae.ownerElement=null)}}function _t(){}function ot(){}function bt(fe){return("<"==fe?"&lt;":">"==fe&&"&gt;")||"&"==fe&&"&amp;"||'"'==fe&&"&quot;"||"&#"+fe.charCodeAt()+";"}function Ct(fe,ve){if(ve(fe))return!0;if(fe=fe.firstChild)do{if(Ct(fe,ve))return!0}while(fe=fe.nextSibling)}function nt(){this.ownerDocument=this}function Kt(fe,ve,Ae,Ke){fe&&fe._inc++,Ae.namespaceURI===Se.XMLNS&&delete ve._nsMap[Ae.prefix?Ae.localName:""]}function Ut(fe,ve,Ae){if(fe&&fe._inc){fe._inc++;var Ke=ve.childNodes;if(Ae)Ke[Ke.length++]=Ae;else{for(var gt=ve.firstChild,Mt=0;gt;)Ke[Mt++]=gt,gt=gt.nextSibling;Ke.length=Mt,delete Ke[Ke.length]}}}function tr(fe,ve){var Ae=ve.previousSibling,Ke=ve.nextSibling;return Ae?Ae.nextSibling=Ke:fe.firstChild=Ke,Ke?Ke.previousSibling=Ae:fe.lastChild=Ae,ve.parentNode=null,ve.previousSibling=null,ve.nextSibling=null,Ut(fe.ownerDocument,fe),ve}function sr(fe){return fe&&fe.nodeType===ot.DOCUMENT_TYPE_NODE}function fr(fe){return fe&&fe.nodeType===ot.ELEMENT_NODE}function ir(fe){return fe&&fe.nodeType===ot.TEXT_NODE}function vr(fe,ve){var Ae=fe.childNodes||[];if(de(Ae,fr)||sr(ve))return!1;var Ke=de(Ae,sr);return!(ve&&Ke&&Ae.indexOf(Ke)>Ae.indexOf(ve))}function ce(fe,ve){var Ae=fe.childNodes||[];if(de(Ae,function Ke(Mt){return fr(Mt)&&Mt!==ve}))return!1;var gt=de(Ae,sr);return!(ve&&gt&&Ae.indexOf(gt)>Ae.indexOf(ve))}function J(fe,ve,Ae){var Ke=fe.childNodes||[],gt=ve.childNodes||[];if(ve.nodeType===ot.DOCUMENT_FRAGMENT_NODE){var Mt=gt.filter(fr);if(Mt.length>1||de(gt,ir))throw new ye(d,"More than one element or text in fragment");if(1===Mt.length&&!vr(fe,Ae))throw new ye(d,"Element in fragment can not be inserted before doctype")}if(fr(ve)&&!vr(fe,Ae))throw new ye(d,"Only one element can be added and only after doctype");if(sr(ve)){if(de(Ke,sr))throw new ye(d,"Only one doctype is allowed");var Yt=de(Ke,fr);if(Ae&&Ke.indexOf(Yt)<Ke.indexOf(Ae))throw new ye(d,"Doctype can only be inserted before an element");if(!Ae&&Yt)throw new ye(d,"Doctype can not be appended since element is present")}}function be(fe,ve,Ae){var Ke=fe.childNodes||[],gt=ve.childNodes||[];if(ve.nodeType===ot.DOCUMENT_FRAGMENT_NODE){var Mt=gt.filter(fr);if(Mt.length>1||de(gt,ir))throw new ye(d,"More than one element or text in fragment");if(1===Mt.length&&!ce(fe,Ae))throw new ye(d,"Element in fragment can not be inserted before doctype")}if(fr(ve)&&!ce(fe,Ae))throw new ye(d,"Only one element can be added and only after doctype");if(sr(ve)){if(de(Ke,function(Cn){return sr(Cn)&&Cn!==Ae}))throw new ye(d,"Only one doctype is allowed");var Yt=de(Ke,fr);if(Ae&&Ke.indexOf(Yt)<Ke.indexOf(Ae))throw new ye(d,"Doctype can only be inserted before an element")}}function Le(fe,ve,Ae,Ke){(function X(fe,ve,Ae){if(!function It(fe){return fe&&(fe.nodeType===ot.DOCUMENT_NODE||fe.nodeType===ot.DOCUMENT_FRAGMENT_NODE||fe.nodeType===ot.ELEMENT_NODE)}(fe))throw new ye(d,"Unexpected parent node type "+fe.nodeType);if(Ae&&Ae.parentNode!==fe)throw new ye(T,"child not in parent");if(!function Xt(fe){return fe&&(fr(fe)||ir(fe)||sr(fe)||fe.nodeType===ot.DOCUMENT_FRAGMENT_NODE||fe.nodeType===ot.COMMENT_NODE||fe.nodeType===ot.PROCESSING_INSTRUCTION_NODE)}(ve)||sr(ve)&&fe.nodeType!==ot.DOCUMENT_NODE)throw new ye(d,"Unexpected node type "+ve.nodeType+" for parent node type "+fe.nodeType)})(fe,ve,Ae),fe.nodeType===ot.DOCUMENT_NODE&&(Ke||J)(fe,ve,Ae);var gt=ve.parentNode;if(gt&&gt.removeChild(ve),ve.nodeType===S){var Mt=ve.firstChild;if(null==Mt)return ve;var Yt=ve.lastChild}else Mt=Yt=ve;var Xr=Ae?Ae.previousSibling:fe.lastChild;Mt.previousSibling=Xr,Yt.nextSibling=Ae,Xr?Xr.nextSibling=Mt:fe.firstChild=Mt,null==Ae?fe.lastChild=Yt:Ae.previousSibling=Yt;do{Mt.parentNode=fe}while(Mt!==Yt&&(Mt=Mt.nextSibling));return Ut(fe.ownerDocument||fe,fe),ve.nodeType==S&&(ve.firstChild=ve.lastChild=null),ve}function Ve(){this._nsMap={}}function Pt(){}function Zt(){}function Bt(){}function jt(){}function Qt(){}function nn(){}function Wn(){}function In(){}function un(){}function Pi(){}function pi(){}function Gn(){}function Vn(fe,ve){var Ae=[],Ke=9==this.nodeType&&this.documentElement||this,gt=Ke.prefix,Mt=Ke.namespaceURI;if(Mt&&null==gt&&null==(gt=Ke.lookupPrefix(Mt)))var Yt=[{namespace:Mt,prefix:null}];return An(this,Ae,fe,ve,Yt),Ae.join("")}function pn(fe,ve,Ae){var Ke=fe.prefix||"",gt=fe.namespaceURI;if(!gt||"xml"===Ke&&gt===Se.XML||gt===Se.XMLNS)return!1;for(var Mt=Ae.length;Mt--;){var Yt=Ae[Mt];if(Yt.prefix===Ke)return Yt.namespace!==gt}return!0}function wi(fe,ve,Ae){fe.push(" ",ve,'="',Ae.replace(/[<&"]/g,bt),'"')}function An(fe,ve,Ae,Ke,gt){if(gt||(gt=[]),Ke){if(!(fe=Ke(fe)))return;if("string"==typeof fe)return void ve.push(fe)}switch(fe.nodeType){case B:var Mt=fe.attributes,Yt=Mt.length,$r=fe.firstChild,Xr=fe.tagName,mr=Xr;if(!(Ae=Se.isHTML(fe.namespaceURI)||Ae)&&!fe.prefix&&fe.namespaceURI){for(var Cn,Ln=0;Ln<Mt.length;Ln++)if("xmlns"===Mt.item(Ln).name){Cn=Mt.item(Ln).value;break}if(!Cn)for(var Gi=gt.length-1;Gi>=0;Gi--)if(""===(Vi=gt[Gi]).prefix&&Vi.namespace===fe.namespaceURI){Cn=Vi.namespace;break}if(Cn!==fe.namespaceURI)for(Gi=gt.length-1;Gi>=0;Gi--){var Vi;if((Vi=gt[Gi]).namespace===fe.namespaceURI){Vi.prefix&&(mr=Vi.prefix+":"+Xr);break}}}ve.push("<",mr);for(var Rn=0;Rn<Yt;Rn++)"xmlns"==(vn=Mt.item(Rn)).prefix?gt.push({prefix:vn.localName,namespace:vn.value}):"xmlns"==vn.nodeName&&gt.push({prefix:"",namespace:vn.value});for(Rn=0;Rn<Yt;Rn++){var vn,Ki,Ii;pn(vn=Mt.item(Rn),0,gt)&&(wi(ve,(Ki=vn.prefix||"")?"xmlns:"+Ki:"xmlns",Ii=vn.namespaceURI),gt.push({prefix:Ki,namespace:Ii})),An(vn,ve,Ae,Ke,gt)}if(Xr===mr&&pn(fe,0,gt)&&(wi(ve,(Ki=fe.prefix||"")?"xmlns:"+Ki:"xmlns",Ii=fe.namespaceURI),gt.push({prefix:Ki,namespace:Ii})),$r||Ae&&!/^(?:meta|link|img|br|hr|input)$/i.test(Xr)){if(ve.push(">"),Ae&&/^script$/i.test(Xr))for(;$r;)$r.data?ve.push($r.data):An($r,ve,Ae,Ke,gt.slice()),$r=$r.nextSibling;else for(;$r;)An($r,ve,Ae,Ke,gt.slice()),$r=$r.nextSibling;ve.push("</",mr,">")}else ve.push("/>");return;case g:case S:for($r=fe.firstChild;$r;)An($r,ve,Ae,Ke,gt.slice()),$r=$r.nextSibling;return;case F:return wi(ve,fe.name,fe.value);case O:return ve.push(fe.data.replace(/[<&]/g,bt).replace(/]]>/g,"]]&gt;"));case W:return ve.push("<![CDATA[",fe.data,"]]>");case b:return ve.push("\x3c!--",fe.data,"--\x3e");case v:var Ps=fe.publicId,Yn=fe.systemId;if(ve.push("<!DOCTYPE ",fe.name),Ps)ve.push(" PUBLIC ",Ps),Yn&&"."!=Yn&&ve.push(" ",Yn),ve.push(">");else if(Yn&&"."!=Yn)ve.push(" SYSTEM ",Yn,">");else{var Bo=fe.internalSubset;Bo&&ve.push(" [",Bo,"]"),ve.push(">")}return;case M:return ve.push("<?",fe.target," ",fe.data,"?>");case U:return ve.push("&",fe.nodeName,";");default:ve.push("??",fe.nodeName)}}function ca(fe,ve,Ae){var Ke;switch(ve.nodeType){case B:(Ke=ve.cloneNode(!1)).ownerDocument=fe;case S:break;case F:Ae=!0}if(Ke||(Ke=ve.cloneNode(!1)),Ke.ownerDocument=fe,Ke.parentNode=null,Ae)for(var gt=ve.firstChild;gt;)Ke.appendChild(ca(fe,gt,Ae)),gt=gt.nextSibling;return Ke}function vi(fe,ve,Ae){var Ke=new ve.constructor;for(var gt in ve)if(Object.prototype.hasOwnProperty.call(ve,gt)){var Mt=ve[gt];"object"!=typeof Mt&&Mt!=Ke[gt]&&(Ke[gt]=Mt)}switch(ve.childNodes&&(Ke.childNodes=new Ce),Ke.ownerDocument=fe,Ke.nodeType){case B:var Yt=ve.attributes,Xr=Ke.attributes=new Ze,mr=Yt.length;Xr._ownerElement=Ke;for(var Cn=0;Cn<mr;Cn++)Ke.setAttributeNode(vi(fe,Yt.item(Cn),!0));break;case F:Ae=!0}if(Ae)for(var Ln=ve.firstChild;Ln;)Ke.appendChild(vi(fe,Ln,Ae)),Ln=Ln.nextSibling;return Ke}function Oi(fe,ve,Ae){fe[ve]=Ae}E.INVALID_STATE_ERR=(_[11]="Invalid state",11),E.SYNTAX_ERR=(_[12]="Syntax error",12),E.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),E.NAMESPACE_ERR=(_[14]="Invalid namespace",14),E.INVALID_ACCESS_ERR=(_[15]="Invalid access",15),ye.prototype=Error.prototype,q(E,ye),Ce.prototype={length:0,item:function(fe){return this[fe]||null},toString:function(fe,ve){for(var Ae=[],Ke=0;Ke<this.length;Ke++)An(this[Ke],Ae,fe,ve);return Ae.join("")},filter:function(fe){return Array.prototype.filter.call(this,fe)},indexOf:function(fe){return Array.prototype.indexOf.call(this,fe)}},we.prototype.item=function(fe){return Be(this),this[fe]},u(we,Ce),Ze.prototype={length:0,item:Ce.prototype.item,getNamedItem:function(fe){for(var ve=this.length;ve--;){var Ae=this[ve];if(Ae.nodeName==fe)return Ae}},setNamedItem:function(fe){var ve=fe.ownerElement;if(ve&&ve!=this._ownerElement)throw new ye(L);var Ae=this.getNamedItem(fe.nodeName);return ct(this._ownerElement,this,fe,Ae),Ae},setNamedItemNS:function(fe){var Ae,ve=fe.ownerElement;if(ve&&ve!=this._ownerElement)throw new ye(L);return Ae=this.getNamedItemNS(fe.namespaceURI,fe.localName),ct(this._ownerElement,this,fe,Ae),Ae},removeNamedItem:function(fe){var ve=this.getNamedItem(fe);return yt(this._ownerElement,this,ve),ve},removeNamedItemNS:function(fe,ve){var Ae=this.getNamedItemNS(fe,ve);return yt(this._ownerElement,this,Ae),Ae},getNamedItemNS:function(fe,ve){for(var Ae=this.length;Ae--;){var Ke=this[Ae];if(Ke.localName==ve&&Ke.namespaceURI==fe)return Ke}return null}},_t.prototype={hasFeature:function(fe,ve){return!0},createDocument:function(fe,ve,Ae){var Ke=new nt;if(Ke.implementation=this,Ke.childNodes=new Ce,Ke.doctype=Ae||null,Ae&&Ke.appendChild(Ae),ve){var gt=Ke.createElementNS(fe,ve);Ke.appendChild(gt)}return Ke},createDocumentType:function(fe,ve,Ae){var Ke=new nn;return Ke.name=fe,Ke.nodeName=fe,Ke.publicId=ve||"",Ke.systemId=Ae||"",Ke}},ot.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(fe,ve){return Le(this,fe,ve)},replaceChild:function(fe,ve){Le(this,fe,ve,be),ve&&this.removeChild(ve)},removeChild:function(fe){return tr(this,fe)},appendChild:function(fe){return this.insertBefore(fe,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(fe){return vi(this.ownerDocument||this,this,fe)},normalize:function(){for(var fe=this.firstChild;fe;){var ve=fe.nextSibling;ve&&ve.nodeType==O&&fe.nodeType==O?(this.removeChild(ve),fe.appendData(ve.data)):(fe.normalize(),fe=ve)}},isSupported:function(fe,ve){return this.ownerDocument.implementation.hasFeature(fe,ve)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(fe){for(var ve=this;ve;){var Ae=ve._nsMap;if(Ae)for(var Ke in Ae)if(Object.prototype.hasOwnProperty.call(Ae,Ke)&&Ae[Ke]===fe)return Ke;ve=ve.nodeType==F?ve.ownerDocument:ve.parentNode}return null},lookupNamespaceURI:function(fe){for(var ve=this;ve;){var Ae=ve._nsMap;if(Ae&&fe in Ae&&Object.prototype.hasOwnProperty.call(Ae,fe))return Ae[fe];ve=ve.nodeType==F?ve.ownerDocument:ve.parentNode}return null},isDefaultNamespace:function(fe){return null==this.lookupPrefix(fe)}},q(Y,ot),q(Y,ot.prototype),nt.prototype={nodeName:"#document",nodeType:g,doctype:null,documentElement:null,_inc:1,insertBefore:function(fe,ve){if(fe.nodeType==S){for(var Ae=fe.firstChild;Ae;){var Ke=Ae.nextSibling;this.insertBefore(Ae,ve),Ae=Ke}return fe}return Le(this,fe,ve),fe.ownerDocument=this,null===this.documentElement&&fe.nodeType===B&&(this.documentElement=fe),fe},removeChild:function(fe){return this.documentElement==fe&&(this.documentElement=null),tr(this,fe)},replaceChild:function(fe,ve){Le(this,fe,ve,be),fe.ownerDocument=this,ve&&this.removeChild(ve),fr(fe)&&(this.documentElement=fe)},importNode:function(fe,ve){return ca(this,fe,ve)},getElementById:function(fe){var ve=null;return Ct(this.documentElement,function(Ae){if(Ae.nodeType==B&&Ae.getAttribute("id")==fe)return ve=Ae,!0}),ve},getElementsByClassName:function(fe){var ve=G(fe);return new we(this,function(Ae){var Ke=[];return ve.length>0&&Ct(Ae.documentElement,function(gt){if(gt!==Ae&&gt.nodeType===B){var Mt=gt.getAttribute("class");if(Mt){var Yt=fe===Mt;if(!Yt){var Xr=G(Mt);Yt=ve.every(function V(fe){return function(ve){return fe&&-1!==fe.indexOf(ve)}}(Xr))}Yt&&Ke.push(gt)}}}),Ke})},createElement:function(fe){var ve=new Ve;return ve.ownerDocument=this,ve.nodeName=fe,ve.tagName=fe,ve.localName=fe,ve.childNodes=new Ce,(ve.attributes=new Ze)._ownerElement=ve,ve},createDocumentFragment:function(){var fe=new Pi;return fe.ownerDocument=this,fe.childNodes=new Ce,fe},createTextNode:function(fe){var ve=new Bt;return ve.ownerDocument=this,ve.appendData(fe),ve},createComment:function(fe){var ve=new jt;return ve.ownerDocument=this,ve.appendData(fe),ve},createCDATASection:function(fe){var ve=new Qt;return ve.ownerDocument=this,ve.appendData(fe),ve},createProcessingInstruction:function(fe,ve){var Ae=new pi;return Ae.ownerDocument=this,Ae.tagName=Ae.target=fe,Ae.nodeValue=Ae.data=ve,Ae},createAttribute:function(fe){var ve=new Pt;return ve.ownerDocument=this,ve.name=fe,ve.nodeName=fe,ve.localName=fe,ve.specified=!0,ve},createEntityReference:function(fe){var ve=new un;return ve.ownerDocument=this,ve.nodeName=fe,ve},createElementNS:function(fe,ve){var Ae=new Ve,Ke=ve.split(":"),gt=Ae.attributes=new Ze;return Ae.childNodes=new Ce,Ae.ownerDocument=this,Ae.nodeName=ve,Ae.tagName=ve,Ae.namespaceURI=fe,2==Ke.length?(Ae.prefix=Ke[0],Ae.localName=Ke[1]):Ae.localName=ve,gt._ownerElement=Ae,Ae},createAttributeNS:function(fe,ve){var Ae=new Pt,Ke=ve.split(":");return Ae.ownerDocument=this,Ae.nodeName=ve,Ae.name=ve,Ae.namespaceURI=fe,Ae.specified=!0,2==Ke.length?(Ae.prefix=Ke[0],Ae.localName=Ke[1]):Ae.localName=ve,Ae}},u(nt,ot),nt.prototype.getElementsByTagName=(Ve.prototype={nodeType:B,hasAttribute:function(fe){return null!=this.getAttributeNode(fe)},getAttribute:function(fe){var ve=this.getAttributeNode(fe);return ve&&ve.value||""},getAttributeNode:function(fe){return this.attributes.getNamedItem(fe)},setAttribute:function(fe,ve){var Ae=this.ownerDocument.createAttribute(fe);Ae.value=Ae.nodeValue=""+ve,this.setAttributeNode(Ae)},removeAttribute:function(fe){var ve=this.getAttributeNode(fe);ve&&this.removeAttributeNode(ve)},appendChild:function(fe){return fe.nodeType===S?this.insertBefore(fe,null):function He(fe,ve){return ve.parentNode&&ve.parentNode.removeChild(ve),ve.parentNode=fe,ve.previousSibling=fe.lastChild,ve.nextSibling=null,ve.previousSibling?ve.previousSibling.nextSibling=ve:fe.firstChild=ve,fe.lastChild=ve,Ut(fe.ownerDocument,fe,ve),ve}(this,fe)},setAttributeNode:function(fe){return this.attributes.setNamedItem(fe)},setAttributeNodeNS:function(fe){return this.attributes.setNamedItemNS(fe)},removeAttributeNode:function(fe){return this.attributes.removeNamedItem(fe.nodeName)},removeAttributeNS:function(fe,ve){var Ae=this.getAttributeNodeNS(fe,ve);Ae&&this.removeAttributeNode(Ae)},hasAttributeNS:function(fe,ve){return null!=this.getAttributeNodeNS(fe,ve)},getAttributeNS:function(fe,ve){var Ae=this.getAttributeNodeNS(fe,ve);return Ae&&Ae.value||""},setAttributeNS:function(fe,ve,Ae){var Ke=this.ownerDocument.createAttributeNS(fe,ve);Ke.value=Ke.nodeValue=""+Ae,this.setAttributeNode(Ke)},getAttributeNodeNS:function(fe,ve){return this.attributes.getNamedItemNS(fe,ve)},getElementsByTagName:function(fe){return new we(this,function(ve){var Ae=[];return Ct(ve,function(Ke){Ke!==ve&&Ke.nodeType==B&&("*"===fe||Ke.tagName==fe)&&Ae.push(Ke)}),Ae})},getElementsByTagNameNS:function(fe,ve){return new we(this,function(Ae){var Ke=[];return Ct(Ae,function(gt){gt!==Ae&&gt.nodeType===B&&("*"===fe||gt.namespaceURI===fe)&&("*"===ve||gt.localName==ve)&&Ke.push(gt)}),Ke})}}).getElementsByTagName,nt.prototype.getElementsByTagNameNS=Ve.prototype.getElementsByTagNameNS,u(Ve,ot),Pt.prototype.nodeType=F,u(Pt,ot),Zt.prototype={data:"",substringData:function(fe,ve){return this.data.substring(fe,fe+ve)},appendData:function(fe){this.nodeValue=this.data=fe=this.data+fe,this.length=fe.length},insertData:function(fe,ve){this.replaceData(fe,0,ve)},appendChild:function(fe){throw new Error(_[d])},deleteData:function(fe,ve){this.replaceData(fe,ve,"")},replaceData:function(fe,ve,Ae){var Ke=this.data.substring(0,fe),gt=this.data.substring(fe+ve);this.nodeValue=this.data=Ae=Ke+Ae+gt,this.length=Ae.length}},u(Zt,ot),Bt.prototype={nodeName:"#text",nodeType:O,splitText:function(fe){var ve=this.data,Ae=ve.substring(fe);ve=ve.substring(0,fe),this.data=this.nodeValue=ve,this.length=ve.length;var Ke=this.ownerDocument.createTextNode(Ae);return this.parentNode&&this.parentNode.insertBefore(Ke,this.nextSibling),Ke}},u(Bt,Zt),jt.prototype={nodeName:"#comment",nodeType:b},u(jt,Zt),Qt.prototype={nodeName:"#cdata-section",nodeType:W},u(Qt,Zt),nn.prototype.nodeType=v,u(nn,ot),Wn.prototype.nodeType=w,u(Wn,ot),In.prototype.nodeType=R,u(In,ot),un.prototype.nodeType=U,u(un,ot),Pi.prototype.nodeName="#document-fragment",Pi.prototype.nodeType=S,u(Pi,ot),pi.prototype.nodeType=M,u(pi,ot),Gn.prototype.serializeToString=function(fe,ve,Ae){return Vn.call(fe,ve,Ae)},ot.prototype.toString=Vn;try{if(Object.defineProperty){let fe=function(ve){switch(ve.nodeType){case B:case S:var Ae=[];for(ve=ve.firstChild;ve;)7!==ve.nodeType&&8!==ve.nodeType&&Ae.push(fe(ve)),ve=ve.nextSibling;return Ae.join("");default:return ve.nodeValue}};Object.defineProperty(we.prototype,"length",{get:function(){return Be(this),this.$$length}}),Object.defineProperty(ot.prototype,"textContent",{get:function(){return fe(this)},set:function(ve){switch(this.nodeType){case B:case S:for(;this.firstChild;)this.removeChild(this.firstChild);(ve||String(ve))&&this.appendChild(this.ownerDocument.createTextNode(ve));break;default:this.data=ve,this.value=ve,this.nodeValue=ve}}}),Oi=function(ve,Ae,Ke){ve["$$"+Ae]=Ke}}}catch{}dt.DocumentType=nn,dt.DOMException=ye,dt.DOMImplementation=_t,dt.Element=Ve,dt.Node=ot,dt.NodeList=Ce,dt.XMLSerializer=Gn},64436:(ft,dt,Ne)=>{"use strict";var Ge=Ne(59401).freeze;dt.XML_ENTITIES=Ge({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),dt.HTML_ENTITIES=Ge({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),dt.entityMap=dt.HTML_ENTITIES},50978:(ft,dt,Ne)=>{Ne(26853);dt.DOMParser=Ne(91991).DOMParser},68702:(ft,dt,Ne)=>{var Ge=Ne(59401).NAMESPACE,de=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Se=new RegExp("[\\-\\.0-9"+de.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ue=new RegExp("^"+de.source+Se.source+"*(?::"+de.source+Se.source+"*)?$");function F(c,h){this.message=c,this.locator=h,Error.captureStackTrace&&Error.captureStackTrace(this,F)}function O(){}function U(c,h){return h.lineNumber=c.lineNumber,h.columnNumber=c.columnNumber,h}function R(c,h,d,P,m,C){function x(oe,Te,ye){d.attributeNames.hasOwnProperty(oe)&&C.fatalError("Attribute "+oe+" redefined"),d.addValue(oe,Te,ye)}for(var T,L=++h,Z=0;;){var re=c.charAt(L);switch(re){case"=":if(1===Z)T=c.slice(h,L),Z=3;else{if(2!==Z)throw new Error("attribute equal must after attrName");Z=3}break;case"'":case'"':if(3===Z||1===Z){if(1===Z&&(C.warning('attribute value must after "="'),T=c.slice(h,L)),!((L=c.indexOf(re,h=L+1))>0))throw new Error("attribute value no end '"+re+"' match");x(T,I=c.slice(h,L).replace(/&#?\w+;/g,m),h-1),Z=5}else{if(4!=Z)throw new Error('attribute value must after "="');x(T,I=c.slice(h,L).replace(/&#?\w+;/g,m),h),C.warning('attribute "'+T+'" missed start quot('+re+")!!"),h=L+1,Z=5}break;case"/":switch(Z){case 0:d.setTagName(c.slice(h,L));case 5:case 6:case 7:Z=7,d.closed=!0;case 4:case 1:break;case 2:d.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return C.error("unexpected end of input"),0==Z&&d.setTagName(c.slice(h,L)),L;case">":switch(Z){case 0:d.setTagName(c.slice(h,L));case 5:case 6:case 7:break;case 4:case 1:"/"===(I=c.slice(h,L)).slice(-1)&&(d.closed=!0,I=I.slice(0,-1));case 2:2===Z&&(I=T),4==Z?(C.warning('attribute "'+I+'" missed quot(")!'),x(T,I.replace(/&#?\w+;/g,m),h)):((!Ge.isHTML(P[""])||!I.match(/^(?:disabled|checked|selected)$/i))&&C.warning('attribute "'+I+'" missed value!! "'+I+'" instead!!'),x(I,I,h));break;case 3:throw new Error("attribute value missed!!")}return L;case"\x80":re=" ";default:if(re<=" ")switch(Z){case 0:d.setTagName(c.slice(h,L)),Z=6;break;case 1:T=c.slice(h,L),Z=2;break;case 4:var I=c.slice(h,L).replace(/&#?\w+;/g,m);C.warning('attribute "'+I+'" missed quot(")!!'),x(T,I,h);case 5:Z=6}else switch(Z){case 2:(!Ge.isHTML(P[""])||!T.match(/^(?:disabled|checked|selected)$/i))&&C.warning('attribute "'+T+'" missed value!! "'+T+'" instead2!!'),x(T,T,h),h=L,Z=1;break;case 5:C.warning('attribute space is required"'+T+'"!!');case 6:Z=1,h=L;break;case 3:Z=4,h=L;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}L++}}function M(c,h,d){for(var P=c.tagName,m=null,re=c.length;re--;){var C=c[re],x=C.qName,T=C.value;if((ne=x.indexOf(":"))>0)var I=C.prefix=x.slice(0,ne),L=x.slice(ne+1),Z="xmlns"===I&&L;else L=x,I=null,Z="xmlns"===x&&"";C.localName=L,!1!==Z&&(null==m&&(m={},v(d,d={})),d[Z]=m[Z]=T,C.uri=Ge.XMLNS,h.startPrefixMapping(Z,T))}for(re=c.length;re--;)(I=(C=c[re]).prefix)&&("xml"===I&&(C.uri=Ge.XML),"xmlns"!==I&&(C.uri=d[I||""]));var ne;(ne=P.indexOf(":"))>0?(I=c.prefix=P.slice(0,ne),L=c.localName=P.slice(ne+1)):(I=null,L=c.localName=P);var oe=c.uri=d[I||""];if(h.startElement(oe,L,P,c),!c.closed)return c.currentNSMap=d,c.localNSMap=m,!0;if(h.endElement(oe,L,P),m)for(I in m)Object.prototype.hasOwnProperty.call(m,I)&&h.endPrefixMapping(I)}function b(c,h,d,P,m){if(/^(?:script|textarea)$/i.test(d)){var C=c.indexOf("</"+d+">",h),x=c.substring(h+1,C);if(/[&<]/.test(x))return/^script$/i.test(d)?(m.characters(x,0,x.length),C):(x=x.replace(/&#?\w+;/g,P),m.characters(x,0,x.length),C)}return h+1}function g(c,h,d,P){var m=P[d];return null==m&&((m=c.lastIndexOf("</"+d+">"))<h&&(m=c.lastIndexOf("</"+d)),P[d]=m),m<h}function v(c,h){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(h[d]=c[d])}function S(c,h,d,P){if("-"===c.charAt(h+2))return"-"===c.charAt(h+3)?(C=c.indexOf("--\x3e",h+4))>h?(d.comment(c,h+4,C-h-4),C+3):(P.error("Unclosed comment"),-1):-1;if("CDATA["==c.substr(h+3,6)){var C=c.indexOf("]]>",h+9);return d.startCDATA(),d.characters(c,h+9,C-h-9),d.endCDATA(),C+3}var x=function _(c,h){var d,P=[],m=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(m.lastIndex=h,m.exec(c);d=m.exec(c);)if(P.push(d),d[1])return P}(c,h),T=x.length;if(T>1&&/!doctype/i.test(x[0][0])){var I=x[1][0],L=!1,Z=!1;T>3&&(/^public$/i.test(x[2][0])?(L=x[3][0],Z=T>4&&x[4][0]):/^system$/i.test(x[2][0])&&(Z=x[3][0]));var re=x[T-1];return d.startDTD(I,L,Z),d.endDTD(),re.index+re[0].length}return-1}function w(c,h,d){var P=c.indexOf("?>",h);if(P){var m=c.substring(h,P).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return m?(d.processingInstruction(m[1],m[2]),P+2):-1}return-1}function E(){this.attributeNames={}}(F.prototype=new Error).name=F.name,O.prototype={parse:function(c,h,d){var P=this.domBuilder;P.startDocument(),v(h,h={}),function W(c,h,d,P,m){function x(It){var Xt=It.slice(1,-1);return Xt in d?d[Xt]:"#"===Xt.charAt(0)?function C(It){return It>65535?(It-=65536,String.fromCharCode(55296+(It>>10),56320+(1023&It))):String.fromCharCode(It)}(parseInt(Xt.substr(1).replace("x","0x"))):(m.error("entity not found:"+It),It)}function T(It){if(It>ye){var Xt=c.substring(ye,It).replace(/&#?\w+;/g,x);ne&&I(ye),P.characters(Xt,0,It-ye),ye=It}}function I(It,Xt){for(;It>=Z&&(Xt=re.exec(c));)Z=(L=Xt.index)+Xt[0].length,ne.lineNumber++;ne.columnNumber=It-L+1}for(var L=0,Z=0,re=/.*(?:\r\n?|\n)|.*$/g,ne=P.locator,oe=[{currentNSMap:h}],Te={},ye=0;;){try{var Ce=c.indexOf("<",ye);if(Ce<0){if(!c.substr(ye).match(/^\s*$/)){var we=P.doc,Be=we.createTextNode(c.substr(ye));we.appendChild(Be),P.currentElement=Be}return}switch(Ce>ye&&T(Ce),c.charAt(Ce+1)){case"/":var nt=c.indexOf(">",Ce+3),Ze=c.substring(Ce+2,nt).replace(/[ \t\n\r]+$/g,""),st=oe.pop();nt<0?(Ze=c.substring(Ce+2).replace(/[\s<].*/,""),m.error("end tag name: "+Ze+" is not complete:"+st.tagName),nt=Ce+1+Ze.length):Ze.match(/\s</)&&(Ze=Ze.replace(/[\s<].*/,""),m.error("end tag name: "+Ze+" maybe not complete"),nt=Ce+1+Ze.length);var ct=st.localNSMap,yt=st.tagName==Ze;if(yt||st.tagName&&st.tagName.toLowerCase()==Ze.toLowerCase()){if(P.endElement(st.uri,st.localName,Ze),ct)for(var ot in ct)Object.prototype.hasOwnProperty.call(ct,ot)&&P.endPrefixMapping(ot);yt||m.fatalError("end tag name: "+Ze+" is not match the current start tagName:"+st.tagName)}else oe.push(st);nt++;break;case"?":ne&&I(Ce),nt=w(c,Ce,P);break;case"!":ne&&I(Ce),nt=S(c,Ce,P,m);break;default:ne&&I(Ce);var bt=new E,Ct=oe[oe.length-1].currentNSMap,Ht=(nt=R(c,Ce,bt,Ct,x,m),bt.length);if(!bt.closed&&g(c,nt,bt.tagName,Te)&&(bt.closed=!0,d.nbsp||m.warning("unclosed xml attribute")),ne&&Ht){for(var Kt=U(ne,{}),Ut=0;Ut<Ht;Ut++){var tr=bt[Ut];I(tr.offset),tr.locator=U(ne,{})}P.locator=Kt,M(bt,P,Ct)&&oe.push(bt),P.locator=ne}else M(bt,P,Ct)&&oe.push(bt);Ge.isHTML(bt.uri)&&!bt.closed?nt=b(c,nt,bt.tagName,x,P):nt++}}catch(It){if(It instanceof F)throw It;m.error("element parse error: "+It),nt=-1}nt>ye?ye=nt:T(Math.max(Ce,ye)+1)}}(c,h,d,P,this.errorHandler),P.endDocument()}},E.prototype={setTagName:function(c){if(!ue.test(c))throw new Error("invalid tagName:"+c);this.tagName=c},addValue:function(c,h,d){if(!ue.test(c))throw new Error("invalid attribute:"+c);this.attributeNames[c]=this.length,this[this.length++]={qName:c,value:h,offset:d}},length:0,getLocalName:function(c){return this[c].localName},getLocator:function(c){return this[c].locator},getQName:function(c){return this[c].qName},getURI:function(c){return this[c].uri},getValue:function(c){return this[c].value}},dt.XMLReader=O,dt.ParseError=F},5343:(ft,dt)=>{"use strict";dt.byteLength=function G(F){var O=ee(F),U=O[1];return 3*(O[0]+U)/4-U},dt.toByteArray=function q(F){var O,v,W=ee(F),U=W[0],R=W[1],M=new de(function V(F,O,W){return 3*(O+W)/4-W}(0,U,R)),b=0,g=R>0?U-4:U;for(v=0;v<g;v+=4)O=Ge[F.charCodeAt(v)]<<18|Ge[F.charCodeAt(v+1)]<<12|Ge[F.charCodeAt(v+2)]<<6|Ge[F.charCodeAt(v+3)],M[b++]=O>>16&255,M[b++]=O>>8&255,M[b++]=255&O;return 2===R&&(O=Ge[F.charCodeAt(v)]<<2|Ge[F.charCodeAt(v+1)]>>4,M[b++]=255&O),1===R&&(O=Ge[F.charCodeAt(v)]<<10|Ge[F.charCodeAt(v+1)]<<4|Ge[F.charCodeAt(v+2)]>>2,M[b++]=O>>8&255,M[b++]=255&O),M},dt.fromByteArray=function B(F){for(var O,W=F.length,U=W%3,R=[],M=16383,b=0,g=W-U;b<g;b+=M)R.push(Y(F,b,b+M>g?g:b+M));return 1===U?R.push(Ne[(O=F[W-1])>>2]+Ne[O<<4&63]+"=="):2===U&&R.push(Ne[(O=(F[W-2]<<8)+F[W-1])>>10]+Ne[O>>4&63]+Ne[O<<2&63]+"="),R.join("")};for(var Ne=[],Ge=[],de=typeof Uint8Array<"u"?Uint8Array:Array,Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue=0,N=Se.length;ue<N;++ue)Ne[ue]=Se[ue],Ge[Se.charCodeAt(ue)]=ue;function ee(F){var O=F.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var W=F.indexOf("=");return-1===W&&(W=O),[W,W===O?0:4-W%4]}function u(F){return Ne[F>>18&63]+Ne[F>>12&63]+Ne[F>>6&63]+Ne[63&F]}function Y(F,O,W){for(var R=[],M=O;M<W;M+=3)R.push(u((F[M]<<16&16711680)+(F[M+1]<<8&65280)+(255&F[M+2])));return R.join("")}Ge["-".charCodeAt(0)]=62,Ge["_".charCodeAt(0)]=63},11421:(ft,dt,Ne)=>{var Se,Ge=typeof global<"u"?global:typeof window<"u"?window:{},de=Ne(25893);typeof document<"u"?Se=document:(Se=Ge["__GLOBAL_DOCUMENT_CACHE@4"])||(Se=Ge["__GLOBAL_DOCUMENT_CACHE@4"]=de),ft.exports=Se},69226:ft=>{var dt;dt=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft.exports=dt},22070:function(ft){var Ge;typeof window<"u"&&(Ge=()=>(()=>{var dt={"./src/config.ts":
/*!***********************!*\
                !*** ./src/config.ts ***!
                \***********************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{enableStreamingMode:()=>P,hlsDefaultConfig:()=>c,mergeConfig:()=>d});var ee=N(
/*! ./controller/abr-controller */
"./src/controller/abr-controller.ts"),G=N(
/*! ./controller/audio-stream-controller */
"./src/controller/audio-stream-controller.ts"),V=N(
/*! ./controller/audio-track-controller */
"./src/controller/audio-track-controller.ts"),q=N(
/*! ./controller/subtitle-stream-controller */
"./src/controller/subtitle-stream-controller.ts"),u=N(
/*! ./controller/subtitle-track-controller */
"./src/controller/subtitle-track-controller.ts"),Y=N(
/*! ./controller/buffer-controller */
"./src/controller/buffer-controller.ts"),B=N(
/*! ./controller/timeline-controller */
"./src/controller/timeline-controller.ts"),F=N(
/*! ./controller/cap-level-controller */
"./src/controller/cap-level-controller.ts"),O=N(
/*! ./controller/fps-controller */
"./src/controller/fps-controller.ts"),W=N(
/*! ./controller/eme-controller */
"./src/controller/eme-controller.ts"),U=N(
/*! ./controller/cmcd-controller */
"./src/controller/cmcd-controller.ts"),R=N(
/*! ./utils/xhr-loader */
"./src/utils/xhr-loader.ts"),M=N(
/*! ./utils/fetch-loader */
"./src/utils/fetch-loader.ts"),b=N(
/*! ./utils/cues */
"./src/utils/cues.ts"),g=N(
/*! ./utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts"),v=N(
/*! ./utils/logger */
"./src/utils/logger.ts");function S(){return S=Object.assign?Object.assign.bind():function(m){for(var C=1;C<arguments.length;C++){var x=arguments[C];for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(m[T]=x[T])}return m},S.apply(this,arguments)}function w(m,C){var x=Object.keys(m);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(m);C&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(m,I).enumerable})),x.push.apply(x,T)}return x}function E(m){for(var C=1;C<arguments.length;C++){var x=null!=arguments[C]?arguments[C]:{};C%2?w(Object(x),!0).forEach(function(T){_(m,T,x[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(x)):w(Object(x)).forEach(function(T){Object.defineProperty(m,T,Object.getOwnPropertyDescriptor(x,T))})}return m}function _(m,C,x){return C in m?Object.defineProperty(m,C,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[C]=x,m}var c=E(E({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:R.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:ee.default,bufferController:Y.default,capLevelController:F.default,fpsController:O.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},function h(){return{cueHandler:b.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:q.SubtitleStreamController,subtitleTrackController:u.default,timelineController:B.TimelineController,audioStreamController:G.default,audioTrackController:V.default,emeController:W.default,cmcdController:U.default});function d(m,C){if((C.liveSyncDurationCount||C.liveMaxLatencyDurationCount)&&(C.liveSyncDuration||C.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==C.liveMaxLatencyDurationCount&&(void 0===C.liveSyncDurationCount||C.liveMaxLatencyDurationCount<=C.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==C.liveMaxLatencyDuration&&(void 0===C.liveSyncDuration||C.liveMaxLatencyDuration<=C.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return S({},m,C)}function P(m){var C=m.loader;C!==M.default&&C!==R.default?(v.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),m.progressive=!1):(0,M.fetchSupported)()&&(m.loader=M.default,m.progressive=!0,m.enableSoftwareAES=!0,v.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
                !*** ./src/controller/abr-controller.ts ***!
                \******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>W});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../utils/ewma-bandwidth-estimator */
"./src/utils/ewma-bandwidth-estimator.ts"),V=N(
/*! ../events */
"./src/events.ts"),q=N(
/*! ../errors */
"./src/errors.ts"),u=N(
/*! ../types/loader */
"./src/types/loader.ts"),Y=N(
/*! ../utils/logger */
"./src/utils/logger.ts");function B(U,R){for(var M=0;M<R.length;M++){var b=R[M];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,b.key,b)}}const W=function(){function U(M){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=M;var b=M.config;this.bwEstimator=new G.default(b.abrEwmaSlowVoD,b.abrEwmaFastVoD,b.abrEwmaDefaultEstimate),this.registerListeners()}var R=U.prototype;return R.registerListeners=function(){var b=this.hls;b.on(V.Events.FRAG_LOADING,this.onFragLoading,this),b.on(V.Events.FRAG_LOADED,this.onFragLoaded,this),b.on(V.Events.FRAG_BUFFERED,this.onFragBuffered,this),b.on(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),b.on(V.Events.ERROR,this.onError,this)},R.unregisterListeners=function(){var b=this.hls;b.off(V.Events.FRAG_LOADING,this.onFragLoading,this),b.off(V.Events.FRAG_LOADED,this.onFragLoaded,this),b.off(V.Events.FRAG_BUFFERED,this.onFragBuffered,this),b.off(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),b.off(V.Events.ERROR,this.onError,this)},R.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},R.onFragLoading=function(b,g){var S,v=g.frag;v.type!==u.PlaylistLevelType.MAIN||this.timer||(this.fragCurrent=v,this.partCurrent=null!=(S=g.part)?S:null,this.timer=self.setInterval(this.onCheck,100))},R.onLevelLoaded=function(b,g){var v=this.hls.config;g.details.live?this.bwEstimator.update(v.abrEwmaSlowLive,v.abrEwmaFastLive):this.bwEstimator.update(v.abrEwmaSlowVoD,v.abrEwmaFastVoD)},R._abandonRulesCheck=function(){var b=this.fragCurrent,g=this.partCurrent,v=this.hls,S=v.autoLevelEnabled,E=v.media;if(b&&E){var _=g?g.stats:b.stats,c=g?g.duration:b.duration;if(_.aborted||_.loaded&&_.loaded===_.total||0===b.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(S&&!E.paused&&E.playbackRate&&E.readyState){var h=v.mainForwardBufferInfo;if(null!==h){var d=performance.now()-_.loading.start,P=Math.abs(E.playbackRate);if(!(d<=500*c/P)){var m=_.loaded&&_.loading.first,C=this.bwEstimator.getEstimate(),x=v.levels,T=v.minAutoLevel,L=_.total||Math.max(_.loaded,Math.round(c*x[b.level].maxBitrate/8)),Z=m?1e3*_.loaded/d:0,re=Z?(L-_.loaded)/Z:8*L/C,ne=h.len/P;if(!(re<=ne)){var Te,oe=Number.POSITIVE_INFINITY;for(Te=b.level-1;Te>T;Te--){var ye=x[Te].maxBitrate;if((oe=Z?c*ye/(6.4*Z):c*ye/C)<ne)break}oe>=re||(Y.logger.warn("Fragment "+b.sn+(g?" part "+g.index:"")+" of level "+b.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+Te+"\n      Current BW estimate: "+((0,ee.isFiniteNumber)(C)?(C/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+re.toFixed(3)+" s\n      Estimated load time for the next fragment: "+oe.toFixed(3)+" s\n      Time to underbuffer: "+ne.toFixed(3)+" s"),v.nextLoadLevel=Te,m&&this.bwEstimator.sample(d,_.loaded),this.clearTimer(),b.loader&&(this.fragCurrent=this.partCurrent=null,b.loader.abort()),v.trigger(V.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:b,part:g,stats:_}))}}}}}},R.onFragLoaded=function(b,g){var v=g.frag,S=g.part;if(v.type===u.PlaylistLevelType.MAIN&&(0,ee.isFiniteNumber)(v.sn)){var w=S?S.stats:v.stats,E=S?S.duration:v.duration;if(this.clearTimer(),this.lastLoadedFragLevel=v.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var _=this.hls.levels[v.level],c=(_.loaded?_.loaded.bytes:0)+w.loaded,h=(_.loaded?_.loaded.duration:0)+E;_.loaded={bytes:c,duration:h},_.realBitrate=Math.round(8*c/h)}v.bitrateTest&&this.onFragBuffered(V.Events.FRAG_BUFFERED,{stats:w,frag:v,part:S,id:v.type})}},R.onFragBuffered=function(b,g){var v=g.frag,S=g.part,w=S?S.stats:v.stats;if(!w.aborted&&v.type===u.PlaylistLevelType.MAIN&&"initSegment"!==v.sn){var E=w.parsing.end-w.loading.start;this.bwEstimator.sample(E,w.loaded),w.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=v.bitrateTest?E/1e3:0}},R.onError=function(b,g){switch(g.details){case q.ErrorDetails.FRAG_LOAD_ERROR:case q.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},R.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},R.getNextABRAutoLevel=function(){var b=this.fragCurrent,g=this.partCurrent,v=this.hls,S=v.maxAutoLevel,w=v.config,E=v.minAutoLevel,_=v.media,c=g?g.duration:b?b.duration:0,d=_&&0!==_.playbackRate?Math.abs(_.playbackRate):1,P=this.bwEstimator?this.bwEstimator.getEstimate():w.abrEwmaDefaultEstimate,m=v.mainForwardBufferInfo,C=(m?m.len:0)/d,x=this.findBestLevel(P,E,S,C,w.abrBandWidthFactor,w.abrBandWidthUpFactor);if(x>=0)return x;Y.logger.trace((C?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var T=c?Math.min(c,w.maxStarvationDelay):w.maxStarvationDelay,I=w.abrBandWidthFactor,L=w.abrBandWidthUpFactor;if(!C){var Z=this.bitrateTestDelay;Z&&(T=(c?Math.min(c,w.maxLoadingDelay):w.maxLoadingDelay)-Z,Y.logger.trace("bitrate test took "+Math.round(1e3*Z)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*T)+" ms"),I=L=1)}return x=this.findBestLevel(P,E,S,C+T,I,L),Math.max(x,0)},R.findBestLevel=function(b,g,v,S,w,E){for(var _,c=this.fragCurrent,h=this.partCurrent,d=this.lastLoadedFragLevel,P=this.hls.levels,m=P[d],C=!(null==m||null===(_=m.details)||void 0===_||!_.live),x=m?.codecSet,T=h?h.duration:c?c.duration:0,I=v;I>=g;I--){var L=P[I];if(L&&(!x||L.codecSet===x)){var ne,Z=L.details,re=(h?Z?.partTarget:Z?.averagetargetduration)||T,oe=P[I].maxBitrate,Te=oe*re/(ne=I<=d?w*b:E*b);if(Y.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+I+"/"+Math.round(ne)+"/"+oe+"/"+re+"/"+S+"/"+Te),ne>oe&&(0===Te||!(0,ee.isFiniteNumber)(Te)||C&&!this.bitrateTestDelay||Te<S))return I}}return-1},function F(U,R,M){R&&B(U.prototype,R),M&&B(U,M),Object.defineProperty(U,"prototype",{writable:!1})}(U,[{key:"nextAutoLevel",get:function(){var b=this._nextAutoLevel;if(-1!==b&&!this.bwEstimator.canEstimate())return b;var v=this.getNextABRAutoLevel();return-1!==b&&this.hls.levels[v].loadError?b:(-1!==b&&(v=Math.min(b,v)),v)},set:function(b){this._nextAutoLevel=b}}]),U}()},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
                !*** ./src/controller/audio-stream-controller.ts ***!
                \***************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>_});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),V=N(
/*! ../events */
"./src/events.ts"),q=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),u=N(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),Y=N(
/*! ../types/level */
"./src/types/level.ts"),B=N(
/*! ../types/loader */
"./src/types/loader.ts"),F=N(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),O=N(
/*! ../demux/chunk-cache */
"./src/demux/chunk-cache.ts"),W=N(
/*! ../demux/transmuxer-interface */
"./src/demux/transmuxer-interface.ts"),U=N(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),R=N(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),M=N(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),b=N(
/*! ../errors */
"./src/errors.ts");function g(){return g=Object.assign?Object.assign.bind():function(c){for(var h=1;h<arguments.length;h++){var d=arguments[h];for(var P in d)Object.prototype.hasOwnProperty.call(d,P)&&(c[P]=d[P])}return c},g.apply(this,arguments)}function S(c,h){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,m){return P.__proto__=m,P})(c,h)}const _=function(c){function h(P,m){var C;return(C=c.call(this,P,m,"[audio-stream-controller]")||this).videoBuffer=null,C.videoTrackCC=-1,C.waitingVideoCC=-1,C.audioSwitch=!1,C.trackId=-1,C.waitingData=null,C.mainDetails=null,C.bufferFlushed=!1,C.cachedTrackLoadedData=null,C._registerListeners(),C}!function v(c,h){c.prototype=Object.create(h.prototype),c.prototype.constructor=c,S(c,h)}(h,c);var d=h.prototype;return d.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},d._registerListeners=function(){var m=this.hls;m.on(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),m.on(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.on(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),m.on(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.on(V.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),m.on(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),m.on(V.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),m.on(V.Events.ERROR,this.onError,this),m.on(V.Events.BUFFER_RESET,this.onBufferReset,this),m.on(V.Events.BUFFER_CREATED,this.onBufferCreated,this),m.on(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),m.on(V.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),m.on(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},d._unregisterListeners=function(){var m=this.hls;m.off(V.Events.MEDIA_ATTACHED,this.onMediaAttached,this),m.off(V.Events.MEDIA_DETACHING,this.onMediaDetaching,this),m.off(V.Events.MANIFEST_LOADING,this.onManifestLoading,this),m.off(V.Events.LEVEL_LOADED,this.onLevelLoaded,this),m.off(V.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),m.off(V.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),m.off(V.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),m.off(V.Events.ERROR,this.onError,this),m.off(V.Events.BUFFER_RESET,this.onBufferReset,this),m.off(V.Events.BUFFER_CREATED,this.onBufferCreated,this),m.off(V.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),m.off(V.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),m.off(V.Events.FRAG_BUFFERED,this.onFragBuffered,this)},d.onInitPtsFound=function(m,C){var x=C.frag,I=C.initPTS;if("main"===C.id){var L=x.cc;this.initPTS[x.cc]=I,this.log("InitPTS for cc: "+L+" found from main: "+I),this.videoTrackCC=L,this.state===G.State.WAITING_INIT_PTS&&this.tick()}},d.startLoad=function(m){if(!this.levels)return this.startPosition=m,void(this.state=G.State.STOPPED);var C=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,C>0&&-1===m?(this.log("Override startPosition with lastCurrentTime @"+C.toFixed(3)),m=C,this.state=G.State.IDLE):(this.loadedmetadata=!1,this.state=G.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=m,this.tick()},d.doTick=function(){switch(this.state){case G.State.IDLE:this.doTickIdle();break;case G.State.WAITING_TRACK:var m,C=this.levels,T=null==C||null===(m=C[this.trackId])||void 0===m?void 0:m.details;if(T){if(this.waitForCdnTuneIn(T))break;this.state=G.State.WAITING_INIT_PTS}break;case G.State.FRAG_LOADING_WAITING_RETRY:var I,L=performance.now(),Z=this.retryDate;(!Z||L>=Z||null!==(I=this.media)&&void 0!==I&&I.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=G.State.IDLE);break;case G.State.WAITING_INIT_PTS:var re=this.waitingData;if(re){var ne=re.frag,oe=re.part,Te=re.cache,ye=re.complete;if(void 0!==this.initPTS[ne.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=G.State.FRAG_LOADING;var we={frag:ne,part:oe,payload:Te.flush(),networkDetails:null};this._handleFragmentLoadProgress(we),ye&&c.prototype._handleFragmentLoadComplete.call(this,we)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+ne.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Be=this.getLoadPosition(),Ze=q.BufferHelper.bufferInfo(this.mediaBuffer,Be,this.config.maxBufferHole);(0,R.fragmentWithinToleranceTest)(Ze.end,this.config.maxFragLookUpTolerance,ne)<0&&(this.log("Waiting fragment cc ("+ne.cc+") @ "+ne.start+" cancelled because another fragment at "+Ze.end+" is needed"),this.clearWaitingFragment())}}else this.state=G.State.IDLE}this.onTickEnd()},d.clearWaitingFragment=function(){var m=this.waitingData;m&&(this.fragmentTracker.removeFragment(m.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=G.State.IDLE)},d.resetLoadingState=function(){this.clearWaitingFragment(),c.prototype.resetLoadingState.call(this)},d.onTickEnd=function(){var m=this.media;m&&m.readyState&&(!this.loadedmetadata&&(this.mediaBuffer?this.mediaBuffer:m).buffered.length&&(this.loadedmetadata=!0),this.lastCurrentTime=m.currentTime)},d.doTickIdle=function(){var m,C,x=this.hls,T=this.levels,I=this.media,L=this.trackId;if(T&&T[L]&&(I||!this.startFragRequested&&x.config.startFragPrefetch)){var ne=T[L].details;if(!ne||ne.live&&this.levelLastLoaded!==L||this.waitForCdnTuneIn(ne))return void(this.state=G.State.WAITING_TRACK);var oe=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&oe&&(this.bufferFlushed=!1,this.afterBufferFlushed(oe,F.ElementaryStreamTypes.AUDIO,B.PlaylistLevelType.AUDIO));var Te=this.getFwdBufferInfo(oe,B.PlaylistLevelType.AUDIO);if(null!==Te){var ye=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,B.PlaylistLevelType.MAIN),Ce=Te.len,we=this.getMaxBufferLength(ye?.len),Be=this.audioSwitch;if(!(Ce>=we)||Be){if(!Be&&this._streamEnded(Te,ne))return x.trigger(V.Events.BUFFER_EOS,{type:"audio"}),void(this.state=G.State.ENDED);var st=ne.fragments[0].start,ct=Te.end;if(Be&&I){var yt=this.getLoadPosition();ct=yt,ne.PTSKnown&&yt<st&&(Te.end>st||Te.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),I.currentTime=st+.05)}if(!(ye&&ct>ye.end+ne.targetduration)&&(ye&&ye.len||!Te.len)){var _t=this.getNextFragment(ct,ne);if(!_t)return void(this.bufferFlushed=!0);"identity"!==(null===(m=_t.decryptdata)||void 0===m?void 0:m.keyFormat)||null!==(C=_t.decryptdata)&&void 0!==C&&C.key?this.loadFragment(_t,ne,ct):this.loadKey(_t,ne)}}}}},d.getMaxBufferLength=function(m){var C=c.prototype.getMaxBufferLength.call(this);return m?Math.max(C,m):C},d.onMediaDetaching=function(){this.videoBuffer=null,c.prototype.onMediaDetaching.call(this)},d.onAudioTracksUpdated=function(m,C){var x=C.audioTracks;this.resetTransmuxer(),this.levels=x.map(function(T){return new Y.Level(T)})},d.onAudioTrackSwitching=function(m,C){var x=!!C.url;this.trackId=C.id;var T=this.fragCurrent;null!=T&&T.loader&&T.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),x?this.setInterval(100):this.resetTransmuxer(),x?(this.audioSwitch=!0,this.state=G.State.IDLE):this.state=G.State.STOPPED,this.tick()},d.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},d.onLevelLoaded=function(m,C){this.mainDetails=C.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(V.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},d.onAudioTrackLoaded=function(m,C){var x;if(null!=this.mainDetails){var T=this.levels,I=C.details,L=C.id;if(T){this.log("Track "+L+" loaded ["+I.startSN+","+I.endSN+"],duration:"+I.totalduration);var Z=T[L],re=0;if(I.live||null!==(x=Z.details)&&void 0!==x&&x.live){var ne=this.mainDetails;if(I.fragments[0]||(I.deltaUpdateFailed=!0),I.deltaUpdateFailed||!ne)return;!Z.details&&I.hasProgramDateTime&&ne.hasProgramDateTime?((0,M.alignMediaPlaylistByPDT)(I,ne),re=I.fragments[0].start):re=this.alignPlaylists(I,Z.details)}Z.details=I,this.levelLastLoaded=L,!this.startFragRequested&&(this.mainDetails||!I.live)&&this.setStartPosition(Z.details,re),this.state===G.State.WAITING_TRACK&&!this.waitForCdnTuneIn(I)&&(this.state=G.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+L)}else this.cachedTrackLoadedData=C},d._handleFragmentLoadProgress=function(m){var C,x=m.frag,T=m.part,I=m.payload,L=this.config,Z=this.trackId,re=this.levels;if(re){var ne=re[Z];console.assert(ne,"Audio track is defined on fragment load progress");var oe=ne.details;console.assert(oe,"Audio track details are defined on fragment load progress");var Te=L.defaultAudioCodec||ne.audioCodec||"mp4a.40.2",ye=this.transmuxer;ye||(ye=this.transmuxer=new W.default(this.hls,B.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Ce=this.initPTS[x.cc],we=null===(C=x.initSegment)||void 0===C?void 0:C.data;if(void 0!==Ce){var Ze=T?T.index:-1,ct=new U.ChunkMetadata(x.level,x.sn,x.stats.chunkCount,I.byteLength,Ze,-1!==Ze);ye.push(I,we,Te,"",x,T,oe.totalduration,!1,ct,Ce)}else this.log("Unknown video PTS for cc "+x.cc+", waiting for video PTS before demuxing audio frag "+x.sn+" of ["+oe.startSN+" ,"+oe.endSN+"],track "+Z),(this.waitingData=this.waitingData||{frag:x,part:T,cache:new O.default,complete:!1}).cache.push(new Uint8Array(I)),this.waitingVideoCC=this.videoTrackCC,this.state=G.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+x.sn+" of level "+x.level+" will not be buffered")},d._handleFragmentLoadComplete=function(m){this.waitingData?this.waitingData.complete=!0:c.prototype._handleFragmentLoadComplete.call(this,m)},d.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},d.onBufferCreated=function(m,C){var x=C.tracks.audio;x&&(this.mediaBuffer=x.buffer||null),C.tracks.video&&(this.videoBuffer=C.tracks.video.buffer||null)},d.onFragBuffered=function(m,C){var x=C.frag,T=C.part;if(x.type===B.PlaylistLevelType.AUDIO){if(this.fragContextChanged(x))return void this.warn("Fragment "+x.sn+(T?" p: "+T.index:"")+" of level "+x.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);"initSegment"!==x.sn&&(this.fragPrevious=x,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(V.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(x,T)}},d.onError=function(m,C){switch(C.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(B.PlaylistLevelType.AUDIO,C);break;case b.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case b.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==G.State.ERROR&&this.state!==G.State.STOPPED&&(this.state=C.fatal?G.State.ERROR:G.State.IDLE,this.warn(C.details+" while loading frag, switching to "+this.state+" state"));break;case b.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===C.parent&&(this.state===G.State.PARSING||this.state===G.State.PARSED)){var x=!0,T=this.getFwdBufferInfo(this.mediaBuffer,B.PlaylistLevelType.AUDIO);T&&T.len>.5&&(x=!this.reduceMaxBufferLength(T.len)),x&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,c.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},d.onBufferFlushed=function(m,C){C.type===F.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},d._handleTransmuxComplete=function(m){var C,x="audio",T=this.hls,I=m.remuxResult,L=m.chunkMeta,Z=this.getCurrentContext(L);if(!Z)return this.warn("The loading context changed while buffering fragment "+L.sn+" of level "+L.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(L.level);var re=Z.frag,ne=Z.part,oe=Z.level.details,Te=I.audio,ye=I.text,Ce=I.id3,we=I.initSegment;if(!this.fragContextChanged(re)&&oe){if(this.state=G.State.PARSING,this.audioSwitch&&Te&&this.completeAudioSwitch(),null!=we&&we.tracks&&(this._bufferInitSegment(we.tracks,re,L),T.trigger(V.Events.FRAG_PARSING_INIT_SEGMENT,{frag:re,id:x,tracks:we.tracks})),Te){var Be=Te.startPTS,Ze=Te.endPTS,st=Te.startDTS,ct=Te.endDTS;ne&&(ne.elementaryStreams[F.ElementaryStreamTypes.AUDIO]={startPTS:Be,endPTS:Ze,startDTS:st,endDTS:ct}),re.setElementaryStreamInfo(F.ElementaryStreamTypes.AUDIO,Be,Ze,st,ct),this.bufferFragmentData(Te,re,ne,L)}if(null!=Ce&&null!==(C=Ce.samples)&&void 0!==C&&C.length){var yt=g({id:x,frag:re,details:oe},Ce);T.trigger(V.Events.FRAG_PARSING_METADATA,yt)}if(ye){var _t=g({id:x,frag:re,details:oe},ye);T.trigger(V.Events.FRAG_PARSING_USERDATA,_t)}}},d._bufferInitSegment=function(m,C,x){if(this.state===G.State.PARSING){m.video&&delete m.video;var T=m.audio;if(T){T.levelCodec=T.codec,T.id="audio",this.log("Init audio buffer, container:"+T.container+", codecs[parsed]=["+T.codec+"]"),this.hls.trigger(V.Events.BUFFER_CODECS,m);var I=T.initSegment;null!=I&&I.byteLength&&this.hls.trigger(V.Events.BUFFER_APPENDING,{type:"audio",frag:C,part:null,chunkMeta:x,parent:C.type,data:I}),this.tick()}}},d.loadFragment=function(m,C,x){var T=this.fragmentTracker.getState(m);this.fragCurrent=m,(this.audioSwitch||T===u.FragmentState.NOT_LOADED||T===u.FragmentState.PARTIAL)&&("initSegment"===m.sn?this._loadInitSegment(m):C.live&&!(0,ee.isFiniteNumber)(this.initPTS[m.cc])?(this.log("Waiting for video PTS in continuity counter "+m.cc+" of live stream before loading audio fragment "+m.sn+" of level "+this.trackId),this.state=G.State.WAITING_INIT_PTS):(this.startFragRequested=!0,c.prototype.loadFragment.call(this,m,C,x)))},d.completeAudioSwitch=function(){var m=this.hls,x=this.trackId;this.media&&(this.log("Switching audio track : flushing all audio"),c.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,m.trigger(V.Events.AUDIO_TRACK_SWITCHED,{id:x})},h}(G.default)},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
                !*** ./src/controller/audio-track-controller.ts ***!
                \**************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>W});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../errors */
"./src/errors.ts"),V=N(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),q=N(
/*! ../types/loader */
"./src/types/loader.ts");function u(U,R){for(var M=0;M<R.length;M++){var b=R[M];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(U,b.key,b)}}function F(U,R){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,g){return b.__proto__=g,b})(U,R)}const W=function(U){function R(b){var g;return(g=U.call(this,b,"[audio-track-controller]")||this).tracks=[],g.groupId=null,g.tracksInGroup=[],g.trackId=-1,g.trackName="",g.selectDefaultTrack=!0,g.registerListeners(),g}!function B(U,R){U.prototype=Object.create(R.prototype),U.prototype.constructor=U,F(U,R)}(R,U);var M=R.prototype;return M.registerListeners=function(){var g=this.hls;g.on(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.on(ee.Events.LEVEL_LOADING,this.onLevelLoading,this),g.on(ee.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),g.on(ee.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),g.on(ee.Events.ERROR,this.onError,this)},M.unregisterListeners=function(){var g=this.hls;g.off(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.off(ee.Events.LEVEL_LOADING,this.onLevelLoading,this),g.off(ee.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),g.off(ee.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),g.off(ee.Events.ERROR,this.onError,this)},M.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,U.prototype.destroy.call(this)},M.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},M.onManifestParsed=function(g,v){this.tracks=v.audioTracks||[]},M.onAudioTrackLoaded=function(g,v){var S=v.id,w=v.details,E=this.tracksInGroup[S];if(E){var _=E.details;E.details=v.details,this.log("audioTrack "+S+" loaded ["+w.startSN+"-"+w.endSN+"]"),S===this.trackId&&(this.retryCount=0,this.playlistLoaded(S,v,_))}else this.warn("Invalid audio track id "+S)},M.onLevelLoading=function(g,v){this.switchLevel(v.level)},M.onLevelSwitching=function(g,v){this.switchLevel(v.level)},M.switchLevel=function(g){var v=this.hls.levels[g];if(null!=v&&v.audioGroupIds){var S=v.audioGroupIds[v.urlId];if(this.groupId!==S){this.groupId=S;var w=this.tracks.filter(function(_){return!S||_.groupId===S});this.selectDefaultTrack&&!w.some(function(_){return _.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=w;var E={audioTracks:w};this.log("Updating audio tracks, "+w.length+' track(s) found in "'+S+'" group-id'),this.hls.trigger(ee.Events.AUDIO_TRACKS_UPDATED,E),this.selectInitialTrack()}}},M.onError=function(g,v){U.prototype.onError.call(this,g,v),!v.fatal&&v.context&&v.context.type===q.PlaylistContextType.AUDIO_TRACK&&v.context.id===this.trackId&&v.context.groupId===this.groupId&&this.retryLoadingOrFail(v)},M.setAudioTrack=function(g){var v=this.tracksInGroup;if(g<0||g>=v.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var S=v[this.trackId];this.log("Now switching to audio-track index "+g);var w=v[g],E=w.id,_=w.groupId,c=void 0===_?"":_,h=w.name,d=w.type,P=w.url;if(this.trackId=g,this.trackName=h,this.selectDefaultTrack=!1,this.hls.trigger(ee.Events.AUDIO_TRACK_SWITCHING,{id:E,groupId:c,name:h,type:d,url:P}),!w.details||w.details.live){var m=this.switchParams(w.url,S?.details);this.loadPlaylist(m)}}},M.selectInitialTrack=function(){console.assert(this.tracksInGroup.length,"Initial audio track should be selected when tracks are known");var S=this.findTrackId(this.trackName)||this.findTrackId();-1!==S?this.setAudioTrack(S):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},M.findTrackId=function(g){for(var v=this.tracksInGroup,S=0;S<v.length;S++){var w=v[S];if((!this.selectDefaultTrack||w.default)&&(!g||g===w.name))return w.id}return-1},M.loadPlaylist=function(g){var v=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(v)){var S=v.id,w=v.groupId,E=v.url;if(g)try{E=g.addDirectives(E)}catch(_){this.warn("Could not construct new URL with HLS Delivery Directives: "+_)}this.log("loading audio-track playlist for id: "+S),this.clearTimer(),this.hls.trigger(ee.Events.AUDIO_TRACK_LOADING,{url:E,id:S,groupId:w,deliveryDirectives:g||null})}},function Y(U,R,M){R&&u(U.prototype,R),M&&u(U,M),Object.defineProperty(U,"prototype",{writable:!1})}(R,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(g){this.selectDefaultTrack=!1,this.setAudioTrack(g)}}]),R}(V.default)},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
                !*** ./src/controller/base-playlist-controller.ts ***!
                \****************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>Y});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../types/level */
"./src/types/level.ts"),V=N(
/*! ./level-helper */
"./src/controller/level-helper.ts"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),u=N(
/*! ../errors */
"./src/errors.ts"),Y=function(){function B(O,W){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=q.logger.log.bind(q.logger,W+":"),this.warn=q.logger.warn.bind(q.logger,W+":"),this.hls=O}var F=B.prototype;return F.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},F.onError=function(W,U){U.fatal&&U.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},F.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},F.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},F.stopLoad=function(){this.canLoad=!1,this.clearTimer()},F.switchParams=function(W,U){var R=U?.renditionReports;if(R)for(var M=0;M<R.length;M++){var b=R[M],g=""+b.URI;if(g===W.slice(-g.length)){var v=parseInt(b["LAST-MSN"]),S=parseInt(b["LAST-PART"]);if(U&&this.hls.config.lowLatencyMode){var w=Math.min(U.age-U.partTarget,U.targetduration);void 0!==S&&w>U.partTarget&&(S+=1)}if((0,ee.isFiniteNumber)(v))return new G.HlsUrlParameters(v,(0,ee.isFiniteNumber)(S)?S:void 0,G.HlsSkip.No)}}},F.loadPlaylist=function(W){},F.shouldLoadTrack=function(W){return this.canLoad&&W&&!!W.url&&(!W.details||W.details.live)},F.playlistLoaded=function(W,U,R){var M=this,b=U.details,g=U.stats,v=g.loading.end?Math.max(0,self.performance.now()-g.loading.end):0;if(b.advancedDateTime=Date.now()-v,b.live||null!=R&&R.live){if(b.reloaded(R),R&&this.log("live playlist "+W+" "+(b.advanced?"REFRESHED "+b.lastPartSn+"-"+b.lastPartIndex:"MISSED")),R&&b.fragments.length>0&&(0,V.mergeDetails)(R,b),!this.canLoad||!b.live)return;var S,w=void 0,E=void 0;if(b.canBlockReload&&b.endSN&&b.advanced){var _=this.hls.config.lowLatencyMode,c=b.lastPartSn,h=b.endSN,d=b.lastPartIndex,m=c===h;-1!==d?(w=m?h+1:c,E=m?_?0:d:d+1):w=h+1;var x=b.age,I=Math.min(x+b.ageHeader-b.partTarget,1.5*b.targetduration);if(I>0){if(R&&I>R.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+R.tuneInGoal+" to: "+I+" with playlist age: "+b.age),I=0;else{var L=Math.floor(I/b.targetduration);w+=L,void 0!==E&&(E+=Math.round(I%b.targetduration/b.partTarget)),this.log("CDN Tune-in age: "+b.ageHeader+"s last advanced "+x.toFixed(2)+"s goal: "+I+" skip sn "+L+" to part "+E)}b.tuneInGoal=I}if(S=this.getDeliveryDirectives(b,U.deliveryDirectives,w,E),_||!m)return void this.loadPlaylist(S)}else S=this.getDeliveryDirectives(b,U.deliveryDirectives,w,E);var re=(0,V.computeReloadInterval)(b,g);void 0!==w&&b.canBlockReload&&(re-=b.partTarget||1),this.log("reload live playlist "+W+" in "+Math.round(re)+" ms"),this.timer=self.setTimeout(function(){return M.loadPlaylist(S)},re)}else this.clearTimer()},F.getDeliveryDirectives=function(W,U,R,M){var b=(0,G.getSkipValue)(W,R);return null!=U&&U.skip&&W.deltaUpdateFailed&&(R=U.msn,M=U.part,b=G.HlsSkip.No),new G.HlsUrlParameters(R,M,b)},F.retryLoadingOrFail=function(W){var b,U=this,R=this.hls.config,M=this.retryCount<R.levelLoadingMaxRetry;if(M)if(this.retryCount++,W.details.indexOf("LoadTimeOut")>-1&&null!==(b=W.context)&&void 0!==b&&b.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+W.details+'"'),this.loadPlaylist();else{var g=Math.min(Math.pow(2,this.retryCount)*R.levelLoadingRetryDelay,R.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return U.loadPlaylist()},g),this.warn("retry playlist loading #"+this.retryCount+" in "+g+' ms after "'+W.details+'"')}else this.warn('cannot recover from error "'+W.details+'"'),this.clearTimer(),W.fatal=!0;return M},B}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
                !*** ./src/controller/base-stream-controller.ts ***!
                \**************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{State:()=>h,default:()=>d});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../task-loop */
"./src/task-loop.ts"),V=N(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),q=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),u=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),Y=N(
/*! ../events */
"./src/events.ts"),B=N(
/*! ../errors */
"./src/errors.ts"),F=N(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),O=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),W=N(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),U=N(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),R=N(
/*! ./level-helper */
"./src/controller/level-helper.ts"),M=N(
/*! ../loader/fragment-loader */
"./src/loader/fragment-loader.ts"),b=N(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),g=N(
/*! ../utils/time-ranges */
"./src/utils/time-ranges.ts"),v=N(
/*! ../types/loader */
"./src/types/loader.ts");function S(P,m){for(var C=0;C<m.length;C++){var x=m[C];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}function E(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function c(P,m){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,T){return x.__proto__=T,x})(P,m)}var h={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},d=function(P){function m(x,T,I){var L;return(L=P.call(this)||this).hls=void 0,L.fragPrevious=null,L.fragCurrent=null,L.fragmentTracker=void 0,L.transmuxer=null,L._state=h.STOPPED,L.media=null,L.mediaBuffer=null,L.config=void 0,L.bitrateTest=!1,L.lastCurrentTime=0,L.nextLoadPosition=0,L.startPosition=0,L.loadedmetadata=!1,L.fragLoadError=0,L.retryDate=0,L.levels=null,L.fragmentLoader=void 0,L.levelLastLoaded=null,L.startFragRequested=!1,L.decrypter=void 0,L.initPTS=[],L.onvseeking=null,L.onvended=null,L.logPrefix="",L.log=void 0,L.warn=void 0,L.logPrefix=I,L.log=u.logger.log.bind(u.logger,I+":"),L.warn=u.logger.warn.bind(u.logger,I+":"),L.hls=x,L.fragmentLoader=new M.default(x.config),L.fragmentTracker=T,L.config=x.config,L.decrypter=new b.default(x,x.config),x.on(Y.Events.KEY_LOADED,L.onKeyLoaded,E(L)),x.on(Y.Events.LEVEL_SWITCHING,L.onLevelSwitching,E(L)),L}!function _(P,m){P.prototype=Object.create(m.prototype),P.prototype.constructor=P,c(P,m)}(m,P);var C=m.prototype;return C.doTick=function(){this.onTickEnd()},C.onTickEnd=function(){},C.startLoad=function(T){},C.stopLoad=function(){this.fragmentLoader.abort();var T=this.fragCurrent;T&&this.fragmentTracker.removeFragment(T),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=h.STOPPED},C._streamEnded=function(T,I){var L=this.fragCurrent,Z=this.fragmentTracker;if(!I.live&&L&&this.media&&L.sn>=I.endSN&&!T.nextStart){var re=I.partList;if(null!=re&&re.length){var ne=re[re.length-1];return q.BufferHelper.isBuffered(this.media,ne.start+ne.duration/2)}var Te=Z.getState(L);return Te===V.FragmentState.PARTIAL||Te===V.FragmentState.OK}return!1},C.onMediaAttached=function(T,I){var L=this.media=this.mediaBuffer=I.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),L.addEventListener("seeking",this.onvseeking),L.addEventListener("ended",this.onvended);var Z=this.config;this.levels&&Z.autoStartLoad&&this.state===h.STOPPED&&this.startLoad(Z.startPosition)},C.onMediaDetaching=function(){var T=this.media;null!=T&&T.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),T&&this.onvseeking&&this.onvended&&(T.removeEventListener("seeking",this.onvseeking),T.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},C.onMediaSeeking=function(){var T=this.config,I=this.fragCurrent,L=this.media,re=this.state,ne=L?L.currentTime:0,oe=q.BufferHelper.bufferInfo(this.mediaBuffer||L,ne,T.maxBufferHole);if(this.log("media seeking to "+((0,ee.isFiniteNumber)(ne)?ne.toFixed(3):ne)+", state: "+re),re===h.ENDED)this.resetLoadingState();else if(I&&!oe.len){var Te=T.maxFragLookUpTolerance,we=ne>I.start+I.duration+Te;(ne<I.start-Te||we)&&(we&&I.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),I.loader.abort()),this.resetLoadingState())}L&&(this.lastCurrentTime=ne),!this.loadedmetadata&&!oe.len&&(this.nextLoadPosition=this.startPosition=ne),this.tickImmediate()},C.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},C.onKeyLoaded=function(T,I){if(this.state===h.KEY_LOADING&&I.frag===this.fragCurrent&&this.levels){this.state=h.IDLE;var L=this.levels[I.frag.level].details;L&&this.loadFragment(I.frag,L,I.frag.start)}},C.onLevelSwitching=function(T,I){this.fragLoadError=0},C.onHandlerDestroying=function(){this.stopLoad(),P.prototype.onHandlerDestroying.call(this)},C.onHandlerDestroyed=function(){this.state=h.STOPPED,this.hls.off(Y.Events.KEY_LOADED,this.onKeyLoaded,this),this.hls.off(Y.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,P.prototype.onHandlerDestroyed.call(this)},C.loadKey=function(T,I){this.log("Loading key for "+T.sn+" of ["+I.startSN+"-"+I.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+T.level),this.state=h.KEY_LOADING,this.fragCurrent=T,this.hls.trigger(Y.Events.KEY_LOADING,{frag:T})},C.loadFragment=function(T,I,L){this._loadFragForPlayback(T,I,L)},C._loadFragForPlayback=function(T,I,L){var Z=this;this._doFragLoad(T,I,L,function(oe){if(Z.fragContextChanged(T))return Z.warn("Fragment "+T.sn+(oe.part?" p: "+oe.part.index:"")+" of level "+T.level+" was dropped during download."),void Z.fragmentTracker.removeFragment(T);T.stats.chunkCount++,Z._handleFragmentLoadProgress(oe)}).then(function(ne){if(ne){Z.fragLoadError=0;var oe=Z.state;if(Z.fragContextChanged(T))return void((oe===h.FRAG_LOADING||!Z.fragCurrent&&oe===h.PARSING)&&(Z.fragmentTracker.removeFragment(T),Z.state=h.IDLE));"payload"in ne&&(Z.log("Loaded fragment "+T.sn+" of level "+T.level),Z.hls.trigger(Y.Events.FRAG_LOADED,ne)),Z._handleFragmentLoadComplete(ne)}}).catch(function(ne){Z.state===h.STOPPED||Z.state===h.ERROR||(Z.warn(ne),Z.resetFragmentLoading(T))})},C.flushMainBuffer=function(T,I,L){if(void 0===L&&(L=null),T-I){var Z={startOffset:T,endOffset:I,type:L};this.fragLoadError=0,this.hls.trigger(Y.Events.BUFFER_FLUSHING,Z)}},C._loadInitSegment=function(T){var I=this;this._doFragLoad(T).then(function(L){if(!L||I.fragContextChanged(T)||!I.levels)throw new Error("init load aborted");return L}).then(function(L){var Z=I.hls,re=L.payload,ne=T.decryptdata;if(re&&re.byteLength>0&&ne&&ne.key&&ne.iv&&"AES-128"===ne.method){var oe=self.performance.now();return I.decrypter.webCryptoDecrypt(new Uint8Array(re),ne.key.buffer,ne.iv.buffer).then(function(Te){var ye=self.performance.now();return Z.trigger(Y.Events.FRAG_DECRYPTED,{frag:T,payload:Te,stats:{tstart:oe,tdecrypt:ye}}),L.payload=Te,L})}return L}).then(function(L){var Z=I.fragCurrent,re=I.hls,ne=I.levels;if(!ne)throw new Error("init load aborted, missing levels");console.assert(ne[T.level].details,"Level details are defined when init segment is loaded");var Te=T.stats;I.state=h.IDLE,I.fragLoadError=0,T.data=new Uint8Array(L.payload),Te.parsing.start=Te.buffering.start=self.performance.now(),Te.parsing.end=Te.buffering.end=self.performance.now(),L.frag===Z&&re.trigger(Y.Events.FRAG_BUFFERED,{stats:Te,frag:Z,part:null,id:T.type}),I.tick()}).catch(function(L){I.state===h.STOPPED||I.state===h.ERROR||(I.warn(L),I.resetFragmentLoading(T))})},C.fragContextChanged=function(T){var I=this.fragCurrent;return!T||!I||T.level!==I.level||T.sn!==I.sn||T.urlId!==I.urlId},C.fragBufferedComplete=function(T,I){var L,Z,re=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+T.type+" sn: "+T.sn+(I?" part: "+I.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+T.level+" "+(re?g.default.toString(q.BufferHelper.getBuffered(re)):"(detached)")),this.state=h.IDLE,re&&(!this.loadedmetadata&&re.buffered.length&&(null===(L=this.fragCurrent)||void 0===L?void 0:L.sn)===(null===(Z=this.fragPrevious)||void 0===Z?void 0:Z.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},C.seekToStartPos=function(){},C._handleFragmentLoadComplete=function(T){var I=this.transmuxer;if(I){var L=T.frag,Z=T.part,re=T.partsLoaded,ne=!re||0===re.length||re.some(function(Te){return!Te}),oe=new F.ChunkMetadata(L.level,L.sn,L.stats.chunkCount+1,0,Z?Z.index:-1,!ne);I.flush(oe)}},C._handleFragmentLoadProgress=function(T){},C._doFragLoad=function(T,I,L,Z){var re=this;if(void 0===L&&(L=null),!this.levels)throw new Error("frag load aborted, missing levels");if(L=Math.max(T.start,L||0),this.config.lowLatencyMode&&I){var ne=I.partList;if(ne&&Z){L>T.end&&I.fragmentHint&&(T=I.fragmentHint);var oe=this.getNextPart(ne,T,L);if(oe>-1){var Te=ne[oe];return this.log("Loading part sn: "+T.sn+" p: "+Te.index+" cc: "+T.cc+" of playlist ["+I.startSN+"-"+I.endSN+"] parts [0-"+oe+"-"+(ne.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+T.level+", target: "+parseFloat(L.toFixed(3))),this.nextLoadPosition=Te.start+Te.duration,this.state=h.FRAG_LOADING,this.hls.trigger(Y.Events.FRAG_LOADING,{frag:T,part:ne[oe],targetBufferTime:L}),this.doFragPartsLoad(T,ne,oe,Z).catch(function(ye){return re.handleFragLoadError(ye)})}if(!T.url||this.loadedEndOfParts(ne,L))return Promise.resolve(null)}}return this.log("Loading fragment "+T.sn+" cc: "+T.cc+" "+(I?"of ["+I.startSN+"-"+I.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+T.level+", target: "+parseFloat(L.toFixed(3))),(0,ee.isFiniteNumber)(T.sn)&&!this.bitrateTest&&(this.nextLoadPosition=T.start+T.duration),this.state=h.FRAG_LOADING,this.hls.trigger(Y.Events.FRAG_LOADING,{frag:T,targetBufferTime:L}),this.fragmentLoader.load(T,Z).catch(function(ye){return re.handleFragLoadError(ye)})},C.doFragPartsLoad=function(T,I,L,Z){var re=this;return new Promise(function(ne,oe){var Te=[];!function Ce(we){var Be=I[we];re.fragmentLoader.loadPart(T,Be,Z).then(function(Ze){Te[Be.index]=Ze;var st=Ze.part;re.hls.trigger(Y.Events.FRAG_LOADED,Ze);var ct=I[we+1];if(!ct||ct.fragment!==T)return ne({frag:T,part:st,partsLoaded:Te});Ce(we+1)}).catch(oe)}(L)})},C.handleFragLoadError=function(T){var I=T.data;return I&&I.details===B.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(I.frag,I.part):this.hls.trigger(Y.Events.ERROR,I),null},C._handleTransmuxerFlush=function(T){var I=this.getCurrentContext(T);if(I&&this.state===h.PARSING){var L=I.frag,Z=I.part,re=I.level,ne=self.performance.now();L.stats.parsing.end=ne,Z&&(Z.stats.parsing.end=ne),this.updateLevelTiming(L,Z,re,T.partial)}else this.fragCurrent||(this.state=h.IDLE)},C.getCurrentContext=function(T){var I=this.levels,L=T.level,Z=T.sn,re=T.part;if(!I||!I[L])return this.warn("Levels object was unset while buffering fragment "+Z+" of level "+L+". The current chunk will not be buffered."),null;var ne=I[L],oe=re>-1?(0,R.getPartWith)(ne,Z,re):null,Te=oe?oe.fragment:(0,R.getFragmentWithSN)(ne,Z,this.fragCurrent);return Te?{frag:Te,part:oe,level:ne}:null},C.bufferFragmentData=function(T,I,L,Z){if(T&&this.state===h.PARSING){var re=T.data1,ne=T.data2,oe=re;re&&ne&&(oe=(0,O.appendUint8Array)(re,ne)),oe&&oe.length&&(this.hls.trigger(Y.Events.BUFFER_APPENDING,{type:T.type,frag:I,part:L,chunkMeta:Z,parent:I.type,data:oe}),T.dropped&&T.independent&&!L&&this.flushBufferGap(I))}},C.flushBufferGap=function(T){var I=this.media;if(I){if(!q.BufferHelper.isBuffered(I,I.currentTime))return void this.flushMainBuffer(0,T.start);var L=I.currentTime,Z=q.BufferHelper.bufferInfo(I,L,0),ne=Math.min(2*this.config.maxFragLookUpTolerance,.25*T.duration),oe=Math.max(Math.min(T.start-ne,Z.end-ne),L+ne);T.start-oe>ne&&this.flushMainBuffer(oe,T.start)}},C.getFwdBufferInfo=function(T,I){var L=this.config,Z=this.getLoadPosition();if(!(0,ee.isFiniteNumber)(Z))return null;var re=q.BufferHelper.bufferInfo(T,Z,L.maxBufferHole);if(0===re.len&&void 0!==re.nextStart){var ne=this.fragmentTracker.getBufferedFrag(Z,I);if(ne&&re.nextStart<ne.end)return q.BufferHelper.bufferInfo(T,Z,Math.max(re.nextStart,L.maxBufferHole))}return re},C.getMaxBufferLength=function(T){var L,I=this.config;return L=T?Math.max(8*I.maxBufferSize/T,I.maxBufferLength):I.maxBufferLength,Math.min(L,I.maxMaxBufferLength)},C.reduceMaxBufferLength=function(T){var I=this.config;return I.maxMaxBufferLength>=(T||I.maxBufferLength)&&(I.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+I.maxMaxBufferLength+"s"),!0)},C.getNextFragment=function(T,I){var L=I.fragments,Z=L.length;if(!Z)return null;var oe,re=this.config,ne=L[0].start;if(I.live){var Te=re.initialLiveManifestSize;if(Z<Te)return this.warn("Not enough fragments to start playback (have: "+Z+", need: "+Te+")"),null;!I.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&(oe=this.getInitialLiveFragment(I,L),this.startPosition=oe?this.hls.liveSyncPosition||oe.start:T)}else T<=ne&&(oe=L[0]);return oe||(oe=this.getFragmentAtPosition(T,re.lowLatencyMode?I.partEnd:I.fragmentEnd,I)),this.mapToInitFragWhenRequired(oe)},C.mapToInitFragWhenRequired=function(T){return null==T||!T.initSegment||null!=T&&T.initSegment.data||this.bitrateTest?T:T.initSegment},C.getNextPart=function(T,I,L){for(var Z=-1,re=!1,ne=!0,oe=0,Te=T.length;oe<Te;oe++){var ye=T[oe];if(ne=ne&&!ye.independent,Z>-1&&L<ye.start)break;var Ce=ye.loaded;!Ce&&(re||ye.independent||ne)&&ye.fragment===I&&(Z=oe),re=Ce}return Z},C.loadedEndOfParts=function(T,I){var L=T[T.length-1];return L&&I>L.start&&L.loaded},C.getInitialLiveFragment=function(T,I){var L=this.fragPrevious,Z=null;if(L){if(T.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+L.programDateTime),Z=(0,U.findFragmentByPDT)(I,L.endProgramDateTime,this.config.maxFragLookUpTolerance)),!Z){var re=L.sn+1;if(re>=T.startSN&&re<=T.endSN){var ne=I[re-T.startSN];L.cc===ne.cc&&this.log("Live playlist, switching playlist, load frag with next SN: "+(Z=ne).sn)}Z||(Z=(0,U.findFragWithCC)(I,L.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+Z.sn)}}else{var oe=this.hls.liveSyncPosition;null!==oe&&(Z=this.getFragmentAtPosition(oe,this.bitrateTest?T.fragmentEnd:T.edge,T))}return Z},C.getFragmentAtPosition=function(T,I,L){var we,Z=this.config,re=this.fragPrevious,ne=L.fragments,oe=L.endSN,Te=L.fragmentHint,ye=Z.maxFragLookUpTolerance,Ce=!!(Z.lowLatencyMode&&L.partList&&Te);if(Ce&&Te&&!this.bitrateTest&&(ne=ne.concat(Te),oe=Te.sn),we=T<I?(0,U.findFragmentByPTS)(re,ne,T,T>I-ye?0:ye):ne[ne.length-1]){var Ze=we.sn-L.startSN;if(this.fragmentTracker.getState(we)===V.FragmentState.OK&&(re=we),re&&we.sn===re.sn&&!Ce&&re&&we.level===re.level){var ct=ne[Ze+1];we.sn<oe&&this.fragmentTracker.getState(ct)!==V.FragmentState.OK?(this.log("SN "+we.sn+" just loaded, load next one: "+ct.sn),we=ct):we=null}}return we},C.synchronizeToLiveEdge=function(T){var I=this.config,L=this.media;if(L){var Z=this.hls.liveSyncPosition,re=L.currentTime,oe=T.edge,Te=re>=T.fragments[0].start-I.maxFragLookUpTolerance&&re<=oe;null!==Z&&L.duration>Z&&(re<Z||!Te)&&(!Te&&L.readyState<4||re<oe-(void 0!==I.liveMaxLatencyDuration?I.liveMaxLatencyDuration:I.liveMaxLatencyDurationCount*T.targetduration))&&(this.loadedmetadata||(this.nextLoadPosition=Z),L.readyState&&(this.warn("Playback: "+re.toFixed(3)+" is located too far from the end of live sliding playlist: "+oe+", reset currentTime to : "+Z.toFixed(3)),L.currentTime=Z))}},C.alignPlaylists=function(T,I){var Z=this.levelLastLoaded,re=this.fragPrevious,ne=null!==Z?this.levels[Z]:null,oe=T.fragments.length;if(!oe)return this.warn("No fragments in live playlist"),0;var Te=T.fragments[0].start,ye=!I,Ce=T.alignedSliding&&(0,ee.isFiniteNumber)(Te);if(ye||!Ce&&!Te){(0,W.alignStream)(re,ne,T);var we=T.fragments[0].start;return this.log("Live playlist sliding: "+we.toFixed(2)+" start-sn: "+(I?I.startSN:"na")+"->"+T.startSN+" prev-sn: "+(re?re.sn:"na")+" fragments: "+oe),we}return Te},C.waitForCdnTuneIn=function(T){return T.live&&T.canBlockReload&&T.partTarget&&T.tuneInGoal>Math.max(T.partHoldBack,3*T.partTarget)},C.setStartPosition=function(T,I){var L=this.startPosition;if(L<I&&(L=-1),-1===L||-1===this.lastCurrentTime){var Z=T.startTimeOffset;(0,ee.isFiniteNumber)(Z)?(L=I+Z,Z<0&&(L+=T.totalduration),L=Math.min(Math.max(I,L),I+T.totalduration),this.log("Start time offset "+Z+" found in playlist, adjust startPosition to "+L),this.startPosition=L):T.live?L=this.hls.liveSyncPosition||I:this.startPosition=L=0,this.lastCurrentTime=L}this.nextLoadPosition=L},C.getLoadPosition=function(){var T=this.media,I=0;return this.loadedmetadata&&T?I=T.currentTime:this.nextLoadPosition&&(I=this.nextLoadPosition),I},C.handleFragLoadAborted=function(T,I){this.transmuxer&&"initSegment"!==T.sn&&T.stats.aborted&&(this.warn("Fragment "+T.sn+(I?" part"+I.index:"")+" of level "+T.level+" was aborted"),this.resetFragmentLoading(T))},C.resetFragmentLoading=function(T){(!this.fragCurrent||!this.fragContextChanged(T)&&this.state!==h.FRAG_LOADING_WAITING_RETRY)&&(this.state=h.IDLE)},C.onFragmentOrKeyLoadError=function(T,I){if(!I.fatal){var L=I.frag;if(L&&L.type===T){var Z=this.fragCurrent;console.assert(Z&&L.sn===Z.sn&&L.level===Z.level&&L.urlId===Z.urlId,"Frag load error must match current frag to retry");var re=this.config;if(this.fragLoadError+1<=re.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var ne=Math.min(Math.pow(2,this.fragLoadError)*re.fragLoadingRetryDelay,re.fragLoadingMaxRetryTimeout);this.warn("Fragment "+L.sn+" of "+T+" "+L.level+" failed to load, retrying in "+ne+"ms"),this.retryDate=self.performance.now()+ne,this.fragLoadError++,this.state=h.FRAG_LOADING_WAITING_RETRY}else I.levelRetry?(T===v.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=h.IDLE):(u.logger.error(I.details+" reaches max retry, redispatch as fatal ..."),I.fatal=!0,this.hls.stopLoad(),this.state=h.ERROR)}}},C.afterBufferFlushed=function(T,I,L){if(T){var Z=q.BufferHelper.getBuffered(T);this.fragmentTracker.detectEvictedFragments(I,Z,L),this.state===h.ENDED&&this.resetLoadingState()}},C.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=h.IDLE},C.resetStartWhenNotLoaded=function(T){if(!this.loadedmetadata){this.startFragRequested=!1;var I=this.levels?this.levels[T].details:null;null!=I&&I.live?(this.startPosition=-1,this.setStartPosition(I,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},C.updateLevelTiming=function(T,I,L,Z){var re=this,ne=L.details;console.assert(!!ne,"level.details must be defined"),Object.keys(T.elementaryStreams).reduce(function(Te,ye){var Ce=T.elementaryStreams[ye];if(Ce){var we=Ce.endPTS-Ce.startPTS;if(we<=0)return re.warn("Could not parse fragment "+T.sn+" "+ye+" duration reliably ("+we+")"),Te||!1;var Be=Z?0:(0,R.updateFragPTSDTS)(ne,T,Ce.startPTS,Ce.endPTS,Ce.startDTS,Ce.endDTS);return re.hls.trigger(Y.Events.LEVEL_PTS_UPDATED,{details:ne,level:L,drift:Be,type:ye,frag:T,start:Ce.startPTS,end:Ce.endPTS}),!0}return Te},!1)||(this.warn("Found no media in fragment "+T.sn+" of level "+L.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=h.PARSED,this.hls.trigger(Y.Events.FRAG_PARSED,{frag:T,part:I})},C.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},function w(P,m,C){m&&S(P.prototype,m),C&&S(P,C),Object.defineProperty(P,"prototype",{writable:!1})}(m,[{key:"state",get:function(){return this._state},set:function(T){var I=this._state;I!==T&&(this._state=T,this.log(I+"->"+T))}}]),m}(G.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
                !*** ./src/controller/buffer-controller.ts ***!
                \*********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>U});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),q=N(
/*! ../errors */
"./src/errors.ts"),u=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),Y=N(
/*! ../utils/mediasource-helper */
"./src/utils/mediasource-helper.ts"),B=N(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),F=N(
/*! ./buffer-operation-queue */
"./src/controller/buffer-operation-queue.ts"),O=(0,Y.getMediaSource)(),W=/([ha]vc.)(?:\.[^.,]+)+/,U=function(){function R(b){var g=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var v=g.hls,S=g.media,w=g.mediaSource;V.logger.log("[buffer-controller]: Media source opened"),S&&(g.updateMediaElementDuration(),v.trigger(G.Events.MEDIA_ATTACHED,{media:S})),w&&w.removeEventListener("sourceopen",g._onMediaSourceOpen),g.checkPendingTracks()},this._onMediaSourceClose=function(){V.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){V.logger.log("[buffer-controller]: Media source ended")},this.hls=b,this._initSourceBuffer(),this.registerListeners()}var M=R.prototype;return M.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},M.destroy=function(){this.unregisterListeners(),this.details=null},M.registerListeners=function(){var g=this.hls;g.on(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),g.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.on(G.Events.BUFFER_RESET,this.onBufferReset,this),g.on(G.Events.BUFFER_APPENDING,this.onBufferAppending,this),g.on(G.Events.BUFFER_CODECS,this.onBufferCodecs,this),g.on(G.Events.BUFFER_EOS,this.onBufferEos,this),g.on(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.on(G.Events.LEVEL_UPDATED,this.onLevelUpdated,this),g.on(G.Events.FRAG_PARSED,this.onFragParsed,this),g.on(G.Events.FRAG_CHANGED,this.onFragChanged,this)},M.unregisterListeners=function(){var g=this.hls;g.off(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),g.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.off(G.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.off(G.Events.BUFFER_RESET,this.onBufferReset,this),g.off(G.Events.BUFFER_APPENDING,this.onBufferAppending,this),g.off(G.Events.BUFFER_CODECS,this.onBufferCodecs,this),g.off(G.Events.BUFFER_EOS,this.onBufferEos,this),g.off(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.off(G.Events.LEVEL_UPDATED,this.onLevelUpdated,this),g.off(G.Events.FRAG_PARSED,this.onFragParsed,this),g.off(G.Events.FRAG_CHANGED,this.onFragChanged,this)},M._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new F.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},M.onManifestParsed=function(g,v){var S=2;(v.audio&&!v.video||!v.altAudio)&&(S=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=S,this.details=null,V.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},M.onMediaAttaching=function(g,v){var S=this.media=v.media;if(S&&O){var w=this.mediaSource=new O;w.addEventListener("sourceopen",this._onMediaSourceOpen),w.addEventListener("sourceended",this._onMediaSourceEnded),w.addEventListener("sourceclose",this._onMediaSourceClose),S.src=self.URL.createObjectURL(w),this._objectUrl=S.src}},M.onMediaDetaching=function(){var g=this.media,v=this.mediaSource,S=this._objectUrl;if(v){if(V.logger.log("[buffer-controller]: media source detaching"),"open"===v.readyState)try{v.endOfStream()}catch(w){V.logger.warn("[buffer-controller]: onMediaDetaching: "+w.message+" while calling endOfStream")}this.onBufferReset(),v.removeEventListener("sourceopen",this._onMediaSourceOpen),v.removeEventListener("sourceended",this._onMediaSourceEnded),v.removeEventListener("sourceclose",this._onMediaSourceClose),g&&(S&&self.URL.revokeObjectURL(S),g.src===S?(g.removeAttribute("src"),g.load()):V.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(G.Events.MEDIA_DETACHED,void 0)},M.onBufferReset=function(){var g=this;this.getSourceBufferTypes().forEach(function(v){var S=g.sourceBuffer[v];try{S&&(g.removeBufferListeners(v),g.mediaSource&&g.mediaSource.removeSourceBuffer(S),g.sourceBuffer[v]=void 0)}catch(w){V.logger.warn("[buffer-controller]: Failed to reset the "+v+" buffer",w)}}),this._initSourceBuffer()},M.onBufferCodecs=function(g,v){var S=this,w=this.getSourceBufferTypes().length;Object.keys(v).forEach(function(E){if(w){var _=S.tracks[E];if(_&&"function"==typeof _.buffer.changeType){var c=v[E],h=c.id,d=c.codec,P=c.levelCodec,m=c.container,C=c.metadata,x=(_.levelCodec||_.codec).replace(W,"$1"),T=(P||d).replace(W,"$1");x!==T&&(S.appendChangeType(E,m+";codecs="+(P||d)),V.logger.log("[buffer-controller]: switching codec "+x+" to "+T),S.tracks[E]={buffer:_.buffer,codec:d,container:m,levelCodec:P,metadata:C,id:h})}}else S.pendingTracks[E]=v[E]}),!w&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},M.appendChangeType=function(g,v){var S=this,w=this.operationQueue,E={execute:function(){var c=S.sourceBuffer[g];c&&(V.logger.log("[buffer-controller]: changing "+g+" sourceBuffer type to "+v),c.changeType(v)),w.shiftAndExecuteNext(g)},onStart:function(){},onComplete:function(){},onError:function(c){V.logger.warn("[buffer-controller]: Failed to change "+g+" SourceBuffer type",c)}};w.append(E,g)},M.onBufferAppending=function(g,v){var S=this,w=this.hls,E=this.operationQueue,_=this.tracks,c=v.data,h=v.type,d=v.frag,P=v.part,m=v.chunkMeta,C=m.buffering[h],x=self.performance.now();C.start=x;var T=d.stats.buffering,I=P?P.stats.buffering:null;0===T.start&&(T.start=x),I&&0===I.start&&(I.start=x);var Z="audio"===h&&1===m.id&&"audio/mpeg"===_.audio?.container;E.append({execute:function(){if(C.executeStart=self.performance.now(),Z){var oe=S.sourceBuffer[h];if(oe){var Te=d.start-oe.timestampOffset;Math.abs(Te)>=.1&&(V.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+Te+") sn: "+d.sn+")"),oe.timestampOffset=d.start)}}S.appendExecutor(c,h)},onStart:function(){},onComplete:function(){var oe=self.performance.now();C.executeEnd=C.end=oe,0===T.first&&(T.first=oe),I&&0===I.first&&(I.first=oe);var Te=S.sourceBuffer,ye={};for(var Ce in Te)ye[Ce]=u.BufferHelper.getBuffered(Te[Ce]);S.appendError=0,S.hls.trigger(G.Events.BUFFER_APPENDED,{type:h,frag:d,part:P,chunkMeta:m,parent:d.type,timeRanges:ye})},onError:function(oe){V.logger.error("[buffer-controller]: Error encountered while trying to append to the "+h+" SourceBuffer",oe);var Te={type:q.ErrorTypes.MEDIA_ERROR,parent:d.type,details:q.ErrorDetails.BUFFER_APPEND_ERROR,err:oe,fatal:!1};oe.code===DOMException.QUOTA_EXCEEDED_ERR?Te.details=q.ErrorDetails.BUFFER_FULL_ERROR:(S.appendError++,Te.details=q.ErrorDetails.BUFFER_APPEND_ERROR,S.appendError>w.config.appendErrorMaxRetry&&(V.logger.error("[buffer-controller]: Failed "+w.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),Te.fatal=!0,w.stopLoad())),w.trigger(G.Events.ERROR,Te)}},h)},M.onBufferFlushing=function(g,v){var S=this,w=this.operationQueue,E=function(c){return{execute:S.removeExecutor.bind(S,c,v.startOffset,v.endOffset),onStart:function(){},onComplete:function(){S.hls.trigger(G.Events.BUFFER_FLUSHED,{type:c})},onError:function(d){V.logger.warn("[buffer-controller]: Failed to remove from "+c+" SourceBuffer",d)}}};v.type?w.append(E(v.type),v.type):this.getSourceBufferTypes().forEach(function(_){w.append(E(_),_)})},M.onFragParsed=function(g,v){var S=this,w=v.frag,E=v.part,_=[],c=E?E.elementaryStreams:w.elementaryStreams;c[B.ElementaryStreamTypes.AUDIOVIDEO]?_.push("audiovideo"):(c[B.ElementaryStreamTypes.AUDIO]&&_.push("audio"),c[B.ElementaryStreamTypes.VIDEO]&&_.push("video")),0===_.length&&V.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+w.type+" level: "+w.level+" sn: "+w.sn),this.blockBuffers(function(){var P=self.performance.now();w.stats.buffering.end=P,E&&(E.stats.buffering.end=P),S.hls.trigger(G.Events.FRAG_BUFFERED,{frag:w,part:E,stats:E?E.stats:w.stats,id:w.type})},_)},M.onFragChanged=function(g,v){this.flushBackBuffer()},M.onBufferEos=function(g,v){var S=this;this.getSourceBufferTypes().reduce(function(E,_){var c=S.sourceBuffer[_];return(!v.type||v.type===_)&&c&&!c.ended&&(c.ended=!0,V.logger.log("[buffer-controller]: "+_+" sourceBuffer now EOS")),E&&!(c&&!c.ended)},!0)&&this.blockBuffers(function(){var E=S.mediaSource;!E||"open"!==E.readyState||E.endOfStream()})},M.onLevelUpdated=function(g,v){var S=v.details;S.fragments.length&&(this.details=S,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},M.flushBackBuffer=function(){var g=this.hls,v=this.details,S=this.media,w=this.sourceBuffer;if(S&&null!==v){var E=this.getSourceBufferTypes();if(E.length){var _=v.live&&null!==g.config.liveBackBufferLength?g.config.liveBackBufferLength:g.config.backBufferLength;if((0,ee.isFiniteNumber)(_)&&!(_<0)){var c=S.currentTime,h=v.levelTargetDuration,d=Math.max(_,h),P=Math.floor(c/h)*h-d;E.forEach(function(m){var C=w[m];if(C){var x=u.BufferHelper.getBuffered(C);x.length>0&&P>x.start(0)&&(g.trigger(G.Events.BACK_BUFFER_REACHED,{bufferEnd:P}),v.live&&g.trigger(G.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:P}),g.trigger(G.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:P,type:m}))}})}}}},M.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var g=this.details,v=this.hls,w=this.mediaSource,E=g.fragments[0].start+g.totalduration,_=this.media.duration,c=(0,ee.isFiniteNumber)(w.duration)?w.duration:0;g.live&&v.config.liveDurationInfinity?(V.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),w.duration=1/0,this.updateSeekableRange(g)):(E>c&&E>_||!(0,ee.isFiniteNumber)(_))&&(V.logger.log("[buffer-controller]: Updating Media Source duration to "+E.toFixed(3)),w.duration=E)}},M.updateSeekableRange=function(g){var v=this.mediaSource,S=g.fragments;if(S.length&&g.live&&null!=v&&v.setLiveSeekableRange){var E=Math.max(0,S[0].start),_=Math.max(E,E+g.totalduration);v.setLiveSeekableRange(E,_)}},M.checkPendingTracks=function(){var g=this.bufferCodecEventsExpected,v=this.operationQueue,S=this.pendingTracks,w=Object.keys(S).length;if(w&&!g||2===w){this.createSourceBuffers(S),this.pendingTracks={};var E=this.getSourceBufferTypes();if(0===E.length)return void this.hls.trigger(G.Events.ERROR,{type:q.ErrorTypes.MEDIA_ERROR,details:q.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});E.forEach(function(_){v.executeNext(_)})}},M.createSourceBuffers=function(g){var v=this.sourceBuffer,S=this.mediaSource;if(!S)throw Error("createSourceBuffers called when mediaSource was null");var w=0;for(var E in g)if(!v[E]){var _=g[E];if(!_)throw Error("source buffer exists for track "+E+", however track does not");var c=_.levelCodec||_.codec,h=_.container+";codecs="+c;V.logger.log("[buffer-controller]: creating sourceBuffer("+h+")");try{var d=v[E]=S.addSourceBuffer(h),P=E;this.addBufferListener(P,"updatestart",this._onSBUpdateStart),this.addBufferListener(P,"updateend",this._onSBUpdateEnd),this.addBufferListener(P,"error",this._onSBUpdateError),this.tracks[E]={buffer:d,codec:c,container:_.container,levelCodec:_.levelCodec,metadata:_.metadata,id:_.id},w++}catch(m){V.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+m.message),this.hls.trigger(G.Events.ERROR,{type:q.ErrorTypes.MEDIA_ERROR,details:q.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:m,mimeType:h})}}w&&this.hls.trigger(G.Events.BUFFER_CREATED,{tracks:this.tracks})},M._onSBUpdateStart=function(g){this.operationQueue.current(g).onStart()},M._onSBUpdateEnd=function(g){var v=this.operationQueue;v.current(g).onComplete(),v.shiftAndExecuteNext(g)},M._onSBUpdateError=function(g,v){V.logger.error("[buffer-controller]: "+g+" SourceBuffer error",v),this.hls.trigger(G.Events.ERROR,{type:q.ErrorTypes.MEDIA_ERROR,details:q.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var S=this.operationQueue.current(g);S&&S.onError(v)},M.removeExecutor=function(g,v,S){var w=this.media,E=this.mediaSource,_=this.operationQueue,h=this.sourceBuffer[g];if(!w||!E||!h)return V.logger.warn("[buffer-controller]: Attempting to remove from the "+g+" SourceBuffer, but it does not exist"),void _.shiftAndExecuteNext(g);var d=(0,ee.isFiniteNumber)(w.duration)?w.duration:1/0,P=(0,ee.isFiniteNumber)(E.duration)?E.duration:1/0,m=Math.max(0,v),C=Math.min(S,d,P);C>m?(V.logger.log("[buffer-controller]: Removing ["+m+","+C+"] from the "+g+" SourceBuffer"),console.assert(!h.updating,g+" sourceBuffer must not be updating"),h.remove(m,C)):_.shiftAndExecuteNext(g)},M.appendExecutor=function(g,v){var S=this.operationQueue,E=this.sourceBuffer[v];if(!E)return V.logger.warn("[buffer-controller]: Attempting to append to the "+v+" SourceBuffer, but it does not exist"),void S.shiftAndExecuteNext(v);E.ended=!1,console.assert(!E.updating,v+" sourceBuffer must not be updating"),E.appendBuffer(g)},M.blockBuffers=function(g,v){var S=this;if(void 0===v&&(v=this.getSourceBufferTypes()),!v.length)return V.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(g);var w=this.operationQueue,E=v.map(function(_){return w.appendBlocker(_)});Promise.all(E).then(function(){g(),v.forEach(function(_){var c=S.sourceBuffer[_];(!c||!c.updating)&&w.shiftAndExecuteNext(_)})})},M.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},M.addBufferListener=function(g,v,S){var w=this.sourceBuffer[g];if(w){var E=S.bind(this,g);this.listeners[g].push({event:v,listener:E}),w.addEventListener(v,E)}},M.removeBufferListeners=function(g){var v=this.sourceBuffer[g];v&&this.listeners[g].forEach(function(S){v.removeEventListener(S.event,S.listener)})},R}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
                !*** ./src/controller/buffer-operation-queue.ts ***!
                \**************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>G});var ee=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),G=function(){function V(u){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=u}var q=V.prototype;return q.append=function(Y,B){var F=this.queues[B];F.push(Y),1===F.length&&this.buffers[B]&&this.executeNext(B)},q.insertAbort=function(Y,B){this.queues[B].unshift(Y),this.executeNext(B)},q.appendBlocker=function(Y){var B,F=new Promise(function(W){B=W});return this.append({execute:B,onStart:function(){},onComplete:function(){},onError:function(){}},Y),F},q.executeNext=function(Y){var O=this.buffers[Y],W=this.queues[Y];if(W.length){var U=W[0];try{U.execute()}catch(R){ee.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),U.onError(R),(!O||!O.updating)&&(W.shift(),this.executeNext(Y))}}},q.shiftAndExecuteNext=function(Y){this.queues[Y].shift(),this.executeNext(Y)},q.current=function(Y){return this.queues[Y][0]},V}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
                !*** ./src/controller/cap-level-controller.ts ***!
                \************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>u});var ee=N(
/*! ../events */
"./src/events.ts");function G(Y,B){for(var F=0;F<B.length;F++){var O=B[F];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(Y,O.key,O)}}const u=function(){function Y(F){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=F,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var B=Y.prototype;return B.setStreamController=function(O){this.streamController=O},B.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},B.registerListeners=function(){var O=this.hls;O.on(ee.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),O.on(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),O.on(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),O.on(ee.Events.BUFFER_CODECS,this.onBufferCodecs,this),O.on(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},B.unregisterListener=function(){var O=this.hls;O.off(ee.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),O.off(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),O.off(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),O.off(ee.Events.BUFFER_CODECS,this.onBufferCodecs,this),O.off(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},B.onFpsDropLevelCapping=function(O,W){Y.isLevelAllowed(W.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(W.droppedLevel)},B.onMediaAttaching=function(O,W){this.media=W.media instanceof HTMLVideoElement?W.media:null},B.onManifestParsed=function(O,W){var U=this.hls;this.restrictedLevels=[],this.firstLevel=W.firstLevel,U.config.capLevelToPlayerSize&&W.video&&this.startCapping()},B.onBufferCodecs=function(O,W){this.hls.config.capLevelToPlayerSize&&W.video&&this.startCapping()},B.onMediaDetaching=function(){this.stopCapping()},B.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var O=this.hls.levels;if(O.length){var W=this.hls;W.autoLevelCapping=this.getMaxLevel(O.length-1),W.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=W.autoLevelCapping}}},B.getMaxLevel=function(O){var W=this,U=this.hls.levels;if(!U.length)return-1;var R=U.filter(function(M,b){return Y.isLevelAllowed(b,W.restrictedLevels)&&b<=O});return this.clientRect=null,Y.getMaxLevelByMediaSize(R,this.mediaWidth,this.mediaHeight)},B.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},B.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},B.getDimensions=function(){if(this.clientRect)return this.clientRect;var O=this.media,W={width:0,height:0};if(O){var U=O.getBoundingClientRect();W.width=U.width,W.height=U.height,!W.width&&!W.height&&(W.width=U.right-U.left||O.width||0,W.height=U.bottom-U.top||O.height||0)}return this.clientRect=W,W},Y.isLevelAllowed=function(O,W){return void 0===W&&(W=[]),-1===W.indexOf(O)},Y.getMaxLevelByMediaSize=function(O,W,U){if(!O||!O.length)return-1;for(var M=O.length-1,b=0;b<O.length;b+=1){var g=O[b];if((g.width>=W||g.height>=U)&&(S=g,!(w=O[b+1])||S.width!==w.width||S.height!==w.height)){M=b;break}}var S,w;return M},function V(Y,B,F){B&&G(Y.prototype,B),F&&G(Y,F),Object.defineProperty(Y,"prototype",{writable:!1})}(Y,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var O=1;if(!this.hls.config.ignoreDevicePixelRatio)try{O=self.devicePixelRatio}catch{}return O}}]),Y}()},"./src/controller/cmcd-controller.ts":
/*!*******************************************!*\
                !*** ./src/controller/cmcd-controller.ts ***!
                \*******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>U});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../types/cmcd */
"./src/types/cmcd.ts"),V=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts");function u(R,M){for(var b=0;b<M.length;b++){var g=M[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(R,g.key,g)}}function Y(R,M,b){return M&&u(R.prototype,M),b&&u(R,b),Object.defineProperty(R,"prototype",{writable:!1}),R}function B(R,M){var b=typeof Symbol<"u"&&R[Symbol.iterator]||R["@@iterator"];if(b)return(b=b.call(R)).next.bind(b);if(Array.isArray(R)||(b=function F(R,M){if(R){if("string"==typeof R)return O(R,M);var b=Object.prototype.toString.call(R).slice(8,-1);if("Object"===b&&R.constructor&&(b=R.constructor.name),"Map"===b||"Set"===b)return Array.from(R);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return O(R,M)}}(R))||M&&R&&"number"==typeof R.length){b&&(R=b);var g=0;return function(){return g>=R.length?{done:!0}:{done:!1,value:R[g++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(R,M){(null==M||M>R.length)&&(M=R.length);for(var b=0,g=new Array(M);b<M;b++)g[b]=R[b];return g}function W(){return W=Object.assign?Object.assign.bind():function(R){for(var M=1;M<arguments.length;M++){var b=arguments[M];for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(R[g]=b[g])}return R},W.apply(this,arguments)}var U=function(){function R(b){var g=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){g.initialized&&(g.starved=!0),g.buffering=!0},this.onPlaying=function(){g.initialized||(g.initialized=!0),g.buffering=!1},this.applyPlaylistData=function(w){try{g.apply(w,{ot:G.CMCDObjectType.MANIFEST,su:!g.initialized})}catch(E){q.logger.warn("Could not generate manifest CMCD data.",E)}},this.applyFragmentData=function(w){try{var E=w.frag,_=g.hls.levels[E.level],c=g.getObjectType(E),h={d:1e3*E.duration,ot:c};(c===G.CMCDObjectType.VIDEO||c===G.CMCDObjectType.AUDIO||c==G.CMCDObjectType.MUXED)&&(h.br=_.bitrate/1e3,h.tb=g.getTopBandwidth(c)/1e3,h.bl=g.getBufferLength(c)),g.apply(w,h)}catch(d){q.logger.warn("Could not generate segment CMCD data.",d)}},this.hls=b;var v=this.config=b.config,S=v.cmcd;null!=S&&(v.pLoader=this.createPlaylistLoader(),v.fLoader=this.createFragmentLoader(),this.sid=S.sessionId||R.uuid(),this.cid=S.contentId,this.useHeaders=!0===S.useHeaders,this.registerListeners())}var M=R.prototype;return M.registerListeners=function(){var g=this.hls;g.on(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.on(ee.Events.MEDIA_DETACHED,this.onMediaDetached,this),g.on(ee.Events.BUFFER_CREATED,this.onBufferCreated,this)},M.unregisterListeners=function(){var g=this.hls;g.off(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.off(ee.Events.MEDIA_DETACHED,this.onMediaDetached,this),g.off(ee.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},M.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},M.onMediaAttached=function(g,v){this.media=v.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},M.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},M.onBufferCreated=function(g,v){var S,w;this.audioBuffer=null===(S=v.tracks.audio)||void 0===S?void 0:S.buffer,this.videoBuffer=null===(w=v.tracks.video)||void 0===w?void 0:w.buffer},M.createData=function(){var g;return{v:G.CMCDVersion,sf:G.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(g=this.media)||void 0===g?void 0:g.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},M.apply=function(g,v){if(void 0===v&&(v={}),W(v,this.createData()),this.starved&&(v.ot===G.CMCDObjectType.INIT||v.ot===G.CMCDObjectType.VIDEO||v.ot===G.CMCDObjectType.MUXED)&&(v.bs=!0,v.su=!0,this.starved=!1),null==v.su&&(v.su=this.buffering),this.useHeaders){var w=R.toHeaders(v);if(!Object.keys(w).length)return;g.headers||(g.headers={}),W(g.headers,w)}else{var E=R.toQuery(v);if(!E)return;g.url=R.appendQueryToUri(g.url,E)}},M.getObjectType=function(g){var v=g.type;return"subtitle"===v?G.CMCDObjectType.TIMED_TEXT:"initSegment"===g.sn?G.CMCDObjectType.INIT:"audio"===v?G.CMCDObjectType.AUDIO:"main"===v?this.hls.audioTracks.length?G.CMCDObjectType.VIDEO:G.CMCDObjectType.MUXED:void 0},M.getTopBandwidth=function(g){var S,v=0,w=this.hls;if(g===G.CMCDObjectType.AUDIO)S=w.audioTracks;else{var E=w.maxAutoLevel;S=w.levels.slice(0,E>-1?E+1:w.levels.length)}for(var h,c=B(S);!(h=c()).done;){var d=h.value;d.bitrate>v&&(v=d.bitrate)}return v>0?v:NaN},M.getBufferLength=function(g){var v=this.hls.media,S=g===G.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return S&&v?1e3*V.BufferHelper.bufferInfo(S,v.currentTime,this.config.maxBufferHole).len:NaN},M.createPlaylistLoader=function(){var v=this.applyPlaylistData,S=this.config.pLoader||this.config.loader;return function(){function w(_){this.loader=void 0,this.loader=new S(_)}var E=w.prototype;return E.destroy=function(){this.loader.destroy()},E.abort=function(){this.loader.abort()},E.load=function(c,h,d){v(c),this.loader.load(c,h,d)},Y(w,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),w}()},M.createFragmentLoader=function(){var v=this.applyFragmentData,S=this.config.fLoader||this.config.loader;return function(){function w(_){this.loader=void 0,this.loader=new S(_)}var E=w.prototype;return E.destroy=function(){this.loader.destroy()},E.abort=function(){this.loader.abort()},E.load=function(c,h,d){v(c),this.loader.load(c,h,d)},Y(w,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),w}()},R.uuid=function(){var g=URL.createObjectURL(new Blob),v=g.toString();return URL.revokeObjectURL(g),v.slice(v.lastIndexOf("/")+1)},R.serialize=function(g){for(var P,v=[],w=function(Z){return Math.round(Z)},E=function(Z){return 100*w(Z/100)},c={br:w,d:w,bl:E,dl:E,mtp:E,nor:function(Z){return encodeURIComponent(Z)},rtp:E,tb:w},d=B(Object.keys(g||{}).sort());!(P=d()).done;){var m=P.value,C=g[m];if(Z=C,!(Number.isNaN(Z)||null==Z||""===Z||!1===Z||"v"===m&&1===C||"pr"==m&&1===C)){var x=c[m];x&&(C=x(C));var I,T=typeof C;I="ot"===m||"sf"===m||"st"===m?m+"="+C:"boolean"===T?m:"number"===T?m+"="+C:m+"="+JSON.stringify(C),v.push(I)}}var Z;return v.join(",")},R.toHeaders=function(g){for(var S={},w=["Object","Request","Session","Status"],E=[{},{},{},{}],_={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},c=0,h=Object.keys(g);c<h.length;c++){var d=h[c];E[null!=_[d]?_[d]:1][d]=g[d]}for(var m=0;m<E.length;m++){var C=R.serialize(E[m]);C&&(S["CMCD-"+w[m]]=C)}return S},R.toQuery=function(g){return"CMCD="+encodeURIComponent(R.serialize(g))},R.appendQueryToUri=function(g,v){if(!v)return g;var S=g.includes("?")?"&":"?";return""+g+S+v},R}()},"./src/controller/eme-controller.ts":
/*!******************************************!*\
                !*** ./src/controller/eme-controller.ts ***!
                \******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>U});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../errors */
"./src/errors.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),q=N(
/*! ../utils/mediakeys-helper */
"./src/utils/mediakeys-helper.ts");function u(R,M){for(var b=0;b<M.length;b++){var g=M[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(R,g.key,g)}}const U=function(){function R(b){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=b,this._config=b.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var M=R.prototype;return M.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},M._registerListeners=function(){this.hls.on(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ee.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this)},M._unregisterListeners=function(){this.hls.off(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ee.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this)},M.getLicenseServerUrl=function(g){switch(g){case q.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+g+'"')},M._attemptKeySystemAccess=function(g,v,S){var w=this,E=function(M,b,g,v){if(M===q.KeySystems.WIDEVINE)return function(M,b,g){var v={audioCapabilities:[],videoCapabilities:[]};return M.forEach(function(S){v.audioCapabilities.push({contentType:'audio/mp4; codecs="'+S+'"',robustness:g.audioRobustness||""})}),b.forEach(function(S){v.videoCapabilities.push({contentType:'video/mp4; codecs="'+S+'"',robustness:g.videoRobustness||""})}),[v]}(b,g,v);throw new Error("Unknown key-system: "+M)}(g,v,S,this._drmSystemOptions);V.logger.log("Requesting encrypted media key-system access");var _=this.requestMediaKeySystemAccess(g,E);this.mediaKeysPromise=_.then(function(c){return w._onMediaKeySystemAccessObtained(g,c)}),_.catch(function(c){V.logger.error('Failed to obtain key-system "'+g+'" access:',c)})},M._onMediaKeySystemAccessObtained=function(g,v){var S=this;V.logger.log('Access for key-system "'+g+'" obtained');var w={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:v,mediaKeySystemDomain:g};this._mediaKeysList.push(w);var E=Promise.resolve().then(function(){return v.createMediaKeys()}).then(function(_){return w.mediaKeys=_,V.logger.log('Media-keys created for key-system "'+g+'"'),S._onMediaKeysCreated(),_});return E.catch(function(_){V.logger.error("Failed to create media-keys:",_)}),E},M._onMediaKeysCreated=function(){var g=this;this._mediaKeysList.forEach(function(v){v.mediaKeysSession||(v.mediaKeysSession=v.mediaKeys.createSession(),g._onNewMediaKeySession(v.mediaKeysSession))})},M._onNewMediaKeySession=function(g){var v=this;V.logger.log("New key-system session "+g.sessionId),g.addEventListener("message",function(S){v._onKeySessionMessage(g,S.message)},!1)},M._onKeySessionMessage=function(g,v){V.logger.log("Got EME message event, creating license request"),this._requestLicense(v,function(S){V.logger.log("Received license data (length: "+(S&&S.byteLength)+"), updating key-session"),g.update(S).catch(function(w){V.logger.warn("Updating key-session failed: "+w)})})},M.onMediaEncrypted=function(g){var v=this;if(V.logger.log('Media is encrypted using "'+g.initDataType+'" init data type'),!this.mediaKeysPromise)return V.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var S=function(E){v._media&&(v._attemptSetMediaKeys(E),v._generateRequestWithPreferredKeySession(g.initDataType,g.initData))};this.mediaKeysPromise.then(S).catch(S)},M._attemptSetMediaKeys=function(g){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var v=this._mediaKeysList[0];if(!v||!v.mediaKeys)return V.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});V.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(v.mediaKeys),this._hasSetMediaKeys=!0}},M._generateRequestWithPreferredKeySession=function(g,v){var S=this,w=this._mediaKeysList[0];if(!w)return V.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(!w.mediaKeysSessionInitialized){var E=w.mediaKeysSession;return E?v?(V.logger.log('Generating key-session request for "'+g+'" init data type'),w.mediaKeysSessionInitialized=!0,void E.generateRequest(g,v).then(function(){V.logger.debug("Key-session generation succeeded")}).catch(function(_){V.logger.error("Error generating key-session request:",_),S.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(V.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(V.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))}V.logger.warn("Key-Session already initialized but requested again")},M._createLicenseXhr=function(g,v,S){var w=new XMLHttpRequest;w.responseType="arraybuffer",w.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,w,g,v,S);var E=this._licenseXhrSetup;if(E)try{E.call(this.hls,w,g),E=void 0}catch(_){V.logger.error(_)}try{w.readyState||w.open("POST",g,!0),E&&E.call(this.hls,w,g)}catch(_){throw new Error("issue setting up KeySystem license XHR "+_)}return w},M._onLicenseRequestReadyStageChange=function(g,v,S,w){if(4===g.readyState)if(200===g.status){this._requestLicenseFailureCount=0,V.logger.log("License request succeeded");var E=g.response,_=this._licenseResponseCallback;if(_)try{E=_.call(this.hls,g,v)}catch(h){V.logger.error(h)}w(E)}else{if(V.logger.error("License Request XHR failed ("+v+"). Status: "+g.status+" ("+g.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});V.logger.warn("Retrying license request, "+(3-this._requestLicenseFailureCount+1)+" attempts left"),this._requestLicense(S,w)}},M._generateLicenseRequestChallenge=function(g,v){if(g.mediaKeySystemDomain===q.KeySystems.WIDEVINE)return v;throw new Error("unsupported key-system: "+g.mediaKeySystemDomain)},M._requestLicense=function(g,v){V.logger.log("Requesting content license for key-system");var S=this._mediaKeysList[0];if(!S)return V.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var w=this.getLicenseServerUrl(S.mediaKeySystemDomain),E=this._createLicenseXhr(w,g,v);V.logger.log("Sending license request to URL: "+w);var _=this._generateLicenseRequestChallenge(S,g);E.send(_)}catch(c){V.logger.error("Failure requesting DRM license: "+c),this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.KEY_SYSTEM_ERROR,details:G.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},M.onMediaAttached=function(g,v){if(this._emeEnabled){var S=v.media;this._media=S,S.addEventListener("encrypted",this._onMediaEncrypted)}},M.onMediaDetached=function(){var g=this._media,v=this._mediaKeysList;g&&(g.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(v.map(function(S){if(S.mediaKeysSession)return S.mediaKeysSession.close().catch(function(){})})).then(function(){return g.setMediaKeys(null)}).catch(function(){}))},M.onManifestParsed=function(g,v){if(this._emeEnabled){var S=v.levels.map(function(E){return E.audioCodec}).filter(function(E){return!!E}),w=v.levels.map(function(E){return E.videoCodec}).filter(function(E){return!!E});this._attemptKeySystemAccess(q.KeySystems.WIDEVINE,S,w)}},function Y(R,M,b){M&&u(R.prototype,M),b&&u(R,b),Object.defineProperty(R,"prototype",{writable:!1})}(R,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),R}()},"./src/controller/fps-controller.ts":
/*!******************************************!*\
                !*** ./src/controller/fps-controller.ts ***!
                \******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>q});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../utils/logger */
"./src/utils/logger.ts");const q=function(){function u(B){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=B,this.registerListeners()}var Y=u.prototype;return Y.setStreamController=function(F){this.streamController=F},Y.registerListeners=function(){this.hls.on(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},Y.unregisterListeners=function(){this.hls.off(ee.Events.MEDIA_ATTACHING,this.onMediaAttaching)},Y.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},Y.onMediaAttaching=function(F,O){var W=this.hls.config;if(W.capLevelOnFPSDrop){var U=O.media instanceof self.HTMLVideoElement?O.media:null;this.media=U,U&&"function"==typeof U.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),W.fpsDroppedMonitoringPeriod)}},Y.checkFPS=function(F,O,W){var U=performance.now();if(O){if(this.lastTime){var M=W-this.lastDroppedFrames,b=O-this.lastDecodedFrames,g=1e3*M/(U-this.lastTime),v=this.hls;if(v.trigger(ee.Events.FPS_DROP,{currentDropped:M,currentDecoded:b,totalDroppedFrames:W}),g>0&&M>v.config.fpsDroppedMonitoringThreshold*b){var S=v.currentLevel;G.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+S),S>0&&(-1===v.autoLevelCapping||v.autoLevelCapping>=S)&&(v.trigger(ee.Events.FPS_DROP_LEVEL_CAPPING,{level:S-=1,droppedLevel:v.currentLevel}),v.autoLevelCapping=S,this.streamController.nextLevelSwitch())}}this.lastTime=U,this.lastDroppedFrames=W,this.lastDecodedFrames=O}},Y.checkFPSInterval=function(){var F=this.media;if(F)if(this.isVideoPlaybackQualityAvailable){var O=F.getVideoPlaybackQuality();this.checkFPS(F,O.totalVideoFrames,O.droppedVideoFrames)}else this.checkFPS(F,F.webkitDecodedFrameCount,F.webkitDroppedFrameCount)},u}()},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
                !*** ./src/controller/fragment-finders.ts ***!
                \********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{findFragWithCC:()=>B,findFragmentByPDT:()=>V,findFragmentByPTS:()=>q,fragmentWithinToleranceTest:()=>u,pdtWithinToleranceTest:()=>Y});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../utils/binary-search */
"./src/utils/binary-search.ts");function V(F,O,W){if(null===O||!Array.isArray(F)||!F.length||!(0,ee.isFiniteNumber)(O))return null;if(O<(F[0].programDateTime||0))return null;if(O>=(F[F.length-1].endProgramDateTime||0))return null;W=W||0;for(var M=0;M<F.length;++M){var b=F[M];if(Y(O,W,b))return b}return null}function q(F,O,W,U){void 0===W&&(W=0),void 0===U&&(U=0);var R=null;return F?R=O[F.sn-O[0].sn+1]||null:0===W&&0===O[0].start&&(R=O[0]),R&&0===u(W,U,R)?R:G.default.search(O,u.bind(null,W,U))||R}function u(F,O,W){void 0===F&&(F=0),void 0===O&&(O=0);var U=Math.min(O,W.duration+(W.deltaPTS?W.deltaPTS:0));return W.start+W.duration-U<=F?1:W.start-U>F&&W.start?-1:0}function Y(F,O,W){var U=1e3*Math.min(O,W.duration+(W.deltaPTS?W.deltaPTS:0));return(W.endProgramDateTime||0)-U>F}function B(F,O){return G.default.search(F,function(W){return W.cc<O?1:W.cc>O?-1:0})}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
                !*** ./src/controller/fragment-tracker.ts ***!
                \********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{FragmentState:()=>V,FragmentTracker:()=>q});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../types/loader */
"./src/types/loader.ts"),V=(()=>{return(B=V||(V={})).NOT_LOADED="NOT_LOADED",B.APPENDING="APPENDING",B.PARTIAL="PARTIAL",B.OK="OK",V;var B})(),q=function(){function B(O){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=O,this._registerListeners()}var F=B.prototype;return F._registerListeners=function(){var W=this.hls;W.on(ee.Events.BUFFER_APPENDED,this.onBufferAppended,this),W.on(ee.Events.FRAG_BUFFERED,this.onFragBuffered,this),W.on(ee.Events.FRAG_LOADED,this.onFragLoaded,this)},F._unregisterListeners=function(){var W=this.hls;W.off(ee.Events.BUFFER_APPENDED,this.onBufferAppended,this),W.off(ee.Events.FRAG_BUFFERED,this.onFragBuffered,this),W.off(ee.Events.FRAG_LOADED,this.onFragLoaded,this)},F.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},F.getAppendedFrag=function(W,U){if(U===G.PlaylistLevelType.MAIN){var R=this.activeFragment,M=this.activeParts;if(!R)return null;if(M)for(var b=M.length;b--;){var g=M[b],v=g?g.end:R.appendedPTS;if(g.start<=W&&void 0!==v&&W<=v)return b>9&&(this.activeParts=M.slice(b-9)),g}else if(R.start<=W&&void 0!==R.appendedPTS&&W<=R.appendedPTS)return R}return this.getBufferedFrag(W,U)},F.getBufferedFrag=function(W,U){for(var R=this.fragments,M=Object.keys(R),b=M.length;b--;){var g=R[M[b]];if(g?.body.type===U&&g.buffered){var v=g.body;if(v.start<=W&&W<=v.end)return v}}return null},F.detectEvictedFragments=function(W,U,R){var M=this;Object.keys(this.fragments).forEach(function(b){var g=M.fragments[b];if(g){if(!g.buffered)return void(g.body.type===R&&M.removeFragment(g.body));var v=g.range[W];v&&v.time.some(function(S){var w=!M.isTimeBuffered(S.startPTS,S.endPTS,U);return w&&M.removeFragment(g.body),w})}})},F.detectPartialFragments=function(W){var U=this,R=this.timeRanges,M=W.frag,b=W.part;if(R&&"initSegment"!==M.sn){var g=Y(M),v=this.fragments[g];v&&(Object.keys(R).forEach(function(S){var w=M.elementaryStreams[S];w&&(v.range[S]=U.getBufferedTimes(M,b,null!==b||!0===w.partial,R[S]))}),v.loaded=null,Object.keys(v.range).length?v.buffered=!0:this.removeFragment(v.body))}},F.fragBuffered=function(W){var U=Y(W),R=this.fragments[U];R&&(R.loaded=null,R.buffered=!0)},F.getBufferedTimes=function(W,U,R,M){for(var b={time:[],partial:R},g=U?U.start:W.start,v=U?U.end:W.end,S=W.minEndPTS||v,w=W.maxStartPTS||g,E=0;E<M.length;E++){var _=M.start(E)-this.bufferPadding,c=M.end(E)+this.bufferPadding;if(w>=_&&S<=c){b.time.push({startPTS:Math.max(g,M.start(E)),endPTS:Math.min(v,M.end(E))});break}if(g<c&&v>_)b.partial=!0,b.time.push({startPTS:Math.max(g,M.start(E)),endPTS:Math.min(v,M.end(E))});else if(v<=_)break}return b},F.getPartialFragment=function(W){var R,M,b,U=null,g=0,v=this.bufferPadding,S=this.fragments;return Object.keys(S).forEach(function(w){var E=S[w];E&&u(E)&&(b=E.body.end+v,W>=(M=E.body.start-v)&&W<=b&&(R=Math.min(W-M,b-W),g<=R&&(U=E.body,g=R)))}),U},F.getState=function(W){var U=Y(W),R=this.fragments[U];return R?R.buffered?u(R)?V.PARTIAL:V.OK:V.APPENDING:V.NOT_LOADED},F.isTimeBuffered=function(W,U,R){for(var M,b,g=0;g<R.length;g++){if(M=R.start(g)-this.bufferPadding,b=R.end(g)+this.bufferPadding,W>=M&&U<=b)return!0;if(U<=M)return!1}return!1},F.onFragLoaded=function(W,U){var R=U.frag;if("initSegment"!==R.sn&&!R.bitrateTest&&!U.part){var b=Y(R);this.fragments[b]={body:R,loaded:U,buffered:!1,range:Object.create(null)}}},F.onBufferAppended=function(W,U){var R=this,M=U.frag,b=U.part,g=U.timeRanges;if(M.type===G.PlaylistLevelType.MAIN)if(this.activeFragment=M,b){var v=this.activeParts;v||(this.activeParts=v=[]),v.push(b)}else this.activeParts=null;this.timeRanges=g,Object.keys(g).forEach(function(S){var w=g[S];if(R.detectEvictedFragments(S,w),!b)for(var E=0;E<w.length;E++)M.appendedPTS=Math.max(w.end(E),M.appendedPTS||0)})},F.onFragBuffered=function(W,U){this.detectPartialFragments(U)},F.hasFragment=function(W){var U=Y(W);return!!this.fragments[U]},F.removeFragmentsInRange=function(W,U,R){var M=this;Object.keys(this.fragments).forEach(function(b){var g=M.fragments[b];if(g&&g.buffered){var v=g.body;v.type===R&&v.start<U&&v.end>W&&M.removeFragment(v)}})},F.removeFragment=function(W){var U=Y(W);W.stats.loaded=0,W.clearElementaryStreamInfo(),delete this.fragments[U]},F.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},B}();function u(B){var F,O;return B.buffered&&((null===(F=B.range.video)||void 0===F?void 0:F.partial)||(null===(O=B.range.audio)||void 0===O?void 0:O.partial))}function Y(B){return B.type+"_"+B.level+"_"+B.urlId+"_"+B.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
                !*** ./src/controller/gap-controller.ts ***!
                \******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{MAX_START_GAP_JUMP:()=>Y,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>B,SKIP_BUFFER_RANGE_START:()=>F,STALL_MINIMUM_DURATION_MS:()=>u,default:()=>O});var ee=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),G=N(
/*! ../errors */
"./src/errors.ts"),V=N(
/*! ../events */
"./src/events.ts"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),u=250,Y=2,B=.1,F=.05,O=function(){function W(R,M,b,g){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=R,this.media=M,this.fragmentTracker=b,this.hls=g}var U=W.prototype;return U.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},U.poll=function(M,b){var g=this.config,v=this.media,S=this.stalled;if(null!==v){var w=v.currentTime,E=v.seeking,_=this.seeking&&!E,c=!this.seeking&&E;if(this.seeking=E,w!==M){if(this.moved=!0,null!==S){if(this.stallReported){var h=self.performance.now()-S;q.logger.warn("playback not stuck anymore @"+w+", after "+Math.round(h)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((c||_)&&(this.stalled=null),!(v.paused&&!E||v.ended||0===v.playbackRate)&&ee.BufferHelper.getBuffered(v).length){var d=ee.BufferHelper.bufferInfo(v,w,0),m=d.nextStart||0;if(d.len>0||m){if(E){var C=d.len>Y,x=!m||b&&b.start<=w||m-w>Y&&!this.fragmentTracker.getPartialFragment(w);if(C||x)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var T,I=Math.max(m,d.start||0)-w,L=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,Z=null==L||null===(T=L.details)||void 0===T?void 0:T.live;if(I>0&&I<=(Z?2*L.details.targetduration:Y))return void this._trySkipBufferHole(null)}var ne=self.performance.now();if(null===S)return void(this.stalled=ne);var oe=ne-S;if(E||!(oe>=u)||(this._reportStall(d),this.media)){var Te=ee.BufferHelper.bufferInfo(v,w,g.maxBufferHole);this._tryFixBufferStall(Te,oe)}}}}},U._tryFixBufferStall=function(M,b){var g=this.config,S=this.media;if(null!==S){var E=this.fragmentTracker.getPartialFragment(S.currentTime);if(E&&(this._trySkipBufferHole(E)||!this.media))return;M.len>g.maxBufferHole&&b>1e3*g.highBufferWatchdogPeriod&&(q.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},U._reportStall=function(M){var b=this.hls,g=this.media;!this.stallReported&&g&&(this.stallReported=!0,q.logger.warn("Playback stalling at @"+g.currentTime+" due to low buffer ("+JSON.stringify(M)+")"),b.trigger(V.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:M.len}))},U._trySkipBufferHole=function(M){var b=this.config,g=this.hls,v=this.media;if(null===v)return 0;for(var S=v.currentTime,w=0,E=ee.BufferHelper.getBuffered(v),_=0;_<E.length;_++){var c=E.start(_);if(S+b.maxBufferHole>=w&&S<c){var h=Math.max(c+F,v.currentTime+B);return q.logger.warn("skipping hole, adjusting currentTime from "+S+" to "+h),this.moved=!0,this.stalled=null,v.currentTime=h,M&&g.trigger(V.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+S+" to "+h,frag:M}),h}w=E.end(_)}return 0},U._tryNudgeBuffer=function(){var M=this.config,b=this.hls,g=this.media,v=this.nudgeRetry;if(null!==g){var S=g.currentTime;if(this.nudgeRetry++,v<M.nudgeMaxRetry){var w=S+(v+1)*M.nudgeOffset;q.logger.warn("Nudging 'currentTime' from "+S+" to "+w),g.currentTime=w,b.trigger(V.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else q.logger.error("Playhead still not moving while enough data buffered @"+S+" after "+M.nudgeMaxRetry+" nudges"),b.trigger(V.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},W}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
                !*** ./src/controller/id3-track-controller.ts ***!
                \************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>M});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),q=N(
/*! ../demux/id3 */
"./src/demux/id3.ts"),u=N(
/*! ../loader/date-range */
"./src/loader/date-range.ts"),Y=N(
/*! ../types/demuxer */
"./src/types/demuxer.ts");function F(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var O=function(){var b=F();try{new b(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function W(b,g){return b.getTime()/1e3-g}function U(b){return Uint8Array.from(b.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}const M=function(){function b(v){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=v,this._registerListeners()}var g=b.prototype;return g.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},g._registerListeners=function(){var S=this.hls;S.on(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),S.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),S.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),S.on(G.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),S.on(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),S.on(G.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},g._unregisterListeners=function(){var S=this.hls;S.off(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),S.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),S.off(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),S.off(G.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),S.off(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),S.off(G.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},g.onMediaAttached=function(S,w){this.media=w.media},g.onMediaDetaching=function(){this.id3Track&&((0,V.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},g.onManifestLoading=function(){this.dateRangeCuesAppended={}},g.createTrack=function(S){var w=this.getID3Track(S.textTracks);return w.mode="hidden",w},g.getID3Track=function(S){if(this.media){for(var w=0;w<S.length;w++){var E=S[w];if("metadata"===E.kind&&"id3"===E.label)return(0,V.sendAddTrackEvent)(E,this.media),E}return this.media.addTextTrack("metadata","id3")}},g.onFragParsingMetadata=function(S,w){if(this.media){var E=this.hls.config,_=E.enableEmsgMetadataCues,c=E.enableID3MetadataCues;if(_||c){var d=w.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var m=F(),C=0;C<d.length;C++){var x=d[C].type;if((x!==Y.MetadataSchema.emsg||_)&&c){var T=q.getID3Frames(d[C].data);if(T){var I=d[C].pts,L=I+d[C].duration;L>O&&(L=O),L-I<=0&&(L=I+.25);for(var re=0;re<T.length;re++){var ne=T[re];if(!q.isTimeStampFrame(ne)){this.updateId3CueEnds(I);var oe=new m(I,L,"");oe.value=ne,x&&(oe.type=x),this.id3Track.addCue(oe)}}}}}}}},g.updateId3CueEnds=function(S){var w,E=null===(w=this.id3Track)||void 0===w?void 0:w.cues;if(E)for(var _=E.length;_--;){var c=E[_];c.startTime<S&&c.endTime===O&&(c.endTime=S)}},g.onBufferFlushing=function(S,w){var c=w.type,h=this.id3Track,d=this.hls;if(d){var P=d.config,m=P.enableEmsgMetadataCues,C=P.enableID3MetadataCues;h&&(m||C)&&(0,V.removeCuesInRange)(h,w.startOffset,w.endOffset,"audio"===c?function(I){return I.type===Y.MetadataSchema.audioId3&&C}:"video"===c?function(I){return I.type===Y.MetadataSchema.emsg&&m}:function(I){return I.type===Y.MetadataSchema.audioId3&&C||I.type===Y.MetadataSchema.emsg&&m})}},g.onLevelUpdated=function(S,w){var E=this,_=w.details;if(this.media&&_.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var c=this.dateRangeCuesAppended,h=this.id3Track,d=_.dateRanges,P=Object.keys(d);if(h)for(var m=Object.keys(c).filter(function(ne){return!P.includes(ne)}),C=function(oe){var Te=m[oe];Object.keys(c[Te].cues).forEach(function(ye){h.removeCue(c[Te].cues[ye])}),delete c[Te]},x=m.length;x--;)C(x);var T=_.fragments[_.fragments.length-1];if(0!==P.length&&(0,ee.isFiniteNumber)(T?.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var I=T.programDateTime/1e3-T.start,L=F(),Z=function(oe){var Te=P[oe],ye=d[Te],Ce=c[Te],we=Ce?.cues||{},Be=Ce?.durationKnown||!1,Ze=W(ye.startDate,I),st=O,ct=ye.endDate;if(ct)st=W(ct,I),Be=!0;else if(ye.endOnNext&&!Be){var yt=P.reduce(function(Ht,Kt){var Ut=d[Kt];return Ut.class===ye.class&&Ut.id!==Kt&&Ut.startDate>ye.startDate&&Ht.push(Ut),Ht},[]).sort(function(Ht,Kt){return Ht.startDate.getTime()-Kt.startDate.getTime()})[0];yt&&(st=W(yt.startDate,I),Be=!0)}for(var _t=Object.keys(ye.attr),ot=0;ot<_t.length;ot++){var bt=_t[ot];if(bt!==u.DateRangeAttribute.ID&&bt!==u.DateRangeAttribute.CLASS&&bt!==u.DateRangeAttribute.START_DATE&&bt!==u.DateRangeAttribute.DURATION&&bt!==u.DateRangeAttribute.END_DATE&&bt!==u.DateRangeAttribute.END_ON_NEXT){var Ct=we[bt];if(Ct)Be&&!Ce.durationKnown&&(Ct.endTime=st);else{var nt=ye.attr[bt];Ct=new L(Ze,st,""),(bt===u.DateRangeAttribute.SCTE35_OUT||bt===u.DateRangeAttribute.SCTE35_IN)&&(nt=U(nt)),Ct.value={key:bt,data:nt},Ct.type=Y.MetadataSchema.dateRange,E.id3Track.addCue(Ct),we[bt]=Ct}}}c[Te]={cues:we,dateRange:ye,durationKnown:Be}},re=0;re<P.length;re++)Z(re)}}},b}()},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
                !*** ./src/controller/latency-controller.ts ***!
                \**********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>Y});var ee=N(
/*! ../errors */
"./src/errors.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts");function q(B,F){for(var O=0;O<F.length;O++){var W=F[O];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(B,W.key,W)}}var Y=function(){function B(O){var W=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return W.timeupdate()},this.hls=O,this.config=O.config,this.registerListeners()}var F=B.prototype;return F.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},F.registerListeners=function(){this.hls.on(G.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(G.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(G.Events.ERROR,this.onError,this)},F.unregisterListeners=function(){this.hls.off(G.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(G.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(G.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(G.Events.ERROR,this.onError)},F.onMediaAttached=function(W,U){this.media=U.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},F.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},F.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},F.onLevelUpdated=function(W,U){var R=U.details;this.levelDetails=R,R.advanced&&this.timeupdate(),!R.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},F.onError=function(W,U){U.details===ee.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,V.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},F.timeupdate=function(){var W=this.media,U=this.levelDetails;if(W&&U){this.currentTime=W.currentTime;var R=this.computeLatency();if(null!==R){this._latency=R;var M=this.config,g=M.maxLiveSyncPlaybackRate;if(M.lowLatencyMode&&1!==g){var v=this.targetLatency;if(null!==v){var S=R-v,w=Math.min(this.maxLatency,v+U.targetduration);if(U.live&&S<w&&S>.05&&this.forwardBufferLength>1){var _=Math.min(2,Math.max(1,g)),c=Math.round(2/(1+Math.exp(-.75*S-this.edgeStalled))*20)/20;W.playbackRate=Math.min(_,Math.max(1,c))}else 1!==W.playbackRate&&0!==W.playbackRate&&(W.playbackRate=1)}}}}},F.estimateLiveEdge=function(){var W=this.levelDetails;return null===W?null:W.edge+W.age},F.computeLatency=function(){var W=this.estimateLiveEdge();return null===W?null:W-this.currentTime},function u(B,F,O){F&&q(B.prototype,F),O&&q(B,O),Object.defineProperty(B,"prototype",{writable:!1})}(B,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var W=this.config,U=this.levelDetails;return void 0!==W.liveMaxLatencyDuration?W.liveMaxLatencyDuration:U?W.liveMaxLatencyDurationCount*U.targetduration:0}},{key:"targetLatency",get:function(){var W=this.levelDetails;if(null===W)return null;var M=W.targetduration,b=this.config,g=b.liveSyncDuration,w=this.hls.userConfig,E=b.lowLatencyMode&&W.partHoldBack||W.holdBack;return(w.liveSyncDuration||w.liveSyncDurationCount||0===E)&&(E=void 0!==g?g:b.liveSyncDurationCount*M),E+Math.min(1*this.stallCount,M)}},{key:"liveSyncPosition",get:function(){var W=this.estimateLiveEdge(),U=this.targetLatency,R=this.levelDetails;if(null===W||null===U||null===R)return null;var M=R.edge,v=M-(this.config.lowLatencyMode&&R.partTarget||R.targetduration);return Math.min(Math.max(M-R.totalduration,W-U-this.edgeStalled),v)}},{key:"drift",get:function(){var W=this.levelDetails;return null===W?1:W.drift}},{key:"edgeStalled",get:function(){var W=this.levelDetails;return null===W?0:Math.max(W.age-3*(this.config.lowLatencyMode&&W.partTarget||W.targetduration),0)}},{key:"forwardBufferLength",get:function(){var W=this.media,U=this.levelDetails;if(!W||!U)return 0;var R=W.buffered.length;return(R?W.buffered.end(R-1):U.edge)-this.currentTime}}]),B}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
                !*** ./src/controller/level-controller.ts ***!
                \********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>b});var ee=N(
/*! ../types/level */
"./src/types/level.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../errors */
"./src/errors.ts"),q=N(
/*! ../utils/codecs */
"./src/utils/codecs.ts"),u=N(
/*! ./level-helper */
"./src/controller/level-helper.ts"),Y=N(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),B=N(
/*! ../types/loader */
"./src/types/loader.ts");function F(){return F=Object.assign?Object.assign.bind():function(g){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&(g[w]=S[w])}return g},F.apply(this,arguments)}function O(g,v){for(var S=0;S<v.length;S++){var w=v[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}function R(g,v){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w})(g,v)}var M=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),b=function(g){function v(w){var E;return(E=g.call(this,w,"[level-controller]")||this)._levels=[],E._firstLevel=-1,E._startLevel=void 0,E.currentLevelIndex=-1,E.manualLevelIndex=-1,E.onParsedComplete=void 0,E._registerListeners(),E}!function U(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,R(g,v)}(v,g);var S=v.prototype;return S._registerListeners=function(){var E=this.hls;E.on(G.Events.MANIFEST_LOADED,this.onManifestLoaded,this),E.on(G.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.on(G.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),E.on(G.Events.FRAG_LOADED,this.onFragLoaded,this),E.on(G.Events.ERROR,this.onError,this)},S._unregisterListeners=function(){var E=this.hls;E.off(G.Events.MANIFEST_LOADED,this.onManifestLoaded,this),E.off(G.Events.LEVEL_LOADED,this.onLevelLoaded,this),E.off(G.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),E.off(G.Events.FRAG_LOADED,this.onFragLoaded,this),E.off(G.Events.ERROR,this.onError,this)},S.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,g.prototype.destroy.call(this)},S.startLoad=function(){this._levels.forEach(function(_){_.loadError=0}),g.prototype.startLoad.call(this)},S.onManifestLoaded=function(E,_){var P,C,c=[],h=[],d=[],m={},x=!1,T=!1,I=!1;if(_.levels.forEach(function(ne){var oe=ne.attrs;x=x||!(!ne.width||!ne.height),T=T||!!ne.videoCodec,I=I||!!ne.audioCodec,M&&ne.audioCodec&&-1!==ne.audioCodec.indexOf("mp4a.40.34")&&(ne.audioCodec=void 0);var Te=ne.bitrate+"-"+ne.attrs.RESOLUTION+"-"+ne.attrs.CODECS;(C=m[Te])?C.url.push(ne.url):(C=new ee.Level(ne),m[Te]=C,c.push(C)),oe&&(oe.AUDIO&&(0,u.addGroupId)(C,"audio",oe.AUDIO),oe.SUBTITLES&&(0,u.addGroupId)(C,"text",oe.SUBTITLES))}),(x||T)&&I&&(c=c.filter(function(ne){return!!ne.videoCodec||!(!ne.width||!ne.height)})),c=c.filter(function(ne){var oe=ne.audioCodec,Te=ne.videoCodec;return(!oe||(0,q.isCodecSupportedInMp4)(oe,"audio"))&&(!Te||(0,q.isCodecSupportedInMp4)(Te,"video"))}),_.audioTracks&&(h=_.audioTracks.filter(function(ne){return!ne.audioCodec||(0,q.isCodecSupportedInMp4)(ne.audioCodec,"audio")}),(0,u.assignTrackIdsByGroup)(h)),_.subtitles&&(0,u.assignTrackIdsByGroup)(d=_.subtitles),c.length>0){P=c[0].bitrate,c.sort(function(ne,oe){return ne.bitrate-oe.bitrate}),this._levels=c;for(var L=0;L<c.length;L++)if(c[L].bitrate===P){this._firstLevel=L,this.log("manifest loaded, "+c.length+" level(s) found, first bitrate: "+P);break}var re={levels:c,audioTracks:h,subtitleTracks:d,firstLevel:this._firstLevel,stats:_.stats,audio:I,video:T,altAudio:!(I&&!T)&&h.some(function(ne){return!!ne.url})};this.hls.trigger(G.Events.MANIFEST_PARSED,re),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(G.Events.ERROR,{type:V.ErrorTypes.MEDIA_ERROR,details:V.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:_.url,reason:"no level with compatible codecs found in manifest"})},S.onError=function(E,_){var c;if(g.prototype.onError.call(this,E,_),!_.fatal){var h=_.context,d=this._levels[this.currentLevelIndex];if(h&&(h.type===B.PlaylistContextType.AUDIO_TRACK&&d.audioGroupIds&&h.groupId===d.audioGroupIds[d.urlId]||h.type===B.PlaylistContextType.SUBTITLE_TRACK&&d.textGroupIds&&h.groupId===d.textGroupIds[d.urlId]))return void this.redundantFailover(this.currentLevelIndex);var C,P=!1,m=!0;switch(_.details){case V.ErrorDetails.FRAG_LOAD_ERROR:case V.ErrorDetails.FRAG_LOAD_TIMEOUT:case V.ErrorDetails.KEY_LOAD_ERROR:case V.ErrorDetails.KEY_LOAD_TIMEOUT:if(_.frag){var x=_.frag.type===B.PlaylistLevelType.MAIN?_.frag.level:this.currentLevelIndex,T=this._levels[x];T?(T.fragmentError++,T.fragmentError>this.hls.config.fragLoadingMaxRetry&&(C=x)):C=x}break;case V.ErrorDetails.LEVEL_LOAD_ERROR:case V.ErrorDetails.LEVEL_LOAD_TIMEOUT:h&&(h.deliveryDirectives&&(m=!1),C=h.level),P=!0;break;case V.ErrorDetails.REMUX_ALLOC_ERROR:C=null!=(c=_.level)?c:this.currentLevelIndex,P=!0}void 0!==C&&this.recoverLevel(_,C,P,m)}},S.recoverLevel=function(E,_,c,h){var d=E.details,P=this._levels[_];if(P.loadError++,c){if(!this.retryLoadingOrFail(E))return void(this.currentLevelIndex=-1);E.levelRetry=!0}if(h){var C=P.url.length;if(C>1&&P.loadError<C)E.levelRetry=!0,this.redundantFailover(_);else if(-1===this.manualLevelIndex){for(var x=-1,T=this._levels,I=T.length;I--;){var L=(I+this.currentLevelIndex)%T.length;if(L!==this.currentLevelIndex&&0===T[L].loadError){x=L;break}}x>-1&&this.currentLevelIndex!==x&&(this.warn(d+": switch to "+x),E.levelRetry=!0,this.hls.nextAutoLevel=x)}}},S.redundantFailover=function(E){var _=this._levels[E],c=_.url.length;if(c>1){var h=(_.urlId+1)%c;this.warn("Switching to redundant URL-id "+h),this._levels.forEach(function(d){d.urlId=h}),this.level=E}},S.onFragLoaded=function(E,_){var c=_.frag;if(void 0!==c&&c.type===B.PlaylistLevelType.MAIN){var h=this._levels[c.level];void 0!==h&&(h.fragmentError=0,h.loadError=0)}},S.onLevelLoaded=function(E,_){var c,m,h=_.level,d=_.details,P=this._levels[h];if(!P)return this.warn("Invalid level index "+h),void(null!==(m=_.deliveryDirectives)&&void 0!==m&&m.skip&&(d.deltaUpdateFailed=!0));h===this.currentLevelIndex?(0===P.fragmentError&&(P.loadError=0,this.retryCount=0),this.playlistLoaded(h,_,P.details)):null!==(c=_.deliveryDirectives)&&void 0!==c&&c.skip&&(d.deltaUpdateFailed=!0)},S.onAudioTrackSwitched=function(E,_){var c=this.hls.levels[this.currentLevelIndex];if(c&&c.audioGroupIds){for(var h=-1,d=this.hls.audioTracks[_.id].groupId,P=0;P<c.audioGroupIds.length;P++)if(c.audioGroupIds[P]===d){h=P;break}h!==c.urlId&&(c.urlId=h,this.startLoad())}},S.loadPlaylist=function(E){var _=this.currentLevelIndex,c=this._levels[_];if(this.canLoad&&c&&c.url.length>0){var h=c.urlId,d=c.url[h];if(E)try{d=E.addDirectives(d)}catch(P){this.warn("Could not construct new URL with HLS Delivery Directives: "+P)}this.log("Attempt loading level index "+_+(E?" at sn "+E.msn+" part "+E.part:"")+" with URL-id "+h+" "+d),this.clearTimer(),this.hls.trigger(G.Events.LEVEL_LOADING,{url:d,level:_,id:h,deliveryDirectives:E||null})}},S.removeLevel=function(E,_){var c=function(P,m){return m!==_},h=this._levels.filter(function(d,P){return P!==E||d.url.length>1&&void 0!==_&&(d.url=d.url.filter(c),d.audioGroupIds&&(d.audioGroupIds=d.audioGroupIds.filter(c)),d.textGroupIds&&(d.textGroupIds=d.textGroupIds.filter(c)),d.urlId=0,!0)}).map(function(d,P){var m=d.details;return null!=m&&m.fragments&&m.fragments.forEach(function(C){C.level=P}),d});this._levels=h,this.hls.trigger(G.Events.LEVELS_UPDATED,{levels:h})},function W(g,v,S){v&&O(g.prototype,v),S&&O(g,S),Object.defineProperty(g,"prototype",{writable:!1})}(v,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(E){var _,c=this._levels;if(0!==c.length&&(this.currentLevelIndex!==E||null===(_=c[E])||void 0===_||!_.details)){if(E<0||E>=c.length){var h=E<0;if(this.hls.trigger(G.Events.ERROR,{type:V.ErrorTypes.OTHER_ERROR,details:V.ErrorDetails.LEVEL_SWITCH_ERROR,level:E,fatal:h,reason:"invalid level idx"}),h)return;E=Math.min(E,c.length-1)}this.clearTimer();var d=this.currentLevelIndex,P=c[d],m=c[E];this.log("switching to level "+E+" from "+d),this.currentLevelIndex=E;var C=F({},m,{level:E,maxBitrate:m.maxBitrate,uri:m.uri,urlId:m.urlId});delete C._urlId,this.hls.trigger(G.Events.LEVEL_SWITCHING,C);var x=m.details;if(!x||x.live){var T=this.switchParams(m.uri,P?.details);this.loadPlaylist(T)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(E){this.manualLevelIndex=E,void 0===this._startLevel&&(this._startLevel=E),-1!==E&&(this.level=E)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(E){this._firstLevel=E}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var E=this.hls.config.startLevel;return void 0!==E?E:this._firstLevel}return this._startLevel},set:function(E){this._startLevel=E}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(E){this.level=E,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=E)}}]),v}(Y.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
                !*** ./src/controller/level-helper.ts ***!
                \****************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{addGroupId:()=>u,addSliding:()=>g,adjustSliding:()=>b,assignTrackIdsByGroup:()=>Y,computeReloadInterval:()=>v,getFragmentWithSN:()=>S,getPartWith:()=>w,mapFragmentIntersection:()=>M,mapPartIntersection:()=>R,mergeDetails:()=>W,updateFragPTSDTS:()=>O,updatePTS:()=>B});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),V=N(
/*! ../loader/date-range */
"./src/loader/date-range.ts");function q(){return q=Object.assign?Object.assign.bind():function(E){for(var _=1;_<arguments.length;_++){var c=arguments[_];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(E[h]=c[h])}return E},q.apply(this,arguments)}function u(E,_,c){switch(_){case"audio":E.audioGroupIds||(E.audioGroupIds=[]),E.audioGroupIds.push(c);break;case"text":E.textGroupIds||(E.textGroupIds=[]),E.textGroupIds.push(c)}}function Y(E){var _={};E.forEach(function(c){var h=c.groupId||"";c.id=_[h]=_[h]||0,_[h]++})}function B(E,_,c){F(E[_],E[c])}function F(E,_){var c=_.startPTS;if((0,ee.isFiniteNumber)(c)){var d,h=0;_.sn>E.sn?(h=c-E.start,d=E):(h=E.start-c,d=_),d.duration!==h&&(d.duration=h)}else _.start=_.sn>E.sn?E.cc===_.cc&&E.minEndPTS?E.start+(E.minEndPTS-E.start):E.start+E.duration:Math.max(E.start-_.duration,0)}function O(E,_,c,h,d,P){h-c<=0&&(G.logger.warn("Fragment should have a positive duration",_),h=c+_.duration,P=d+_.duration);var C=c,x=h,T=_.startPTS,I=_.endPTS;if((0,ee.isFiniteNumber)(T)){var L=Math.abs(T-c);_.deltaPTS=(0,ee.isFiniteNumber)(_.deltaPTS)?Math.max(L,_.deltaPTS):L,C=Math.max(c,T),c=Math.min(c,T),d=Math.min(d,_.startDTS),x=Math.min(h,I),h=Math.max(h,I),P=Math.max(P,_.endDTS)}_.duration=h-c;var Z=c-_.start;_.appendedPTS=h,_.start=_.startPTS=c,_.maxStartPTS=C,_.startDTS=d,_.endPTS=h,_.minEndPTS=x,_.endDTS=P;var re=_.sn;if(!E||re<E.startSN||re>E.endSN)return 0;var ne,oe=re-E.startSN,Te=E.fragments;for(Te[oe]=_,ne=oe;ne>0;ne--)F(Te[ne],Te[ne-1]);for(ne=oe;ne<Te.length-1;ne++)F(Te[ne],Te[ne+1]);return E.fragmentHint&&F(Te[Te.length-1],E.fragmentHint),E.PTSKnown=E.alignedSliding=!0,Z}function W(E,_){for(var c=null,h=E.fragments,d=h.length-1;d>=0;d--){var P=h[d].initSegment;if(P){c=P;break}}E.fragmentHint&&delete E.fragmentHint.endPTS;var C,m=0;if(M(E,_,function(ne,oe){ne.relurl&&(m=ne.cc-oe.cc),(0,ee.isFiniteNumber)(ne.startPTS)&&(0,ee.isFiniteNumber)(ne.endPTS)&&(oe.start=oe.startPTS=ne.startPTS,oe.startDTS=ne.startDTS,oe.appendedPTS=ne.appendedPTS,oe.maxStartPTS=ne.maxStartPTS,oe.endPTS=ne.endPTS,oe.endDTS=ne.endDTS,oe.minEndPTS=ne.minEndPTS,oe.duration=ne.endPTS-ne.startPTS,oe.duration&&(C=oe),_.PTSKnown=_.alignedSliding=!0),oe.elementaryStreams=ne.elementaryStreams,oe.loader=ne.loader,oe.stats=ne.stats,oe.urlId=ne.urlId,ne.initSegment&&(oe.initSegment=ne.initSegment,c=ne.initSegment)}),c&&(_.fragmentHint?_.fragments.concat(_.fragmentHint):_.fragments).forEach(function(ne){var oe;(!ne.initSegment||ne.initSegment.relurl===(null===(oe=c)||void 0===oe?void 0:oe.relurl))&&(ne.initSegment=c)}),_.skippedSegments)if(_.deltaUpdateFailed=_.fragments.some(function(ne){return!ne}),_.deltaUpdateFailed){G.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var T=_.skippedSegments;T--;)_.fragments.shift();_.startSN=_.fragments[0].sn,_.startCC=_.fragments[0].cc}else _.canSkipDateRanges&&(_.dateRanges=function U(E,_,c){var h=q({},E);return c&&c.forEach(function(d){delete h[d]}),Object.keys(_).forEach(function(d){var P=new V.DateRange(_[d].attr,h[d]);P.isValid?h[d]=P:G.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(_[d].attr)+'"')}),h}(E.dateRanges,_.dateRanges,_.recentlyRemovedDateranges));var I=_.fragments;if(m){G.logger.warn("discontinuity sliding from playlist, take drift into account");for(var L=0;L<I.length;L++)I[L].cc+=m}_.skippedSegments&&(_.startCC=_.fragments[0].cc),R(E.partList,_.partList,function(ne,oe){oe.elementaryStreams=ne.elementaryStreams,oe.stats=ne.stats}),C?O(_,C,C.startPTS,C.endPTS,C.startDTS,C.endDTS):b(E,_),I.length&&(_.totalduration=_.edge-I[0].start),_.driftStartTime=E.driftStartTime,_.driftStart=E.driftStart;var Z=_.advancedDateTime;if(_.advanced&&Z){var re=_.edge;_.driftStart||(_.driftStartTime=Z,_.driftStart=re),_.driftEndTime=Z,_.driftEnd=re}else _.driftEndTime=E.driftEndTime,_.driftEnd=E.driftEnd,_.advancedDateTime=E.advancedDateTime}function R(E,_,c){if(E&&_)for(var h=0,d=0,P=E.length;d<=P;d++){var m=E[d],C=_[d+h];m&&C&&m.index===C.index&&m.fragment.sn===C.fragment.sn?c(m,C):h--}}function M(E,_,c){for(var h=_.skippedSegments,d=Math.max(E.startSN,_.startSN)-_.startSN,P=(E.fragmentHint?1:0)+(h?_.endSN:Math.min(E.endSN,_.endSN))-_.startSN,m=_.startSN-E.startSN,C=_.fragmentHint?_.fragments.concat(_.fragmentHint):_.fragments,x=E.fragmentHint?E.fragments.concat(E.fragmentHint):E.fragments,T=d;T<=P;T++){var I=x[m+T],L=C[T];h&&!L&&T<h&&(L=_.fragments[T]=I),I&&L&&c(I,L)}}function b(E,_){var c=_.startSN+_.skippedSegments-E.startSN,h=E.fragments;c<0||c>=h.length||g(_,h[c].start)}function g(E,_){if(_){for(var c=E.fragments,h=E.skippedSegments;h<c.length;h++)c[h].start+=_;E.fragmentHint&&(E.fragmentHint.start+=_)}}function v(E,_){var C,c=1e3*E.levelTargetDuration,h=c/2,d=E.age,P=d>0&&d<3*c,m=_.loading.end-_.loading.start,x=E.availabilityDelay;if(!1===E.updated)if(P){var T=333*E.misses;C=Math.max(Math.min(h,2*m),T),E.availabilityDelay=(E.availabilityDelay||0)+C}else C=h;else P?(x=Math.min(x||c/2,d),E.availabilityDelay=x,C=x+c-d):C=c-m;return Math.round(C)}function S(E,_,c){if(!E||!E.details)return null;var h=E.details,d=h.fragments[_-h.startSN];return d||(d=h.fragmentHint)&&d.sn===_?d:_<h.startSN&&c&&c.sn===_?c:null}function w(E,_,c){if(!E||!E.details)return null;var h=E.details.partList;if(h)for(var d=h.length;d--;){var P=h[d];if(P.index===c&&P.fragment.sn===_)return P}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
                !*** ./src/controller/stream-controller.ts ***!
                \*********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>w});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),V=N(
/*! ../is-supported */
"./src/is-supported.ts"),q=N(
/*! ../events */
"./src/events.ts"),u=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),Y=N(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),B=N(
/*! ../types/loader */
"./src/types/loader.ts"),F=N(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),O=N(
/*! ../demux/transmuxer-interface */
"./src/demux/transmuxer-interface.ts"),W=N(
/*! ../types/transmuxer */
"./src/types/transmuxer.ts"),U=N(
/*! ./gap-controller */
"./src/controller/gap-controller.ts"),R=N(
/*! ../errors */
"./src/errors.ts");function M(E,_){for(var c=0;c<_.length;c++){var h=_[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(E,h.key,h)}}function v(E,_){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,d){return h.__proto__=d,h})(E,_)}var w=function(E){function _(h,d){var P;return(P=E.call(this,h,d,"[stream-controller]")||this).audioCodecSwap=!1,P.gapController=null,P.level=-1,P._forceStartLoad=!1,P.altAudio=!1,P.audioOnly=!1,P.fragPlaying=null,P.onvplaying=null,P.onvseeked=null,P.fragLastKbps=0,P.couldBacktrack=!1,P.backtrackFragment=null,P.audioCodecSwitch=!1,P.videoBuffer=null,P._registerListeners(),P}!function g(E,_){E.prototype=Object.create(_.prototype),E.prototype.constructor=E,v(E,_)}(_,E);var c=_.prototype;return c._registerListeners=function(){var d=this.hls;d.on(q.Events.MEDIA_ATTACHED,this.onMediaAttached,this),d.on(q.Events.MEDIA_DETACHING,this.onMediaDetaching,this),d.on(q.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.on(q.Events.MANIFEST_PARSED,this.onManifestParsed,this),d.on(q.Events.LEVEL_LOADING,this.onLevelLoading,this),d.on(q.Events.LEVEL_LOADED,this.onLevelLoaded,this),d.on(q.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),d.on(q.Events.ERROR,this.onError,this),d.on(q.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),d.on(q.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),d.on(q.Events.BUFFER_CREATED,this.onBufferCreated,this),d.on(q.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),d.on(q.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),d.on(q.Events.FRAG_BUFFERED,this.onFragBuffered,this)},c._unregisterListeners=function(){var d=this.hls;d.off(q.Events.MEDIA_ATTACHED,this.onMediaAttached,this),d.off(q.Events.MEDIA_DETACHING,this.onMediaDetaching,this),d.off(q.Events.MANIFEST_LOADING,this.onManifestLoading,this),d.off(q.Events.MANIFEST_PARSED,this.onManifestParsed,this),d.off(q.Events.LEVEL_LOADED,this.onLevelLoaded,this),d.off(q.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),d.off(q.Events.ERROR,this.onError,this),d.off(q.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),d.off(q.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),d.off(q.Events.BUFFER_CREATED,this.onBufferCreated,this),d.off(q.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),d.off(q.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),d.off(q.Events.FRAG_BUFFERED,this.onFragBuffered,this)},c.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},c.startLoad=function(d){if(this.levels){var P=this.lastCurrentTime,m=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var C=m.startLevel;-1===C&&(m.config.testBandwidth&&this.levels.length>1?(C=0,this.bitrateTest=!0):C=m.nextAutoLevel),this.level=m.nextLoadLevel=C,this.loadedmetadata=!1}P>0&&-1===d&&(this.log("Override startPosition with lastCurrentTime @"+P.toFixed(3)),d=P),this.state=G.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=d,this.tick()}else this._forceStartLoad=!0,this.state=G.State.STOPPED},c.stopLoad=function(){this._forceStartLoad=!1,E.prototype.stopLoad.call(this)},c.doTick=function(){switch(this.state){case G.State.IDLE:this.doTickIdle();break;case G.State.WAITING_LEVEL:var d,P=this.levels,C=null==P||null===(d=P[this.level])||void 0===d?void 0:d.details;if(C&&(!C.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(C))break;this.state=G.State.IDLE;break}break;case G.State.FRAG_LOADING_WAITING_RETRY:var x,T=self.performance.now(),I=this.retryDate;(!I||T>=I||null!==(x=this.media)&&void 0!==x&&x.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=G.State.IDLE)}this.onTickEnd()},c.onTickEnd=function(){E.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},c.doTickIdle=function(){var d,P,m=this.hls,x=this.levels,T=this.media,L=m.nextLoadLevel;if(null!==this.levelLastLoaded&&(T||!this.startFragRequested&&m.config.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&x&&x[L]){var Z=x[L];this.level=m.nextLoadLevel=L;var re=Z.details;if(!re||this.state===G.State.WAITING_LEVEL||re.live&&this.levelLastLoaded!==L)return void(this.state=G.State.WAITING_LEVEL);var ne=this.getMainFwdBufferInfo();if(null!==ne&&!(ne.len>=this.getMaxBufferLength(Z.maxBitrate))){if(this._streamEnded(ne,re)){var ye={};return this.altAudio&&(ye.type="video"),this.hls.trigger(q.Events.BUFFER_EOS,ye),void(this.state=G.State.ENDED)}this.backtrackFragment&&this.backtrackFragment.start>ne.end&&(this.backtrackFragment=null);var Ce=this.backtrackFragment?this.backtrackFragment.start:ne.end,we=this.getNextFragment(Ce,re);if(this.couldBacktrack&&!this.fragPrevious&&we&&"initSegment"!==we.sn&&this.fragmentTracker.getState(we)!==Y.FragmentState.OK){var Be,Ze=(null!=(Be=this.backtrackFragment)?Be:we).sn,ct=re.fragments[Ze-re.startSN-1];ct&&we.cc===ct.cc&&(we=ct,this.fragmentTracker.removeFragment(ct))}else this.backtrackFragment&&ne.len&&(this.backtrackFragment=null);we&&this.fragmentTracker.getState(we)===Y.FragmentState.OK&&this.nextLoadPosition>Ce&&(T&&this.afterBufferFlushed(T,this.audioOnly&&!this.altAudio?F.ElementaryStreamTypes.AUDIO:F.ElementaryStreamTypes.VIDEO,B.PlaylistLevelType.MAIN),we=this.getNextFragment(this.nextLoadPosition,re)),we&&(we.initSegment&&!we.initSegment.data&&!this.bitrateTest&&(we=we.initSegment),"identity"!==(null===(d=we.decryptdata)||void 0===d?void 0:d.keyFormat)||null!==(P=we.decryptdata)&&void 0!==P&&P.key?this.loadFragment(we,re,Ce):this.loadKey(we,re))}}},c.loadFragment=function(d,P,m){var C,x=this.fragmentTracker.getState(d);this.fragCurrent=d,x===Y.FragmentState.NOT_LOADED?"initSegment"===d.sn?this._loadInitSegment(d):this.bitrateTest?(this.log("Fragment "+d.sn+" of level "+d.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(d)):(this.startFragRequested=!0,E.prototype.loadFragment.call(this,d,P,m)):x===Y.FragmentState.APPENDING?this.reduceMaxBufferLength(d.duration)&&this.fragmentTracker.removeFragment(d):0===(null===(C=this.media)||void 0===C?void 0:C.buffered.length)&&this.fragmentTracker.removeAllFragments()},c.getAppendedFrag=function(d){var P=this.fragmentTracker.getAppendedFrag(d,B.PlaylistLevelType.MAIN);return P&&"fragment"in P?P.fragment:P},c.getBufferedFrag=function(d){return this.fragmentTracker.getBufferedFrag(d,B.PlaylistLevelType.MAIN)},c.followingBufferedFrag=function(d){return d?this.getBufferedFrag(d.end+.5):null},c.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},c.nextLevelSwitch=function(){var d=this.levels,P=this.media;if(null!=P&&P.readyState){var m,C=this.getAppendedFrag(P.currentTime);if(C&&C.start>1&&this.flushMainBuffer(0,C.start-1),!P.paused&&d){var I=this.fragLastKbps;m=I&&this.fragCurrent?this.fragCurrent.duration*d[this.hls.nextLoadLevel].maxBitrate/(1e3*I)+1:0}else m=0;var L=this.getBufferedFrag(P.currentTime+m);if(L){var Z=this.followingBufferedFrag(L);if(Z){this.abortCurrentFrag();var ne=Z.duration,oe=Math.max(L.end,(Z.maxStartPTS?Z.maxStartPTS:Z.start)+Math.min(Math.max(ne-this.config.maxFragLookUpTolerance,.5*ne),.75*ne));this.flushMainBuffer(oe,Number.POSITIVE_INFINITY)}}}},c.abortCurrentFrag=function(){var d=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,null!=d&&d.loader&&d.loader.abort(),this.state){case G.State.KEY_LOADING:case G.State.FRAG_LOADING:case G.State.FRAG_LOADING_WAITING_RETRY:case G.State.PARSING:case G.State.PARSED:this.state=G.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},c.flushMainBuffer=function(d,P){E.prototype.flushMainBuffer.call(this,d,P,this.altAudio?"video":null)},c.onMediaAttached=function(d,P){E.prototype.onMediaAttached.call(this,d,P);var m=P.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),m.addEventListener("playing",this.onvplaying),m.addEventListener("seeked",this.onvseeked),this.gapController=new U.default(this.config,m,this.fragmentTracker,this.hls)},c.onMediaDetaching=function(){var d=this.media;d&&this.onvplaying&&this.onvseeked&&(d.removeEventListener("playing",this.onvplaying),d.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),E.prototype.onMediaDetaching.call(this)},c.onMediaPlaying=function(){this.tick()},c.onMediaSeeked=function(){var d=this.media,P=d?d.currentTime:null;(0,ee.isFiniteNumber)(P)&&this.log("Media seeked to "+P.toFixed(3)),this.tick()},c.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(q.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},c.onManifestParsed=function(d,P){var x,m=!1,C=!1;P.levels.forEach(function(T){(x=T.audioCodec)&&(-1!==x.indexOf("mp4a.40.2")&&(m=!0),-1!==x.indexOf("mp4a.40.5")&&(C=!0))}),this.audioCodecSwitch=m&&C&&!(0,V.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=P.levels,this.startFragRequested=!1},c.onLevelLoading=function(d,P){var m=this.levels;if(m&&this.state===G.State.IDLE){var C=m[P.level];(!C.details||C.details.live&&this.levelLastLoaded!==P.level||this.waitForCdnTuneIn(C.details))&&(this.state=G.State.WAITING_LEVEL)}},c.onLevelLoaded=function(d,P){var m,C=this.levels,x=P.level,T=P.details;if(C){this.log("Level "+x+" loaded ["+T.startSN+","+T.endSN+"], cc ["+T.startCC+", "+T.endCC+"] duration:"+T.totalduration);var L=this.fragCurrent;L&&(this.state===G.State.FRAG_LOADING||this.state===G.State.FRAG_LOADING_WAITING_RETRY)&&L.level!==P.level&&L.loader&&(this.state=G.State.IDLE,this.backtrackFragment=null,L.loader.abort());var Z=C[x],re=0;if(T.live||null!==(m=Z.details)&&void 0!==m&&m.live){if(T.fragments[0]||(T.deltaUpdateFailed=!0),T.deltaUpdateFailed)return;re=this.alignPlaylists(T,Z.details)}if(Z.details=T,this.levelLastLoaded=x,this.hls.trigger(q.Events.LEVEL_UPDATED,{details:T,level:x}),this.state===G.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(T))return;this.state=G.State.IDLE}this.startFragRequested?T.live&&this.synchronizeToLiveEdge(T):this.setStartPosition(T,re),this.tick()}else this.warn("Levels were reset while loading level "+x)},c._handleFragmentLoadProgress=function(d){var P,m=d.frag,C=d.part,x=d.payload,T=this.levels;if(T){var I=T[m.level],L=I.details;if(L){var Z=I.videoCodec,re=L.PTSKnown||!L.live,ne=null===(P=m.initSegment)||void 0===P?void 0:P.data,oe=this._getAudioCodec(I),Te=this.transmuxer=this.transmuxer||new O.default(this.hls,B.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),ye=C?C.index:-1,we=new W.ChunkMetadata(m.level,m.sn,m.stats.chunkCount,x.byteLength,ye,-1!==ye);Te.push(x,ne,oe,Z,m,C,L.totalduration,re,we,this.initPTS[m.cc])}else this.warn("Dropping fragment "+m.sn+" of level "+m.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+m.sn+" of level "+m.level+" will not be buffered")},c.onAudioTrackSwitching=function(d,P){var m=this.altAudio,x=P.id;if(!P.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var T=this.fragCurrent;null!=T&&T.loader&&(this.log("Switching to main audio track, cancel main fragment load"),T.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var I=this.hls;m&&I.trigger(q.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),I.trigger(q.Events.AUDIO_TRACK_SWITCHED,{id:x})}},c.onAudioTrackSwitched=function(d,P){var C=!!this.hls.audioTracks[P.id].url;if(C){var x=this.videoBuffer;x&&this.mediaBuffer!==x&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=x)}this.altAudio=C,this.tick()},c.onBufferCreated=function(d,P){var C,x,m=P.tracks,T=!1;for(var I in m){var L=m[I];if("main"===L.id){if(x=I,C=L,"video"===I){var Z=m[I];Z&&(this.videoBuffer=Z.buffer)}}else T=!0}T&&C?(this.log("Alternate track found, use "+x+".buffered to schedule main fragment loading"),this.mediaBuffer=C.buffer):this.mediaBuffer=this.media},c.onFragBuffered=function(d,P){var m=P.frag,C=P.part;if(!m||m.type===B.PlaylistLevelType.MAIN){if(this.fragContextChanged(m))return this.warn("Fragment "+m.sn+(C?" p: "+C.index:"")+" of level "+m.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===G.State.PARSED&&(this.state=G.State.IDLE));var x=C?C.stats:m.stats;this.fragLastKbps=Math.round(8*x.total/(x.buffering.end-x.loading.first)),"initSegment"!==m.sn&&(this.fragPrevious=m),this.fragBufferedComplete(m,C)}},c.onError=function(d,P){switch(P.details){case R.ErrorDetails.FRAG_LOAD_ERROR:case R.ErrorDetails.FRAG_LOAD_TIMEOUT:case R.ErrorDetails.KEY_LOAD_ERROR:case R.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(B.PlaylistLevelType.MAIN,P);break;case R.ErrorDetails.LEVEL_LOAD_ERROR:case R.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==G.State.ERROR&&(P.fatal?(this.warn(""+P.details),this.state=G.State.ERROR):!P.levelRetry&&this.state===G.State.WAITING_LEVEL&&(this.state=G.State.IDLE));break;case R.ErrorDetails.BUFFER_FULL_ERROR:if("main"===P.parent&&(this.state===G.State.PARSING||this.state===G.State.PARSED)){var m=!0,C=this.getFwdBufferInfo(this.media,B.PlaylistLevelType.MAIN);C&&C.len>.5&&(m=!this.reduceMaxBufferLength(C.len)),m&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},c.checkBuffer=function(){var d=this.media,P=this.gapController;d&&P&&d.readyState&&(!this.loadedmetadata&&u.BufferHelper.getBuffered(d).length||P.poll(this.lastCurrentTime,this.state!==G.State.IDLE?this.fragCurrent:null),this.lastCurrentTime=d.currentTime)},c.onFragLoadEmergencyAborted=function(){this.state=G.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},c.onBufferFlushed=function(d,P){var m=P.type;(m!==F.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed((m===F.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media,m,B.PlaylistLevelType.MAIN)},c.onLevelsUpdated=function(d,P){this.levels=P.levels},c.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},c.seekToStartPos=function(){var d=this.media;if(d){var P=d.currentTime,m=this.startPosition;if(m>=0&&P<m){if(d.seeking)return void this.log("could not seek to "+m+", already seeking at "+P);var C=u.BufferHelper.getBuffered(d),T=(C.length?C.start(0):0)-m;T>0&&(T<this.config.maxBufferHole||T<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+T+" to match buffer start"),this.startPosition=m+=T),this.log("seek to target start position "+m+" from current time "+P),d.currentTime=m}}},c._getAudioCodec=function(d){var P=this.config.defaultAudioCodec||d.audioCodec;return this.audioCodecSwap&&P&&(this.log("Swapping audio codec"),P=-1!==P.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),P},c._loadBitrateTestFrag=function(d){var P=this;d.bitrateTest=!0,this._doFragLoad(d).then(function(m){var C=P.hls;if(m&&!C.nextLoadLevel&&!P.fragContextChanged(d)){P.fragLoadError=0,P.state=G.State.IDLE,P.startFragRequested=!1,P.bitrateTest=!1;var x=d.stats;x.parsing.start=x.parsing.end=x.buffering.start=x.buffering.end=self.performance.now(),C.trigger(q.Events.FRAG_LOADED,m),d.bitrateTest=!1}})},c._handleTransmuxComplete=function(d){var P,m="main",C=this.hls,x=d.remuxResult,T=d.chunkMeta,I=this.getCurrentContext(T);if(!I)return this.warn("The loading context changed while buffering fragment "+T.sn+" of level "+T.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(T.level);var L=I.frag,Z=I.part,re=I.level,ne=x.video,oe=x.text,Te=x.id3,ye=x.initSegment,Ce=re.details,we=this.altAudio?void 0:x.audio;if(!this.fragContextChanged(L)){if(this.state=G.State.PARSING,ye){ye.tracks&&(this._bufferInitSegment(re,ye.tracks,L,T),C.trigger(q.Events.FRAG_PARSING_INIT_SEGMENT,{frag:L,id:m,tracks:ye.tracks}));var Be=ye.initPTS,Ze=ye.timescale;(0,ee.isFiniteNumber)(Be)&&(this.initPTS[L.cc]=Be,C.trigger(q.Events.INIT_PTS_FOUND,{frag:L,id:m,initPTS:Be,timescale:Ze}))}if(ne&&!1!==x.independent){if(Ce){var st=ne.startPTS,ct=ne.endPTS,yt=ne.startDTS,_t=ne.endDTS;if(Z)Z.elementaryStreams[ne.type]={startPTS:st,endPTS:ct,startDTS:yt,endDTS:_t};else if(ne.firstKeyFrame&&ne.independent&&(this.couldBacktrack=!0),ne.dropped&&ne.independent){var ot=this.getMainFwdBufferInfo();if((ot?ot.end:this.getLoadPosition())+this.config.maxBufferHole<(ne.firstKeyFramePTS?ne.firstKeyFramePTS:st)-this.config.maxBufferHole)return void this.backtrack(L);L.setElementaryStreamInfo(ne.type,L.start,ct,L.start,_t,!0)}L.setElementaryStreamInfo(ne.type,st,ct,yt,_t),this.backtrackFragment&&(this.backtrackFragment=L),this.bufferFragmentData(ne,L,Z,T)}}else if(!1===x.independent)return void this.backtrack(L);if(we){var nt=we.startPTS,Ht=we.endPTS,Kt=we.startDTS,Ut=we.endDTS;Z&&(Z.elementaryStreams[F.ElementaryStreamTypes.AUDIO]={startPTS:nt,endPTS:Ht,startDTS:Kt,endDTS:Ut}),L.setElementaryStreamInfo(F.ElementaryStreamTypes.AUDIO,nt,Ht,Kt,Ut),this.bufferFragmentData(we,L,Z,T)}Ce&&null!=Te&&null!==(P=Te.samples)&&void 0!==P&&P.length&&C.trigger(q.Events.FRAG_PARSING_METADATA,{id:m,frag:L,details:Ce,samples:Te.samples}),Ce&&oe&&C.trigger(q.Events.FRAG_PARSING_USERDATA,{id:m,frag:L,details:Ce,samples:oe.samples})}},c._bufferInitSegment=function(d,P,m,C){var x=this;if(this.state===G.State.PARSING){this.audioOnly=!!P.audio&&!P.video,this.altAudio&&!this.audioOnly&&delete P.audio;var T=P.audio,I=P.video,L=P.audiovideo;if(T){var Z=d.audioCodec,re=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(Z&&(Z=-1!==Z.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==T.metadata.channelCount&&-1===re.indexOf("firefox")&&(Z="mp4a.40.5")),-1!==re.indexOf("android")&&"audio/mpeg"!==T.container&&this.log("Android: force audio codec to "+(Z="mp4a.40.2")),d.audioCodec&&d.audioCodec!==Z&&this.log('Swapping manifest audio codec "'+d.audioCodec+'" for "'+Z+'"'),T.levelCodec=Z,T.id="main",this.log("Init audio buffer, container:"+T.container+", codecs[selected/level/parsed]=["+(Z||"")+"/"+(d.audioCodec||"")+"/"+T.codec+"]")}I&&(I.levelCodec=d.videoCodec,I.id="main",this.log("Init video buffer, container:"+I.container+", codecs[level/parsed]=["+(d.videoCodec||"")+"/"+I.codec+"]")),L&&this.log("Init audiovideo buffer, container:"+L.container+", codecs[level/parsed]=["+(d.attrs.CODECS||"")+"/"+L.codec+"]"),this.hls.trigger(q.Events.BUFFER_CODECS,P),Object.keys(P).forEach(function(ne){var Te=P[ne].initSegment;null!=Te&&Te.byteLength&&x.hls.trigger(q.Events.BUFFER_APPENDING,{type:ne,data:Te,frag:m,part:null,chunkMeta:C,parent:m.type})}),this.tick()}},c.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,B.PlaylistLevelType.MAIN)},c.backtrack=function(d){this.couldBacktrack=!0,this.backtrackFragment=d,this.resetTransmuxer(),this.flushBufferGap(d),this.fragmentTracker.removeFragment(d),this.fragPrevious=null,this.nextLoadPosition=d.start,this.state=G.State.IDLE},c.checkFragmentChanged=function(){var d=this.media,P=null;if(d&&d.readyState>1&&!1===d.seeking){var m=d.currentTime;if(u.BufferHelper.isBuffered(d,m)?P=this.getAppendedFrag(m):u.BufferHelper.isBuffered(d,m+.1)&&(P=this.getAppendedFrag(m+.1)),P){this.backtrackFragment=null;var C=this.fragPlaying,x=P.level;(!C||P.sn!==C.sn||C.level!==x||P.urlId!==C.urlId)&&(this.hls.trigger(q.Events.FRAG_CHANGED,{frag:P}),(!C||C.level!==x)&&this.hls.trigger(q.Events.LEVEL_SWITCHED,{level:x}),this.fragPlaying=P)}}},function b(E,_,c){_&&M(E.prototype,_),c&&M(E,c),Object.defineProperty(E,"prototype",{writable:!1})}(_,[{key:"nextLevel",get:function(){var d=this.nextBufferedFrag;return d?d.level:-1}},{key:"currentFrag",get:function(){var d=this.media;return d?this.fragPlaying||this.getAppendedFrag(d.currentTime):null}},{key:"currentProgramDateTime",get:function(){var d=this.media;if(d){var P=d.currentTime,m=this.currentFrag;if(m&&(0,ee.isFiniteNumber)(P)&&(0,ee.isFiniteNumber)(m.programDateTime))return new Date(m.programDateTime+1e3*(P-m.start))}return null}},{key:"currentLevel",get:function(){var d=this.currentFrag;return d?d.level:-1}},{key:"nextBufferedFrag",get:function(){var d=this.currentFrag;return d?this.followingBufferedFrag(d):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),_}(G.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
                !*** ./src/controller/subtitle-stream-controller.ts ***!
                \******************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{SubtitleStreamController:()=>g});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../utils/buffer-helper */
"./src/utils/buffer-helper.ts"),V=N(
/*! ./fragment-finders */
"./src/controller/fragment-finders.ts"),q=N(
/*! ../utils/discontinuities */
"./src/utils/discontinuities.ts"),u=N(
/*! ./level-helper */
"./src/controller/level-helper.ts"),Y=N(
/*! ./fragment-tracker */
"./src/controller/fragment-tracker.ts"),B=N(
/*! ./base-stream-controller */
"./src/controller/base-stream-controller.ts"),F=N(
/*! ../types/loader */
"./src/types/loader.ts"),O=N(
/*! ../types/level */
"./src/types/level.ts");function W(S,w){for(var E=0;E<w.length;E++){var _=w[E];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(S,_.key,_)}}function M(S,w){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,c){return _.__proto__=c,_})(S,w)}var g=function(S){function w(_,c){var h;return(h=S.call(this,_,c,"[subtitle-stream-controller]")||this).levels=[],h.currentTrackId=-1,h.tracksBuffered=[],h.mainDetails=null,h._registerListeners(),h}!function R(S,w){S.prototype=Object.create(w.prototype),S.prototype.constructor=S,M(S,w)}(w,S);var E=w.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var c=this.hls;c.on(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.on(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(ee.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(ee.Events.ERROR,this.onError,this),c.on(ee.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.on(ee.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),c.on(ee.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),c.on(ee.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),c.on(ee.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},E._unregisterListeners=function(){var c=this.hls;c.off(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.off(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(ee.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(ee.Events.ERROR,this.onError,this),c.off(ee.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),c.off(ee.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),c.off(ee.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),c.off(ee.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),c.off(ee.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},E.startLoad=function(){this.stopLoad(),this.state=B.State.IDLE,this.setInterval(500),this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},E.onLevelLoaded=function(c,h){this.mainDetails=h.details},E.onSubtitleFragProcessed=function(c,h){var d=h.frag,P=h.success;if(this.fragPrevious=d,this.state=B.State.IDLE,P){var m=this.tracksBuffered[this.currentTrackId];if(m){for(var C,x=d.start,T=0;T<m.length;T++)if(x>=m[T].start&&x<=m[T].end){C=m[T];break}var I=d.start+d.duration;C?C.end=I:m.push(C={start:x,end:I}),this.fragmentTracker.fragBuffered(d)}}},E.onBufferFlushing=function(c,h){var d=h.startOffset,P=h.endOffset;if(0===d&&P!==Number.POSITIVE_INFINITY){var m=this.currentTrackId,C=this.levels;if(!C.length||!C[m]||!C[m].details)return;var I=P-C[m].details.targetduration;if(I<=0)return;h.endOffsetSubtitles=Math.max(0,I),this.tracksBuffered.forEach(function(L){for(var Z=0;Z<L.length;)if(L[Z].end<=I)L.shift();else{if(!(L[Z].start<I))break;L[Z].start=I,Z++}}),this.fragmentTracker.removeFragmentsInRange(d,I,F.PlaylistLevelType.SUBTITLE)}},E.onError=function(c,h){var d,P=h.frag;!P||P.type!==F.PlaylistLevelType.SUBTITLE||(null!==(d=this.fragCurrent)&&void 0!==d&&d.loader&&this.fragCurrent.loader.abort(),this.state=B.State.IDLE)},E.onSubtitleTracksUpdated=function(c,h){var d=this,P=h.subtitleTracks;this.tracksBuffered=[],this.levels=P.map(function(m){return new O.Level(m)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(m){d.tracksBuffered[m.id]=[]}),this.mediaBuffer=null},E.onSubtitleTrackSwitch=function(c,h){if(this.currentTrackId=h.id,this.levels.length&&-1!==this.currentTrackId){var d=this.levels[this.currentTrackId];this.mediaBuffer=null!=d&&d.details?this.mediaBufferTimeRanges:null,d&&this.setInterval(500)}else this.clearInterval()},E.onSubtitleTrackLoaded=function(c,h){var d,P=h.details,m=h.id,C=this.currentTrackId,x=this.levels;if(x.length){var T=x[C];if(!(m>=x.length||m!==C)&&T){if(this.mediaBuffer=this.mediaBufferTimeRanges,P.live||null!==(d=T.details)&&void 0!==d&&d.live){var I=this.mainDetails;if(P.deltaUpdateFailed||!I)return;var L=I.fragments[0];T.details?0===this.alignPlaylists(P,T.details)&&L&&(0,u.addSliding)(P,L.start):P.hasProgramDateTime&&I.hasProgramDateTime?(0,q.alignMediaPlaylistByPDT)(P,I):L&&(0,u.addSliding)(P,L.start)}T.details=P,this.levelLastLoaded=m,this.tick(),P.live&&!this.fragCurrent&&this.media&&this.state===B.State.IDLE&&((0,V.findFragmentByPTS)(null,P.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),T.details=void 0))}}},E._handleFragmentLoadComplete=function(c){var h=c.frag,d=c.payload,P=h.decryptdata,m=this.hls;if(!this.fragContextChanged(h)&&d&&d.byteLength>0&&P&&P.key&&P.iv&&"AES-128"===P.method){var C=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(d),P.key.buffer,P.iv.buffer).then(function(x){var T=performance.now();m.trigger(ee.Events.FRAG_DECRYPTED,{frag:h,payload:x,stats:{tstart:C,tdecrypt:T}})})}},E.doTick=function(){if(this.media){if(this.state===B.State.IDLE){var c=this.currentTrackId,h=this.levels;if(!h.length||!h[c]||!h[c].details)return;var d=h[c].details,P=d.targetduration,m=this.config,x=G.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],this.media.currentTime-P,m.maxBufferHole),T=x.end;if(x.len>this.getMaxBufferLength()+P)return;console.assert(d,"Subtitle track details are defined on idle subtitle stream controller tick");var oe,Z=d.fragments,re=Z.length,Te=this.fragPrevious;if(T<d.edge){var ye=m.maxFragLookUpTolerance;!(oe=(0,V.findFragmentByPTS)(Te,Z,Math.max(Z[0].start,T),ye))&&Te&&Te.start<Z[0].start&&(oe=Z[0])}else oe=Z[re-1];if(!(oe=this.mapToInitFragWhenRequired(oe))||this.fragmentTracker.getState(oe)!==Y.FragmentState.NOT_LOADED)return;oe.encrypted?this.loadKey(oe,d):this.loadFragment(oe,d,T)}}else this.state=B.State.IDLE},E.loadFragment=function(c,h,d){this.fragCurrent=c,"initSegment"===c.sn?this._loadInitSegment(c):S.prototype.loadFragment.call(this,c,h,d)},function U(S,w,E){w&&W(S.prototype,w),E&&W(S,E),Object.defineProperty(S,"prototype",{writable:!1})}(w,[{key:"mediaBufferTimeRanges",get:function(){return new v(this.tracksBuffered[this.currentTrackId]||[])}}]),w}(B.default),v=function(w){this.buffered=void 0;var E=function(c,h,d){if((h>>>=0)>d-1)throw new DOMException("Failed to execute '"+c+"' on 'TimeRanges': The index provided ("+h+") is greater than the maximum bound ("+d+")");return w[h][c]};this.buffered={get length(){return w.length},end:function(c){return E("end",c,w.length)},start:function(c){return E("start",c,w.length)}}}},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
                !*** ./src/controller/subtitle-track-controller.ts ***!
                \*****************************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>U});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),V=N(
/*! ./base-playlist-controller */
"./src/controller/base-playlist-controller.ts"),q=N(
/*! ../types/loader */
"./src/types/loader.ts");function u(R,M){for(var b=0;b<M.length;b++){var g=M[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(R,g.key,g)}}function F(R,M){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g})(R,M)}function W(R){for(var M=[],b=0;b<R.length;b++){var g=R[b];"subtitles"===g.kind&&g.label&&M.push(R[b])}return M}const U=function(R){function M(g){var v;return(v=R.call(this,g,"[subtitle-track-controller]")||this).media=null,v.tracks=[],v.groupId=null,v.tracksInGroup=[],v.trackId=-1,v.selectDefaultTrack=!0,v.queuedDefaultTrack=-1,v.trackChangeListener=function(){return v.onTextTracksChanged()},v.asyncPollTrackChange=function(){return v.pollTrackChange(0)},v.useTextTrackPolling=!1,v.subtitlePollingInterval=-1,v._subtitleDisplay=!0,v.registerListeners(),v}!function B(R,M){R.prototype=Object.create(M.prototype),R.prototype.constructor=R,F(R,M)}(M,R);var b=M.prototype;return b.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,R.prototype.destroy.call(this)},b.registerListeners=function(){var v=this.hls;v.on(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),v.on(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.on(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.on(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),v.on(ee.Events.LEVEL_LOADING,this.onLevelLoading,this),v.on(ee.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),v.on(ee.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),v.on(ee.Events.ERROR,this.onError,this)},b.unregisterListeners=function(){var v=this.hls;v.off(ee.Events.MEDIA_ATTACHED,this.onMediaAttached,this),v.off(ee.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.off(ee.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.off(ee.Events.MANIFEST_PARSED,this.onManifestParsed,this),v.off(ee.Events.LEVEL_LOADING,this.onLevelLoading,this),v.off(ee.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),v.off(ee.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),v.off(ee.Events.ERROR,this.onError,this)},b.onMediaAttached=function(v,S){this.media=S.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},b.pollTrackChange=function(v){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,v)},b.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),W(this.media.textTracks).forEach(function(S){(0,G.clearCurrentCues)(S)}),this.subtitleTrack=-1,this.media=null)},b.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},b.onManifestParsed=function(v,S){this.tracks=S.subtitleTracks},b.onSubtitleTrackLoaded=function(v,S){var w=S.id,E=S.details,c=this.tracksInGroup[this.trackId];if(c){var h=c.details;c.details=S.details,this.log("subtitle track "+w+" loaded ["+E.startSN+"-"+E.endSN+"]"),w===this.trackId&&(this.retryCount=0,this.playlistLoaded(w,S,h))}else this.warn("Invalid subtitle track id "+w)},b.onLevelLoading=function(v,S){this.switchLevel(S.level)},b.onLevelSwitching=function(v,S){this.switchLevel(S.level)},b.switchLevel=function(v){var S=this.hls.levels[v];if(null!=S&&S.textGroupIds){var w=S.textGroupIds[S.urlId];if(this.groupId!==w){var E=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,_=this.tracks.filter(function(d){return!w||d.groupId===w});this.tracksInGroup=_;var c=this.findTrackId(E?.name)||this.findTrackId();this.groupId=w;var h={subtitleTracks:_};this.log("Updating subtitle tracks, "+_.length+' track(s) found in "'+w+'" group-id'),this.hls.trigger(ee.Events.SUBTITLE_TRACKS_UPDATED,h),-1!==c&&this.setSubtitleTrack(c,E)}}},b.findTrackId=function(v){for(var S=this.tracksInGroup,w=0;w<S.length;w++){var E=S[w];if((!this.selectDefaultTrack||E.default)&&(!v||v===E.name))return E.id}return-1},b.onError=function(v,S){R.prototype.onError.call(this,v,S),!S.fatal&&S.context&&S.context.type===q.PlaylistContextType.SUBTITLE_TRACK&&S.context.id===this.trackId&&S.context.groupId===this.groupId&&this.retryLoadingOrFail(S)},b.loadPlaylist=function(v){var S=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(S)){var w=S.id,E=S.groupId,_=S.url;if(v)try{_=v.addDirectives(_)}catch(c){this.warn("Could not construct new URL with HLS Delivery Directives: "+c)}this.log("Loading subtitle playlist for id "+w),this.hls.trigger(ee.Events.SUBTITLE_TRACK_LOADING,{url:_,id:w,groupId:E,deliveryDirectives:v||null})}},b.toggleTrackModes=function(v){var S=this,w=this.media,E=this.trackId;if(w){var _=W(w.textTracks),c=_.filter(function(P){return P.groupId===S.groupId});if(-1===v)[].slice.call(_).forEach(function(P){P.mode="disabled"});else{var h=c[E];h&&(h.mode="disabled")}var d=c[v];d&&(d.mode=this.subtitleDisplay?"showing":"hidden")}},b.setSubtitleTrack=function(v,S){var w,E=this.tracksInGroup;if(this.media){if(this.trackId!==v&&this.toggleTrackModes(v),!(this.trackId===v&&(-1===v||null!==(w=E[v])&&void 0!==w&&w.details)||v<-1||v>=E.length)){this.clearTimer();var _=E[v];if(this.log("Switching to subtitle track "+v),this.trackId=v,_){var h=_.groupId;this.hls.trigger(ee.Events.SUBTITLE_TRACK_SWITCH,{id:_.id,groupId:void 0===h?"":h,name:_.name,type:_.type,url:_.url});var x=this.switchParams(_.url,S?.details);this.loadPlaylist(x)}else this.hls.trigger(ee.Events.SUBTITLE_TRACK_SWITCH,{id:v})}}else this.queuedDefaultTrack=v},b.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var v=-1,S=W(this.media.textTracks),w=0;w<S.length;w++)if("hidden"===S[w].mode)v=w;else if("showing"===S[w].mode){v=w;break}this.subtitleTrack!==v&&(this.subtitleTrack=v)}},function Y(R,M,b){M&&u(R.prototype,M),b&&u(R,b),Object.defineProperty(R,"prototype",{writable:!1})}(M,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(v){this._subtitleDisplay=v,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(v){this.selectDefaultTrack=!1,this.setSubtitleTrack(v,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}}]),M}(V.default)},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
                !*** ./src/controller/timeline-controller.ts ***!
                \***********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{TimelineController:()=>U});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../utils/cea-608-parser */
"./src/utils/cea-608-parser.ts"),q=N(
/*! ../utils/output-filter */
"./src/utils/output-filter.ts"),u=N(
/*! ../utils/webvtt-parser */
"./src/utils/webvtt-parser.ts"),Y=N(
/*! ../utils/texttrack-utils */
"./src/utils/texttrack-utils.ts"),B=N(
/*! ../utils/imsc1-ttml-parser */
"./src/utils/imsc1-ttml-parser.ts"),F=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),O=N(
/*! ../types/loader */
"./src/types/loader.ts"),W=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),U=function(){function g(S){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=S,this.config=S.config,this.Cues=S.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var w=new q.default(this,"textTrack1"),E=new q.default(this,"textTrack2"),_=new q.default(this,"textTrack3"),c=new q.default(this,"textTrack4");this.cea608Parser1=new V.default(1,w,E),this.cea608Parser2=new V.default(3,_,c)}S.on(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),S.on(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),S.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),S.on(G.Events.MANIFEST_LOADED,this.onManifestLoaded,this),S.on(G.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),S.on(G.Events.FRAG_LOADING,this.onFragLoading,this),S.on(G.Events.FRAG_LOADED,this.onFragLoaded,this),S.on(G.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),S.on(G.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),S.on(G.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),S.on(G.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),S.on(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var v=g.prototype;return v.destroy=function(){var w=this.hls;w.off(G.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),w.off(G.Events.MEDIA_DETACHING,this.onMediaDetaching,this),w.off(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),w.off(G.Events.MANIFEST_LOADED,this.onManifestLoaded,this),w.off(G.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),w.off(G.Events.FRAG_LOADING,this.onFragLoading,this),w.off(G.Events.FRAG_LOADED,this.onFragLoaded,this),w.off(G.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),w.off(G.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),w.off(G.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),w.off(G.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),w.off(G.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},v.addCues=function(w,E,_,c,h){for(var d=!1,P=h.length;P--;){var m=h[P],C=M(m[0],m[1],E,_);if(C>=0&&(m[0]=Math.min(m[0],E),m[1]=Math.max(m[1],_),d=!0,C/(_-E)>.5))return}if(d||h.push([E,_]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[w],E,_,c);else{var T=this.Cues.newCue(null,E,_,c);this.hls.trigger(G.Events.CUES_PARSED,{type:"captions",cues:T,track:w})}},v.onInitPtsFound=function(w,E){var _=this,c=E.frag,P=E.timescale,m=this.unparsedVttFrags;"main"===E.id&&(this.initPTS[c.cc]=E.initPTS,this.timescale[c.cc]=P),m.length&&(this.unparsedVttFrags=[],m.forEach(function(C){_.onFragLoaded(G.Events.FRAG_LOADED,C)}))},v.getExistingTrack=function(w){var E=this.media;if(E)for(var _=0;_<E.textTracks.length;_++){var c=E.textTracks[_];if(c[w])return c}return null},v.createCaptionsTrack=function(w){this.config.renderTextTracksNatively?this.createNativeTrack(w):this.createNonNativeTrack(w)},v.createNativeTrack=function(w){if(!this.captionsTracks[w]){var _=this.captionsTracks,c=this.media,h=this.captionsProperties[w],d=h.label,P=h.languageCode,m=this.getExistingTrack(w);if(m)_[w]=m,(0,Y.clearCurrentCues)(_[w]),(0,Y.sendAddTrackEvent)(_[w],c);else{var C=this.createTextTrack("captions",d,P);C&&(C[w]=!0,_[w]=C)}}},v.createNonNativeTrack=function(w){if(!this.nonNativeCaptionsTracks[w]){var E=this.captionsProperties[w];if(E){var c={_id:w,label:E.label,kind:"captions",default:!!E.media&&!!E.media.default,closedCaptions:E.media};this.nonNativeCaptionsTracks[w]=c,this.hls.trigger(G.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[c]})}}},v.createTextTrack=function(w,E,_){var c=this.media;if(c)return c.addTextTrack(w,E,_)},v.onMediaAttaching=function(w,E){this.media=E.media,this._cleanTracks()},v.onMediaDetaching=function(){var w=this.captionsTracks;Object.keys(w).forEach(function(E){(0,Y.clearCurrentCues)(w[E]),delete w[E]}),this.nonNativeCaptionsTracks={}},v.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},v._cleanTracks=function(){var w=this.media;if(w){var E=w.textTracks;if(E)for(var _=0;_<E.length;_++)(0,Y.clearCurrentCues)(E[_])}},v.onSubtitleTracksUpdated=function(w,E){var _=this;this.textTracks=[];var c=E.subtitleTracks||[],h=c.some(function(C){return C.textCodec===B.IMSC1_CODEC});if(this.config.enableWebVTT||h&&this.config.enableIMSC1){var d=this.tracks&&c&&this.tracks.length===c.length;if(this.tracks=c||[],this.config.renderTextTracksNatively){var P=this.media?this.media.textTracks:[];this.tracks.forEach(function(C,x){var T;if(x<P.length){for(var I=null,L=0;L<P.length;L++)if(R(P[L],C)){I=P[L];break}I&&(T=I)}if(T)(0,Y.clearCurrentCues)(T);else{var Z=_._captionsOrSubtitlesFromCharacteristics(C);(T=_.createTextTrack(Z,C.name,C.lang))&&(T.mode="disabled")}T&&(T.groupId=C.groupId,_.textTracks.push(T))})}else if(!d&&this.tracks&&this.tracks.length){var m=this.tracks.map(function(C){return{label:C.name,kind:C.type.toLowerCase(),default:C.default,subtitleTrack:C}});this.hls.trigger(G.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:m})}}},v._captionsOrSubtitlesFromCharacteristics=function(w){var E;if(null!==(E=w.attrs)&&void 0!==E&&E.CHARACTERISTICS){var _=/transcribes-spoken-dialog/gi.test(w.attrs.CHARACTERISTICS),c=/describes-music-and-sound/gi.test(w.attrs.CHARACTERISTICS);if(_&&c)return"captions"}return"subtitles"},v.onManifestLoaded=function(w,E){var _=this;this.config.enableCEA708Captions&&E.captions&&E.captions.forEach(function(c){var h=/(?:CC|SERVICE)([1-4])/.exec(c.instreamId);if(h){var P=_.captionsProperties["textTrack"+h[1]];P&&(P.label=c.name,c.lang&&(P.languageCode=c.lang),P.media=c)}})},v.closedCaptionsForLevel=function(w){return this.hls.levels[w.level]?.attrs["CLOSED-CAPTIONS"]},v.onFragLoading=function(w,E){var _=this.cea608Parser1,c=this.cea608Parser2,h=this.lastSn;if(this.enabled&&_&&c&&E.frag.type===O.PlaylistLevelType.MAIN){var P,m,C=E.frag.sn,x=null!=(P=null==E||null===(m=E.part)||void 0===m?void 0:m.index)?P:-1;C===h+1||C===h&&x===this.lastPartIndex+1||(_.reset(),c.reset()),this.lastSn=C,this.lastPartIndex=x}},v.onFragLoaded=function(w,E){var _=E.frag,c=E.payload,h=this.initPTS,d=this.unparsedVttFrags;if(_.type===O.PlaylistLevelType.SUBTITLE)if(c.byteLength){if(!(0,ee.isFiniteNumber)(h[_.cc]))return d.push(E),void(h.length&&this.hls.trigger(G.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_,error:new Error("Missing initial subtitle PTS")}));var P=_.decryptdata;if(null==P||null==P.key||"AES-128"!==P.method||"stats"in E){var C=this.tracks[_.level],x=this.vttCCs;x[_.cc]||(x[_.cc]={start:_.start,prevCC:this.prevCC,new:!0},this.prevCC=_.cc),C&&C.textCodec===B.IMSC1_CODEC?this._parseIMSC1(_,c):this._parseVTTs(_,c,x)}}else this.hls.trigger(G.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:_,error:new Error("Empty subtitle payload")})},v._parseIMSC1=function(w,E){var _=this,c=this.hls;(0,B.parseIMSC1)(E,this.initPTS[w.cc],this.timescale[w.cc],function(h){_._appendCues(h,w.level),c.trigger(G.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:w})},function(h){W.logger.log("Failed to parse IMSC1: "+h),c.trigger(G.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:w,error:h})})},v._parseVTTs=function(w,E,_){var c,h=this,d=this.hls,P=null!==(c=w.initSegment)&&void 0!==c&&c.data?(0,F.appendUint8Array)(w.initSegment.data,new Uint8Array(E)):E;(0,u.parseWebVTT)(P,this.initPTS[w.cc],this.timescale[w.cc],_,w.cc,w.start,function(m){h._appendCues(m,w.level),d.trigger(G.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:w})},function(m){h._fallbackToIMSC1(w,E),W.logger.log("Failed to parse VTT cue: "+m),d.trigger(G.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:w,error:m})})},v._fallbackToIMSC1=function(w,E){var _=this,c=this.tracks[w.level];c.textCodec||(0,B.parseIMSC1)(E,this.initPTS[w.cc],this.timescale[w.cc],function(){c.textCodec=B.IMSC1_CODEC,_._parseIMSC1(w,E)},function(){c.textCodec="wvtt"})},v._appendCues=function(w,E){var _=this.hls;if(this.config.renderTextTracksNatively){var c=this.textTracks[E];if(!c||"disabled"===c.mode)return;w.forEach(function(P){return(0,Y.addCueToTrack)(c,P)})}else{var h=this.tracks[E];if(!h)return;_.trigger(G.Events.CUES_PARSED,{type:"subtitles",cues:w,track:h.default?"default":"subtitles"+E})}},v.onFragDecrypted=function(w,E){var _=E.frag;if(_.type===O.PlaylistLevelType.SUBTITLE){if(!(0,ee.isFiniteNumber)(this.initPTS[_.cc]))return void this.unparsedVttFrags.push(E);this.onFragLoaded(G.Events.FRAG_LOADED,E)}},v.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},v.onFragParsingUserdata=function(w,E){var _=this.cea608Parser1,c=this.cea608Parser2;if(this.enabled&&_&&c){var h=E.frag,d=E.samples;if(h.type!==O.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(h))for(var P=0;P<d.length;P++){var m=d[P].bytes;if(m){var C=this.extractCea608Data(m);_.addData(d[P].pts,C[0]),c.addData(d[P].pts,C[1])}}}},v.onBufferFlushing=function(w,E){var _=E.startOffset,c=E.endOffset,h=E.endOffsetSubtitles,d=E.type,P=this.media;if(P&&!(P.currentTime<c)){if(!d||"video"===d){var m=this.captionsTracks;Object.keys(m).forEach(function(x){return(0,Y.removeCuesInRange)(m[x],_,c)})}if(this.config.renderTextTracksNatively&&0===_&&void 0!==h){var C=this.textTracks;Object.keys(C).forEach(function(x){return(0,Y.removeCuesInRange)(C[x],_,h)})}}},v.extractCea608Data=function(w){for(var E=[[],[]],_=31&w[0],c=2,h=0;h<_;h++){var d=w[c++],P=127&w[c++],m=127&w[c++];if((0!==P||0!==m)&&0!=(4&d)){var x=3&d;(0===x||1===x)&&(E[x].push(P),E[x].push(m))}}return E},g}();function R(g,v){return g&&g.label===v.name&&!(g.textTrack1||g.textTrack2)}function M(g,v,S,w){return Math.min(v,w)-Math.max(g,S)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
                !*** ./src/crypt/aes-crypto.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>ee});var ee=function(){function G(q,u){this.subtle=void 0,this.aesIV=void 0,this.subtle=q,this.aesIV=u}return G.prototype.decrypt=function(u,Y){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},Y,u)},G}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
                !*** ./src/crypt/aes-decryptor.ts ***!
                \************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>V,removePadding:()=>G});var ee=N(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts");function G(q){var u=q.byteLength,Y=u&&new DataView(q.buffer).getUint8(u-1);return Y?(0,ee.sliceUint8)(q,0,u-Y):q}var V=function(){function q(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var u=q.prototype;return u.uint8ArrayToUint32Array_=function(B){for(var F=new DataView(B),O=new Uint32Array(4),W=0;W<4;W++)O[W]=F.getUint32(4*W);return O},u.initTable=function(){var B=this.sBox,F=this.invSBox,O=this.subMix,W=O[0],U=O[1],R=O[2],M=O[3],b=this.invSubMix,g=b[0],v=b[1],S=b[2],w=b[3],E=new Uint32Array(256),_=0,c=0,h=0;for(h=0;h<256;h++)E[h]=h<128?h<<1:h<<1^283;for(h=0;h<256;h++){var d=c^c<<1^c<<2^c<<3^c<<4;B[_]=d=d>>>8^255&d^99,F[d]=_;var P=E[_],m=E[P],C=E[m],x=257*E[d]^16843008*d;W[_]=x<<24|x>>>8,U[_]=x<<16|x>>>16,R[_]=x<<8|x>>>24,M[_]=x,g[d]=(x=16843009*C^65537*m^257*P^16843008*_)<<24|x>>>8,v[d]=x<<16|x>>>16,S[d]=x<<8|x>>>24,w[d]=x,_?(_=P^E[E[E[C^P]]],c^=E[E[c]]):_=c=1}},u.expandKey=function(B){for(var F=this.uint8ArrayToUint32Array_(B),O=!0,W=0;W<F.length&&O;)O=F[W]===this.key[W],W++;if(!O){this.key=F;var U=this.keySize=F.length;if(4!==U&&6!==U&&8!==U)throw new Error("Invalid aes key size="+U);var M,b,P,m,R=this.ksRows=4*(U+6+1),g=this.keySchedule=new Uint32Array(R),v=this.invKeySchedule=new Uint32Array(R),S=this.sBox,w=this.rcon,E=this.invSubMix,_=E[0],c=E[1],h=E[2],d=E[3];for(M=0;M<R;M++)M<U?P=g[M]=F[M]:(m=P,M%U==0?(m=S[(m=m<<8|m>>>24)>>>24]<<24|S[m>>>16&255]<<16|S[m>>>8&255]<<8|S[255&m],m^=w[M/U|0]<<24):U>6&&M%U==4&&(m=S[m>>>24]<<24|S[m>>>16&255]<<16|S[m>>>8&255]<<8|S[255&m]),g[M]=P=(g[M-U]^m)>>>0);for(b=0;b<R;b++)M=R-b,m=3&b?g[M]:g[M-4],v[b]=b<4||M<=4?m:_[S[m>>>24]]^c[S[m>>>16&255]]^h[S[m>>>8&255]]^d[S[255&m]],v[b]=v[b]>>>0}},u.networkToHostOrderSwap=function(B){return B<<24|(65280&B)<<8|(16711680&B)>>8|B>>>24},u.decrypt=function(B,F,O){for(var C,x,T,I,L,Z,re,ne,oe,Te,ye,Ce,we,W=this.keySize+6,U=this.invKeySchedule,R=this.invSBox,M=this.invSubMix,b=M[0],g=M[1],v=M[2],S=M[3],w=this.uint8ArrayToUint32Array_(O),E=w[0],_=w[1],c=w[2],h=w[3],d=new Int32Array(B),P=new Int32Array(d.length),Be=this.networkToHostOrderSwap;F<d.length;){for(ne=Be(d[F]),oe=Be(d[F+1]),Te=Be(d[F+2]),ye=Be(d[F+3]),I=ne^U[0],L=ye^U[1],Z=Te^U[2],re=oe^U[3],Ce=4,we=1;we<W;we++)C=b[L>>>24]^g[Z>>16&255]^v[re>>8&255]^S[255&I]^U[Ce+1],x=b[Z>>>24]^g[re>>16&255]^v[I>>8&255]^S[255&L]^U[Ce+2],T=b[re>>>24]^g[I>>16&255]^v[L>>8&255]^S[255&Z]^U[Ce+3],I=b[I>>>24]^g[L>>16&255]^v[Z>>8&255]^S[255&re]^U[Ce],L=C,Z=x,re=T,Ce+=4;C=R[L>>>24]<<24^R[Z>>16&255]<<16^R[re>>8&255]<<8^R[255&I]^U[Ce+1],x=R[Z>>>24]<<24^R[re>>16&255]<<16^R[I>>8&255]<<8^R[255&L]^U[Ce+2],T=R[re>>>24]<<24^R[I>>16&255]<<16^R[L>>8&255]<<8^R[255&Z]^U[Ce+3],P[F]=Be(R[I>>>24]<<24^R[L>>16&255]<<16^R[Z>>8&255]<<8^R[255&re]^U[Ce]^E),P[F+1]=Be(T^_),P[F+2]=Be(x^c),P[F+3]=Be(C^h),E=ne,_=oe,c=Te,h=ye,F+=4}return P.buffer},q}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
                !*** ./src/crypt/decrypter.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>F});var ee=N(
/*! ./aes-crypto */
"./src/crypt/aes-crypto.ts"),G=N(
/*! ./fast-aes-key */
"./src/crypt/fast-aes-key.ts"),V=N(
/*! ./aes-decryptor */
"./src/crypt/aes-decryptor.ts"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),u=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),Y=N(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts"),F=function(){function O(U,R,M){var g=(void 0===M?{}:M).removePKCS7Padding,v=void 0===g||g;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=U,this.config=R,this.removePKCS7Padding=v,v)try{var S=self.crypto;S&&(this.subtle=S.subtle||S.webkitSubtle)}catch{}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var W=O.prototype;return W.destroy=function(){this.observer=null},W.isSync=function(){return this.config.enableSoftwareAES},W.flush=function(){var R=this.currentResult;if(R){var M=new Uint8Array(R);return this.reset(),this.removePKCS7Padding?(0,V.removePadding)(M):M}this.reset()},W.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},W.decrypt=function(R,M,b,g){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(R),M,b);var v=this.flush();v&&g(v.buffer)}else this.webCryptoDecrypt(new Uint8Array(R),M,b).then(g)},W.softwareDecrypt=function(R,M,b){var g=this.currentIV,v=this.currentResult,S=this.remainderData;this.logOnce("JS AES decrypt"),S&&(R=(0,u.appendUint8Array)(S,R),this.remainderData=null);var w=this.getValidChunk(R);if(!w.length)return null;g&&(b=g);var E=this.softwareDecrypter;E||(E=this.softwareDecrypter=new V.default),E.expandKey(M);var _=v;return this.currentResult=E.decrypt(w.buffer,0,b),this.currentIV=(0,Y.sliceUint8)(w,-16).buffer,_||null},W.webCryptoDecrypt=function(R,M,b){var g=this,v=this.subtle;return(this.key!==M||!this.fastAesKey)&&(this.key=M,this.fastAesKey=new G.default(v,M)),this.fastAesKey.expandKey().then(function(S){return v?new ee.default(v,b).decrypt(R.buffer,S):Promise.reject(new Error("web crypto not initialized"))}).catch(function(S){return g.onWebCryptoError(S,R,M,b)})},W.onWebCryptoError=function(R,M,b,g){return q.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",R),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(M,b,g)},W.getValidChunk=function(R){var M=R,b=R.length-R.length%16;return b!==R.length&&(M=(0,Y.sliceUint8)(R,0,b),this.remainderData=(0,Y.sliceUint8)(R,b)),M},W.logOnce=function(R){this.logEnabled&&(q.logger.log("[decrypter.ts]: "+R),this.logEnabled=!1)},O}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
                !*** ./src/crypt/fast-aes-key.ts ***!
                \***********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>ee});var ee=function(){function G(q,u){this.subtle=void 0,this.key=void 0,this.subtle=q,this.key=u}return G.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},G}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
                !*** ./src/demux/aacdemuxer.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>F});var ee=N(
/*! ./base-audio-demuxer */
"./src/demux/base-audio-demuxer.ts"),G=N(
/*! ./adts */
"./src/demux/adts.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),q=N(
/*! ../demux/id3 */
"./src/demux/id3.ts");function Y(O,W){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,M){return R.__proto__=M,R})(O,W)}const F=function(O){function W(R,M){var b;return(b=O.call(this)||this).observer=void 0,b.config=void 0,b.observer=R,b.config=M,b}!function u(O,W){O.prototype=Object.create(W.prototype),O.prototype.constructor=O,Y(O,W)}(W,O);var U=W.prototype;return U.resetInitSegment=function(M,b,g,v){O.prototype.resetInitSegment.call(this,M,b,g,v),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:b,duration:v,inputTimeScale:9e4,dropped:0}},W.probe=function(M){if(!M)return!1;for(var g=(q.getID3Data(M,0)||[]).length,v=M.length;g<v;g++)if(G.probe(M,g))return V.logger.log("ADTS sync word found !"),!0;return!1},U.canParse=function(M,b){return G.canParse(M,b)},U.appendFrame=function(M,b,g){G.initTrackConfig(M,this.observer,b,g,M.manifestCodec);var v=G.appendFrame(M,b,g,this.basePTS,this.frameIndex);if(v&&0===v.missing)return v},W}(ee.default)},"./src/demux/adts.ts":
/*!***************************!*\
                !*** ./src/demux/adts.ts ***!
                \***************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{appendFrame:()=>g,canGetFrameLength:()=>F,canParse:()=>W,getAudioConfig:()=>q,getFrameDuration:()=>M,getFullFrameLength:()=>B,getHeaderLength:()=>Y,initTrackConfig:()=>R,isHeader:()=>O,isHeaderPattern:()=>u,parseFrameHeader:()=>b,probe:()=>U});var ee=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),G=N(
/*! ../errors */
"./src/errors.ts"),V=N(
/*! ../events */
"./src/events.ts");function q(v,S,w,E){var _,c,h,d,P=navigator.userAgent.toLowerCase(),m=E,C=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_=1+((192&S[w+2])>>>6);var x=(60&S[w+2])>>>2;if(!(x>C.length-1))return h=(1&S[w+2])<<2,h|=(192&S[w+3])>>>6,ee.logger.log("manifest codec:"+E+", ADTS type:"+_+", samplingIndex:"+x),/firefox/i.test(P)?x>=6?(_=5,d=new Array(4),c=x-3):(_=2,d=new Array(2),c=x):-1!==P.indexOf("android")?(_=2,d=new Array(2),c=x):(_=5,d=new Array(4),E&&(-1!==E.indexOf("mp4a.40.29")||-1!==E.indexOf("mp4a.40.5"))||!E&&x>=6?c=x-3:((E&&-1!==E.indexOf("mp4a.40.2")&&(x>=6&&1===h||/vivaldi/i.test(P))||!E&&1===h)&&(_=2,d=new Array(2)),c=x)),d[0]=_<<3,d[0]|=(14&x)>>1,d[1]|=(1&x)<<7,d[1]|=h<<3,5===_&&(d[1]|=(14&c)>>1,d[2]=(1&c)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:C[x],channelCount:h,codec:"mp4a.40."+_,manifestCodec:m};v.trigger(V.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+x})}function u(v,S){return 255===v[S]&&240==(246&v[S+1])}function Y(v,S){return 1&v[S+1]?7:9}function B(v,S){return(3&v[S+3])<<11|v[S+4]<<3|(224&v[S+5])>>>5}function F(v,S){return S+5<v.length}function O(v,S){return S+1<v.length&&u(v,S)}function W(v,S){return F(v,S)&&u(v,S)&&B(v,S)<=v.length-S}function U(v,S){if(O(v,S)){var w=Y(v,S);if(S+w>=v.length)return!1;var E=B(v,S);if(E<=w)return!1;var _=S+E;return _===v.length||O(v,_)}return!1}function R(v,S,w,E,_){if(!v.samplerate){var c=q(S,w,E,_);if(!c)return;v.config=c.config,v.samplerate=c.samplerate,v.channelCount=c.channelCount,v.codec=c.codec,v.manifestCodec=c.manifestCodec,ee.logger.log("parsed codec:"+v.codec+", rate:"+c.samplerate+", channels:"+c.channelCount)}}function M(v){return 9216e4/v}function b(v,S){var w=Y(v,S);if(S+w<=v.length){var E=B(v,S)-w;if(E>0)return{headerLength:w,frameLength:E}}}function g(v,S,w,E,_){var P,h=E+_*M(v.samplerate),d=b(S,w);if(d){var C=d.headerLength,x=C+d.frameLength,T=Math.max(0,w+x-S.length);T?(P=new Uint8Array(x-C)).set(S.subarray(w+C,S.length),0):P=S.subarray(w+C,w+x);var I={unit:P,pts:h};return T||v.samples.push(I),{sample:I,length:x,missing:T}}var L=S.length-w;return(P=new Uint8Array(L)).set(S.subarray(w,S.length),0),{sample:{unit:P,pts:h},length:L,missing:-1}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
                !*** ./src/demux/base-audio-demuxer.ts ***!
                \*****************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>O,initPTSFn:()=>F});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../demux/id3 */
"./src/demux/id3.ts"),V=N(
/*! ../types/demuxer */
"./src/types/demuxer.ts"),q=N(
/*! ./dummy-demuxed-track */
"./src/demux/dummy-demuxed-track.ts"),u=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),Y=N(
/*! ../utils/typed-array */
"./src/utils/typed-array.ts"),B=function(){function W(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var U=W.prototype;return U.resetInitSegment=function(M,b,g,v){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},U.resetTimeStamp=function(M){this.initPTS=M,this.resetContiguity()},U.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},U.canParse=function(M,b){return!1},U.appendFrame=function(M,b,g){},U.demux=function(M,b){this.cachedData&&(M=(0,u.appendUint8Array)(this.cachedData,M),this.cachedData=null);var S,g=G.getID3Data(M,0),v=g?g.length:0,w=this._audioTrack,E=this._id3Track,_=g?G.getTimeStamp(g):void 0,c=M.length;for((null===this.basePTS||0===this.frameIndex&&(0,ee.isFiniteNumber)(_))&&(this.basePTS=F(_,b,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),g&&g.length>0&&E.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:g,type:V.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});v<c;){if(this.canParse(M,v)){var h=this.appendFrame(w,M,v);h?(this.frameIndex++,this.lastPTS=h.sample.pts,S=v+=h.length):v=c}else G.canParse(M,v)?(g=G.getID3Data(M,v),E.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:g,type:V.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),S=v+=g.length):v++;if(v===c&&S!==c){var d=(0,Y.sliceUint8)(M,S);this.cachedData=this.cachedData?(0,u.appendUint8Array)(this.cachedData,d):d}}return{audioTrack:w,videoTrack:(0,q.dummyTrack)(),id3Track:E,textTrack:(0,q.dummyTrack)()}},U.demuxSampleAes=function(M,b,g){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},U.flush=function(M){var b=this.cachedData;return b&&(this.cachedData=null,this.demux(b,0)),{audioTrack:this._audioTrack,videoTrack:(0,q.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,q.dummyTrack)()}},U.destroy=function(){},W}(),F=function(U,R,M){return(0,ee.isFiniteNumber)(U)?90*U:9e4*R+(M||0)};const O=B},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
                !*** ./src/demux/chunk-cache.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>ee});var ee=function(){function V(){this.chunks=[],this.dataLength=0}var q=V.prototype;return q.push=function(Y){this.chunks.push(Y),this.dataLength+=Y.length},q.flush=function(){var F,Y=this.chunks;return Y.length?(F=1===Y.length?Y[0]:function G(V,q){for(var u=new Uint8Array(q),Y=0,B=0;B<V.length;B++){var F=V[B];u.set(F,Y),Y+=F.length}return u}(Y,this.dataLength),this.reset(),F):new Uint8Array(0)},q.reset=function(){this.chunks.length=0,this.dataLength=0},V}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
                !*** ./src/demux/dummy-demuxed-track.ts ***!
                \******************************************/(Se,ue,N)=>{"use strict";function ee(G,V){return void 0===G&&(G=""),void 0===V&&(V=9e4),{type:G,id:-1,pid:-1,inputTimeScale:V,sequenceNumber:-1,samples:[],dropped:0}}N.r(ue),N.d(ue,{dummyTrack:()=>ee})},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
                !*** ./src/demux/exp-golomb.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>V});var ee=N(
/*! ../utils/logger */
"./src/utils/logger.ts");const V=function(){function q(Y){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=Y,this.bytesAvailable=Y.byteLength,this.word=0,this.bitsAvailable=0}var u=q.prototype;return u.loadWord=function(){var B=this.data,F=this.bytesAvailable,O=B.byteLength-F,W=new Uint8Array(4),U=Math.min(4,F);if(0===U)throw new Error("no bytes available");W.set(B.subarray(O,O+U)),this.word=new DataView(W.buffer).getUint32(0),this.bitsAvailable=8*U,this.bytesAvailable-=U},u.skipBits=function(B){var F;this.bitsAvailable>B?(this.word<<=B,this.bitsAvailable-=B):(B-=this.bitsAvailable,B-=(F=B>>3)>>3,this.bytesAvailable-=F,this.loadWord(),this.word<<=B,this.bitsAvailable-=B)},u.readBits=function(B){var F=Math.min(this.bitsAvailable,B),O=this.word>>>32-F;return B>32&&ee.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=F,this.bitsAvailable>0?this.word<<=F:this.bytesAvailable>0&&this.loadWord(),(F=B-F)>0&&this.bitsAvailable?O<<F|this.readBits(F):O},u.skipLZ=function(){var B;for(B=0;B<this.bitsAvailable;++B)if(this.word&2147483648>>>B)return this.word<<=B,this.bitsAvailable-=B,B;return this.loadWord(),B+this.skipLZ()},u.skipUEG=function(){this.skipBits(1+this.skipLZ())},u.skipEG=function(){this.skipBits(1+this.skipLZ())},u.readUEG=function(){var B=this.skipLZ();return this.readBits(B+1)-1},u.readEG=function(){var B=this.readUEG();return 1&B?1+B>>>1:-1*(B>>>1)},u.readBoolean=function(){return 1===this.readBits(1)},u.readUByte=function(){return this.readBits(8)},u.readUShort=function(){return this.readBits(16)},u.readUInt=function(){return this.readBits(32)},u.skipScalingList=function(B){for(var F=8,O=8,U=0;U<B;U++)0!==O&&(O=(F+this.readEG()+256)%256),F=0===O?F:O},u.readSPS=function(){var U,R,M,B=0,F=0,O=0,W=0,b=this.readUByte.bind(this),g=this.readBits.bind(this),v=this.readUEG.bind(this),S=this.readBoolean.bind(this),w=this.skipBits.bind(this),E=this.skipEG.bind(this),_=this.skipUEG.bind(this),c=this.skipScalingList.bind(this);b();var h=b();if(g(5),w(3),b(),_(),100===h||110===h||122===h||244===h||44===h||83===h||86===h||118===h||128===h){var d=v();if(3===d&&w(1),_(),_(),w(1),S())for(R=3!==d?8:12,M=0;M<R;M++)S()&&c(M<6?16:64)}_();var P=v();if(0===P)v();else if(1===P)for(w(1),E(),E(),U=v(),M=0;M<U;M++)E();_(),w(1);var m=v(),C=v(),x=g(1);0===x&&w(1),w(1),S()&&(B=v(),F=v(),O=v(),W=v());var T=[1,1];if(S()&&S())switch(b()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[b()<<8|b(),b()<<8|b()]}return{width:Math.ceil(16*(m+1)-2*B-2*F),height:(2-x)*(C+1)*16-(x?2:4)*(O+W),pixelRatio:T}},u.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},q}()},"./src/demux/id3.ts":
/*!**************************!*\
                !*** ./src/demux/id3.ts ***!
                \**************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{canParse:()=>u,decodeFrame:()=>W,getID3Data:()=>V,getID3Frames:()=>O,getTimeStamp:()=>Y,isFooter:()=>G,isHeader:()=>ee,isTimeStampFrame:()=>B,testables:()=>v,utf8ArrayToStr:()=>g});var S,ee=function(_,c){return c+10<=_.length&&73===_[c]&&68===_[c+1]&&51===_[c+2]&&_[c+3]<255&&_[c+4]<255&&_[c+6]<128&&_[c+7]<128&&_[c+8]<128&&_[c+9]<128},G=function(_,c){return c+10<=_.length&&51===_[c]&&68===_[c+1]&&73===_[c+2]&&_[c+3]<255&&_[c+4]<255&&_[c+6]<128&&_[c+7]<128&&_[c+8]<128&&_[c+9]<128},V=function(_,c){for(var h=c,d=0;ee(_,c);)d+=10,d+=q(_,c+6),G(_,c+10)&&(d+=10),c+=d;if(d>0)return _.subarray(h,h+d)},q=function(_,c){var h=0;return h=(127&_[c])<<21,h|=(127&_[c+1])<<14,(h|=(127&_[c+2])<<7)|127&_[c+3]},u=function(_,c){return ee(_,c)&&q(_,c+6)+10<=_.length-c},Y=function(_){for(var c=O(_),h=0;h<c.length;h++){var d=c[h];if(B(d))return b(d)}},B=function(_){return _&&"PRIV"===_.key&&"com.apple.streaming.transportStreamTimestamp"===_.info},F=function(_){var c=String.fromCharCode(_[0],_[1],_[2],_[3]),h=q(_,4);return{type:c,size:h,data:_.subarray(10,10+h)}},O=function(_){for(var c=0,h=[];ee(_,c);){for(var d=q(_,c+6),P=(c+=10)+d;c+8<P;){var m=F(_.subarray(c)),C=W(m);C&&h.push(C),c+=m.size+10}G(_,c)&&(c+=10)}return h},W=function(_){return"PRIV"===_.type?U(_):"W"===_.type[0]?M(_):R(_)},U=function(_){if(!(_.size<2)){var c=g(_.data,!0),h=new Uint8Array(_.data.subarray(c.length+1));return{key:_.type,info:c,data:h.buffer}}},R=function(_){if(!(_.size<2)){if("TXXX"===_.type){var c=1,h=g(_.data.subarray(c),!0),d=g(_.data.subarray(c+=h.length+1));return{key:_.type,info:h,data:d}}var P=g(_.data.subarray(1));return{key:_.type,data:P}}},M=function(_){if("WXXX"===_.type){if(_.size<2)return;var c=1,h=g(_.data.subarray(c),!0),d=g(_.data.subarray(c+=h.length+1));return{key:_.type,info:h,data:d}}var P=g(_.data);return{key:_.type,data:P}},b=function(_){if(8===_.data.byteLength){var c=new Uint8Array(_.data),d=(c[4]<<23)+(c[5]<<15)+(c[6]<<7)+c[7];return d/=45,1&c[3]&&(d+=47721858.84),Math.round(d)}},g=function(_,c){void 0===c&&(c=!1);var h=function w(){return!S&&typeof self.TextDecoder<"u"&&(S=new self.TextDecoder("utf-8")),S}();if(h){var d=h.decode(_);if(c){var P=d.indexOf("\0");return-1!==P?d.substring(0,P):d}return d.replace(/\0/g,"")}for(var C,x,T,m=_.length,I="",L=0;L<m;){if(0===(C=_[L++])&&c)return I;if(0!==C&&3!==C)switch(C>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:I+=String.fromCharCode(C);break;case 12:case 13:x=_[L++],I+=String.fromCharCode((31&C)<<6|63&x);break;case 14:x=_[L++],T=_[L++],I+=String.fromCharCode((15&C)<<12|(63&x)<<6|(63&T)<<0)}}return I},v={decodeTextFrame:R}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
                !*** ./src/demux/mp3demuxer.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>F});var ee=N(
/*! ./base-audio-demuxer */
"./src/demux/base-audio-demuxer.ts"),G=N(
/*! ../demux/id3 */
"./src/demux/id3.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),q=N(
/*! ./mpegaudio */
"./src/demux/mpegaudio.ts");function Y(O,W){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,M){return R.__proto__=M,R})(O,W)}var B=function(O){function W(){return O.apply(this,arguments)||this}!function u(O,W){O.prototype=Object.create(W.prototype),O.prototype.constructor=O,Y(O,W)}(W,O);var U=W.prototype;return U.resetInitSegment=function(M,b,g,v){O.prototype.resetInitSegment.call(this,M,b,g,v),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:b,duration:v,inputTimeScale:9e4,dropped:0}},W.probe=function(M){if(!M)return!1;for(var g=(G.getID3Data(M,0)||[]).length,v=M.length;g<v;g++)if(q.probe(M,g))return V.logger.log("MPEG Audio sync word found !"),!0;return!1},U.canParse=function(M,b){return q.canParse(M,b)},U.appendFrame=function(M,b,g){if(null!==this.basePTS)return q.appendFrame(M,b,g,this.basePTS,this.frameIndex)},W}(ee.default);const F=B},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
                !*** ./src/demux/mp4demuxer.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>B});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../types/demuxer */
"./src/types/demuxer.ts"),V=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),q=N(
/*! ./dummy-demuxed-track */
"./src/demux/dummy-demuxed-track.ts"),u=/\/emsg[-/]ID3/i;const B=function(){function F(W,U){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=U}var O=F.prototype;return O.resetTimeStamp=function(){},O.resetInitSegment=function(U,R,M,b){var g=(0,V.parseInitSegment)(U),v=this.videoTrack=(0,q.dummyTrack)("video",1),S=this.audioTrack=(0,q.dummyTrack)("audio",1),w=this.txtTrack=(0,q.dummyTrack)("text",1);if(this.id3Track=(0,q.dummyTrack)("id3",1),this.timeOffset=0,g.video){var E=g.video,c=E.timescale,h=E.codec;v.id=E.id,v.timescale=w.timescale=c,v.codec=h}if(g.audio){var d=g.audio,m=d.timescale,C=d.codec;S.id=d.id,S.timescale=m,S.codec=C}w.id=V.RemuxerTrackIdConfig.text,v.sampleDuration=0,v.duration=S.duration=b},O.resetContiguity=function(){},F.probe=function(U){return U=U.length>16384?U.subarray(0,16384):U,(0,V.findBox)(U,["moof"]).length>0},O.demux=function(U,R){this.timeOffset=R;var M=U,b=this.videoTrack,g=this.txtTrack;if(this.config.progressive){this.remainderData&&(M=(0,V.appendUint8Array)(this.remainderData,U));var v=(0,V.segmentValidRange)(M);this.remainderData=v.remainder,b.samples=v.valid||new Uint8Array}else b.samples=M;var S=this.extractID3Track(b,R);return g.samples=(0,V.parseSamples)(R,b),{videoTrack:b,audioTrack:this.audioTrack,id3Track:S,textTrack:this.txtTrack}},O.flush=function(){var U=this.timeOffset,R=this.videoTrack,M=this.txtTrack;R.samples=this.remainderData||new Uint8Array,this.remainderData=null;var b=this.extractID3Track(R,this.timeOffset);return M.samples=(0,V.parseSamples)(U,R),{videoTrack:R,audioTrack:(0,q.dummyTrack)(),id3Track:b,textTrack:(0,q.dummyTrack)()}},O.extractID3Track=function(U,R){var M=this.id3Track;if(U.samples.length){var b=(0,V.findBox)(U.samples,["emsg"]);b&&b.forEach(function(g){var v=(0,V.parseEmsg)(g);if(u.test(v.schemeIdUri)){var S=(0,ee.isFiniteNumber)(v.presentationTime)?v.presentationTime/v.timeScale:R+v.presentationTimeDelta/v.timeScale,w=4294967295===v.eventDuration?Number.POSITIVE_INFINITY:v.eventDuration/v.timeScale;w<=.001&&(w=Number.POSITIVE_INFINITY);var E=v.payload;M.samples.push({data:E,len:E.byteLength,dts:S,pts:S,type:G.MetadataSchema.emsg,duration:w})}})}return M},O.demuxSampleAes=function(U,R,M){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},O.destroy=function(){},F}()},"./src/demux/mpegaudio.ts":
/*!********************************!*\
                !*** ./src/demux/mpegaudio.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{appendFrame:()=>Y,canParse:()=>W,isHeader:()=>O,isHeaderPattern:()=>F,parseHeader:()=>B,probe:()=>U});var ee=null,G=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],V=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],q=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],u=[0,1,1,4];function Y(R,M,b,g,v){if(!(b+24>M.length)){var S=B(M,b);if(S&&b+S.frameLength<=M.length){var E=g+v*(9e4*S.samplesPerFrame/S.sampleRate),_={unit:M.subarray(b,b+S.frameLength),pts:E,dts:E};return R.config=[],R.channelCount=S.channelCount,R.samplerate=S.sampleRate,R.samples.push(_),{sample:_,length:S.frameLength,missing:0}}}}function B(R,M){var b=R[M+1]>>3&3,g=R[M+1]>>1&3,v=R[M+2]>>4&15,S=R[M+2]>>2&3;if(1!==b&&0!==v&&15!==v&&3!==S){var E=R[M+3]>>6,c=1e3*G[14*(3===b?3-g:3===g?3:4)+v-1],d=V[3*(3===b?0:2===b?1:2)+S],P=3===E?1:2,m=q[b][g],C=u[g],x=8*m*C,T=Math.floor(m*c/d+(R[M+2]>>1&1))*C;if(null===ee){var L=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ee=L?parseInt(L[1]):0}return!!ee&&ee<=87&&2===g&&c>=224e3&&0===E&&(R[M+3]=128|R[M+3]),{sampleRate:d,channelCount:P,frameLength:T,samplesPerFrame:x}}}function F(R,M){return 255===R[M]&&224==(224&R[M+1])&&0!=(6&R[M+1])}function O(R,M){return M+1<R.length&&F(R,M)}function W(R,M){return F(R,M)&&4<=R.length-M}function U(R,M){if(M+1<R.length&&F(R,M)){var g=B(R,M),v=4;null!=g&&g.frameLength&&(v=g.frameLength);var S=M+v;return S===R.length||O(R,S)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
                !*** ./src/demux/sample-aes.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>q});var ee=N(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),G=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts");const q=function(){function u(B,F,O){this.keyData=void 0,this.decrypter=void 0,this.keyData=O,this.decrypter=new ee.default(B,F,{removePKCS7Padding:!1})}var Y=u.prototype;return Y.decryptBuffer=function(F,O){this.decrypter.decrypt(F,this.keyData.key.buffer,this.keyData.iv.buffer,O)},Y.decryptAacSample=function(F,O,W,U){var R=F[O].unit;if(!(R.length<=16)){var M=R.subarray(16,R.length-R.length%16),b=M.buffer.slice(M.byteOffset,M.byteOffset+M.length),g=this;this.decryptBuffer(b,function(v){var S=new Uint8Array(v);R.set(S,16),U||g.decryptAacSamples(F,O+1,W)})}},Y.decryptAacSamples=function(F,O,W){for(;;O++){if(O>=F.length)return void W();if(!(F[O].unit.length<32)){var U=this.decrypter.isSync();if(this.decryptAacSample(F,O,W,U),!U)return}}},Y.getAvcEncryptedData=function(F){for(var O=16*Math.floor((F.length-48)/160)+16,W=new Int8Array(O),U=0,R=32;R<F.length-16;R+=160,U+=16)W.set(F.subarray(R,R+16),U);return W},Y.getAvcDecryptedUnit=function(F,O){for(var W=new Uint8Array(O),U=0,R=32;R<F.length-16;R+=160,U+=16)F.set(W.subarray(U,U+16),R);return F},Y.decryptAvcSample=function(F,O,W,U,R,M){var b=(0,G.discardEPB)(R.data),g=this.getAvcEncryptedData(b),v=this;this.decryptBuffer(g.buffer,function(S){R.data=v.getAvcDecryptedUnit(b,S),M||v.decryptAvcSamples(F,O,W+1,U)})},Y.decryptAvcSamples=function(F,O,W,U){if(F instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;O++,W=0){if(O>=F.length)return void U();for(var R=F[O].units;!(W>=R.length);W++){var M=R[W];if(!(M.data.length<=48||1!==M.type&&5!==M.type)){var b=this.decrypter.isSync();if(this.decryptAvcSample(F,O,W,U,M,b),!b)return}}}},u}()},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
                !*** ./src/demux/transmuxer-interface.ts ***!
                \*******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>W});var ee=N(
/*! ./webworkify-webpack */
"./src/demux/webworkify-webpack.js"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../demux/transmuxer */
"./src/demux/transmuxer.ts"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),u=N(
/*! ../errors */
"./src/errors.ts"),Y=N(
/*! ../utils/mediasource-helper */
"./src/utils/mediasource-helper.ts"),B=N(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),O=(0,Y.getMediaSource)()||{isTypeSupported:function(){return!1}},W=function(){function U(M,b,g,v){var S=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var w=M.config;this.hls=M,this.id=b,this.useWorker=!!w.enableWorker,this.onTransmuxComplete=g,this.onFlush=v;var E=function(P,m){(m=m||{}).frag=S.frag,m.id=S.id,S.hls.trigger(P,m)};this.observer=new B.EventEmitter,this.observer.on(G.Events.FRAG_DECRYPTED,E),this.observer.on(G.Events.ERROR,E);var _={mp4:O.isTypeSupported("video/mp4"),mpeg:O.isTypeSupported("audio/mpeg"),mp3:O.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){var h;q.logger.log("demuxing in webworker");try{h=this.worker=(0,ee.default)(
/*! ../demux/transmuxer-worker.ts */
"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(d){S.useWorker=!1,q.logger.warn("Exception in webworker, fallback to inline"),S.hls.trigger(G.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(d.message+"  ("+d.filename+":"+d.lineno+")")})},h.postMessage({cmd:"init",typeSupported:_,vendor:c,id:b,config:JSON.stringify(w)})}catch(d){q.logger.warn("Error in worker:",d),q.logger.error("Error while initializing DemuxerWorker, fallback to inline"),h&&self.URL.revokeObjectURL(h.objectURL),this.transmuxer=new V.default(this.observer,_,w,c,b),this.worker=null}}else this.transmuxer=new V.default(this.observer,_,w,c,b)}var R=U.prototype;return R.destroy=function(){var b=this.worker;if(b)b.removeEventListener("message",this.onwmsg),b.terminate(),this.worker=null,this.onwmsg=void 0;else{var g=this.transmuxer;g&&(g.destroy(),this.transmuxer=null)}var v=this.observer;v&&v.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},R.push=function(b,g,v,S,w,E,_,c,h,d){var P,m,C=this;h.transmuxing.start=self.performance.now();var x=this.transmuxer,T=this.worker,I=E?E.start:w.start,L=w.decryptdata,Z=this.frag,re=!(Z&&w.cc===Z.cc),ne=!(Z&&h.level===Z.level),oe=Z?h.sn-Z.sn:-1,Te=this.part?h.part-this.part.index:-1,Ce=!ne&&(1===oe||0===oe&&(1===Te||0===oe&&h.id>1&&h.id===Z?.stats.chunkCount&&Te<=0)),we=self.performance.now();(ne||oe||0===w.stats.parsing.start)&&(w.stats.parsing.start=we),E&&(Te||!Ce)&&(E.stats.parsing.start=we);var Be=!(Z&&(null===(P=w.initSegment)||void 0===P?void 0:P.url)===(null===(m=Z.initSegment)||void 0===m?void 0:m.url)),Ze=new V.TransmuxState(re,Ce,c,ne,I,Be);if(!Ce||re||Be){q.logger.log("[transmuxer-interface, "+w.type+"]: Starting new transmux session for sn: "+h.sn+" p: "+h.part+" level: "+h.level+" id: "+h.id+"\n        discontinuity: "+re+"\n        trackSwitch: "+ne+"\n        contiguous: "+Ce+"\n        accurateTimeOffset: "+c+"\n        timeOffset: "+I+"\n        initSegmentChange: "+Be);var st=new V.TransmuxConfig(v,S,g,_,d);this.configureTransmuxer(st)}if(this.frag=w,this.part=E,T)T.postMessage({cmd:"demux",data:b,decryptdata:L,chunkMeta:h,state:Ze},b instanceof ArrayBuffer?[b]:[]);else if(x){var ct=x.push(b,L,h,Ze);(0,V.isPromise)(ct)?ct.then(function(yt){C.handleTransmuxComplete(yt)}):this.handleTransmuxComplete(ct)}},R.flush=function(b){var g=this;b.transmuxing.start=self.performance.now();var v=this.transmuxer,S=this.worker;if(S)S.postMessage({cmd:"flush",chunkMeta:b});else if(v){var w=v.flush(b);(0,V.isPromise)(w)?w.then(function(E){g.handleFlushResult(E,b)}):this.handleFlushResult(w,b)}},R.handleFlushResult=function(b,g){var v=this;b.forEach(function(S){v.handleTransmuxComplete(S)}),this.onFlush(g)},R.onWorkerMessage=function(b){var g=b.data,v=this.hls;switch(g.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(g.data);break;case"flush":this.onFlush(g.data);break;case"workerLog":q.logger[g.data.logType]&&q.logger[g.data.logType](g.data.message);break;default:g.data=g.data||{},g.data.frag=this.frag,g.data.id=this.id,v.trigger(g.event,g.data)}},R.configureTransmuxer=function(b){var g=this.worker,v=this.transmuxer;g?g.postMessage({cmd:"configure",config:b}):v&&v.configure(b)},R.handleTransmuxComplete=function(b){b.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(b)},U}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
                !*** ./src/demux/transmuxer-worker.ts ***!
                \****************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>Y});var ee=N(
/*! ../demux/transmuxer */
"./src/demux/transmuxer.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),q=N(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js");function Y(U){var R=new q.EventEmitter,M=function(v,S){U.postMessage({event:v,data:S})};R.on(G.Events.FRAG_DECRYPTED,M),R.on(G.Events.ERROR,M),U.addEventListener("message",function(g){var v=g.data;switch(v.cmd){case"init":var S=JSON.parse(v.config);U.transmuxer=new ee.default(R,v.typeSupported,S,v.vendor,v.id),(0,V.enableLogs)(S.debug,v.id),function(){var v=function(E){V.logger[E]=function(h){M("workerLog",{logType:E,message:h})}};for(var S in V.logger)v(S)}(),M("init",null);break;case"configure":U.transmuxer.configure(v.config);break;case"demux":var w=U.transmuxer.push(v.data,v.decryptdata,v.chunkMeta,v.state);(0,ee.isPromise)(w)?w.then(function(c){B(U,c)}):B(U,w);break;case"flush":var E=v.chunkMeta,_=U.transmuxer.flush(E);(0,ee.isPromise)(_)?_.then(function(c){O(U,c,E)}):O(U,_,E)}})}function B(U,R){if(function W(U){return!(U.audio||U.video||U.text||U.id3||U.initSegment)}(R.remuxResult))return!1;var M=[],b=R.remuxResult,g=b.audio,v=b.video;return g&&F(M,g),v&&F(M,v),U.postMessage({event:"transmuxComplete",data:R},M),!0}function F(U,R){R.data1&&U.push(R.data1.buffer),R.data2&&U.push(R.data2.buffer)}function O(U,R,M){R.reduce(function(g,v){return B(U,v)||g},!1)||U.postMessage({event:"transmuxComplete",data:R[0]}),U.postMessage({event:"flush",data:M})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
                !*** ./src/demux/transmuxer.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{TransmuxConfig:()=>S,TransmuxState:()=>w,default:()=>M,isPromise:()=>v});var U,ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../errors */
"./src/errors.ts"),V=N(
/*! ../crypt/decrypter */
"./src/crypt/decrypter.ts"),q=N(
/*! ../demux/aacdemuxer */
"./src/demux/aacdemuxer.ts"),u=N(
/*! ../demux/mp4demuxer */
"./src/demux/mp4demuxer.ts"),Y=N(
/*! ../demux/tsdemuxer */
"./src/demux/tsdemuxer.ts"),B=N(
/*! ../demux/mp3demuxer */
"./src/demux/mp3demuxer.ts"),F=N(
/*! ../remux/mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),O=N(
/*! ../remux/passthrough-remuxer */
"./src/remux/passthrough-remuxer.ts"),W=N(
/*! ../utils/logger */
"./src/utils/logger.ts");try{U=self.performance.now.bind(self.performance)}catch{W.logger.debug("Unable to use Performance API on this environment"),U=self.Date.now}var R=[{demux:Y.default,remux:F.default},{demux:u.default,remux:O.default},{demux:q.default,remux:F.default},{demux:B.default,remux:F.default}],M=function(){function E(c,h,d,P,m){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=c,this.typeSupported=h,this.config=d,this.vendor=P,this.id=m}var _=E.prototype;return _.configure=function(h){this.transmuxConfig=h,this.decrypter&&this.decrypter.reset()},_.push=function(h,d,P,m){var C=this,x=P.transmuxing;x.executeStart=U();var T=new Uint8Array(h),I=this.config,L=this.currentTransmuxState,Z=this.transmuxConfig;m&&(this.currentTransmuxState=m);var re=m||L,ne=re.contiguous,oe=re.discontinuity,Te=re.trackSwitch,ye=re.accurateTimeOffset,Ce=re.timeOffset,we=re.initSegmentChange,st=Z.defaultInitPts;(oe||Te||we)&&this.resetInitSegment(Z.initSegmentData,Z.audioCodec,Z.videoCodec,Z.duration),(oe||we)&&this.resetInitialTimestamp(st),ne||this.resetContiguity();var _t=function b(E,_){var c=null;return E.byteLength>0&&null!=_&&null!=_.key&&null!==_.iv&&null!=_.method&&(c=_),c}(T,d);if(_t&&"AES-128"===_t.method){var ot=this.getDecrypter();if(!I.enableSoftwareAES)return this.decryptionPromise=ot.webCryptoDecrypt(T,_t.key.buffer,_t.iv.buffer).then(function(Ht){var Kt=C.push(Ht,null,P);return C.decryptionPromise=null,Kt}),this.decryptionPromise;var bt=ot.softwareDecrypt(T,_t.key.buffer,_t.iv.buffer);if(!bt)return x.executeEnd=U(),g(P);T=new Uint8Array(bt)}this.needsProbing(T,oe,Te)&&this.configureTransmuxer(T,Z);var Ct=this.transmux(T,_t,Ce,ye,P),nt=this.currentTransmuxState;return nt.contiguous=!0,nt.discontinuity=!1,nt.trackSwitch=!1,x.executeEnd=U(),Ct},_.flush=function(h){var d=this,P=h.transmuxing;P.executeStart=U();var m=this.decrypter,C=this.currentTransmuxState,x=this.decryptionPromise;if(x)return x.then(function(){return d.flush(h)});var T=[],I=C.timeOffset;if(m){var L=m.flush();L&&T.push(this.push(L,null,h))}var Z=this.demuxer;if(!Z||!this.remuxer)return this.observer.emit(ee.Events.ERROR,ee.Events.ERROR,{type:G.ErrorTypes.MEDIA_ERROR,details:G.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),P.executeEnd=U(),[g(h)];var ne=Z.flush(I);return v(ne)?ne.then(function(oe){return d.flushRemux(T,oe,h),T}):(this.flushRemux(T,ne,h),T)},_.flushRemux=function(h,d,P){var m=d.audioTrack,C=d.videoTrack,x=d.id3Track,T=d.textTrack,I=this.currentTransmuxState,L=I.accurateTimeOffset,Z=I.timeOffset;W.logger.log("[transmuxer.ts]: Flushed fragment "+P.sn+(P.part>-1?" p: "+P.part:"")+" of level "+P.level);var re=this.remuxer.remux(m,C,x,T,Z,L,!0,this.id);h.push({remuxResult:re,chunkMeta:P}),P.transmuxing.executeEnd=U()},_.resetInitialTimestamp=function(h){var d=this.demuxer,P=this.remuxer;!d||!P||(d.resetTimeStamp(h),P.resetTimeStamp(h))},_.resetContiguity=function(){var h=this.demuxer,d=this.remuxer;!h||!d||(h.resetContiguity(),d.resetNextTimestamp())},_.resetInitSegment=function(h,d,P,m){var C=this.demuxer,x=this.remuxer;!C||!x||(C.resetInitSegment(h,d,P,m),x.resetInitSegment(h,d,P))},_.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},_.transmux=function(h,d,P,m,C){return d&&"SAMPLE-AES"===d.method?this.transmuxSampleAes(h,d,P,m,C):this.transmuxUnencrypted(h,P,m,C)},_.transmuxUnencrypted=function(h,d,P,m){var C=this.demuxer.demux(h,d,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(C.audioTrack,C.videoTrack,C.id3Track,C.textTrack,d,P,!1,this.id),chunkMeta:m}},_.transmuxSampleAes=function(h,d,P,m,C){var x=this;return this.demuxer.demuxSampleAes(h,d,P).then(function(T){return{remuxResult:x.remuxer.remux(T.audioTrack,T.videoTrack,T.id3Track,T.textTrack,P,m,!1,x.id),chunkMeta:C}})},_.configureTransmuxer=function(h,d){for(var ne,P=this.config,m=this.observer,C=this.typeSupported,x=this.vendor,T=d.audioCodec,I=d.defaultInitPts,L=d.duration,Z=d.initSegmentData,re=d.videoCodec,oe=0,Te=R.length;oe<Te;oe++)if(R[oe].demux.probe(h)){ne=R[oe];break}ne||(W.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),ne={demux:u.default,remux:O.default});var ye=this.demuxer,Ce=this.remuxer,we=ne.remux,Be=ne.demux;(!Ce||!(Ce instanceof we))&&(this.remuxer=new we(m,P,C,x)),(!ye||!(ye instanceof Be))&&(this.demuxer=new Be(m,P,C),this.probe=Be.probe),this.resetInitSegment(Z,T,re,L),this.resetInitialTimestamp(I)},_.needsProbing=function(h,d,P){return!this.demuxer||!this.remuxer||d||P},_.getDecrypter=function(){var h=this.decrypter;return h||(h=this.decrypter=new V.default(this.observer,this.config)),h},E}(),g=function(_){return{remuxResult:{},chunkMeta:_}};function v(E){return"then"in E&&E.then instanceof Function}var S=function(_,c,h,d,P){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=_,this.videoCodec=c,this.initSegmentData=h,this.duration=d,this.defaultInitPts=P},w=function(_,c,h,d,P,m){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=_,this.contiguous=c,this.accurateTimeOffset=h,this.trackSwitch=d,this.timeOffset=P,this.initSegmentChange=m}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
                !*** ./src/demux/tsdemuxer.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>w});var ee=N(
/*! ./adts */
"./src/demux/adts.ts"),G=N(
/*! ./mpegaudio */
"./src/demux/mpegaudio.ts"),V=N(
/*! ./exp-golomb */
"./src/demux/exp-golomb.ts"),q=N(
/*! ./sample-aes */
"./src/demux/sample-aes.ts"),u=N(
/*! ../events */
"./src/events.ts"),Y=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),B=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),F=N(
/*! ../errors */
"./src/errors.ts"),O=N(
/*! ../types/demuxer */
"./src/types/demuxer.ts");function W(){return W=Object.assign?Object.assign.bind():function(E){for(var _=1;_<arguments.length;_++){var c=arguments[_];for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(E[h]=c[h])}return E},W.apply(this,arguments)}var U=188;function M(E,_,c,h){return{key:E,frame:!1,pts:_,dts:c,units:[],debug:h,length:0}}function b(E,_){return(31&E[_+10])<<8|E[_+11]}function g(E,_,c,h){var d={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},m=_+3+((15&E[_+1])<<8|E[_+2])-4;for(_+=12+((15&E[_+10])<<8|E[_+11]);_<m;){var x=(31&E[_+1])<<8|E[_+2];switch(E[_]){case 207:if(!h){B.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===d.audio&&(d.audio=x);break;case 21:-1===d.id3&&(d.id3=x);break;case 219:if(!h){B.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===d.avc&&(d.avc=x);break;case 3:case 4:!0!==c.mpeg&&!0!==c.mp3?B.logger.log("MPEG audio found, not supported in this browser"):-1===d.audio&&(d.audio=x,d.segmentCodec="mp3");break;case 36:B.logger.warn("Unsupported HEVC stream type found")}_+=5+((15&E[_+3])<<8|E[_+4])}return d}function v(E){var c,h,d,P,m,_=0,C=E.data;if(!E||0===E.size)return null;for(;C[0].length<19&&C.length>1;){var x=new Uint8Array(C[0].length+C[1].length);x.set(C[0]),x.set(C[1],C[0].length),C[0]=x,C.splice(1,1)}if(1===((c=C[0])[0]<<16)+(c[1]<<8)+c[2]){if((h=(c[4]<<8)+c[5])&&h>E.size-6)return null;var I=c[7];192&I&&(P=536870912*(14&c[9])+4194304*(255&c[10])+16384*(254&c[11])+128*(255&c[12])+(254&c[13])/2,64&I?P-(m=536870912*(14&c[14])+4194304*(255&c[15])+16384*(254&c[16])+128*(255&c[17])+(254&c[18])/2)>54e5&&(B.logger.warn(Math.round((P-m)/9e4)+"s delta between PTS and DTS, align them"),P=m):m=P);var L=(d=c[8])+9;if(E.size<=L)return null;E.size-=L;for(var Z=new Uint8Array(E.size),re=0,ne=C.length;re<ne;re++){var oe=(c=C[re]).byteLength;if(L){if(L>oe){L-=oe;continue}c=c.subarray(L),oe-=L,L=0}Z.set(c,_),_+=oe}return h&&(h-=d+3),{data:Z,pts:P,dts:m,len:h}}return null}function S(E,_){if(E.units.length&&E.frame){if(void 0===E.pts){var c=_.samples,h=c.length;if(!h)return void _.dropped++;var d=c[h-1];E.pts=d.pts,E.dts=d.dts}_.samples.push(E)}E.debug.length&&B.logger.log(E.pts+"/"+E.dts+":"+E.debug)}const w=function(){function E(c,h,d){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=c,this.config=h,this.typeSupported=d}E.probe=function(h){var d=E.syncOffset(h);return d>0&&B.logger.warn("MPEG2-TS detected but first sync word found @ offset "+d),-1!==d},E.syncOffset=function(h){for(var d=Math.min(940,h.length-376)+1,P=0;P<d;){if(71===h[P]&&71===h[P+U])return P;P++}return-1},E.createTrack=function(h,d){return{container:"video"===h||"audio"===h?"video/mp2t":void 0,type:h,id:Y.RemuxerTrackIdConfig[h],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===h?d:void 0}};var _=E.prototype;return _.resetInitSegment=function(h,d,P,m){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=E.createTrack("video"),this._audioTrack=E.createTrack("audio",m),this._id3Track=E.createTrack("id3"),this._txtTrack=E.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=d,this.videoCodec=P,this._duration=m},_.resetTimeStamp=function(){},_.resetContiguity=function(){var h=this._audioTrack,d=this._avcTrack,P=this._id3Track;h&&(h.pesData=null),d&&(d.pesData=null),P&&(P.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},_.demux=function(h,d,P,m){void 0===P&&(P=!1),void 0===m&&(m=!1),P||(this.sampleAes=null);var C,x=this._avcTrack,T=this._audioTrack,I=this._id3Track,L=this._txtTrack,Z=x.pid,re=x.pesData,ne=T.pid,oe=I.pid,Te=T.pesData,ye=I.pesData,Ce=null,we=this.pmtParsed,Be=this._pmtId,Ze=h.length;if(this.remainderData&&(Ze=(h=(0,Y.appendUint8Array)(this.remainderData,h)).length,this.remainderData=null),Ze<U&&!m)return this.remainderData=h,{audioTrack:T,videoTrack:x,id3Track:I,textTrack:L};var st=Math.max(0,E.syncOffset(h));(Ze-=(Ze-st)%U)<h.byteLength&&!m&&(this.remainderData=new Uint8Array(h.buffer,Ze,h.buffer.byteLength-Ze));for(var ct=0,yt=st;yt<Ze;yt+=U)if(71===h[yt]){var _t=!!(64&h[yt+1]),ot=((31&h[yt+1])<<8)+h[yt+2],Ct=void 0;if((48&h[yt+3])>>4>1){if((Ct=yt+5+h[yt+4])===yt+U)continue}else Ct=yt+4;switch(ot){case Z:_t&&(re&&(C=v(re))&&this.parseAVCPES(x,L,C,!1),re={data:[],size:0}),re&&(re.data.push(h.subarray(Ct,yt+U)),re.size+=yt+U-Ct);break;case ne:if(_t){if(Te&&(C=v(Te)))switch(T.segmentCodec){case"aac":this.parseAACPES(T,C);break;case"mp3":this.parseMPEGPES(T,C)}Te={data:[],size:0}}Te&&(Te.data.push(h.subarray(Ct,yt+U)),Te.size+=yt+U-Ct);break;case oe:_t&&(ye&&(C=v(ye))&&this.parseID3PES(I,C),ye={data:[],size:0}),ye&&(ye.data.push(h.subarray(Ct,yt+U)),ye.size+=yt+U-Ct);break;case 0:_t&&(Ct+=h[Ct]+1),Be=this._pmtId=b(h,Ct);break;case Be:_t&&(Ct+=h[Ct]+1);var nt=g(h,Ct,this.typeSupported,P);(Z=nt.avc)>0&&(x.pid=Z),(ne=nt.audio)>0&&(T.pid=ne,T.segmentCodec=nt.segmentCodec),(oe=nt.id3)>0&&(I.pid=oe),null!==Ce&&!we&&(B.logger.log("unknown PID '"+Ce+"' in TS found"),Ce=null,yt=st-188),we=this.pmtParsed=!0;break;case 17:case 8191:break;default:Ce=ot}}else ct++;ct>0&&this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:F.ErrorTypes.MEDIA_ERROR,details:F.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ct+" TS packet/s that do not start with 0x47"}),x.pesData=re,T.pesData=Te,I.pesData=ye;var Ht={audioTrack:T,videoTrack:x,id3Track:I,textTrack:L};return m&&this.extractRemainingSamples(Ht),Ht},_.flush=function(){var d,h=this.remainderData;return this.remainderData=null,d=h?this.demux(h,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(d),this.sampleAes?this.decrypt(d,this.sampleAes):d},_.extractRemainingSamples=function(h){var L,d=h.audioTrack,P=h.videoTrack,m=h.id3Track,C=h.textTrack,x=P.pesData,T=d.pesData,I=m.pesData;if(x&&(L=v(x))?(this.parseAVCPES(P,C,L,!0),P.pesData=null):P.pesData=x,T&&(L=v(T))){switch(d.segmentCodec){case"aac":this.parseAACPES(d,L);break;case"mp3":this.parseMPEGPES(d,L)}d.pesData=null}else null!=T&&T.size&&B.logger.log("last AAC PES packet truncated,might overlap between fragments"),d.pesData=T;I&&(L=v(I))?(this.parseID3PES(m,L),m.pesData=null):m.pesData=I},_.demuxSampleAes=function(h,d,P){var m=this.demux(h,P,!0,!this.config.progressive),C=this.sampleAes=new q.default(this.observer,this.config,d);return this.decrypt(m,C)},_.decrypt=function(h,d){return new Promise(function(P){var m=h.audioTrack,C=h.videoTrack;m.samples&&"aac"===m.segmentCodec?d.decryptAacSamples(m.samples,0,function(){C.samples?d.decryptAvcSamples(C.samples,0,0,function(){P(h)}):P(h)}):C.samples&&d.decryptAvcSamples(C.samples,0,0,function(){P(h)})})},_.destroy=function(){this._duration=0},_.parseAVCPES=function(h,d,P,m){var L,C=this,x=this.parseAVCNALu(h,P.data),I=this.avcSample,Z=!1;P.data=null,I&&x.length&&!h.audFound&&(S(I,h),I=this.avcSample=M(!1,P.pts,P.dts,"")),x.forEach(function(re){switch(re.type){case 1:L=!0,I||(I=C.avcSample=M(!0,P.pts,P.dts,"")),I.frame=!0;var ne=re.data;if(Z&&ne.length>4){var oe=new V.default(ne).readSliceType();(2===oe||4===oe||7===oe||9===oe)&&(I.key=!0)}break;case 5:L=!0,I||(I=C.avcSample=M(!0,P.pts,P.dts,"")),I.key=!0,I.frame=!0;break;case 6:L=!0,(0,Y.parseSEIMessageFromNALu)(re.data,1,P.pts,d.samples);break;case 7:if(L=!0,Z=!0,!h.sps){var ye=new V.default(re.data).readSPS();h.width=ye.width,h.height=ye.height,h.pixelRatio=ye.pixelRatio,h.sps=[re.data],h.duration=C._duration;for(var Ce=re.data.subarray(1,4),we="avc1.",Be=0;Be<3;Be++){var Ze=Ce[Be].toString(16);Ze.length<2&&(Ze="0"+Ze),we+=Ze}h.codec=we}break;case 8:L=!0,h.pps||(h.pps=[re.data]);break;case 9:L=!1,h.audFound=!0,I&&S(I,h),I=C.avcSample=M(!1,P.pts,P.dts,"");break;case 12:L=!0;break;default:L=!1,I&&(I.debug+="unknown NAL "+re.type+" ")}I&&L&&I.units.push(re)}),m&&I&&(S(I,h),this.avcSample=null)},_.getLastNalUnit=function(h){var d,m,P=this.avcSample;if((!P||0===P.units.length)&&(P=h[h.length-1]),null!==(d=P)&&void 0!==d&&d.units){var C=P.units;m=C[C.length-1]}return m},_.parseAVCNALu=function(h,d){var I,L,P=d.byteLength,m=h.naluState||0,C=m,x=[],T=0,re=-1,ne=0;for(-1===m&&(re=0,ne=31&d[0],m=0,T=1);T<P;)if(I=d[T++],m)if(1!==m)if(I)if(1===I){if(re>=0){var oe={data:d.subarray(re,T-m-1),type:ne};x.push(oe)}else{var Te=this.getLastNalUnit(h.samples);if(Te&&(C&&T<=4-C&&Te.state&&(Te.data=Te.data.subarray(0,Te.data.byteLength-C)),(L=T-m-1)>0)){var ye=new Uint8Array(Te.data.byteLength+L);ye.set(Te.data,0),ye.set(d.subarray(0,L),Te.data.byteLength),Te.data=ye,Te.state=0}}T<P?(re=T,ne=31&d[T],m=0):m=-1}else m=0;else m=3;else m=I?0:2;else m=I?0:1;if(re>=0&&m>=0){var Ce={data:d.subarray(re,P),type:ne,state:m};x.push(Ce)}if(0===x.length){var we=this.getLastNalUnit(h.samples);if(we){var Be=new Uint8Array(we.data.byteLength+d.byteLength);Be.set(we.data,0),Be.set(d,we.data.byteLength),we.data=Be}}return h.naluState=m,x},_.parseAACPES=function(h,d){var Z,re,ne,oe,Te,P=0,m=this.aacOverFlow,C=d.data;if(m){this.aacOverFlow=null;var x=m.missing,T=m.sample.unit.byteLength;if(-1===x){var I=new Uint8Array(T+C.byteLength);I.set(m.sample.unit,0),I.set(C,T),C=I}else{var L=T-x;m.sample.unit.set(C.subarray(0,x),L),h.samples.push(m.sample),P=m.missing}}for(Z=P,re=C.length;Z<re-1&&!ee.isHeader(C,Z);Z++);if(Z===P||(Z<re-1?(ne="AAC PES did not start with ADTS header,offset:"+Z,oe=!1):(ne="no ADTS header found in AAC PES",oe=!0),B.logger.warn("parsing error:"+ne),this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:F.ErrorTypes.MEDIA_ERROR,details:F.ErrorDetails.FRAG_PARSING_ERROR,fatal:oe,reason:ne}),!oe)){if(ee.initTrackConfig(h,this.observer,C,Z,this.audioCodec),void 0!==d.pts)Te=d.pts;else{if(!m)return void B.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var ye=ee.getFrameDuration(h.samplerate);Te=m.sample.pts+ye}for(var we,Ce=0;Z<re;){if(Z+=(we=ee.appendFrame(h,C,Z,Te,Ce)).length,we.missing){this.aacOverFlow=we;break}for(Ce++;Z<re-1&&!ee.isHeader(C,Z);Z++);}}},_.parseMPEGPES=function(h,d){var P=d.data,m=P.length,C=0,x=0,T=d.pts;if(void 0!==T)for(;x<m;)if(G.isHeader(P,x)){var I=G.appendFrame(h,P,x,T,C);if(!I)break;x+=I.length,C++}else x++;else B.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},_.parseID3PES=function(h,d){if(void 0!==d.pts){var P=W({},d,{type:this._avcTrack?O.MetadataSchema.emsg:O.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});h.samples.push(P)}else B.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},E}()},"./src/demux/webworkify-webpack.js":
/*!*****************************************!*\
                !*** ./src/demux/webworkify-webpack.js ***!
                \*****************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>W});var ee=function(){var R=ENTRY_MODULE,M={};function b(v){var S=M[v];if(void 0!==S)return S.exports;var w=M[v]={exports:{}};return R[v].call(w.exports,w,w.exports,b),w.exports}b.m=R,b.n=function(v){var S=v&&v.__esModule?function(){return v.default}:function(){return v};return b.d(S,{a:S}),S},b.d=function(v,S){for(var w in S)b.o(S,w)&&!b.o(v,w)&&Object.defineProperty(v,w,{enumerable:!0,get:S[w]})},b.o=function(v,S){return Object.prototype.hasOwnProperty.call(v,S)},b.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})};var g=b(ENTRY_MODULE);return g.default||g};ee.toString();var G="[\\.|\\-|\\+|\\w|/|@]+",V="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+G+").*?\\)";function q(U){return(U+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(U){return!isNaN(1*U)}function Y(U,R,M){var b={};b[M]=[];var g=R.toString(),v=g.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||g.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!v)return b;for(var E,S=v[1],w=new RegExp("(\\\\n|\\W)"+q(S)+V,"g");E=w.exec(g);)"dll-reference"!==E[3]&&b[M].push(E[3]);for(w=new RegExp("\\("+q(S)+'\\("(dll-reference\\s('+G+'))"\\)\\)'+V,"g");E=w.exec(g);)U[E[2]]||(b[M].push(E[1]),U[E[2]]=N(E[1]).m),b[E[2]]=b[E[2]]||[],b[E[2]].push(E[4]);for(var _=Object.keys(b),c=0;c<_.length;c++)for(var h=0;h<b[_[c]].length;h++)u(b[_[c]][h])&&(b[_[c]][h]=1*b[_[c]][h]);return b}function B(U){return Object.keys(U).reduce(function(M,b){return M||U[b].length>0},!1)}function O(U,R,M,b){var g=U[b].map(function(S){return'"'+S+'": '+R[b][S].toString()}).join(","),v=ee.toString().split("ENTRY_MODULE");return v[0]+"{"+g+"}"+v[1]+'"'+M+'"'+v[2]}function W(U,R){var M={main:N.m},b=(R=R||{}).all?{main:Object.keys(M.main)}:function F(U,R){for(var M={main:[R]},b={main:[]},g={main:{}};B(M);)for(var v=Object.keys(M),S=0;S<v.length;S++){var w=v[S],_=M[w].pop();if(g[w]=g[w]||{},!g[w][_]&&U[w][_]){g[w][_]=!0,b[w]=b[w]||[],b[w].push(_);for(var c=Y(U,U[w][_],w),h=Object.keys(c),d=0;d<h.length;d++)M[h[d]]=M[h[d]]||[],M[h[d]]=M[h[d]].concat(c[h[d]])}}return b}(M,U),g="";Object.keys(b).filter(function(_){return"main"!==_}).forEach(function(_){for(var c=0;b[_][c];)c++;b[_].push(c),M[_][c]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",g=g+"var "+_+" = ("+O(b,M,c,modules)+")();\n"}),g=g+"(("+O(b,M,U,"main")+")())(self);";var v=new window.Blob([g],{type:"text/javascript"}),w=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(v),E=new window.Worker(w);return E.objectURL=w,E}},"./src/errors.ts":
/*!***********************!*\
                !*** ./src/errors.ts ***!
                \***********************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{ErrorDetails:()=>G,ErrorTypes:()=>ee});var ee=(()=>{return(V=ee||(ee={})).NETWORK_ERROR="networkError",V.MEDIA_ERROR="mediaError",V.KEY_SYSTEM_ERROR="keySystemError",V.MUX_ERROR="muxError",V.OTHER_ERROR="otherError",ee;var V})(),G=(()=>{return(V=G||(G={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",V.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",V.KEY_SYSTEM_NO_SESSION="keySystemNoSession",V.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",V.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",V.MANIFEST_LOAD_ERROR="manifestLoadError",V.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",V.MANIFEST_PARSING_ERROR="manifestParsingError",V.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",V.LEVEL_EMPTY_ERROR="levelEmptyError",V.LEVEL_LOAD_ERROR="levelLoadError",V.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",V.LEVEL_SWITCH_ERROR="levelSwitchError",V.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",V.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",V.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",V.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",V.FRAG_LOAD_ERROR="fragLoadError",V.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",V.FRAG_DECRYPT_ERROR="fragDecryptError",V.FRAG_PARSING_ERROR="fragParsingError",V.REMUX_ALLOC_ERROR="remuxAllocError",V.KEY_LOAD_ERROR="keyLoadError",V.KEY_LOAD_TIMEOUT="keyLoadTimeOut",V.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",V.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",V.BUFFER_APPEND_ERROR="bufferAppendError",V.BUFFER_APPENDING_ERROR="bufferAppendingError",V.BUFFER_STALLED_ERROR="bufferStalledError",V.BUFFER_FULL_ERROR="bufferFullError",V.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",V.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",V.INTERNAL_EXCEPTION="internalException",V.INTERNAL_ABORTED="aborted",V.UNKNOWN="unknown",G;var V})()},"./src/events.ts":
/*!***********************!*\
                !*** ./src/events.ts ***!
                \***********************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{Events:()=>ee});var ee=(()=>{return(G=ee||(ee={})).MEDIA_ATTACHING="hlsMediaAttaching",G.MEDIA_ATTACHED="hlsMediaAttached",G.MEDIA_DETACHING="hlsMediaDetaching",G.MEDIA_DETACHED="hlsMediaDetached",G.BUFFER_RESET="hlsBufferReset",G.BUFFER_CODECS="hlsBufferCodecs",G.BUFFER_CREATED="hlsBufferCreated",G.BUFFER_APPENDING="hlsBufferAppending",G.BUFFER_APPENDED="hlsBufferAppended",G.BUFFER_EOS="hlsBufferEos",G.BUFFER_FLUSHING="hlsBufferFlushing",G.BUFFER_FLUSHED="hlsBufferFlushed",G.MANIFEST_LOADING="hlsManifestLoading",G.MANIFEST_LOADED="hlsManifestLoaded",G.MANIFEST_PARSED="hlsManifestParsed",G.LEVEL_SWITCHING="hlsLevelSwitching",G.LEVEL_SWITCHED="hlsLevelSwitched",G.LEVEL_LOADING="hlsLevelLoading",G.LEVEL_LOADED="hlsLevelLoaded",G.LEVEL_UPDATED="hlsLevelUpdated",G.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",G.LEVELS_UPDATED="hlsLevelsUpdated",G.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",G.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",G.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",G.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",G.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",G.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",G.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",G.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",G.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",G.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",G.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",G.CUES_PARSED="hlsCuesParsed",G.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",G.INIT_PTS_FOUND="hlsInitPtsFound",G.FRAG_LOADING="hlsFragLoading",G.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",G.FRAG_LOADED="hlsFragLoaded",G.FRAG_DECRYPTED="hlsFragDecrypted",G.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",G.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",G.FRAG_PARSING_METADATA="hlsFragParsingMetadata",G.FRAG_PARSED="hlsFragParsed",G.FRAG_BUFFERED="hlsFragBuffered",G.FRAG_CHANGED="hlsFragChanged",G.FPS_DROP="hlsFpsDrop",G.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",G.ERROR="hlsError",G.DESTROYING="hlsDestroying",G.KEY_LOADING="hlsKeyLoading",G.KEY_LOADED="hlsKeyLoaded",G.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",G.BACK_BUFFER_REACHED="hlsBackBufferReached",ee;var G})()},"./src/hls.ts":
/*!********************!*\
                !*** ./src/hls.ts ***!
                \********************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>E});var ee=N(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),V=N(
/*! ./loader/playlist-loader */
"./src/loader/playlist-loader.ts"),q=N(
/*! ./loader/key-loader */
"./src/loader/key-loader.ts"),u=N(
/*! ./controller/id3-track-controller */
"./src/controller/id3-track-controller.ts"),Y=N(
/*! ./controller/latency-controller */
"./src/controller/latency-controller.ts"),B=N(
/*! ./controller/level-controller */
"./src/controller/level-controller.ts"),F=N(
/*! ./controller/fragment-tracker */
"./src/controller/fragment-tracker.ts"),O=N(
/*! ./controller/stream-controller */
"./src/controller/stream-controller.ts"),W=N(
/*! ./is-supported */
"./src/is-supported.ts"),U=N(
/*! ./utils/logger */
"./src/utils/logger.ts"),R=N(
/*! ./config */
"./src/config.ts"),M=N(
/*! eventemitter3 */
"./node_modules/eventemitter3/index.js"),g=N(
/*! ./events */
"./src/events.ts"),v=N(
/*! ./errors */
"./src/errors.ts");function S(_,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(_,d.key,d)}}var E=function(){function _(h){void 0===h&&(h={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new M.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var d=this.config=(0,R.mergeConfig)(_.DefaultConfig,h);this.userConfig=h,(0,U.enableLogs)(d.debug,"Hls instance"),this._autoLevelCapping=-1,d.progressive&&(0,R.enableStreamingMode)(d);var m=d.bufferController,C=d.capLevelController,x=d.fpsController,T=this.abrController=new(0,d.abrController)(this),I=this.bufferController=new m(this),L=this.capLevelController=new C(this),Z=new x(this),re=new V.default(this),ne=new q.default(this),oe=new u.default(this),Te=this.levelController=new B.default(this),ye=new F.FragmentTracker(this),Ce=this.streamController=new O.default(this,ye);L.setStreamController(Ce),Z.setStreamController(Ce);var we=[re,ne,Te,Ce];this.networkControllers=we;var Be=[T,I,L,Z,oe,ye];this.audioTrackController=this.createController(d.audioTrackController,null,we),this.createController(d.audioStreamController,ye,we),this.subtitleTrackController=this.createController(d.subtitleTrackController,null,we),this.createController(d.subtitleStreamController,ye,we),this.createController(d.timelineController,null,Be),this.emeController=this.createController(d.emeController,null,Be),this.cmcdController=this.createController(d.cmcdController,null,Be),this.latencyController=this.createController(Y.default,null,Be),this.coreComponents=Be}_.isSupported=function(){return(0,W.isSupported)()};var c=_.prototype;return c.createController=function(d,P,m){if(d){var C=P?new d(this,P):new d(this);return m&&m.push(C),C}return null},c.on=function(d,P,m){void 0===m&&(m=this),this._emitter.on(d,P,m)},c.once=function(d,P,m){void 0===m&&(m=this),this._emitter.once(d,P,m)},c.removeAllListeners=function(d){this._emitter.removeAllListeners(d)},c.off=function(d,P,m,C){void 0===m&&(m=this),this._emitter.off(d,P,m,C)},c.listeners=function(d){return this._emitter.listeners(d)},c.emit=function(d,P,m){return this._emitter.emit(d,P,m)},c.trigger=function(d,P){if(this.config.debug)return this.emit(d,d,P);try{return this.emit(d,d,P)}catch(m){U.logger.error("An internal error happened while handling event "+d+'. Error message: "'+m.message+'". Here is a stacktrace:',m),this.trigger(g.Events.ERROR,{type:v.ErrorTypes.OTHER_ERROR,details:v.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:d,error:m})}return!1},c.listenerCount=function(d){return this._emitter.listenerCount(d)},c.destroy=function(){U.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(d){return d.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(d){return d.destroy()}),this.coreComponents.length=0},c.attachMedia=function(d){U.logger.log("attachMedia"),this._media=d,this.trigger(g.Events.MEDIA_ATTACHING,{media:d})},c.detachMedia=function(){U.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},c.loadSource=function(d){this.stopLoad();var P=this.media,m=this.url,C=this.url=ee.buildAbsoluteURL(self.location.href,d,{alwaysNormalize:!0});U.logger.log("loadSource:"+C),P&&m&&m!==C&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(P)),this.trigger(g.Events.MANIFEST_LOADING,{url:d})},c.startLoad=function(d){void 0===d&&(d=-1),U.logger.log("startLoad("+d+")"),this.networkControllers.forEach(function(P){P.startLoad(d)})},c.stopLoad=function(){U.logger.log("stopLoad"),this.networkControllers.forEach(function(d){d.stopLoad()})},c.swapAudioCodec=function(){U.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},c.recoverMediaError=function(){U.logger.log("recoverMediaError");var d=this._media;this.detachMedia(),d&&this.attachMedia(d)},c.removeLevel=function(d,P){void 0===P&&(P=0),this.levelController.removeLevel(d,P)},function w(_,c,h){c&&S(_.prototype,c),h&&S(_,h),Object.defineProperty(_,"prototype",{writable:!1})}(_,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(d){U.logger.log("set currentLevel:"+d),this.loadLevel=d,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(d){U.logger.log("set nextLevel:"+d),this.levelController.manualLevel=d,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(d){U.logger.log("set loadLevel:"+d),this.levelController.manualLevel=d}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(d){this.levelController.nextLoadLevel=d}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(d){U.logger.log("set firstLevel:"+d),this.levelController.firstLevel=d}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(d){U.logger.log("set startLevel:"+d),-1!==d&&(d=Math.max(d,this.minAutoLevel)),this.levelController.startLevel=d}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(d){var P=!!d;P!==this.config.capLevelToPlayerSize&&(P?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=P)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(d){this._autoLevelCapping!==d&&(U.logger.log("set autoLevelCapping:"+d),this._autoLevelCapping=d)}},{key:"bandwidthEstimate",get:function(){var d=this.abrController.bwEstimator;return d?d.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var d=this.levels,P=this.config.minAutoBitrate;if(!d)return 0;for(var m=d.length,C=0;C<m;C++)if(d[C].maxBitrate>=P)return C;return 0}},{key:"maxAutoLevel",get:function(){var d=this.levels,P=this.autoLevelCapping;return-1===P&&d&&d.length?d.length-1:P}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(d){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,d)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var d=this.audioTrackController;return d?d.audioTracks:[]}},{key:"audioTrack",get:function(){var d=this.audioTrackController;return d?d.audioTrack:-1},set:function(d){var P=this.audioTrackController;P&&(P.audioTrack=d)}},{key:"subtitleTracks",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var d=this.subtitleTrackController;return d?d.subtitleTrack:-1},set:function(d){var P=this.subtitleTrackController;P&&(P.subtitleTrack=d)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var d=this.subtitleTrackController;return!!d&&d.subtitleDisplay},set:function(d){var P=this.subtitleTrackController;P&&(P.subtitleDisplay=d)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(d){this.config.lowLatencyMode=d}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.2.7"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return v.ErrorTypes}},{key:"ErrorDetails",get:function(){return v.ErrorDetails}},{key:"DefaultConfig",get:function(){return _.defaultConfig?_.defaultConfig:R.hlsDefaultConfig},set:function(d){_.defaultConfig=d}}]),_}();E.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
                !*** ./src/is-supported.ts ***!
                \*****************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{changeTypeSupported:()=>q,isSupported:()=>V});var ee=N(
/*! ./utils/mediasource-helper */
"./src/utils/mediasource-helper.ts");function G(){return self.SourceBuffer||self.WebKitSourceBuffer}function V(){var u=(0,ee.getMediaSource)();if(!u)return!1;var Y=G();return!(!u||"function"!=typeof u.isTypeSupported||!u.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||Y&&(!Y.prototype||"function"!=typeof Y.prototype.appendBuffer||"function"!=typeof Y.prototype.remove))}function q(){var u,Y=G();return"function"==typeof(null==Y||null===(u=Y.prototype)||void 0===u?void 0:u.changeType)}},"./src/loader/date-range.ts":
/*!**********************************!*\
                !*** ./src/loader/date-range.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{DateRange:()=>F,DateRangeAttribute:()=>B});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts");function q(){return q=Object.assign?Object.assign.bind():function(O){for(var W=1;W<arguments.length;W++){var U=arguments[W];for(var R in U)Object.prototype.hasOwnProperty.call(U,R)&&(O[R]=U[R])}return O},q.apply(this,arguments)}function u(O,W){for(var U=0;U<W.length;U++){var R=W[U];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}var B=(()=>{return(O=B||(B={})).ID="ID",O.CLASS="CLASS",O.START_DATE="START-DATE",O.DURATION="DURATION",O.END_DATE="END-DATE",O.END_ON_NEXT="END-ON-NEXT",O.PLANNED_DURATION="PLANNED-DURATION",O.SCTE35_OUT="SCTE35-OUT",O.SCTE35_IN="SCTE35-IN",B;var O})(),F=function(){function O(W,U){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,U){var R=U.attr;for(var M in R)if(Object.prototype.hasOwnProperty.call(W,M)&&W[M]!==R[M]){V.logger.warn('DATERANGE tag attribute: "'+M+'" does not match for tags with ID: "'+W.ID+'"'),this._badValueForSameId=M;break}W=q(new G.AttrList({}),R,W)}if(this.attr=W,this._startDate=new Date(W[B.START_DATE]),B.END_DATE in this.attr){var b=new Date(this.attr[B.END_DATE]);(0,ee.isFiniteNumber)(b.getTime())&&(this._endDate=b)}}return function Y(O,W,U){W&&u(O.prototype,W),U&&u(O,U),Object.defineProperty(O,"prototype",{writable:!1})}(O,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var U=this.duration;return null!==U?new Date(this._startDate.getTime()+1e3*U):null}},{key:"duration",get:function(){if(B.DURATION in this.attr){var U=this.attr.decimalFloatingPoint(B.DURATION);if((0,ee.isFiniteNumber)(U))return U}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return B.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(B.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(B.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,ee.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),O}()},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
                !*** ./src/loader/fragment-loader.ts ***!
                \***************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{LoadError:()=>M,default:()=>U});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../errors */
"./src/errors.ts");function q(b){var g="function"==typeof Map?new Map:void 0;return q=function(S){if(null===S||!function B(b){return-1!==Function.toString.call(b).indexOf("[native code]")}(S))return S;if("function"!=typeof S)throw new TypeError("Super expression must either be null or a function");if(typeof g<"u"){if(g.has(S))return g.get(S);g.set(S,w)}function w(){return u(S,arguments,O(this).constructor)}return w.prototype=Object.create(S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),F(w,S)},q(b)}function u(b,g,v){return(u=Y()?Reflect.construct.bind():function(w,E,_){var c=[null];c.push.apply(c,E);var d=new(Function.bind.apply(w,c));return _&&F(d,_.prototype),d}).apply(null,arguments)}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F(b,g){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,w){return S.__proto__=w,S})(b,g)}function O(b){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)})(b)}var W=Math.pow(2,17),U=function(){function b(v){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=v}var g=b.prototype;return g.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},g.abort=function(){this.loader&&this.loader.abort()},g.load=function(S,w){var E=this,_=S.url;if(!_)return Promise.reject(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:S,networkDetails:null},"Fragment does not have a "+(_?"part list":"url")));this.abort();var c=this.config,h=c.fLoader,d=c.loader;return new Promise(function(P,m){E.loader&&E.loader.destroy();var C=E.loader=S.loader=h?new h(c):new d(c),x=R(S),T={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===S.sn?1/0:W};S.stats=C.stats,C.load(x,T,{onSuccess:function(L,Z,re,ne){E.resetLoader(S,C),P({frag:S,part:null,payload:L.data,networkDetails:ne})},onError:function(L,Z,re){E.resetLoader(S,C),m(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:S,response:L,networkDetails:re}))},onAbort:function(L,Z,re){E.resetLoader(S,C),m(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:S,networkDetails:re}))},onTimeout:function(L,Z,re){E.resetLoader(S,C),m(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:S,networkDetails:re}))},onProgress:function(L,Z,re,ne){w&&w({frag:S,part:null,payload:re,networkDetails:ne})}})})},g.loadPart=function(S,w,E){var _=this;this.abort();var c=this.config,h=c.fLoader,d=c.loader;return new Promise(function(P,m){_.loader&&_.loader.destroy();var C=_.loader=S.loader=h?new h(c):new d(c),x=R(S,w),T={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:W};w.stats=C.stats,C.load(x,T,{onSuccess:function(L,Z,re,ne){_.resetLoader(S,C),_.updateStatsFromPart(S,w);var oe={frag:S,part:w,payload:L.data,networkDetails:ne};E(oe),P(oe)},onError:function(L,Z,re){_.resetLoader(S,C),m(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:S,part:w,response:L,networkDetails:re}))},onAbort:function(L,Z,re){S.stats.aborted=w.stats.aborted,_.resetLoader(S,C),m(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:S,part:w,networkDetails:re}))},onTimeout:function(L,Z,re){_.resetLoader(S,C),m(new M({type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:S,part:w,networkDetails:re}))}})})},g.updateStatsFromPart=function(S,w){var E=S.stats,_=w.stats,c=_.total;if(E.loaded+=_.loaded,c){var h=Math.round(S.duration/w.duration),d=Math.min(Math.round(E.loaded/c),h),m=(h-d)*Math.round(E.loaded/d);E.total=E.loaded+m}else E.total=Math.max(E.loaded,E.total);var C=E.loading,x=_.loading;C.start?C.first+=x.first-x.start:(C.start=x.start,C.first=x.first),C.end=x.end},g.resetLoader=function(S,w){S.loader=null,this.loader===w&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),w.destroy()},b}();function R(b,g){void 0===g&&(g=null);var v=g||b,S={frag:b,part:g,responseType:"arraybuffer",url:v.url,headers:{},rangeStart:0,rangeEnd:0},w=v.byteRangeStartOffset,E=v.byteRangeEndOffset;return(0,ee.isFiniteNumber)(w)&&(0,ee.isFiniteNumber)(E)&&(S.rangeStart=w,S.rangeEnd=E),S}var M=function(b){function g(v){for(var S,w=arguments.length,E=new Array(w>1?w-1:0),_=1;_<w;_++)E[_-1]=arguments[_];return(S=b.call.apply(b,[this].concat(E))||this).data=void 0,S.data=v,S}return function V(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,F(b,g)}(g,b),g}(q(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
                !*** ./src/loader/fragment.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{BaseSegment:()=>R,ElementaryStreamTypes:()=>U,Fragment:()=>M,Part:()=>b});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),u=N(
/*! ./level-key */
"./src/loader/level-key.ts"),Y=N(
/*! ./load-stats */
"./src/loader/load-stats.ts");function B(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,F(g,v)}function F(g,v){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,E){return w.__proto__=E,w})(g,v)}function O(g,v){for(var S=0;S<v.length;S++){var w=v[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}function W(g,v,S){return v&&O(g.prototype,v),S&&O(g,S),Object.defineProperty(g,"prototype",{writable:!1}),g}var U=(()=>{return(g=U||(U={})).AUDIO="audio",g.VIDEO="video",g.AUDIOVIDEO="audiovideo",U;var g})(),R=function(){function g(S){var w;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((w={})[U.AUDIO]=null,w[U.VIDEO]=null,w[U.AUDIOVIDEO]=null,w),this.baseurl=S}return g.prototype.setByteRange=function(w,E){var _=w.split("@",2),c=[];c[0]=1===_.length?E?E.byteRangeEndOffset:0:parseInt(_[1]),c[1]=parseInt(_[0])+c[0],this._byteRange=c},W(g,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,G.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(w){this._url=w}}]),g}(),M=function(g){function v(w,E){var _;return(_=g.call(this,E)||this)._decryptdata=null,_.rawProgramDateTime=null,_.programDateTime=null,_.tagList=[],_.duration=0,_.sn=0,_.levelkey=void 0,_.type=void 0,_.loader=null,_.level=-1,_.cc=0,_.startPTS=void 0,_.endPTS=void 0,_.appendedPTS=void 0,_.startDTS=void 0,_.endDTS=void 0,_.start=0,_.deltaPTS=void 0,_.maxStartPTS=void 0,_.minEndPTS=void 0,_.stats=new Y.LoadStats,_.urlId=0,_.data=void 0,_.bitrateTest=!1,_.title=null,_.initSegment=null,_.type=w,_}B(v,g);var S=v.prototype;return S.createInitializationVector=function(E){for(var _=new Uint8Array(16),c=12;c<16;c++)_[c]=E>>8*(15-c)&255;return _},S.setDecryptDataFromLevelKey=function(E,_){var c=E;return"AES-128"===E?.method&&E.uri&&!E.iv&&((c=u.LevelKey.fromURI(E.uri)).method=E.method,c.iv=this.createInitializationVector(_),c.keyFormat="identity"),c},S.setElementaryStreamInfo=function(E,_,c,h,d,P){void 0===P&&(P=!1);var m=this.elementaryStreams,C=m[E];C?(C.startPTS=Math.min(C.startPTS,_),C.endPTS=Math.max(C.endPTS,c),C.startDTS=Math.min(C.startDTS,h),C.endDTS=Math.max(C.endDTS,d)):m[E]={startPTS:_,endPTS:c,startDTS:h,endDTS:d,partial:P}},S.clearElementaryStreamInfo=function(){var E=this.elementaryStreams;E[U.AUDIO]=null,E[U.VIDEO]=null,E[U.AUDIOVIDEO]=null},W(v,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var E=this.sn;"number"!=typeof E&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&q.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),E=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,E)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime||!(0,ee.isFiniteNumber)(this.programDateTime))return null;var E=(0,ee.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*E}},{key:"encrypted",get:function(){var E;return!(null===(E=this.decryptdata)||void 0===E||!E.keyFormat||!this.decryptdata.uri)}}]),v}(R),b=function(g){function v(S,w,E,_,c){var h;(h=g.call(this,E)||this).fragOffset=0,h.duration=0,h.gap=!1,h.independent=!1,h.relurl=void 0,h.fragment=void 0,h.index=void 0,h.stats=new Y.LoadStats,h.duration=S.decimalFloatingPoint("DURATION"),h.gap=S.bool("GAP"),h.independent=S.bool("INDEPENDENT"),h.relurl=S.enumeratedString("URI"),h.fragment=w,h.index=_;var d=S.enumeratedString("BYTERANGE");return d&&h.setByteRange(d,c),c&&(h.fragOffset=c.fragOffset+c.duration),h}return B(v,g),W(v,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var w=this.elementaryStreams;return!!(w.audio||w.video||w.audiovideo)}}]),v}(R)},"./src/loader/key-loader.ts":
/*!**********************************!*\
                !*** ./src/loader/key-loader.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>q});var ee=N(
/*! ../events */
"./src/events.ts"),G=N(
/*! ../errors */
"./src/errors.ts"),V=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),q=function(){function u(B){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=B,this.registerListeners()}var Y=u.prototype;return Y.startLoad=function(F){},Y.stopLoad=function(){this.destroyInternalLoaders()},Y.registerListeners=function(){this.hls.on(ee.Events.KEY_LOADING,this.onKeyLoading,this)},Y.unregisterListeners=function(){this.hls.off(ee.Events.KEY_LOADING,this.onKeyLoading)},Y.destroyInternalLoaders=function(){for(var F in this.loaders){var O=this.loaders[F];O&&O.destroy()}this.loaders={}},Y.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},Y.onKeyLoading=function(F,O){var W=O.frag,U=W.type,R=this.loaders[U];if(W.decryptdata){var M=W.decryptdata.uri;if(M!==this.decrypturl||null===this.decryptkey){var b=this.hls.config;if(R&&(V.logger.warn("abort previous key loader for type:"+U),R.abort()),!M)return void V.logger.warn("key uri is falsy");var v=W.loader=this.loaders[U]=new(0,b.loader)(b);this.decrypturl=M,this.decryptkey=null;var S={url:M,frag:W,responseType:"arraybuffer"},w={timeout:b.fragLoadingTimeOut,maxRetry:0,retryDelay:b.fragLoadingRetryDelay,maxRetryDelay:b.fragLoadingMaxRetryTimeout,highWaterMark:0},E={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};v.load(S,w,E)}else this.decryptkey&&(W.decryptdata.key=this.decryptkey,this.hls.trigger(ee.Events.KEY_LOADED,{frag:W}))}else V.logger.warn("Missing decryption data on fragment in onKeyLoading")},Y.loadsuccess=function(F,O,W){var U=W.frag;U.decryptdata?(this.decryptkey=U.decryptdata.key=new Uint8Array(F.data),U.loader=null,delete this.loaders[U.type],this.hls.trigger(ee.Events.KEY_LOADED,{frag:U})):V.logger.error("after key load, decryptdata unset")},Y.loaderror=function(F,O){var W=O.frag,U=W.loader;U&&U.abort(),delete this.loaders[W.type],this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:W,response:F})},Y.loadtimeout=function(F,O){var W=O.frag,U=W.loader;U&&U.abort(),delete this.loaders[W.type],this.hls.trigger(ee.Events.ERROR,{type:G.ErrorTypes.NETWORK_ERROR,details:G.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:W})},u}()},"./src/loader/level-details.ts":
/*!*************************************!*\
                !*** ./src/loader/level-details.ts ***!
                \*************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{LevelDetails:()=>u});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts");function G(Y,B){for(var F=0;F<B.length;F++){var O=B[F];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(Y,O.key,O)}}var u=function(){function Y(F){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=F}return Y.prototype.reloaded=function(O){if(!O)return this.advanced=!0,void(this.updated=!0);var W=this.lastPartSn-O.lastPartSn,U=this.lastPartIndex-O.lastPartIndex;this.updated=this.endSN!==O.endSN||!!U||!!W,this.advanced=this.endSN>O.endSN||W>0||0===W&&U>0,this.misses=this.updated||this.advanced?Math.floor(.6*O.misses):O.misses+1,this.availabilityDelay=O.availabilityDelay},function V(Y,B,F){B&&G(Y.prototype,B),F&&G(Y,F),Object.defineProperty(Y,"prototype",{writable:!1})}(Y,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,ee.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var O=this.driftEndTime-this.driftStartTime;return O>0?1e3*(this.driftEnd-this.driftStart)/O:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var O;return null!==(O=this.partList)&&void 0!==O&&O.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var O;return null!==(O=this.fragments)&&void 0!==O&&O.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var O;return null!==(O=this.partList)&&void 0!==O&&O.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var O;return null!==(O=this.partList)&&void 0!==O&&O.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),Y}()},"./src/loader/level-key.ts":
/*!*********************************!*\
                !*** ./src/loader/level-key.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{LevelKey:()=>u});var ee=N(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js");function V(Y,B){for(var F=0;F<B.length;F++){var O=B[F];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(Y,O.key,O)}}var u=function(){function Y(B,F){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=F?(0,ee.buildAbsoluteURL)(B,F,{alwaysNormalize:!0}):B}return Y.fromURL=function(F,O){return new Y(F,O)},Y.fromURI=function(F){return new Y(F)},function q(Y,B,F){B&&V(Y.prototype,B),F&&V(Y,F),Object.defineProperty(Y,"prototype",{writable:!1})}(Y,[{key:"uri",get:function(){return this._uri}}]),Y}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
                !*** ./src/loader/load-stats.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{LoadStats:()=>ee});var ee=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
                !*** ./src/loader/m3u8-parser.ts ***!
                \***********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>S});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! url-toolkit */
"./node_modules/url-toolkit/src/url-toolkit.js"),q=N(
/*! ./date-range */
"./src/loader/date-range.ts"),u=N(
/*! ./fragment */
"./src/loader/fragment.ts"),Y=N(
/*! ./level-details */
"./src/loader/level-details.ts"),B=N(
/*! ./level-key */
"./src/loader/level-key.ts"),F=N(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts"),O=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),W=N(
/*! ../utils/codecs */
"./src/utils/codecs.ts"),U=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,R=/#EXT-X-MEDIA:(.*)/g,M=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),b=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),g=/\.(mp4|m4s|m4v|m4a)$/i,S=function(){function d(){}return d.findGroup=function(m,C){for(var x=0;x<m.length;x++){var T=m[x];if(T.id===C)return T}},d.convertAVC1ToAVCOTI=function(m){var C=m.split(".");if(C.length>2){var x=C.shift()+".";return(x+=parseInt(C.shift()).toString(16))+("000"+parseInt(C.shift()).toString(16)).slice(-4)}return m},d.resolve=function(m,C){return G.buildAbsoluteURL(C,m,{alwaysNormalize:!0})},d.parseMasterPlaylist=function(m,C){var Z,x=[],T=[],I={},L=!1;for(U.lastIndex=0;null!=(Z=U.exec(m));)if(Z[1]){var re,ne=new F.AttrList(Z[1]),oe={attrs:ne,bitrate:ne.decimalInteger("AVERAGE-BANDWIDTH")||ne.decimalInteger("BANDWIDTH"),name:ne.NAME,url:d.resolve(Z[2],C)},Te=ne.decimalResolution("RESOLUTION");Te&&(oe.width=Te.width,oe.height=Te.height),w((ne.CODECS||"").split(/[ ,]+/).filter(function(we){return we}),oe),oe.videoCodec&&-1!==oe.videoCodec.indexOf("avc1")&&(oe.videoCodec=d.convertAVC1ToAVCOTI(oe.videoCodec)),null!==(re=oe.unknownCodecs)&&void 0!==re&&re.length||T.push(oe),x.push(oe)}else if(Z[3]){var ye=new F.AttrList(Z[3]);ye["DATA-ID"]&&(L=!0,I[ye["DATA-ID"]]=ye)}return{levels:T.length>0&&T.length<x.length?T:x,sessionData:L?I:null}},d.parseMasterPlaylistMedia=function(m,C,x,T){void 0===T&&(T=[]);var I,L=[],Z=0;for(R.lastIndex=0;null!==(I=R.exec(m));){var re=new F.AttrList(I[1]);if(re.TYPE===x){var ne={attrs:re,bitrate:0,id:Z++,groupId:re["GROUP-ID"],instreamId:re["INSTREAM-ID"],name:re.NAME||re.LANGUAGE||"",type:x,default:re.bool("DEFAULT"),autoselect:re.bool("AUTOSELECT"),forced:re.bool("FORCED"),lang:re.LANGUAGE,url:re.URI?d.resolve(re.URI,C):""};if(T.length){var oe=d.findGroup(T,ne.groupId)||T[0];E(ne,oe,"audioCodec"),E(ne,oe,"textCodec")}L.push(ne)}}return L},d.parseLevelPlaylist=function(m,C,x,T,I){var Be,Ze,st,L=new Y.LevelDetails(C),Z=L.fragments,re=null,ne=0,oe=0,Te=0,ye=0,Ce=null,we=new u.Fragment(T,C),ct=-1,yt=!1;for(M.lastIndex=0,L.m3u8=m;null!==(Be=M.exec(m));){yt&&(yt=!1,(we=new u.Fragment(T,C)).start=Te,we.sn=ne,we.cc=ye,we.level=x,re&&(we.initSegment=re,we.rawProgramDateTime=re.rawProgramDateTime,re.rawProgramDateTime=null));var _t=Be[1];if(_t){we.duration=parseFloat(_t);var ot=(" "+Be[2]).slice(1);we.title=ot||null,we.tagList.push(ot?["INF",_t,ot]:["INF",_t])}else if(Be[3])(0,ee.isFiniteNumber)(we.duration)&&(we.start=Te,st&&(we.levelkey=st),we.sn=ne,we.level=x,we.cc=ye,we.urlId=I,Z.push(we),we.relurl=(" "+Be[3]).slice(1),c(we,Ce),Ce=we,Te+=we.duration,ne++,oe=0,yt=!0);else if(Be[4]){var bt=(" "+Be[4]).slice(1);Ce?we.setByteRange(bt,Ce):we.setByteRange(bt)}else if(Be[5])we.rawProgramDateTime=(" "+Be[5]).slice(1),we.tagList.push(["PROGRAM-DATE-TIME",we.rawProgramDateTime]),-1===ct&&(ct=Z.length);else{if(!(Be=Be[0].match(b))){O.logger.warn("No matches on slow regex match for level playlist!");continue}for(Ze=1;Ze<Be.length&&!(typeof Be[Ze]<"u");Ze++);var Ct=(" "+Be[Ze]).slice(1),nt=(" "+Be[Ze+1]).slice(1),Ht=Be[Ze+2]?(" "+Be[Ze+2]).slice(1):"";switch(Ct){case"PLAYLIST-TYPE":L.type=nt.toUpperCase();break;case"MEDIA-SEQUENCE":ne=L.startSN=parseInt(nt);break;case"SKIP":var Kt=new F.AttrList(nt),Ut=Kt.decimalInteger("SKIPPED-SEGMENTS");if((0,ee.isFiniteNumber)(Ut)){L.skippedSegments=Ut;for(var tr=Ut;tr--;)Z.unshift(null);ne+=Ut}var It=Kt.enumeratedString("RECENTLY-REMOVED-DATERANGES");It&&(L.recentlyRemovedDateranges=It.split("\t"));break;case"TARGETDURATION":L.targetduration=parseFloat(nt);break;case"VERSION":L.version=parseInt(nt);break;case"EXTM3U":break;case"ENDLIST":L.live=!1;break;case"#":(nt||Ht)&&we.tagList.push(Ht?[nt,Ht]:[nt]);break;case"DISCONTINUITY":ye++,we.tagList.push(["DIS"]);break;case"GAP":we.tagList.push([Ct]);break;case"BITRATE":we.tagList.push([Ct,nt]);break;case"DATERANGE":var Xt=new F.AttrList(nt),sr=new q.DateRange(Xt,L.dateRanges[Xt.ID]);sr.isValid||L.skippedSegments?L.dateRanges[sr.id]=sr:O.logger.warn('Ignoring invalid DATERANGE tag: "'+nt+'"'),we.tagList.push(["EXT-X-DATERANGE",nt]);break;case"DISCONTINUITY-SEQUENCE":ye=parseInt(nt);break;case"KEY":var fr,ir=new F.AttrList(nt),vr=ir.enumeratedString("METHOD"),ce=ir.URI,X=ir.hexadecimalInteger("IV"),J=ir.enumeratedString("KEYFORMATVERSIONS"),be=ir.enumeratedString("KEYID"),Le=null!=(fr=ir.enumeratedString("KEYFORMAT"))?fr:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(Le)>-1){O.logger.warn("Keyformat "+Le+" is not supported from the manifest");continue}if("identity"!==Le)continue;vr&&(st=B.LevelKey.fromURL(C,ce),ce&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(vr)>=0&&(st.method=vr,st.keyFormat=Le,be&&(st.keyID=be),J&&(st.keyFormatVersions=J),st.iv=X));break;case"START":var Pt=new F.AttrList(nt).decimalFloatingPoint("TIME-OFFSET");(0,ee.isFiniteNumber)(Pt)&&(L.startTimeOffset=Pt);break;case"MAP":var Zt=new F.AttrList(nt);if(we.duration){var Bt=new u.Fragment(T,C);h(Bt,Zt,x,st),we.initSegment=re=Bt,re.rawProgramDateTime&&!we.rawProgramDateTime&&(we.rawProgramDateTime=re.rawProgramDateTime)}else h(we,Zt,x,st),re=we,yt=!0;break;case"SERVER-CONTROL":var jt=new F.AttrList(nt);L.canBlockReload=jt.bool("CAN-BLOCK-RELOAD"),L.canSkipUntil=jt.optionalFloat("CAN-SKIP-UNTIL",0),L.canSkipDateRanges=L.canSkipUntil>0&&jt.bool("CAN-SKIP-DATERANGES"),L.partHoldBack=jt.optionalFloat("PART-HOLD-BACK",0),L.holdBack=jt.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Qt=new F.AttrList(nt);L.partTarget=Qt.decimalFloatingPoint("PART-TARGET");break;case"PART":var nn=L.partList;nn||(nn=L.partList=[]);var Wn=oe>0?nn[nn.length-1]:void 0,In=oe++,un=new u.Part(new F.AttrList(nt),we,C,In,Wn);nn.push(un),we.duration+=un.duration;break;case"PRELOAD-HINT":var Pi=new F.AttrList(nt);L.preloadHint=Pi;break;case"RENDITION-REPORT":var pi=new F.AttrList(nt);L.renditionReports=L.renditionReports||[],L.renditionReports.push(pi);break;default:O.logger.warn("line parsed but not handled: "+Be)}}}Ce&&!Ce.relurl?(Z.pop(),Te-=Ce.duration,L.partList&&(L.fragmentHint=Ce)):L.partList&&(c(we,Ce),we.cc=ye,L.fragmentHint=we);var Gn=Z.length,Vn=Z[0],pn=Z[Gn-1];if((Te+=L.skippedSegments*L.targetduration)>0&&Gn&&pn){L.averagetargetduration=Te/Gn;var wi=pn.sn;L.endSN="initSegment"!==wi?wi:0,Vn&&(L.startCC=Vn.cc,Vn.initSegment||L.fragments.every(function(An){return An.relurl&&function v(d){var P,m;return g.test(null!=(P=null===(m=G.parseURL(d))||void 0===m?void 0:m.path)?P:"")}(An.relurl)})&&(O.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(we=new u.Fragment(T,C)).relurl=pn.relurl,we.level=x,we.sn="initSegment",Vn.initSegment=we,L.needSidxRanges=!0))}else L.endSN=0,L.startCC=0;return L.fragmentHint&&(Te+=L.fragmentHint.duration),L.totalduration=Te,L.endCC=ye,ct>0&&function _(d,P){for(var m=d[P],C=P;C--;){var x=d[C];if(!x)return;x.programDateTime=m.programDateTime-1e3*x.duration,m=x}}(Z,ct),L},d}();function w(d,P){["video","audio","text"].forEach(function(m){var C=d.filter(function(T){return(0,W.isCodecType)(T,m)});if(C.length){var x=C.filter(function(T){return 0===T.lastIndexOf("avc1",0)||0===T.lastIndexOf("mp4a",0)});P[m+"Codec"]=x.length>0?x[0]:C[0],d=d.filter(function(T){return-1===C.indexOf(T)})}}),P.unknownCodecs=d}function E(d,P,m){var C=P[m];C&&(d[m]=C)}function c(d,P){d.rawProgramDateTime?d.programDateTime=Date.parse(d.rawProgramDateTime):null!=P&&P.programDateTime&&(d.programDateTime=P.endProgramDateTime),(0,ee.isFiniteNumber)(d.programDateTime)||(d.programDateTime=null,d.rawProgramDateTime=null)}function h(d,P,m,C){d.relurl=P.URI,P.BYTERANGE&&d.setByteRange(P.BYTERANGE),d.level=m,d.sn="initSegment",C&&(d.levelkey=C),d.initSegment=null}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
                !*** ./src/loader/playlist-loader.ts ***!
                \***************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>R});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../events */
"./src/events.ts"),V=N(
/*! ../errors */
"./src/errors.ts"),q=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),u=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),Y=N(
/*! ./m3u8-parser */
"./src/loader/m3u8-parser.ts"),B=N(
/*! ../types/loader */
"./src/types/loader.ts"),F=N(
/*! ../utils/attr-list */
"./src/utils/attr-list.ts");function W(M,b){var g=M.url;return(void 0===g||0===g.indexOf("data:"))&&(g=b.url),g}const R=function(){function M(g){this.hls=void 0,this.loaders=Object.create(null),this.hls=g,this.registerListeners()}var b=M.prototype;return b.startLoad=function(v){},b.stopLoad=function(){this.destroyInternalLoaders()},b.registerListeners=function(){var v=this.hls;v.on(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.on(G.Events.LEVEL_LOADING,this.onLevelLoading,this),v.on(G.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),v.on(G.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},b.unregisterListeners=function(){var v=this.hls;v.off(G.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.off(G.Events.LEVEL_LOADING,this.onLevelLoading,this),v.off(G.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),v.off(G.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},b.createInternalLoader=function(v){var S=this.hls.config,c=new(S.pLoader||S.loader)(S);return v.loader=c,this.loaders[v.type]=c,c},b.getInternalLoader=function(v){return this.loaders[v.type]},b.resetInternalLoader=function(v){this.loaders[v]&&delete this.loaders[v]},b.destroyInternalLoaders=function(){for(var v in this.loaders){var S=this.loaders[v];S&&S.destroy(),this.resetInternalLoader(v)}},b.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},b.onManifestLoading=function(v,S){this.load({id:null,groupId:null,level:0,responseType:"text",type:B.PlaylistContextType.MANIFEST,url:S.url,deliveryDirectives:null})},b.onLevelLoading=function(v,S){this.load({id:S.id,groupId:null,level:S.level,responseType:"text",type:B.PlaylistContextType.LEVEL,url:S.url,deliveryDirectives:S.deliveryDirectives})},b.onAudioTrackLoading=function(v,S){this.load({id:S.id,groupId:S.groupId,level:null,responseType:"text",type:B.PlaylistContextType.AUDIO_TRACK,url:S.url,deliveryDirectives:S.deliveryDirectives})},b.onSubtitleTrackLoading=function(v,S){this.load({id:S.id,groupId:S.groupId,level:null,responseType:"text",type:B.PlaylistContextType.SUBTITLE_TRACK,url:S.url,deliveryDirectives:S.deliveryDirectives})},b.load=function(v){var S,c,h,d,P,m,w=this.hls.config,E=this.getInternalLoader(v);if(E){var _=E.context;if(_&&_.url===v.url)return void q.logger.trace("[playlist-loader]: playlist request ongoing");q.logger.log("[playlist-loader]: aborting previous loader for type: "+v.type),E.abort()}switch(v.type){case B.PlaylistContextType.MANIFEST:c=w.manifestLoadingMaxRetry,h=w.manifestLoadingTimeOut,d=w.manifestLoadingRetryDelay,P=w.manifestLoadingMaxRetryTimeout;break;case B.PlaylistContextType.LEVEL:case B.PlaylistContextType.AUDIO_TRACK:case B.PlaylistContextType.SUBTITLE_TRACK:c=0,h=w.levelLoadingTimeOut;break;default:c=w.levelLoadingMaxRetry,h=w.levelLoadingTimeOut,d=w.levelLoadingRetryDelay,P=w.levelLoadingMaxRetryTimeout}if(E=this.createInternalLoader(v),null!==(S=v.deliveryDirectives)&&void 0!==S&&S.part&&(v.type===B.PlaylistContextType.LEVEL&&null!==v.level?m=this.hls.levels[v.level].details:v.type===B.PlaylistContextType.AUDIO_TRACK&&null!==v.id?m=this.hls.audioTracks[v.id].details:v.type===B.PlaylistContextType.SUBTITLE_TRACK&&null!==v.id&&(m=this.hls.subtitleTracks[v.id].details),m)){var C=m.partTarget,x=m.targetduration;C&&x&&(h=Math.min(1e3*Math.max(3*C,.8*x),h))}var T={timeout:h,maxRetry:c,retryDelay:d,maxRetryDelay:P,highWaterMark:0},I={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};E.load(v,T,I)},b.loadsuccess=function(v,S,w,E){if(void 0===E&&(E=null),w.isSidxRequest)return this.handleSidxRequest(v,w),void this.handlePlaylistLoaded(v,S,w,E);this.resetInternalLoader(w.type);var _=v.data;0===_.indexOf("#EXTM3U")?(S.parsing.start=performance.now(),_.indexOf("#EXTINF:")>0||_.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(v,S,w,E):this.handleMasterPlaylist(v,S,w,E)):this.handleManifestParsingError(v,w,"no EXTM3U delimiter",E)},b.loaderror=function(v,S,w){void 0===w&&(w=null),this.handleNetworkError(S,w,!1,v)},b.loadtimeout=function(v,S,w){void 0===w&&(w=null),this.handleNetworkError(S,w,!0)},b.handleMasterPlaylist=function(v,S,w,E){var _=this.hls,c=v.data,h=W(v,w),d=Y.default.parseMasterPlaylist(c,h),P=d.levels,m=d.sessionData;if(P.length){var C=P.map(function(re){return{id:re.attrs.AUDIO,audioCodec:re.audioCodec}}),x=P.map(function(re){return{id:re.attrs.SUBTITLES,textCodec:re.textCodec}}),T=Y.default.parseMasterPlaylistMedia(c,h,"AUDIO",C),I=Y.default.parseMasterPlaylistMedia(c,h,"SUBTITLES",x),L=Y.default.parseMasterPlaylistMedia(c,h,"CLOSED-CAPTIONS");T.length&&!T.some(function(re){return!re.url})&&P[0].audioCodec&&!P[0].attrs.AUDIO&&(q.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),T.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new F.AttrList({}),bitrate:0,url:""})),_.trigger(G.Events.MANIFEST_LOADED,{levels:P,audioTracks:T,subtitles:I,captions:L,url:h,stats:S,networkDetails:E,sessionData:m})}else this.handleManifestParsingError(v,w,"no level found in manifest",E)},b.handleTrackOrLevelPlaylist=function(v,S,w,E){var _=this.hls,c=w.id,h=w.level,d=w.type,P=W(v,w),m=(0,ee.isFiniteNumber)(c)?c:0,C=(0,ee.isFiniteNumber)(h)?h:m,x=function O(M){switch(M.type){case B.PlaylistContextType.AUDIO_TRACK:return B.PlaylistLevelType.AUDIO;case B.PlaylistContextType.SUBTITLE_TRACK:return B.PlaylistLevelType.SUBTITLE;default:return B.PlaylistLevelType.MAIN}}(w),T=Y.default.parseLevelPlaylist(v.data,P,C,x,m);if(T.fragments.length){if(d===B.PlaylistContextType.MANIFEST){var I={attrs:new F.AttrList({}),bitrate:0,details:T,name:"",url:P};_.trigger(G.Events.MANIFEST_LOADED,{levels:[I],audioTracks:[],url:P,stats:S,networkDetails:E,sessionData:null})}if(S.parsing.end=performance.now(),T.needSidxRanges){var L,Z=null===(L=T.fragments[0].initSegment)||void 0===L?void 0:L.url;this.load({url:Z,isSidxRequest:!0,type:d,level:h,levelDetails:T,id:c,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else w.levelDetails=T,this.handlePlaylistLoaded(v,S,w,E)}else _.trigger(G.Events.ERROR,{type:V.ErrorTypes.NETWORK_ERROR,details:V.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:P,reason:"no fragments found in level",level:"number"==typeof w.level?w.level:void 0})},b.handleSidxRequest=function(v,S){var w=new Uint8Array(v.data),E=(0,u.findBox)(w,["sidx"])[0];if(E){var _=(0,u.parseSegmentIndex)(E);if(_){var h=S.levelDetails;_.references.forEach(function(d,P){var m=d.info,C=h.fragments[P];if(0===C.byteRange.length&&C.setByteRange(String(1+m.end-m.start)+"@"+String(m.start)),C.initSegment){var x=(0,u.findBox)(w,["moov"])[0];C.initSegment.setByteRange(String(x?x.length:null)+"@0")}})}}},b.handleManifestParsingError=function(v,S,w,E){this.hls.trigger(G.Events.ERROR,{type:V.ErrorTypes.NETWORK_ERROR,details:V.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:S.type===B.PlaylistContextType.MANIFEST,url:v.url,reason:w,response:v,context:S,networkDetails:E})},b.handleNetworkError=function(v,S,w,E){void 0===w&&(w=!1),q.logger.warn("[playlist-loader]: A network "+(w?"timeout":"error")+" occurred while loading "+v.type+" level: "+v.level+" id: "+v.id+' group-id: "'+v.groupId+'"');var _=V.ErrorDetails.UNKNOWN,c=!1,h=this.getInternalLoader(v);switch(v.type){case B.PlaylistContextType.MANIFEST:_=w?V.ErrorDetails.MANIFEST_LOAD_TIMEOUT:V.ErrorDetails.MANIFEST_LOAD_ERROR,c=!0;break;case B.PlaylistContextType.LEVEL:_=w?V.ErrorDetails.LEVEL_LOAD_TIMEOUT:V.ErrorDetails.LEVEL_LOAD_ERROR,c=!1;break;case B.PlaylistContextType.AUDIO_TRACK:_=w?V.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:V.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case B.PlaylistContextType.SUBTITLE_TRACK:_=w?V.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:V.ErrorDetails.SUBTITLE_LOAD_ERROR,c=!1}h&&this.resetInternalLoader(v.type);var d={type:V.ErrorTypes.NETWORK_ERROR,details:_,fatal:c,url:v.url,loader:h,context:v,networkDetails:S};E&&(d.response=E),this.hls.trigger(G.Events.ERROR,d)},b.handlePlaylistLoaded=function(v,S,w,E){var _=w.type,c=w.level,h=w.id,d=w.groupId,P=w.loader,m=w.levelDetails,C=w.deliveryDirectives;if(null!=m&&m.targetduration){if(P)switch(m.live&&(P.getCacheAge&&(m.ageHeader=P.getCacheAge()||0),(!P.getCacheAge||isNaN(m.ageHeader))&&(m.ageHeader=0)),_){case B.PlaylistContextType.MANIFEST:case B.PlaylistContextType.LEVEL:this.hls.trigger(G.Events.LEVEL_LOADED,{details:m,level:c||0,id:h||0,stats:S,networkDetails:E,deliveryDirectives:C});break;case B.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(G.Events.AUDIO_TRACK_LOADED,{details:m,id:h||0,groupId:d||"",stats:S,networkDetails:E,deliveryDirectives:C});break;case B.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(G.Events.SUBTITLE_TRACK_LOADED,{details:m,id:h||0,groupId:d||"",stats:S,networkDetails:E,deliveryDirectives:C})}}else this.handleManifestParsingError(v,w,"invalid target duration",E)},M}()},"./src/polyfills/number.ts":
/*!*********************************!*\
                !*** ./src/polyfills/number.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{MAX_SAFE_INTEGER:()=>G,isFiniteNumber:()=>ee});var ee=Number.isFinite||function(V){return"number"==typeof V&&isFinite(V)},G=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
                !*** ./src/remux/aac-helper.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>G});const G=function(){function V(){}return V.getSilentFrame=function(u,Y){if("mp4a.40.2"===u){if(1===Y)return new Uint8Array([0,200,0,128,35,128]);if(2===Y)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===Y)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===Y)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===Y)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===Y)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===Y)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===Y)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===Y)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},V}()},"./src/remux/mp4-generator.ts":
/*!************************************!*\
                !*** ./src/remux/mp4-generator.ts ***!
                \************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>V});var ee=Math.pow(2,32)-1,G=function(){function q(){}return q.init=function(){var Y;for(Y in q.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})q.types.hasOwnProperty(Y)&&(q.types[Y]=[Y.charCodeAt(0),Y.charCodeAt(1),Y.charCodeAt(2),Y.charCodeAt(3)]);var B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),F=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);q.HDLR_TYPES={video:B,audio:F};var O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),W=new Uint8Array([0,0,0,0,0,0,0,0]);q.STTS=q.STSC=q.STCO=W,q.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),q.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),q.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),q.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var U=new Uint8Array([105,115,111,109]),R=new Uint8Array([97,118,99,49]),M=new Uint8Array([0,0,0,1]);q.FTYP=q.box(q.types.ftyp,U,M,U,R),q.DINF=q.box(q.types.dinf,q.box(q.types.dref,O))},q.box=function(Y){for(var B=8,F=arguments.length,O=new Array(F>1?F-1:0),W=1;W<F;W++)O[W-1]=arguments[W];for(var U=O.length,R=U;U--;)B+=O[U].byteLength;var M=new Uint8Array(B);for(M[0]=B>>24&255,M[1]=B>>16&255,M[2]=B>>8&255,M[3]=255&B,M.set(Y,4),U=0,B=8;U<R;U++)M.set(O[U],B),B+=O[U].byteLength;return M},q.hdlr=function(Y){return q.box(q.types.hdlr,q.HDLR_TYPES[Y])},q.mdat=function(Y){return q.box(q.types.mdat,Y)},q.mdhd=function(Y,B){B*=Y;var F=Math.floor(B/(ee+1)),O=Math.floor(B%(ee+1));return q.box(q.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Y>>24&255,Y>>16&255,Y>>8&255,255&Y,F>>24,F>>16&255,F>>8&255,255&F,O>>24,O>>16&255,O>>8&255,255&O,85,196,0,0]))},q.mdia=function(Y){return q.box(q.types.mdia,q.mdhd(Y.timescale,Y.duration),q.hdlr(Y.type),q.minf(Y))},q.mfhd=function(Y){return q.box(q.types.mfhd,new Uint8Array([0,0,0,0,Y>>24,Y>>16&255,Y>>8&255,255&Y]))},q.minf=function(Y){return q.box(q.types.minf,"audio"===Y.type?q.box(q.types.smhd,q.SMHD):q.box(q.types.vmhd,q.VMHD),q.DINF,q.stbl(Y))},q.moof=function(Y,B,F){return q.box(q.types.moof,q.mfhd(Y),q.traf(F,B))},q.moov=function(Y){for(var B=Y.length,F=[];B--;)F[B]=q.trak(Y[B]);return q.box.apply(null,[q.types.moov,q.mvhd(Y[0].timescale,Y[0].duration)].concat(F).concat(q.mvex(Y)))},q.mvex=function(Y){for(var B=Y.length,F=[];B--;)F[B]=q.trex(Y[B]);return q.box.apply(null,[q.types.mvex].concat(F))},q.mvhd=function(Y,B){B*=Y;var F=Math.floor(B/(ee+1)),O=Math.floor(B%(ee+1)),W=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Y>>24&255,Y>>16&255,Y>>8&255,255&Y,F>>24,F>>16&255,F>>8&255,255&F,O>>24,O>>16&255,O>>8&255,255&O,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return q.box(q.types.mvhd,W)},q.sdtp=function(Y){var O,W,B=Y.samples||[],F=new Uint8Array(4+B.length);for(O=0;O<B.length;O++)F[O+4]=(W=B[O].flags).dependsOn<<4|W.isDependedOn<<2|W.hasRedundancy;return q.box(q.types.sdtp,F)},q.stbl=function(Y){return q.box(q.types.stbl,q.stsd(Y),q.box(q.types.stts,q.STTS),q.box(q.types.stsc,q.STSC),q.box(q.types.stsz,q.STSZ),q.box(q.types.stco,q.STCO))},q.avc1=function(Y){var O,W,U,B=[],F=[];for(O=0;O<Y.sps.length;O++)B.push((U=(W=Y.sps[O]).byteLength)>>>8&255),B.push(255&U),B=B.concat(Array.prototype.slice.call(W));for(O=0;O<Y.pps.length;O++)F.push((U=(W=Y.pps[O]).byteLength)>>>8&255),F.push(255&U),F=F.concat(Array.prototype.slice.call(W));var R=q.box(q.types.avcC,new Uint8Array([1,B[3],B[4],B[5],255,224|Y.sps.length].concat(B).concat([Y.pps.length]).concat(F))),M=Y.width,b=Y.height,g=Y.pixelRatio[0],v=Y.pixelRatio[1];return q.box(q.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,M>>8&255,255&M,b>>8&255,255&b,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),R,q.box(q.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),q.box(q.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,255&g,v>>24,v>>16&255,v>>8&255,255&v])))},q.esds=function(Y){var B=Y.config.length;return new Uint8Array([0,0,0,0,3,23+B,0,1,0,4,15+B,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([B]).concat(Y.config).concat([6,1,2]))},q.mp4a=function(Y){var B=Y.samplerate;return q.box(q.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Y.channelCount,0,16,0,0,0,0,B>>8&255,255&B,0,0]),q.box(q.types.esds,q.esds(Y)))},q.mp3=function(Y){var B=Y.samplerate;return q.box(q.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Y.channelCount,0,16,0,0,0,0,B>>8&255,255&B,0,0]))},q.stsd=function(Y){return q.box(q.types.stsd,q.STSD,"audio"===Y.type?"mp3"===Y.segmentCodec&&"mp3"===Y.codec?q.mp3(Y):q.mp4a(Y):q.avc1(Y))},q.tkhd=function(Y){var B=Y.id,F=Y.duration*Y.timescale,O=Y.width,W=Y.height,U=Math.floor(F/(ee+1)),R=Math.floor(F%(ee+1));return q.box(q.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,B>>24&255,B>>16&255,B>>8&255,255&B,0,0,0,0,U>>24,U>>16&255,U>>8&255,255&U,R>>24,R>>16&255,R>>8&255,255&R,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,O>>8&255,255&O,0,0,W>>8&255,255&W,0,0]))},q.traf=function(Y,B){var F=q.sdtp(Y),O=Y.id,W=Math.floor(B/(ee+1)),U=Math.floor(B%(ee+1));return q.box(q.types.traf,q.box(q.types.tfhd,new Uint8Array([0,0,0,0,O>>24,O>>16&255,O>>8&255,255&O])),q.box(q.types.tfdt,new Uint8Array([1,0,0,0,W>>24,W>>16&255,W>>8&255,255&W,U>>24,U>>16&255,U>>8&255,255&U])),q.trun(Y,F.length+16+20+8+16+8+8),F)},q.trak=function(Y){return Y.duration=Y.duration||4294967295,q.box(q.types.trak,q.tkhd(Y),q.mdia(Y))},q.trex=function(Y){var B=Y.id;return q.box(q.types.trex,new Uint8Array([0,0,0,0,B>>24,B>>16&255,B>>8&255,255&B,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},q.trun=function(Y,B){var R,M,b,g,v,S,F=Y.samples||[],O=F.length,W=12+16*O,U=new Uint8Array(W);for(U.set(["video"===Y.type?1:0,0,15,1,O>>>24&255,O>>>16&255,O>>>8&255,255&O,(B+=8+W)>>>24&255,B>>>16&255,B>>>8&255,255&B],0),R=0;R<O;R++)U.set([(b=(M=F[R]).duration)>>>24&255,b>>>16&255,b>>>8&255,255&b,(g=M.size)>>>24&255,g>>>16&255,g>>>8&255,255&g,(v=M.flags).isLeading<<2|v.dependsOn,v.isDependedOn<<6|v.hasRedundancy<<4|v.paddingValue<<1|v.isNonSync,61440&v.degradPrio,15&v.degradPrio,(S=M.cts)>>>24&255,S>>>16&255,S>>>8&255,255&S],12+16*R);return q.box(q.types.trun,U)},q.initSegment=function(Y){q.types||q.init();var B=q.moov(Y),F=new Uint8Array(q.FTYP.byteLength+B.byteLength);return F.set(q.FTYP),F.set(B,q.FTYP.byteLength),F},q}();G.types=void 0,G.HDLR_TYPES=void 0,G.STTS=void 0,G.STSC=void 0,G.STCO=void 0,G.STSZ=void 0,G.VMHD=void 0,G.SMHD=void 0,G.STSD=void 0,G.FTYP=void 0,G.DINF=void 0;const V=G},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
                !*** ./src/remux/mp4-remuxer.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>g,flushTextTrackMetadataCueSamples:()=>w,flushTextTrackUserdataCueSamples:()=>E,normalizePts:()=>v});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ./aac-helper */
"./src/remux/aac-helper.ts"),V=N(
/*! ./mp4-generator */
"./src/remux/mp4-generator.ts"),q=N(
/*! ../events */
"./src/events.ts"),u=N(
/*! ../errors */
"./src/errors.ts"),Y=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),B=N(
/*! ../types/loader */
"./src/types/loader.ts"),F=N(
/*! ../utils/timescale-conversion */
"./src/utils/timescale-conversion.ts");function O(){return O=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var P=arguments[d];for(var m in P)Object.prototype.hasOwnProperty.call(P,m)&&(h[m]=P[m])}return h},O.apply(this,arguments)}var M=null,b=null,g=function(){function h(P,m,C,x){if(void 0===x&&(x=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=P,this.config=m,this.typeSupported=C,this.ISGenerated=!1,null===M){var I=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);M=I?parseInt(I[1]):0}if(null===b){var L=navigator.userAgent.match(/Safari\/(\d+)/i);b=L?parseInt(L[1]):0}}var d=h.prototype;return d.destroy=function(){},d.resetTimeStamp=function(m){Y.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=m},d.resetNextTimestamp=function(){Y.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},d.resetInitSegment=function(){Y.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},d.getVideoStartPts=function(m){var C=!1,x=m.reduce(function(T,I){var L=I.pts-T;return L<-4294967296?(C=!0,v(T,I.pts)):L>0?T:I.pts},m[0].pts);return C&&Y.logger.debug("PTS rollover detected"),x},d.remux=function(m,C,x,T,I,L,Z,re){var ne,oe,Te,ye,Ce,we,Be=I,Ze=I,ct=C.pid>-1,yt=C.samples.length,_t=m.samples.length>0,ot=Z&&yt>0||yt>1;if((!(m.pid>-1)||_t)&&(!ct||ot)||this.ISGenerated||Z){this.ISGenerated||(Te=this.generateIS(m,C,I));var Ht,Ct=this.isVideoContiguous,nt=-1;if(ot&&(nt=function S(h){for(var d=0;d<h.length;d++)if(h[d].key)return d;return-1}(C.samples),!Ct&&this.config.forceKeyFrameOnDiscontinuity))if(we=!0,nt>0){Y.logger.warn("[mp4-remuxer]: Dropped "+nt+" out of "+yt+" video samples due to a missing keyframe");var Kt=this.getVideoStartPts(C.samples);C.samples=C.samples.slice(nt),C.dropped+=nt,Ht=Ze+=(C.samples[0].pts-Kt)/C.inputTimeScale}else-1===nt&&(Y.logger.warn("[mp4-remuxer]: No keyframe found out of "+yt+" video samples"),we=!1);if(this.ISGenerated){if(_t&&ot){var Ut=this.getVideoStartPts(C.samples),It=(v(m.samples[0].pts,Ut)-Ut)/C.inputTimeScale;Be+=Math.max(0,It),Ze+=Math.max(0,-It)}if(_t){if(m.samplerate||(Y.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Te=this.generateIS(m,C,I)),oe=this.remuxAudio(m,Be,this.isAudioContiguous,L,ct||ot||re===B.PlaylistLevelType.AUDIO?Ze:void 0),ot){var Xt=oe?oe.endPTS-oe.startPTS:0;C.inputTimeScale||(Y.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Te=this.generateIS(m,C,I)),ne=this.remuxVideo(C,Ze,Ct,Xt)}}else ot&&(ne=this.remuxVideo(C,Ze,Ct,0));ne&&(ne.firstKeyFrame=nt,ne.independent=-1!==nt,ne.firstKeyFramePTS=Ht)}}return this.ISGenerated&&(x.samples.length&&(Ce=w(x,I,this._initPTS,this._initDTS)),T.samples.length&&(ye=E(T,I,this._initPTS))),{audio:oe,video:ne,initSegment:Te,independent:we,text:ye,id3:Ce}},d.generateIS=function(m,C,x){var oe,Te,ye,T=m.samples,I=C.samples,L=this.typeSupported,Z={},re=!(0,ee.isFiniteNumber)(this._initPTS),ne="audio/mp4";if(re&&(oe=Te=1/0),m.config&&T.length&&("mp3"===(m.timescale=m.samplerate,m.segmentCodec)&&(L.mpeg?(ne="audio/mpeg",m.codec=""):L.mp3&&(m.codec="mp3")),Z.audio={id:"audio",container:ne,codec:m.codec,initSegment:"mp3"===m.segmentCodec&&L.mpeg?new Uint8Array(0):V.default.initSegment([m]),metadata:{channelCount:m.channelCount}},re&&(ye=m.inputTimeScale,oe=Te=T[0].pts-Math.round(ye*x))),C.sps&&C.pps&&I.length&&(C.timescale=C.inputTimeScale,Z.video={id:"main",container:"video/mp4",codec:C.codec,initSegment:V.default.initSegment([C]),metadata:{width:C.width,height:C.height}},re)){ye=C.inputTimeScale;var Ce=this.getVideoStartPts(I),we=Math.round(ye*x);Te=Math.min(Te,v(I[0].dts,Ce)-we),oe=Math.min(oe,Ce-we)}if(Object.keys(Z).length)return this.ISGenerated=!0,re&&(this._initPTS=oe,this._initDTS=Te),{tracks:Z,initPTS:oe,timescale:ye}},d.remuxVideo=function(m,C,x,T){var Ce,we,I=m.inputTimeScale,L=m.samples,Z=[],re=L.length,ne=this._initPTS,oe=this.nextAvcDts,Te=8,ye=this.videoSampleDuration,Be=Number.POSITIVE_INFINITY,Ze=Number.NEGATIVE_INFINITY,st=!1;x&&null!==oe||(oe=C*I-(L[0].pts-v(L[0].dts,L[0].pts)));for(var _t=0;_t<re;_t++){var ot=L[_t];ot.pts=v(ot.pts-ne,oe),ot.dts=v(ot.dts-ne,oe),ot.dts<L[_t>0?_t-1:_t].dts&&(st=!0)}st&&L.sort(function(Xr,mr){return Xr.dts-mr.dts||Xr.pts-mr.pts});var bt=L[L.length-1].dts-(Ce=L[0].dts),Ct=bt?Math.round(bt/(re-1)):ye||m.inputTimeScale/30;if(x){var nt=Ce-oe,Ht=nt>Ct,Kt=nt<-1;if((Ht||Kt)&&(Y.logger.warn(Ht?"AVC: "+(0,F.toMsFromMpegTsClock)(nt,!0)+" ms ("+nt+"dts) hole between fragments detected, filling it":"AVC: "+(0,F.toMsFromMpegTsClock)(-nt,!0)+" ms ("+nt+"dts) overlapping between fragments detected"),!Kt||oe>L[0].pts)){var Ut=L[0].pts-nt;L[0].dts=Ce=oe,L[0].pts=Ut,Y.logger.log("Video: First PTS/DTS adjusted: "+(0,F.toMsFromMpegTsClock)(Ut,!0)+"/"+(0,F.toMsFromMpegTsClock)(Ce,!0)+", delta: "+(0,F.toMsFromMpegTsClock)(nt,!0)+" ms")}}Ce=Math.max(0,Ce);for(var tr=0,It=0,Xt=0;Xt<re;Xt++){for(var sr=L[Xt],fr=sr.units,ir=fr.length,vr=0,ce=0;ce<ir;ce++)vr+=fr[ce].data.length;It+=vr,tr+=ir,sr.length=vr,sr.dts=Math.max(sr.dts,Ce),Be=Math.min(sr.pts,Be),Ze=Math.max(sr.pts,Ze)}we=L[re-1].dts;var J,X=It+4*tr+8;try{J=new Uint8Array(X)}catch{return void this.observer.emit(q.Events.ERROR,q.Events.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:X,reason:"fail allocating video mdat "+X})}var be=new DataView(J.buffer);be.setUint32(0,X),J.set(V.default.types.mdat,4);for(var Le=!1,He=Number.POSITIVE_INFINITY,Ve=Number.POSITIVE_INFINITY,Pt=Number.NEGATIVE_INFINITY,Zt=Number.NEGATIVE_INFINITY,Bt=0;Bt<re;Bt++){for(var jt=L[Bt],Qt=jt.units,nn=0,Wn=0,In=Qt.length;Wn<In;Wn++){var un=Qt[Wn],Pi=un.data,pi=un.data.byteLength;be.setUint32(Te,pi),J.set(Pi,Te+=4),Te+=pi,nn+=4+pi}var Gn=void 0;if(Bt<re-1)ye=L[Bt+1].dts-jt.dts,Gn=L[Bt+1].pts-jt.pts;else{var Vn=this.config,pn=Bt>0?jt.dts-L[Bt-1].dts:Ct;if(Gn=Bt>0?jt.pts-L[Bt-1].pts:Ct,Vn.stretchShortVideoTrack&&null!==this.nextAudioPts){var wi=Math.floor(Vn.maxBufferHole*I),An=(T?Be+T*I:this.nextAudioPts)-jt.pts;An>wi?((ye=An-pn)<0?ye=pn:Le=!0,Y.logger.log("[mp4-remuxer]: It is approximately "+An/90+" ms to the next segment; using duration "+ye/90+" ms for the last video frame.")):ye=pn}else ye=pn}var ca=Math.round(jt.pts-jt.dts);He=Math.min(He,ye),Pt=Math.max(Pt,ye),Ve=Math.min(Ve,Gn),Zt=Math.max(Zt,Gn),Z.push(new _(jt.key,ye,nn,ca))}if(Z.length)if(M){if(M<70){var vi=Z[0].flags;vi.dependsOn=2,vi.isNonSync=0}}else if(b&&Zt-Ve<Pt-He&&Ct/Pt<.025&&0===Z[0].cts){Y.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Oi=Ce,Kn=0,fe=Z.length;Kn<fe;Kn++){var ve=Oi+Z[Kn].duration;Z[Kn].duration=Kn<fe-1?ve+Z[Kn+1].cts-(Oi+Z[Kn].cts):Kn?Z[Kn-1].duration:Ct,Z[Kn].cts=0,Oi=ve}}console.assert(null!==ye,"mp4SampleDuration must be computed"),this.nextAvcDts=oe=we+(ye=Le||!ye?Ct:ye),this.videoSampleDuration=ye,this.isVideoContiguous=!0;var Yt={data1:V.default.moof(m.sequenceNumber++,Ce,O({},m,{samples:Z})),data2:J,startPTS:Be/I,endPTS:(Ze+ye)/I,startDTS:Ce/I,endDTS:oe/I,type:"video",hasAudio:!1,hasVideo:!0,nb:Z.length,dropped:m.dropped};return m.samples=[],m.dropped=0,console.assert(J.length,"MDAT length must not be zero"),Yt},d.remuxAudio=function(m,C,x,T,I){var L=m.inputTimeScale,re=L/(m.samplerate?m.samplerate:L),ne="aac"===m.segmentCodec?1024:1152,oe=ne*re,Te=this._initPTS,ye="mp3"===m.segmentCodec&&this.typeSupported.mpeg,Ce=[],we=void 0!==I,Be=m.samples,Ze=ye?0:8,st=this.nextAudioPts||-1,ct=C*L;if(this.isAudioContiguous=x=x||Be.length&&st>0&&(T&&Math.abs(ct-st)<9e3||Math.abs(v(Be[0].pts-Te,ct)-st)<20*oe),Be.forEach(function(un){un.pts=v(un.pts-Te,ct)}),!x||st<0){if(!(Be=Be.filter(function(un){return un.pts>=0})).length)return;st=0===I?0:T&&!we?Math.max(0,ct):Be[0].pts}if("aac"===m.segmentCodec)for(var yt=this.config.maxAudioFramesDrift,_t=0,ot=st;_t<Be.length;_t++){var bt=Be[_t],Ct=bt.pts,nt=Ct-ot,Ht=Math.abs(1e3*nt/L);if(nt<=-yt*oe&&we)0===_t&&(Y.logger.warn("Audio frame @ "+(Ct/L).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*nt/L)+" ms."),this.nextAudioPts=st=ot=Ct);else if(nt>=yt*oe&&Ht<1e4&&we){var Kt=Math.round(nt/oe);(ot=Ct-Kt*oe)<0&&(Kt--,ot+=oe),0===_t&&(this.nextAudioPts=st=ot),Y.logger.warn("[mp4-remuxer]: Injecting "+Kt+" audio frame @ "+(ot/L).toFixed(3)+"s due to "+Math.round(1e3*nt/L)+" ms gap.");for(var Ut=0;Ut<Kt;Ut++){var tr=Math.max(ot,0),It=G.default.getSilentFrame(m.manifestCodec||m.codec,m.channelCount);It||(Y.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),It=bt.unit.subarray()),Be.splice(_t,0,{unit:It,pts:tr}),ot+=oe,_t++}}bt.pts=ot,ot+=oe}for(var fr,Xt=null,sr=null,ir=0,vr=Be.length;vr--;)ir+=Be[vr].unit.byteLength;for(var ce=0,X=Be.length;ce<X;ce++){var J=Be[ce],be=J.unit,Le=J.pts;if(null!==sr)Ce[ce-1].duration=Math.round((Le-sr)/re);else{if(x&&"aac"===m.segmentCodec&&(Le=st),Xt=Le,!(ir>0))return;ir+=Ze;try{fr=new Uint8Array(ir)}catch{return void this.observer.emit(q.Events.ERROR,q.Events.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ir,reason:"fail allocating audio mdat "+ir})}ye||(new DataView(fr.buffer).setUint32(0,ir),fr.set(V.default.types.mdat,4))}fr.set(be,Ze);var Pt=be.byteLength;Ze+=Pt,Ce.push(new _(!0,ne,Pt,0)),sr=Le}var Zt=Ce.length;if(Zt){this.nextAudioPts=st=sr+re*Ce[Ce.length-1].duration;var jt=ye?new Uint8Array(0):V.default.moof(m.sequenceNumber++,Xt/re,O({},m,{samples:Ce}));m.samples=[];var Qt=Xt/L,nn=st/L,In={data1:jt,data2:fr,startPTS:Qt,endPTS:nn,startDTS:Qt,endDTS:nn,type:"audio",hasAudio:!0,hasVideo:!1,nb:Zt};return this.isAudioContiguous=!0,console.assert(fr.length,"MDAT length must not be zero"),In}},d.remuxEmptyAudio=function(m,C,x,T){var I=m.inputTimeScale,re=this.nextAudioPts,ne=(null!==re?re:T.startDTS*I)+this._initDTS,Te=I/(m.samplerate?m.samplerate:I)*1024,ye=Math.ceil((T.endDTS*I+this._initDTS-ne)/Te),Ce=G.default.getSilentFrame(m.manifestCodec||m.codec,m.channelCount);if(Y.logger.warn("[mp4-remuxer]: remux empty Audio"),Ce){for(var we=[],Be=0;Be<ye;Be++){var Ze=ne+Be*Te;we.push({unit:Ce,pts:Ze,dts:Ze})}return m.samples=we,this.remuxAudio(m,C,x,!1)}Y.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},h}();function v(h,d){var P;if(null===d)return h;for(P=d<h?-8589934592:8589934592;Math.abs(h-d)>4294967296;)h+=P;return h}function w(h,d,P,m){var C=h.samples.length;if(C){for(var x=h.inputTimeScale,T=0;T<C;T++){var I=h.samples[T];I.pts=v(I.pts-P,d*x)/x,I.dts=v(I.dts-m,d*x)/x}var L=h.samples;return h.samples=[],{samples:L}}}function E(h,d,P){var m=h.samples.length;if(m){for(var C=h.inputTimeScale,x=0;x<m;x++){var T=h.samples[x];T.pts=v(T.pts-P,d*C)/C}h.samples.sort(function(L,Z){return L.pts-Z.pts});var I=h.samples;return h.samples=[],{samples:I}}}var _=function(d,P,m,C){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=P,this.size=m,this.cts=C,this.flags=new c(d)},c=function(d){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=d?2:1,this.isNonSync=d?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
                !*** ./src/remux/passthrough-remuxer.ts ***!
                \******************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>F});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ./mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),V=N(
/*! ../utils/mp4-tools */
"./src/utils/mp4-tools.ts"),q=N(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),u=N(
/*! ../utils/logger */
"./src/utils/logger.ts");function B(O,W){var U=O?.codec;return U&&U.length>4?U:"hvc1"===U||"hev1"===U?"hvc1.1.c.L120.90":"av01"===U?"av01.0.04M.08":"avc1"===U||W===q.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const F=function(){function O(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var W=O.prototype;return W.destroy=function(){},W.resetTimeStamp=function(R){this.initPTS=R,this.lastEndTime=null},W.resetNextTimestamp=function(){this.lastEndTime=null},W.resetInitSegment=function(R,M,b){this.audioCodec=M,this.videoCodec=b,this.generateInitSegment(R),this.emitInitSegment=!0},W.generateInitSegment=function(R){var M=this.audioCodec,b=this.videoCodec;if(!R||!R.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var g=this.initData=(0,V.parseInitSegment)(R);M||(M=B(g.audio,q.ElementaryStreamTypes.AUDIO)),b||(b=B(g.video,q.ElementaryStreamTypes.VIDEO));var v={};g.audio&&g.video?v.audiovideo={container:"video/mp4",codec:M+","+b,initSegment:R,id:"main"}:g.audio?v.audio={container:"audio/mp4",codec:M,initSegment:R,id:"audio"}:g.video?v.video={container:"video/mp4",codec:b,initSegment:R,id:"main"}:u.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=v},W.remux=function(R,M,b,g,v){var S,w=this.initPTS,E=this.lastEndTime,_={audio:void 0,video:void 0,text:g,id3:b,initSegment:void 0};(0,ee.isFiniteNumber)(E)||(E=this.lastEndTime=v||0);var c=M.samples;if(!c||!c.length)return _;var h={initPTS:void 0,timescale:1},d=this.initData;if((!d||!d.length)&&(this.generateInitSegment(c),d=this.initData),!d||!d.length)return u.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),_;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);var P=(0,V.getStartDTS)(d,c);(0,ee.isFiniteNumber)(w)||(this.initPTS=h.initPTS=w=P-v);var m=(0,V.getDuration)(c,d),C=R?P-w:E,x=C+m;(0,V.offsetStartDTS)(d,c,w),m>0?this.lastEndTime=x:(u.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var T=!!d.audio,I=!!d.video,L="";T&&(L+="audio"),I&&(L+="video");var Z={data1:c,startPTS:C,startDTS:C,endPTS:x,endDTS:x,type:L,hasAudio:T,hasVideo:I,nb:1,dropped:0};_.audio="audio"===Z.type?Z:void 0,_.video="audio"!==Z.type?Z:void 0,_.initSegment=h;var re=null!=(S=this.initPTS)?S:0;return _.id3=(0,G.flushTextTrackMetadataCueSamples)(b,v,re,re),g.samples.length&&(_.text=(0,G.flushTextTrackUserdataCueSamples)(g,v,re)),_},O}()},"./src/task-loop.ts":
/*!**************************!*\
                !*** ./src/task-loop.ts ***!
                \**************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>ee});var ee=function(){function G(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var V=G.prototype;return V.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},V.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},V.onHandlerDestroyed=function(){},V.hasInterval=function(){return!!this._tickInterval},V.hasNextTick=function(){return!!this._tickTimer},V.setInterval=function(u){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,u),!0)},V.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},V.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},V.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},V.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},V.doTick=function(){},G}()},"./src/types/cmcd.ts":
/*!***************************!*\
                !*** ./src/types/cmcd.ts ***!
                \***************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{CMCDObjectType:()=>G,CMCDStreamType:()=>q,CMCDStreamingFormat:()=>V,CMCDVersion:()=>ee});var ee=1,G=(()=>{return(u=G||(G={})).MANIFEST="m",u.AUDIO="a",u.VIDEO="v",u.MUXED="av",u.INIT="i",u.CAPTION="c",u.TIMED_TEXT="tt",u.KEY="k",u.OTHER="o",G;var u})(),V=(()=>{return(u=V||(V={})).DASH="d",u.HLS="h",u.SMOOTH="s",u.OTHER="o",V;var u})(),q=(()=>{return(u=q||(q={})).VOD="v",u.LIVE="l",q;var u})()},"./src/types/demuxer.ts":
/*!******************************!*\
                !*** ./src/types/demuxer.ts ***!
                \******************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{MetadataSchema:()=>ee});var ee=(()=>{return(G=ee||(ee={})).audioId3="org.id3",G.dateRange="com.apple.quicktime.HLS",G.emsg="https://aomedia.org/emsg/ID3",ee;var G})()},"./src/types/level.ts":
/*!****************************!*\
                !*** ./src/types/level.ts ***!
                \****************************/(Se,ue,N)=>{"use strict";function ee(B,F){for(var O=0;O<F.length;O++){var W=F[O];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(B,W.key,W)}}N.r(ue),N.d(ue,{HlsSkip:()=>V,HlsUrlParameters:()=>u,Level:()=>Y,getSkipValue:()=>q});var V=(()=>{return(B=V||(V={})).No="",B.Yes="YES",B.v2="v2",V;var B})();function q(B,F){var O=B.canSkipUntil;return O&&(void 0!==F?F-B.endSN:0)<O?B.canSkipDateRanges?V.v2:V.Yes:V.No}var u=function(){function B(O,W,U){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=O,this.part=W,this.skip=U}return B.prototype.addDirectives=function(W){var U=new self.URL(W);return void 0!==this.msn&&U.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&U.searchParams.set("_HLS_part",this.part.toString()),this.skip&&U.searchParams.set("_HLS_skip",this.skip),U.toString()},B}(),Y=function(){function B(F){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[F.url],this.attrs=F.attrs,this.bitrate=F.bitrate,F.details&&(this.details=F.details),this.id=F.id||0,this.name=F.name,this.width=F.width||0,this.height=F.height||0,this.audioCodec=F.audioCodec,this.videoCodec=F.videoCodec,this.unknownCodecs=F.unknownCodecs,this.codecSet=[F.videoCodec,F.audioCodec].filter(function(O){return O}).join(",").replace(/\.[^.,]+/g,"")}return function G(B,F,O){F&&ee(B.prototype,F),O&&ee(B,O),Object.defineProperty(B,"prototype",{writable:!1})}(B,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(O){var W=O%this.url.length;this._urlId!==W&&(this.details=void 0,this._urlId=W)}}]),B}()},"./src/types/loader.ts":
/*!*****************************!*\
                !*** ./src/types/loader.ts ***!
                \*****************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{PlaylistContextType:()=>ee,PlaylistLevelType:()=>G});var ee=(()=>{return(V=ee||(ee={})).MANIFEST="manifest",V.LEVEL="level",V.AUDIO_TRACK="audioTrack",V.SUBTITLE_TRACK="subtitleTrack",ee;var V})(),G=(()=>{return(V=G||(G={})).MAIN="main",V.AUDIO="audio",V.SUBTITLE="subtitle",G;var V})()},"./src/types/transmuxer.ts":
/*!*********************************!*\
                !*** ./src/types/transmuxer.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{ChunkMetadata:()=>ee});var ee=function(q,u,Y,B,F,O){void 0===B&&(B=0),void 0===F&&(F=-1),void 0===O&&(O=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=q,this.sn=u,this.id=Y,this.size=B,this.part=F,this.partial=O}},"./src/utils/attr-list.ts":
/*!********************************!*\
                !*** ./src/utils/attr-list.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{AttrList:()=>V});var ee=/^(\d+)x(\d+)$/,G=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,V=function(){function q(Y){for(var B in"string"==typeof Y&&(Y=q.parseAttrList(Y)),Y)Y.hasOwnProperty(B)&&(this[B]=Y[B])}var u=q.prototype;return u.decimalInteger=function(B){var F=parseInt(this[B],10);return F>Number.MAX_SAFE_INTEGER?1/0:F},u.hexadecimalInteger=function(B){if(this[B]){var F=(this[B]||"0x").slice(2);F=(1&F.length?"0":"")+F;for(var O=new Uint8Array(F.length/2),W=0;W<F.length/2;W++)O[W]=parseInt(F.slice(2*W,2*W+2),16);return O}return null},u.hexadecimalIntegerAsNumber=function(B){var F=parseInt(this[B],16);return F>Number.MAX_SAFE_INTEGER?1/0:F},u.decimalFloatingPoint=function(B){return parseFloat(this[B])},u.optionalFloat=function(B,F){var O=this[B];return O?parseFloat(O):F},u.enumeratedString=function(B){return this[B]},u.bool=function(B){return"YES"===this[B]},u.decimalResolution=function(B){var F=ee.exec(this[B]);if(null!==F)return{width:parseInt(F[1],10),height:parseInt(F[2],10)}},q.parseAttrList=function(B){var F,O={};for(G.lastIndex=0;null!==(F=G.exec(B));){var U=F[2];0===U.indexOf('"')&&U.lastIndexOf('"')===U.length-1&&(U=U.slice(1,-1)),O[F[1]]=U}return O},q}()},"./src/utils/binary-search.ts":
/*!************************************!*\
                !*** ./src/utils/binary-search.ts ***!
                \************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>G});const G={search:function(q,u){for(var Y=0,B=q.length-1,F=null,O=null;Y<=B;){var W=u(O=q[F=(Y+B)/2|0]);if(W>0)Y=F+1;else{if(!(W<0))return O;B=F-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
                !*** ./src/utils/buffer-helper.ts ***!
                \************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{BufferHelper:()=>V});var ee=N(
/*! ./logger */
"./src/utils/logger.ts"),G={length:0,start:function(){return 0},end:function(){return 0}},V=function(){function q(){}return q.isBuffered=function(Y,B){try{if(Y)for(var F=q.getBuffered(Y),O=0;O<F.length;O++)if(B>=F.start(O)&&B<=F.end(O))return!0}catch{}return!1},q.bufferInfo=function(Y,B,F){try{if(Y){var U,O=q.getBuffered(Y),W=[];for(U=0;U<O.length;U++)W.push({start:O.start(U),end:O.end(U)});return this.bufferedInfo(W,B,F)}}catch{}return{len:0,start:B,end:B,nextStart:void 0}},q.bufferedInfo=function(Y,B,F){B=Math.max(0,B),Y.sort(function(_,c){return _.start-c.start||c.end-_.end});var O=[];if(F)for(var W=0;W<Y.length;W++){var U=O.length;if(U){var R=O[U-1].end;Y[W].start-R<F?Y[W].end>R&&(O[U-1].end=Y[W].end):O.push(Y[W])}else O.push(Y[W])}else O=Y;for(var b,M=0,g=B,v=B,S=0;S<O.length;S++){var w=O[S].start,E=O[S].end;if(B+F>=w&&B<E)g=w,M=(v=E)-B;else if(B+F<w){b=w;break}}return{len:M,start:g||0,end:v||0,nextStart:b}},q.getBuffered=function(Y){try{return Y.buffered}catch(B){return ee.logger.log("failed to get media.buffered",B),G}},q}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
                !*** ./src/utils/cea-608-parser.ts ***!
                \*************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{CaptionScreen:()=>S,Row:()=>v,default:()=>d});var ee=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),G={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},V=function(m){var C=m;return G.hasOwnProperty(m)&&(C=G[m]),String.fromCharCode(C)},q=15,u=100,Y={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},B={17:2,18:4,21:6,22:8,23:10,19:13,20:15},F={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},O={25:2,26:4,29:6,30:8,31:10,27:13,28:15},W=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],U=(()=>{return(P=U||(U={}))[P.ERROR=0]="ERROR",P[P.TEXT=1]="TEXT",P[P.WARNING=2]="WARNING",P[P.INFO=2]="INFO",P[P.DEBUG=3]="DEBUG",P[P.DATA=3]="DATA",U;var P})(),R=function(){function P(){this.time=null,this.verboseLevel=U.ERROR}return P.prototype.log=function(x,T){this.verboseLevel>=x&&ee.logger.log(this.time+" ["+x+"] "+T)},P}(),M=function(m){for(var C=[],x=0;x<m.length;x++)C.push(m[x].toString(16));return C},b=function(){function P(C,x,T,I,L){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=C||"white",this.underline=x||!1,this.italics=T||!1,this.background=I||"black",this.flash=L||!1}var m=P.prototype;return m.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},m.setStyles=function(x){for(var T=["foreground","underline","italics","background","flash"],I=0;I<T.length;I++){var L=T[I];x.hasOwnProperty(L)&&(this[L]=x[L])}},m.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},m.equals=function(x){return this.foreground===x.foreground&&this.underline===x.underline&&this.italics===x.italics&&this.background===x.background&&this.flash===x.flash},m.copy=function(x){this.foreground=x.foreground,this.underline=x.underline,this.italics=x.italics,this.background=x.background,this.flash=x.flash},m.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},P}(),g=function(){function P(C,x,T,I,L,Z){this.uchar=void 0,this.penState=void 0,this.uchar=C||" ",this.penState=new b(x,T,I,L,Z)}var m=P.prototype;return m.reset=function(){this.uchar=" ",this.penState.reset()},m.setChar=function(x,T){this.uchar=x,this.penState.copy(T)},m.setPenState=function(x){this.penState.copy(x)},m.equals=function(x){return this.uchar===x.uchar&&this.penState.equals(x.penState)},m.copy=function(x){this.uchar=x.uchar,this.penState.copy(x.penState)},m.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},P}(),v=function(){function P(C){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var x=0;x<u;x++)this.chars.push(new g);this.logger=C,this.pos=0,this.currPenState=new b}var m=P.prototype;return m.equals=function(x){for(var T=!0,I=0;I<u;I++)if(!this.chars[I].equals(x.chars[I])){T=!1;break}return T},m.copy=function(x){for(var T=0;T<u;T++)this.chars[T].copy(x.chars[T])},m.isEmpty=function(){for(var x=!0,T=0;T<u;T++)if(!this.chars[T].isEmpty()){x=!1;break}return x},m.setCursor=function(x){this.pos!==x&&(this.pos=x),this.pos<0?(this.logger.log(U.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(this.logger.log(U.DEBUG,"Too large cursor position "+this.pos),this.pos=u)},m.moveCursor=function(x){var T=this.pos+x;if(x>1)for(var I=this.pos+1;I<T+1;I++)this.chars[I].setPenState(this.currPenState);this.setCursor(T)},m.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},m.insertChar=function(x){x>=144&&this.backSpace();var T=V(x);this.pos>=u?this.logger.log(U.ERROR,"Cannot insert "+x.toString(16)+" ("+T+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(T,this.currPenState),this.moveCursor(1))},m.clearFromPos=function(x){var T;for(T=x;T<u;T++)this.chars[T].reset()},m.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},m.clearToEndOfRow=function(){this.clearFromPos(this.pos)},m.getTextString=function(){for(var x=[],T=!0,I=0;I<u;I++){var L=this.chars[I].uchar;" "!==L&&(T=!1),x.push(L)}return T?"":x.join("")},m.setPenStyles=function(x){this.currPenState.setStyles(x),this.chars[this.pos].setPenState(this.currPenState)},P}(),S=function(){function P(C){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var x=0;x<q;x++)this.rows.push(new v(C));this.logger=C,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var m=P.prototype;return m.reset=function(){for(var x=0;x<q;x++)this.rows[x].clear();this.currRow=14},m.equals=function(x){for(var T=!0,I=0;I<q;I++)if(!this.rows[I].equals(x.rows[I])){T=!1;break}return T},m.copy=function(x){for(var T=0;T<q;T++)this.rows[T].copy(x.rows[T])},m.isEmpty=function(){for(var x=!0,T=0;T<q;T++)if(!this.rows[T].isEmpty()){x=!1;break}return x},m.backSpace=function(){this.rows[this.currRow].backSpace()},m.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},m.insertChar=function(x){this.rows[this.currRow].insertChar(x)},m.setPen=function(x){this.rows[this.currRow].setPenStyles(x)},m.moveCursor=function(x){this.rows[this.currRow].moveCursor(x)},m.setCursor=function(x){this.logger.log(U.INFO,"setCursor: "+x),this.rows[this.currRow].setCursor(x)},m.setPAC=function(x){this.logger.log(U.INFO,"pacData = "+JSON.stringify(x));var T=x.row-1;if(this.nrRollUpRows&&T<this.nrRollUpRows-1&&(T=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==T){for(var I=0;I<q;I++)this.rows[I].clear();var L=this.currRow+1-this.nrRollUpRows,Z=this.lastOutputScreen;if(Z){var re=Z.rows[L].cueStartTime,ne=this.logger.time;if(re&&null!==ne&&re<ne)for(var oe=0;oe<this.nrRollUpRows;oe++)this.rows[T-this.nrRollUpRows+oe+1].copy(Z.rows[L+oe])}}this.currRow=T;var Te=this.rows[this.currRow];if(null!==x.indent){var Ce=Math.max(x.indent-1,0);Te.setCursor(x.indent),x.color=Te.chars[Ce].penState.foreground}this.setPen({foreground:x.color,underline:x.underline,italics:x.italics,background:"black",flash:!1})},m.setBkgData=function(x){this.logger.log(U.INFO,"bkgData = "+JSON.stringify(x)),this.backSpace(),this.setPen(x),this.insertChar(32)},m.setRollUpRows=function(x){this.nrRollUpRows=x},m.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(U.TEXT,this.getDisplayText());var T=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];T.clear(),this.rows.splice(this.currRow,0,T),this.logger.log(U.INFO,"Rolling up")}else this.logger.log(U.DEBUG,"roll_up but nrRollUpRows not set yet")},m.getDisplayText=function(x){x=x||!1;for(var T=[],I="",Z=0;Z<q;Z++){var re=this.rows[Z].getTextString();re&&T.push(x?"Row "+(Z+1)+": '"+re+"'":re.trim())}return T.length>0&&(I=x?"["+T.join(" | ")+"]":T.join("\n")),I},m.getTextAndFormat=function(){return this.rows},P}(),w=function(){function P(C,x,T){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=C,this.outputFilter=x,this.mode=null,this.verbose=0,this.displayedMemory=new S(T),this.nonDisplayedMemory=new S(T),this.lastOutputScreen=new S(T),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=T}var m=P.prototype;return m.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},m.getHandler=function(){return this.outputFilter},m.setHandler=function(x){this.outputFilter=x},m.setPAC=function(x){this.writeScreen.setPAC(x)},m.setBkgData=function(x){this.writeScreen.setBkgData(x)},m.setMode=function(x){x!==this.mode&&(this.mode=x,this.logger.log(U.INFO,"MODE="+x),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=x)},m.insertChars=function(x){for(var T=0;T<x.length;T++)this.writeScreen.insertChar(x[T]);this.logger.log(U.INFO,(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(U.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},m.ccRCL=function(){this.logger.log(U.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},m.ccBS=function(){this.logger.log(U.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},m.ccAOF=function(){},m.ccAON=function(){},m.ccDER=function(){this.logger.log(U.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},m.ccRU=function(x){this.logger.log(U.INFO,"RU("+x+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(x)},m.ccFON=function(){this.logger.log(U.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},m.ccRDC=function(){this.logger.log(U.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},m.ccTR=function(){this.logger.log(U.INFO,"TR"),this.setMode("MODE_TEXT")},m.ccRTD=function(){this.logger.log(U.INFO,"RTD"),this.setMode("MODE_TEXT")},m.ccEDM=function(){this.logger.log(U.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},m.ccCR=function(){this.logger.log(U.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},m.ccENM=function(){this.logger.log(U.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},m.ccEOC=function(){if(this.logger.log(U.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var x=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=x,this.writeScreen=this.nonDisplayedMemory,this.logger.log(U.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},m.ccTO=function(x){this.logger.log(U.INFO,"TO("+x+") - Tab Offset"),this.writeScreen.moveCursor(x)},m.ccMIDROW=function(x){var T={flash:!1};if(T.underline=x%2==1,T.italics=x>=46,T.italics)T.foreground="white";else{var I=Math.floor(x/2)-16;T.foreground=["white","green","blue","cyan","red","yellow","magenta"][I]}this.logger.log(U.INFO,"MIDROW: "+JSON.stringify(T)),this.writeScreen.setPen(T)},m.outputDataUpdate=function(x){void 0===x&&(x=!1);var T=this.logger.time;null!==T&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,T,this.lastOutputScreen),x&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:T):this.cueStartTime=T,this.lastOutputScreen.copy(this.displayedMemory))},m.cueSplitAtTime=function(x){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.displayedMemory),this.cueStartTime=x))},P}();function _(P,m,C){C.a=P,C.b=m}function c(P,m,C){return C.a===P&&C.b===m}const d=function(){function P(C,x,T){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var I=new R;this.channels=[null,new w(C,x,I),new w(C+1,T,I)],this.cmdHistory={a:null,b:null},this.logger=I}var m=P.prototype;return m.getHandler=function(x){return this.channels[x].getHandler()},m.setHandler=function(x,T){this.channels[x].setHandler(T)},m.addData=function(x,T){var I,L,Z,re=!1;this.logger.time=x;for(var ne=0;ne<T.length;ne+=2)if(Z=127&T[ne+1],0!=(L=127&T[ne])||0!==Z){if(this.logger.log(U.DATA,"["+M([T[ne],T[ne+1]])+"] -> ("+M([L,Z])+")"),(I=this.parseCmd(L,Z))||(I=this.parseMidrow(L,Z)),I||(I=this.parsePAC(L,Z)),I||(I=this.parseBackgroundAttributes(L,Z)),!I&&(re=this.parseChars(L,Z))){var oe=this.currentChannel;oe&&oe>0?this.channels[oe].insertChars(re):this.logger.log(U.WARNING,"No channel found yet. TEXT-MODE?")}!I&&!re&&this.logger.log(U.WARNING,"Couldn't parse cleaned data "+M([L,Z])+" orig: "+M([T[ne],T[ne+1]]))}},m.parseCmd=function(x,T){var I=this.cmdHistory;if(!((20===x||28===x||21===x||29===x)&&T>=32&&T<=47||(23===x||31===x)&&T>=33&&T<=35))return!1;if(c(x,T,I))return _(null,null,I),this.logger.log(U.DEBUG,"Repeated command ("+M([x,T])+") is dropped"),!0;var re=20===x||21===x||23===x?1:2,ne=this.channels[re];return 20===x||21===x||28===x||29===x?32===T?ne.ccRCL():33===T?ne.ccBS():34===T?ne.ccAOF():35===T?ne.ccAON():36===T?ne.ccDER():37===T?ne.ccRU(2):38===T?ne.ccRU(3):39===T?ne.ccRU(4):40===T?ne.ccFON():41===T?ne.ccRDC():42===T?ne.ccTR():43===T?ne.ccRTD():44===T?ne.ccEDM():45===T?ne.ccCR():46===T?ne.ccENM():47===T&&ne.ccEOC():ne.ccTO(T-32),_(x,T,I),this.currentChannel=re,!0},m.parseMidrow=function(x,T){var I=0;if((17===x||25===x)&&T>=32&&T<=47){if((I=17===x?1:2)!==this.currentChannel)return this.logger.log(U.ERROR,"Mismatch channel in midrow parsing"),!1;var L=this.channels[I];return!!L&&(L.ccMIDROW(T),this.logger.log(U.DEBUG,"MIDROW ("+M([x,T])+")"),!0)}return!1},m.parsePAC=function(x,T){var L=this.cmdHistory;if(!((x>=17&&x<=23||x>=25&&x<=31)&&T>=64&&T<=127||(16===x||24===x)&&T>=64&&T<=95))return!1;if(c(x,T,L))return _(null,null,L),!0;var ne=x<=23?1:2,oe=this.channels[ne];return!!oe&&(oe.setPAC(this.interpretPAC(T>=64&&T<=95?1===ne?Y[x]:F[x]:1===ne?B[x]:O[x],T)),_(x,T,L),this.currentChannel=ne,!0)},m.interpretPAC=function(x,T){var I,L={color:null,italics:!1,indent:null,underline:!1,row:x};return L.underline=1==(1&(I=T>95?T-96:T-64)),I<=13?L.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(I/2)]:I<=15?(L.italics=!0,L.color="white"):L.indent=4*Math.floor((I-16)/2),L},m.parseChars=function(x,T){var I,re,L=null,Z=null;if(x>=25?(I=2,Z=x-8):(I=1,Z=x),Z>=17&&Z<=19?(this.logger.log(U.INFO,"Special char '"+V(re=17===Z?T+80:18===Z?T+112:T+144)+"' in channel "+I),L=[re]):x>=32&&x<=127&&(L=0===T?[x]:[x,T]),L){var ne=M(L);this.logger.log(U.DEBUG,"Char codes =  "+ne.join(",")),_(x,T,this.cmdHistory)}return L},m.parseBackgroundAttributes=function(x,T){if(!((16===x||24===x)&&T>=32&&T<=47||(23===x||31===x)&&T>=45&&T<=47))return!1;var Z,re={};return 16===x||24===x?(Z=Math.floor((T-32)/2),re.background=W[Z],T%2==1&&(re.background=re.background+"_semi")):45===T?re.background="transparent":(re.foreground="black",47===T&&(re.underline=!0)),this.channels[x<=23?1:2].setBkgData(re),_(x,T,this.cmdHistory),!0},m.reset=function(){for(var x=0;x<Object.keys(this.channels).length;x++){var T=this.channels[x];T&&T.reset()}this.cmdHistory={a:null,b:null}},m.cueSplitAtTime=function(x){for(var T=0;T<this.channels.length;T++){var I=this.channels[T];I&&I.cueSplitAtTime(x)}},P}()},"./src/utils/codecs.ts":
/*!*****************************!*\
                !*** ./src/utils/codecs.ts ***!
                \*****************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{isCodecSupportedInMp4:()=>V,isCodecType:()=>G});var ee={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function G(q,u){var Y=ee[u];return!!Y&&!0===Y[q.slice(0,4)]}function V(q,u){return MediaSource.isTypeSupported((u||"video")+'/mp4;codecs="'+q+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
                !*** ./src/utils/cues.ts ***!
                \***************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>Y});var ee=N(
/*! ./vttparser */
"./src/utils/vttparser.ts"),G=N(
/*! ./webvtt-parser */
"./src/utils/webvtt-parser.ts"),V=N(
/*! ./texttrack-utils */
"./src/utils/texttrack-utils.ts"),q=/\s/;const Y={newCue:function(F,O,W,U){for(var M,b,g,v,S,R=[],w=self.VTTCue||self.TextTrackCue,E=0;E<U.rows.length;E++)if(g=!0,v=0,S="",!(M=U.rows[E]).isEmpty()){for(var _=0;_<M.chars.length;_++)q.test(M.chars[_].uchar)&&g?v++:(S+=M.chars[_].uchar,g=!1);M.cueStartTime=O,O===W&&(W+=1e-4),v>=16?v--:v++;var c=(0,ee.fixLineBreaks)(S.trim()),h=(0,G.generateCueId)(O,W,c);(!F||!F.cues||!F.cues.getCueById(h))&&((b=new w(O,W,c)).id=h,b.line=E+1,b.align="left",b.position=10+Math.min(80,10*Math.floor(8*v/32)),R.push(b))}return F&&R.length&&(R.sort(function(d,P){return"auto"===d.line||"auto"===P.line?0:d.line>8&&P.line>8?P.line-d.line:d.line-P.line}),R.forEach(function(d){return(0,V.addCueToTrack)(F,d)})),R}}},"./src/utils/discontinuities.ts":
/*!**************************************!*\
                !*** ./src/utils/discontinuities.ts ***!
                \**************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{adjustSlidingStart:()=>F,alignMediaPlaylistByPDT:()=>R,alignPDT:()=>U,alignStream:()=>O,findDiscontinuousReferenceFrag:()=>Y,findFirstFragWithCC:()=>q,shouldAlignOnDiscontinuities:()=>u});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ./logger */
"./src/utils/logger.ts"),V=N(
/*! ../controller/level-helper */
"./src/controller/level-helper.ts");function q(M,b){for(var g=null,v=0,S=M.length;v<S;v++){var w=M[v];if(w&&w.cc===b){g=w;break}}return g}function u(M,b,g){return!(!b.details||!(g.endCC>g.startCC||M&&M.cc<g.startCC))}function Y(M,b,g){void 0===g&&(g=0);var v=M.fragments,S=b.fragments;if(S.length&&v.length){var w=q(v,S[0].cc);if(w&&(!w||w.startPTS))return w;G.logger.log("No frag in previous level to align on")}else G.logger.log("No fragments to align")}function B(M,b){if(M){var g=M.start+b;M.start=M.startPTS=g,M.endPTS=g+M.duration}}function F(M,b){for(var g=b.fragments,v=0,S=g.length;v<S;v++)B(g[v],M);b.fragmentHint&&B(b.fragmentHint,M),b.alignedSliding=!0}function O(M,b,g){b&&(function W(M,b,g){if(u(M,g,b)){var v=Y(g.details,b);v&&(0,ee.isFiniteNumber)(v.start)&&(G.logger.log("Adjusting PTS using last level due to CC increase within current level "+b.url),F(v.start,b))}}(M,g,b),!g.alignedSliding&&b.details&&U(g,b.details),!g.alignedSliding&&b.details&&!g.skippedSegments&&(0,V.adjustSliding)(b.details,g))}function U(M,b){if(b.fragments.length&&M.hasProgramDateTime&&b.hasProgramDateTime){var g=b.fragments[0].programDateTime,v=M.fragments[0].programDateTime,S=(v-g)/1e3+b.fragments[0].start;S&&(0,ee.isFiniteNumber)(S)&&(G.logger.log("Adjusting PTS using programDateTime delta "+(v-g)+"ms, sliding:"+S.toFixed(3)+" "+M.url+" "),F(S,M))}}function R(M,b){if(M.hasProgramDateTime&&b.hasProgramDateTime){var g=M.fragments,v=b.fragments;if(g.length&&v.length){var w=v[Math.round(v.length/2)-1],E=q(g,w.cc)||g[Math.round(g.length/2)-1],_=w.programDateTime,c=E.programDateTime;null!==_&&null!==c&&F((c-_)/1e3-(E.start-w.start),M)}}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
                !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
                \***********************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>V});var ee=N(
/*! ../utils/ewma */
"./src/utils/ewma.ts");const V=function(){function q(Y,B,F){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=F,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ee.default(Y),this.fast_=new ee.default(B)}var u=q.prototype;return u.update=function(B,F){var O=this.slow_,W=this.fast_;this.slow_.halfLife!==B&&(this.slow_=new ee.default(B,O.getEstimate(),O.getTotalWeight())),this.fast_.halfLife!==F&&(this.fast_=new ee.default(F,W.getEstimate(),W.getTotalWeight()))},u.sample=function(B,F){var W=(B=Math.max(B,this.minDelayMs_))/1e3,U=8*F/W;this.fast_.sample(W,U),this.slow_.sample(W,U)},u.canEstimate=function(){var B=this.fast_;return B&&B.getTotalWeight()>=this.minWeight_},u.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},u.destroy=function(){},q}()},"./src/utils/ewma.ts":
/*!***************************!*\
                !*** ./src/utils/ewma.ts ***!
                \***************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>G});const G=function(){function V(u,Y,B){void 0===Y&&(Y=0),void 0===B&&(B=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=u,this.alpha_=u?Math.exp(Math.log(.5)/u):0,this.estimate_=Y,this.totalWeight_=B}var q=V.prototype;return q.sample=function(Y,B){var F=Math.pow(this.alpha_,Y);this.estimate_=B*(1-F)+F*this.estimate_,this.totalWeight_+=Y},q.getTotalWeight=function(){return this.totalWeight_},q.getEstimate=function(){if(this.alpha_){var Y=1-Math.pow(this.alpha_,this.totalWeight_);if(Y)return this.estimate_/Y}return this.estimate_},V}()},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
                !*** ./src/utils/fetch-loader.ts ***!
                \***********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>S,fetchSupported:()=>R});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ../loader/load-stats */
"./src/loader/load-stats.ts"),V=N(
/*! ../demux/chunk-cache */
"./src/demux/chunk-cache.ts");function u(w){var E="function"==typeof Map?new Map:void 0;return u=function(c){if(null===c||!function F(w){return-1!==Function.toString.call(w).indexOf("[native code]")}(c))return c;if("function"!=typeof c)throw new TypeError("Super expression must either be null or a function");if(typeof E<"u"){if(E.has(c))return E.get(c);E.set(c,h)}function h(){return Y(c,arguments,W(this).constructor)}return h.prototype=Object.create(c.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),O(h,c)},u(w)}function Y(w,E,_){return(Y=B()?Reflect.construct.bind():function(h,d,P){var m=[null];m.push.apply(m,d);var x=new(Function.bind.apply(h,m));return P&&O(x,P.prototype),x}).apply(null,arguments)}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(w,E){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,h){return c.__proto__=h,c})(w,E)}function W(w){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)})(w)}function U(){return U=Object.assign?Object.assign.bind():function(w){for(var E=1;E<arguments.length;E++){var _=arguments[E];for(var c in _)Object.prototype.hasOwnProperty.call(_,c)&&(w[c]=_[c])}return w},U.apply(this,arguments)}function R(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var M=function(){function w(_){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=_.fetchSetup||g,this.controller=new self.AbortController,this.stats=new G.LoadStats}var E=w.prototype;return E.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},E.abortInternal=function(){var c=this.response;(!c||!c.ok)&&(this.stats.aborted=!0,this.controller.abort())},E.abort=function(){var c;this.abortInternal(),null!==(c=this.callbacks)&&void 0!==c&&c.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},E.load=function(c,h,d){var P=this,m=this.stats;if(m.loading.start)throw new Error("Loader can only be used once.");m.loading.start=self.performance.now();var C=function b(w,E){var _={method:"GET",mode:"cors",credentials:"same-origin",signal:E,headers:new self.Headers(U({},w.headers))};return w.rangeEnd&&_.headers.set("Range","bytes="+w.rangeStart+"-"+String(w.rangeEnd-1)),_}(c,this.controller.signal),x=d.onProgress,T="arraybuffer"===c.responseType,I=T?"byteLength":"length";this.context=c,this.config=h,this.callbacks=d,this.request=this.fetchSetup(c,C),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){P.abortInternal(),d.onTimeout(m,c,P.response)},h.timeout),self.fetch(this.request).then(function(L){if(P.response=P.loader=L,!L.ok)throw new v(L.statusText||"fetch, bad network response",L.status,L);return m.loading.first=Math.max(self.performance.now(),m.loading.start),m.total=parseInt(L.headers.get("Content-Length")||"0"),x&&(0,ee.isFiniteNumber)(h.highWaterMark)?P.loadProgressively(L,m,c,h.highWaterMark,x):T?L.arrayBuffer():L.text()}).then(function(L){var Z=P.response;self.clearTimeout(P.requestTimeout),m.loading.end=Math.max(self.performance.now(),m.loading.first),m.loaded=m.total=L[I];var re={url:Z.url,data:L};x&&!(0,ee.isFiniteNumber)(h.highWaterMark)&&x(m,c,L,Z),d.onSuccess(re,m,c,Z)}).catch(function(L){self.clearTimeout(P.requestTimeout),m.aborted||d.onError({code:L&&L.code||0,text:L?L.message:null},c,L?L.details:null)})},E.getCacheAge=function(){var c=null;if(this.response){var h=this.response.headers.get("age");c=h?parseFloat(h):null}return c},E.loadProgressively=function(c,h,d,P,m){void 0===P&&(P=0);var C=new V.default,x=c.body.getReader();return function I(){return x.read().then(function(L){if(L.done)return C.dataLength&&m(h,d,C.flush(),c),Promise.resolve(new ArrayBuffer(0));var Z=L.value,re=Z.length;return h.loaded+=re,re<P||C.dataLength?(C.push(Z),C.dataLength>=P&&m(h,d,C.flush(),c)):m(h,d,Z,c),I()}).catch(function(){return Promise.reject()})}()},w}();function g(w,E){return new self.Request(w.url,E)}var v=function(w){function E(_,c,h){var d;return(d=w.call(this,_)||this).code=void 0,d.details=void 0,d.code=c,d.details=h,d}return function q(w,E){w.prototype=Object.create(E.prototype),w.prototype.constructor=w,O(w,E)}(E,w),E}(u(Error));const S=M},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
                !*** ./src/utils/imsc1-ttml-parser.ts ***!
                \****************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{IMSC1_CODEC:()=>F,parseIMSC1:()=>R});var ee=N(
/*! ./mp4-tools */
"./src/utils/mp4-tools.ts"),G=N(
/*! ./vttparser */
"./src/utils/vttparser.ts"),V=N(
/*! ./vttcue */
"./src/utils/vttcue.ts"),q=N(
/*! ../demux/id3 */
"./src/demux/id3.ts"),u=N(
/*! ./timescale-conversion */
"./src/utils/timescale-conversion.ts"),Y=N(
/*! ./webvtt-parser */
"./src/utils/webvtt-parser.ts");function B(){return B=Object.assign?Object.assign.bind():function(d){for(var P=1;P<arguments.length;P++){var m=arguments[P];for(var C in m)Object.prototype.hasOwnProperty.call(m,C)&&(d[C]=m[C])}return d},B.apply(this,arguments)}var F="stpp.ttml.im1t",O=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,W=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,U={left:"start",center:"center",right:"end",start:"start",end:"end"};function R(d,P,m,C,x){var T=(0,ee.findBox)(new Uint8Array(d),["mdat"]);if(0!==T.length){var I=T.map(function(Z){return(0,q.utf8ArrayToStr)(Z)}),L=(0,u.toTimescaleFromScale)(P,1,m);try{I.forEach(function(Z){return C(function M(d,P){var x=(new DOMParser).parseFromString(d,"text/xml").getElementsByTagName("tt")[0];if(!x)throw new Error("Invalid ttml");var T={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},I=Object.keys(T).reduce(function(oe,Te){return oe[Te]=x.getAttribute("ttp:"+Te)||T[Te],oe},{}),L="preserve"!==x.getAttribute("xml:space"),Z=g(b(x,"styling","style")),re=g(b(x,"layout","region")),ne=b(x,"body","[begin]");return[].map.call(ne,function(oe){var Te=v(oe,L);if(!Te||!oe.hasAttribute("begin"))return null;var ye=_(oe.getAttribute("begin"),I),Ce=_(oe.getAttribute("dur"),I),we=_(oe.getAttribute("end"),I);if(null===ye)throw E(oe);if(null===we){if(null===Ce)throw E(oe);we=ye+Ce}var Be=new V.default(ye-P,we-P,Te);Be.id=(0,Y.generateCueId)(Be.startTime,Be.endTime,Be.text);var Ze=re[oe.getAttribute("region")],st=Z[oe.getAttribute("style")];Be.position=10,Be.size=80;var ct=function S(d,P,m){var C="http://www.w3.org/ns/ttml#styling",x=null,I=null!=d&&d.hasAttribute("style")?d.getAttribute("style"):null;return I&&m.hasOwnProperty(I)&&(x=m[I]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(L,Z){var re=w(P,C,Z)||w(d,C,Z)||w(x,C,Z);return re&&(L[Z]=re),L},{})}(Ze,st,Z),yt=ct.textAlign;if(yt){var _t=U[yt];_t&&(Be.lineAlign=_t),Be.align=yt}return B(Be,ct),Be}).filter(function(oe){return null!==oe})}(Z,L))})}catch(Z){x(Z)}}else x(new Error("Could not parse IMSC1 mdat"))}function b(d,P,m){var C=d.getElementsByTagName(P)[0];return C?[].slice.call(C.querySelectorAll(m)):[]}function g(d){return d.reduce(function(P,m){var C=m.getAttribute("xml:id");return C&&(P[C]=m),P},{})}function v(d,P){return[].slice.call(d.childNodes).reduce(function(m,C,x){var T;return"br"===C.nodeName&&x?m+"\n":null!==(T=C.childNodes)&&void 0!==T&&T.length?v(C,P):P?m+C.textContent.trim().replace(/\s+/g," "):m+C.textContent},"")}function w(d,P,m){return d&&d.hasAttributeNS(P,m)?d.getAttributeNS(P,m):null}function E(d){return new Error("Could not parse ttml timestamp "+d)}function _(d,P){if(!d)return null;var m=(0,G.parseTimeStamp)(d);return null===m&&(O.test(d)?m=function c(d,P){var m=O.exec(d);return 3600*(0|m[1])+60*(0|m[2])+(0|m[3])+((0|m[4])+(0|m[5])/P.subFrameRate)/P.frameRate}(d,P):W.test(d)&&(m=function h(d,P){var m=W.exec(d),C=Number(m[1]);switch(m[2]){case"h":return 3600*C;case"m":return 60*C;case"ms":return 1e3*C;case"f":return C/P.frameRate;case"t":return C/P.tickRate}return C}(d,P))),m}},"./src/utils/logger.ts":
/*!*****************************!*\
                !*** ./src/utils/logger.ts ***!
                \*****************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{enableLogs:()=>Y,logger:()=>B});var ee=function(){},G={trace:ee,debug:ee,log:ee,warn:ee,info:ee,error:ee},V=G;function q(F){var O=self.console[F];return O?O.bind(self.console,"["+F+"] >"):ee}function Y(F,O){if(self.console&&!0===F||"object"==typeof F){!function u(F){for(var O=arguments.length,W=new Array(O>1?O-1:0),U=1;U<O;U++)W[U-1]=arguments[U];W.forEach(function(R){V[R]=F[R]?F[R].bind(F):q(R)})}(F,"debug","log","info","warn","error");try{V.log('Debug logs enabled for "'+O+'"')}catch{V=G}}else V=G}var B=G},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
                !*** ./src/utils/mediakeys-helper.ts ***!
                \***************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{KeySystems:()=>ee,requestMediaKeySystemAccess:()=>G});var ee=(()=>{return(V=ee||(ee={})).WIDEVINE="com.widevine.alpha",V.PLAYREADY="com.microsoft.playready",ee;var V})(),G=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
                !*** ./src/utils/mediasource-helper.ts ***!
                \*****************************************/(Se,ue,N)=>{"use strict";function ee(){return self.MediaSource||self.WebKitMediaSource}N.r(ue),N.d(ue,{getMediaSource:()=>ee})},"./src/utils/mp4-tools.ts":
/*!********************************!*\
                !*** ./src/utils/mp4-tools.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{RemuxerTrackIdConfig:()=>Y,appendUint8Array:()=>_,bin2str:()=>B,computeRawDurationFromSamples:()=>S,discardEPB:()=>m,findBox:()=>R,getDuration:()=>v,getStartDTS:()=>g,offsetStartDTS:()=>w,parseEmsg:()=>C,parseInitSegment:()=>b,parseSEIMessageFromNALu:()=>P,parseSamples:()=>c,parseSegmentIndex:()=>M,readSint32:()=>W,readUint16:()=>F,readUint32:()=>O,segmentValidRange:()=>E,writeUint32:()=>U});var ee=N(
/*! ./typed-array */
"./src/utils/typed-array.ts"),G=N(
/*! ../loader/fragment */
"./src/loader/fragment.ts"),V=N(
/*! ../demux/id3 */
"./src/demux/id3.ts"),q=Math.pow(2,32)-1,u=[].push,Y={video:1,audio:2,id3:3,text:4};function B(x){return String.fromCharCode.apply(null,x)}function F(x,T){var I=x[T]<<8|x[T+1];return I<0?65536+I:I}function O(x,T){var I=W(x,T);return I<0?4294967296+I:I}function W(x,T){return x[T]<<24|x[T+1]<<16|x[T+2]<<8|x[T+3]}function U(x,T,I){x[T]=I>>24,x[T+1]=I>>16&255,x[T+2]=I>>8&255,x[T+3]=255&I}function R(x,T){var I=[];if(!T.length)return I;for(var L=x.byteLength,Z=0;Z<L;){var re=O(x,Z),oe=re>1?Z+re:L;if(B(x.subarray(Z+4,Z+8))===T[0])if(1===T.length)I.push(x.subarray(Z+8,oe));else{var Te=R(x.subarray(Z+8,oe),T.slice(1));Te.length&&u.apply(I,Te)}Z=oe}return I}function M(x){var T=[],I=x[0],L=8,Z=O(x,L);L+=4,L+=0===I?8:16;var oe=x.length+0,Te=F(x,L+=2);L+=2;for(var ye=0;ye<Te;ye++){var Ce=L,we=O(x,Ce);Ce+=4;var Be=2147483647&we;if(1==(2147483648&we)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var st=O(x,Ce);Ce+=4,T.push({referenceSize:Be,subsegmentDuration:st,info:{duration:st/Z,start:oe,end:oe+Be-1}}),oe+=Be,L=Ce+=4}return{earliestPresentationTime:0,timescale:Z,version:I,referencesCount:Te,references:T}}function b(x){for(var T=[],I=R(x,["moov","trak"]),L=0;L<I.length;L++){var Z=I[L],re=R(Z,["tkhd"])[0];if(re){var ne=re[0],oe=0===ne?12:20,Te=O(re,oe),ye=R(Z,["mdia","mdhd"])[0];if(ye){var Ce=O(ye,oe=0===(ne=ye[0])?12:20),we=R(Z,["mdia","hdlr"])[0];if(we){var Be=B(we.subarray(8,12)),Ze={soun:G.ElementaryStreamTypes.AUDIO,vide:G.ElementaryStreamTypes.VIDEO}[Be];if(Ze){var st=R(Z,["mdia","minf","stbl","stsd"])[0],ct=void 0;st&&(ct=B(st.subarray(12,16))),T[Te]={timescale:Ce,type:Ze},T[Ze]={timescale:Ce,id:Te,codec:ct}}}}}}return R(x,["moov","mvex","trex"]).forEach(function(_t){var ot=O(_t,4),bt=T[ot];bt&&(bt.default={duration:O(_t,12),flags:O(_t,20)})}),T}function g(x,T){return R(T,["moof","traf"]).reduce(function(I,L){var Z=R(L,["tfdt"])[0],re=Z[0],ne=R(L,["tfhd"]).reduce(function(oe,Te){var ye=O(Te,4),Ce=x[ye];if(Ce){var we=O(Z,4);1===re&&(we*=Math.pow(2,32),we+=O(Z,8));var Ze=we/(Ce.timescale||9e4);if(isFinite(Ze)&&(null===oe||Ze<oe))return Ze}return oe},null);return null!==ne&&isFinite(ne)&&(null===I||ne<I)?ne:I},null)||0}function v(x,T){for(var I=0,L=0,Z=0,re=R(x,["moof","traf"]),ne=0;ne<re.length;ne++){var oe=re[ne],Te=R(oe,["tfhd"])[0],Ce=T[O(Te,4)];if(Ce){var we=Ce.default,Be=O(Te,0)|we?.flags,Ze=we?.duration;8&Be&&(Ze=O(Te,2&Be?12:8));for(var st=Ce.timescale||9e4,ct=R(oe,["trun"]),yt=0;yt<ct.length;yt++)!(I=S(ct[yt]))&&Ze&&(I=Ze*O(ct[yt],4)),Ce.type===G.ElementaryStreamTypes.VIDEO?L+=I/st:Ce.type===G.ElementaryStreamTypes.AUDIO&&(Z+=I/st)}}if(0===L&&0===Z){for(var ot=0,bt=R(x,["sidx"]),Ct=0;Ct<bt.length;Ct++){var nt=M(bt[Ct]);null!=nt&&nt.references&&(ot+=nt.references.reduce(function(Ht,Kt){return Ht+Kt.info.duration||0},0))}return ot}return L||Z}function S(x){var T=O(x,0),I=8;1&T&&(I+=4),4&T&&(I+=4);for(var L=0,Z=O(x,4),re=0;re<Z;re++)256&T&&(L+=O(x,I),I+=4),512&T&&(I+=4),1024&T&&(I+=4),2048&T&&(I+=4);return L}function w(x,T,I){R(T,["moof","traf"]).forEach(function(L){R(L,["tfhd"]).forEach(function(Z){var re=O(Z,4),ne=x[re];if(ne){var oe=ne.timescale||9e4;R(L,["tfdt"]).forEach(function(Te){var ye=Te[0],Ce=O(Te,4);if(0===ye)Ce-=I*oe,U(Te,4,Ce=Math.max(Ce,0));else{Ce*=Math.pow(2,32),Ce+=O(Te,8),Ce-=I*oe,Ce=Math.max(Ce,0);var we=Math.floor(Ce/(q+1)),Be=Math.floor(Ce%(q+1));U(Te,4,we),U(Te,8,Be)}})}})})}function E(x){var T={valid:null,remainder:null},I=R(x,["moof"]);if(!I)return T;if(I.length<2)return T.remainder=x,T;var L=I[I.length-1];return T.valid=(0,ee.sliceUint8)(x,0,L.byteOffset-8),T.remainder=(0,ee.sliceUint8)(x,L.byteOffset-8),T}function _(x,T){var I=new Uint8Array(x.length+T.length);return I.set(x),I.set(T,x.length),I}function c(x,T){var I=[],L=T.samples,Z=T.timescale,re=T.id,ne=!1;return R(L,["moof"]).map(function(Te){var ye=Te.byteOffset-8;R(Te,["traf"]).map(function(we){var Be=R(we,["tfdt"]).map(function(Ze){var st=Ze[0],ct=O(Ze,4);return 1===st&&(ct*=Math.pow(2,32),ct+=O(Ze,8)),ct/Z})[0];return void 0!==Be&&(x=Be),R(we,["tfhd"]).map(function(Ze){var st=O(Ze,4),ct=16777215&O(Ze,0),bt=0,Ct=0!=(16&ct),nt=0,Ht=0!=(32&ct),Kt=8;st===re&&(0!=(1&ct)&&(Kt+=8),0!=(2&ct)&&(Kt+=4),0!=(8&ct)&&(bt=O(Ze,Kt),Kt+=4),Ct&&(nt=O(Ze,Kt),Kt+=4),Ht&&(Kt+=4),"video"===T.type&&(ne=function h(x){if(!x)return!1;var T=x.indexOf("."),I=T<0?x:x.substring(0,T);return"hvc1"===I||"hev1"===I||"dvh1"===I||"dvhe"===I}(T.codec)),R(we,["trun"]).map(function(Ut){var tr=Ut[0],It=16777215&O(Ut,0),Xt=0!=(1&It),sr=0,fr=0!=(4&It),ir=0!=(256&It),vr=0,ce=0!=(512&It),X=0,J=0!=(1024&It),be=0!=(2048&It),Le=0,He=O(Ut,4),Ve=8;Xt&&(sr=O(Ut,Ve),Ve+=4),fr&&(Ve+=4);for(var Pt=sr+ye,Zt=0;Zt<He;Zt++){if(ir?(vr=O(Ut,Ve),Ve+=4):vr=bt,ce?(X=O(Ut,Ve),Ve+=4):X=nt,J&&(Ve+=4),be&&(Le=0===tr?O(Ut,Ve):W(Ut,Ve),Ve+=4),T.type===G.ElementaryStreamTypes.VIDEO)for(var Bt=0;Bt<X;){var jt=O(L,Pt);d(ne,L[Pt+=4])&&P(L.subarray(Pt,Pt+jt),ne?2:1,x+Le/Z,I),Pt+=jt,Bt+=jt+4}x+=vr/Z}}))})})}),I}function d(x,T){if(x){var I=T>>1&63;return 39===I||40===I}return 6==(31&T)}function P(x,T,I,L){var Z=m(x),re=0;re+=T;for(var ne=0,oe=0,Te=!1,ye=0;re<Z.length;){ne=0;do{if(re>=Z.length)break;ne+=ye=Z[re++]}while(255===ye);oe=0;do{if(re>=Z.length)break;oe+=ye=Z[re++]}while(255===ye);var Ce=Z.length-re;if(!Te&&4===ne&&re<Z.length){if(Te=!0,181===Z[re++]){var Be=F(Z,re);if(re+=2,49===Be){var Ze=O(Z,re);if(re+=4,1195456820===Ze){var st=Z[re++];if(3===st){var ct=Z[re++],_t=64&ct,ot=_t?2+3*(31&ct):0,bt=new Uint8Array(ot);if(_t){bt[0]=ct;for(var Ct=1;Ct<ot;Ct++)bt[Ct]=Z[re++]}L.push({type:st,payloadType:ne,pts:I,bytes:bt})}}}}}else if(5===ne&&oe<Ce){if(Te=!0,oe>16){for(var nt=[],Ht=0;Ht<16;Ht++){var Kt=Z[re++].toString(16);nt.push(1==Kt.length?"0"+Kt:Kt),(3===Ht||5===Ht||7===Ht||9===Ht)&&nt.push("-")}for(var Ut=oe-16,tr=new Uint8Array(Ut),It=0;It<Ut;It++)tr[It]=Z[re++];L.push({payloadType:ne,pts:I,uuid:nt.join(""),userData:(0,V.utf8ArrayToStr)(tr),userDataBytes:tr})}}else if(oe<Ce)re+=oe;else if(oe>Ce)break}}function m(x){for(var T=x.byteLength,I=[],L=1;L<T-2;)0===x[L]&&0===x[L+1]&&3===x[L+2]?(I.push(L+2),L+=2):L++;if(0===I.length)return x;var Z=T-I.length,re=new Uint8Array(Z),ne=0;for(L=0;L<Z;ne++,L++)ne===I[0]&&(ne++,I.shift()),re[L]=x[ne];return re}function C(x){var T=x[0],I="",L="",Z=0,re=0,ne=0,oe=0,Te=0,ye=0;if(0===T){for(;"\0"!==B(x.subarray(ye,ye+1));)I+=B(x.subarray(ye,ye+1)),ye+=1;for(I+=B(x.subarray(ye,ye+1)),ye+=1;"\0"!==B(x.subarray(ye,ye+1));)L+=B(x.subarray(ye,ye+1)),ye+=1;L+=B(x.subarray(ye,ye+1)),ye+=1,Z=O(x,12),re=O(x,16),oe=O(x,20),Te=O(x,24),ye=28}else if(1===T){Z=O(x,ye+=4);var Ce=O(x,ye+=4),we=O(x,ye+=4);for(ye+=4,ne=Math.pow(2,32)*Ce+we,Number.isSafeInteger(ne)||(ne=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),oe=O(x,ye),Te=O(x,ye+=4),ye+=4;"\0"!==B(x.subarray(ye,ye+1));)I+=B(x.subarray(ye,ye+1)),ye+=1;for(I+=B(x.subarray(ye,ye+1)),ye+=1;"\0"!==B(x.subarray(ye,ye+1));)L+=B(x.subarray(ye,ye+1)),ye+=1;L+=B(x.subarray(ye,ye+1)),ye+=1}return{schemeIdUri:I,value:L,timeScale:Z,presentationTime:ne,presentationTimeDelta:re,eventDuration:oe,id:Te,payload:x.subarray(ye,x.byteLength)}}},"./src/utils/output-filter.ts":
/*!************************************!*\
                !*** ./src/utils/output-filter.ts ***!
                \************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>ee});var ee=function(){function G(q,u){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=q,this.trackName=u}var V=G.prototype;return V.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},V.newCue=function(u,Y,B){(null===this.startTime||this.startTime>u)&&(this.startTime=u),this.endTime=Y,this.screen=B,this.timelineController.createCaptionsTrack(this.trackName)},V.reset=function(){this.cueRanges=[],this.startTime=null},G}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
                !*** ./src/utils/texttrack-utils.ts ***!
                \**************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{addCueToTrack:()=>V,clearCurrentCues:()=>q,getCuesInRange:()=>B,removeCuesInRange:()=>u,sendAddTrackEvent:()=>G});var ee=N(
/*! ./logger */
"./src/utils/logger.ts");function G(F,O){var W;try{W=new Event("addtrack")}catch{(W=document.createEvent("Event")).initEvent("addtrack",!1,!1)}W.track=F,O.dispatchEvent(W)}function V(F,O){var W=F.mode;if("disabled"===W&&(F.mode="hidden"),F.cues&&!F.cues.getCueById(O.id))try{if(F.addCue(O),!F.cues.getCueById(O.id))throw new Error("addCue is failed for: "+O)}catch(R){ee.logger.debug("[texttrack-utils]: "+R);var U=new self.TextTrackCue(O.startTime,O.endTime,O.text);U.id=O.id,F.addCue(U)}"disabled"===W&&(F.mode=W)}function q(F){var O=F.mode;if("disabled"===O&&(F.mode="hidden"),F.cues)for(var W=F.cues.length;W--;)F.removeCue(F.cues[W]);"disabled"===O&&(F.mode=O)}function u(F,O,W,U){var R=F.mode;if("disabled"===R&&(F.mode="hidden"),F.cues&&F.cues.length>0)for(var M=B(F.cues,O,W),b=0;b<M.length;b++)(!U||U(M[b]))&&F.removeCue(M[b]);"disabled"===R&&(F.mode=R)}function B(F,O,W){var U=[],R=function Y(F,O){if(O<F[0].startTime)return 0;var W=F.length-1;if(O>F[W].endTime)return-1;for(var U=0,R=W;U<=R;){var M=Math.floor((R+U)/2);if(O<F[M].startTime)R=M-1;else{if(!(O>F[M].startTime&&U<W))return M;U=M+1}}return F[U].startTime-O<O-F[R].startTime?U:R}(F,O);if(R>-1)for(var M=R,b=F.length;M<b;M++){var g=F[M];if(g.startTime>=O&&g.endTime<=W)U.push(g);else if(g.startTime>W)return U}return U}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
                !*** ./src/utils/time-ranges.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>G});const G={toString:function(q){for(var u="",Y=q.length,B=0;B<Y;B++)u+="["+q.start(B).toFixed(3)+","+q.end(B).toFixed(3)+"]";return u}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
                !*** ./src/utils/timescale-conversion.ts ***!
                \*******************************************/(Se,ue,N)=>{"use strict";function G(Y,B,F,O){void 0===F&&(F=1),void 0===O&&(O=!1);var W=Y*B*F;return O?Math.round(W):W}function V(Y,B,F,O){return void 0===F&&(F=1),void 0===O&&(O=!1),G(Y,B,1/F,O)}function q(Y,B){return void 0===B&&(B=!1),G(Y,1e3,1/9e4,B)}function u(Y,B){return void 0===B&&(B=1),G(Y,9e4,1/B)}N.r(ue),N.d(ue,{toMpegTsClockFromTimescale:()=>u,toMsFromMpegTsClock:()=>q,toTimescaleFromBase:()=>G,toTimescaleFromScale:()=>V})},"./src/utils/typed-array.ts":
/*!**********************************!*\
                !*** ./src/utils/typed-array.ts ***!
                \**********************************/(Se,ue,N)=>{"use strict";function ee(G,V,q){return Uint8Array.prototype.slice?G.slice(V,q):new Uint8Array(Array.prototype.slice.call(G,V,q))}N.r(ue),N.d(ue,{sliceUint8:()=>ee})},"./src/utils/vttcue.ts":
/*!*****************************!*\
                !*** ./src/utils/vttcue.ts ***!
                \*****************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>ee});const ee=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var G=["","lr","rl"],V=["start","middle","end","left","right"];function q(O,W){if("string"!=typeof W||!Array.isArray(O))return!1;var U=W.toLowerCase();return!!~O.indexOf(U)&&U}function Y(O){return q(V,O)}function B(O){for(var W=arguments.length,U=new Array(W>1?W-1:0),R=1;R<W;R++)U[R-1]=arguments[R];for(var M=1;M<arguments.length;M++){var b=arguments[M];for(var g in b)O[g]=b[g]}return O}function F(O,W,U){var R=this,M={enumerable:!0};R.hasBeenReset=!1;var b="",g=!1,v=O,S=W,w=U,E=null,_="",c=!0,h="auto",d="start",P=50,m="middle",C=50,x="middle";Object.defineProperty(R,"id",B({},M,{get:function(){return b},set:function(I){b=""+I}})),Object.defineProperty(R,"pauseOnExit",B({},M,{get:function(){return g},set:function(I){g=!!I}})),Object.defineProperty(R,"startTime",B({},M,{get:function(){return v},set:function(I){if("number"!=typeof I)throw new TypeError("Start time must be set to a number.");v=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"endTime",B({},M,{get:function(){return S},set:function(I){if("number"!=typeof I)throw new TypeError("End time must be set to a number.");S=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"text",B({},M,{get:function(){return w},set:function(I){w=""+I,this.hasBeenReset=!0}})),Object.defineProperty(R,"region",B({},M,{get:function(){return E},set:function(I){E=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"vertical",B({},M,{get:function(){return _},set:function(I){var L=function u(O){return q(G,O)}(I);if(!1===L)throw new SyntaxError("An invalid or illegal string was specified.");_=L,this.hasBeenReset=!0}})),Object.defineProperty(R,"snapToLines",B({},M,{get:function(){return c},set:function(I){c=!!I,this.hasBeenReset=!0}})),Object.defineProperty(R,"line",B({},M,{get:function(){return h},set:function(I){if("number"!=typeof I&&"auto"!==I)throw new SyntaxError("An invalid number or illegal string was specified.");h=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"lineAlign",B({},M,{get:function(){return d},set:function(I){var L=Y(I);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");d=L,this.hasBeenReset=!0}})),Object.defineProperty(R,"position",B({},M,{get:function(){return P},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");P=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"positionAlign",B({},M,{get:function(){return m},set:function(I){var L=Y(I);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");m=L,this.hasBeenReset=!0}})),Object.defineProperty(R,"size",B({},M,{get:function(){return C},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");C=I,this.hasBeenReset=!0}})),Object.defineProperty(R,"align",B({},M,{get:function(){return x},set:function(I){var L=Y(I);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");x=L,this.hasBeenReset=!0}})),R.displayState=void 0}return F.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},F}()},"./src/utils/vttparser.ts":
/*!********************************!*\
                !*** ./src/utils/vttparser.ts ***!
                \********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{VTTParser:()=>W,fixLineBreaks:()=>O,parseTimeStamp:()=>V});var ee=N(
/*! ./vttcue */
"./src/utils/vttcue.ts"),G=function(){function U(){}return U.prototype.decode=function(b,g){if(!b)return"";if("string"!=typeof b)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(b))},U}();function V(U){function R(b,g,v,S){return 3600*(0|b)+60*(0|g)+(0|v)+parseFloat(S||0)}var M=U.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return M?parseFloat(M[2])>59?R(M[2],M[3],0,M[4]):R(M[1],M[2],M[3],M[4]):null}var q=function(){function U(){this.values=Object.create(null)}var R=U.prototype;return R.set=function(b,g){!this.get(b)&&""!==g&&(this.values[b]=g)},R.get=function(b,g,v){return v?this.has(b)?this.values[b]:g[v]:this.has(b)?this.values[b]:g},R.has=function(b){return b in this.values},R.alt=function(b,g,v){for(var S=0;S<v.length;++S)if(g===v[S]){this.set(b,g);break}},R.integer=function(b,g){/^-?\d+$/.test(g)&&this.set(b,parseInt(g,10))},R.percent=function(b,g){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(g)){var v=parseFloat(g);if(v>=0&&v<=100)return this.set(b,v),!0}return!1},U}();function u(U,R,M,b){var g=b?U.split(b):[U];for(var v in g)if("string"==typeof g[v]){var S=g[v].split(M);2===S.length&&R(S[0],S[1])}}var Y=new ee.default(0,0,""),B="middle"===Y.align?"middle":"center";function F(U,R,M){var b=U;function g(){var w=V(U);if(null===w)throw new Error("Malformed timestamp: "+b);return U=U.replace(/^[^\sa-zA-Z-]+/,""),w}function S(){U=U.replace(/^\s+/,"")}if(S(),R.startTime=g(),S(),"--\x3e"!==U.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+b);U=U.slice(3),S(),R.endTime=g(),S(),function v(w,E){var _=new q;u(w,function(d,P){var m;switch(d){case"region":for(var C=M.length-1;C>=0;C--)if(M[C].id===P){_.set(d,M[C].region);break}break;case"vertical":_.alt(d,P,["rl","lr"]);break;case"line":m=P.split(","),_.integer(d,m[0]),_.percent(d,m[0])&&_.set("snapToLines",!1),_.alt(d,m[0],["auto"]),2===m.length&&_.alt("lineAlign",m[1],["start",B,"end"]);break;case"position":m=P.split(","),_.percent(d,m[0]),2===m.length&&_.alt("positionAlign",m[1],["start",B,"end","line-left","line-right","auto"]);break;case"size":_.percent(d,P);break;case"align":_.alt(d,P,["start",B,"end","left","right"])}},/:/,/\s/),E.region=_.get("region",null),E.vertical=_.get("vertical","");var c=_.get("line","auto");"auto"===c&&-1===Y.line&&(c=-1),E.line=c,E.lineAlign=_.get("lineAlign","start"),E.snapToLines=_.get("snapToLines",!0),E.size=_.get("size",100),E.align=_.get("align",B);var h=_.get("position","auto");"auto"===h&&50===Y.position&&(h="start"===E.align||"left"===E.align?0:"end"===E.align||"right"===E.align?100:50),E.position=h}(U,R)}function O(U){return U.replace(/<br(?: \/)?>/gi,"\n")}var W=function(){function U(){this.state="INITIAL",this.buffer="",this.decoder=new G,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var R=U.prototype;return R.parse=function(b){var g=this;function v(){var h=g.buffer,d=0;for(h=O(h);d<h.length&&"\r"!==h[d]&&"\n"!==h[d];)++d;var P=h.slice(0,d);return"\r"===h[d]&&++d,"\n"===h[d]&&++d,g.buffer=h.slice(d),P}b&&(g.buffer+=g.decoder.decode(b,{stream:!0}));try{var w="";if("INITIAL"===g.state){if(!/\r\n|\n/.test(g.buffer))return this;var E=(w=v()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!E||!E[0])throw new Error("Malformed WebVTT signature.");g.state="HEADER"}for(var _=!1;g.buffer;){if(!/\r\n|\n/.test(g.buffer))return this;switch(_?_=!1:w=v(),g.state){case"HEADER":/:/.test(w)?u(w,function(d,P){},/:/):w||(g.state="ID");continue;case"NOTE":w||(g.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(w)){g.state="NOTE";break}if(!w)continue;if(g.cue=new ee.default(0,0,""),g.state="CUE",-1===w.indexOf("--\x3e")){g.cue.id=w;continue}case"CUE":if(!g.cue){g.state="BADCUE";continue}try{F(w,g.cue,g.regionList)}catch{g.cue=null,g.state="BADCUE";continue}g.state="CUETEXT";continue;case"CUETEXT":var c=-1!==w.indexOf("--\x3e");if(!w||c&&(_=!0)){g.oncue&&g.cue&&g.oncue(g.cue),g.cue=null,g.state="ID";continue}if(null===g.cue)continue;g.cue.text&&(g.cue.text+="\n"),g.cue.text+=w;continue;case"BADCUE":w||(g.state="ID")}}}catch{"CUETEXT"===g.state&&g.cue&&g.oncue&&g.oncue(g.cue),g.cue=null,g.state="INITIAL"===g.state?"BADWEBVTT":"BADCUE"}return this},R.flush=function(){var b=this;try{if((b.cue||"HEADER"===b.state)&&(b.buffer+="\n\n",b.parse()),"INITIAL"===b.state||"BADWEBVTT"===b.state)throw new Error("Malformed WebVTT signature.")}catch(g){b.onparsingerror&&b.onparsingerror(g)}return b.onflush&&b.onflush(),this},U}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
                !*** ./src/utils/webvtt-parser.ts ***!
                \************************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{generateCueId:()=>W,parseWebVTT:()=>R});var ee=N(
/*! ./src/polyfills/number */
"./src/polyfills/number.ts"),G=N(
/*! ./vttparser */
"./src/utils/vttparser.ts"),V=N(
/*! ../demux/id3 */
"./src/demux/id3.ts"),q=N(
/*! ./timescale-conversion */
"./src/utils/timescale-conversion.ts"),u=N(
/*! ../remux/mp4-remuxer */
"./src/remux/mp4-remuxer.ts"),Y=/\r\n|\n\r|\n|\r/g,B=function(b,g,v){return void 0===v&&(v=0),b.slice(v,v+g.length)===g},O=function(b){for(var g=5381,v=b.length;v;)g=33*g^b.charCodeAt(--v);return(g>>>0).toString()};function W(M,b,g){return O(M.toString())+O(b.toString())+O(g)}function R(M,b,g,v,S,w,E,_){var T,c=new G.VTTParser,h=(0,V.utf8ArrayToStr)(new Uint8Array(M)).trim().replace(Y,"\n").split("\n"),d=[],P=(0,q.toMpegTsClockFromTimescale)(b,g),m="00:00.000",C=0,x=0,I=!0;c.oncue=function(L){var Z=v[S],re=v.ccOffset,ne=(C-P)/9e4;null!=Z&&Z.new&&(void 0!==x?re=v.ccOffset=Z.start:function(b,g,v){var S=b[g],w=b[S.prevCC];if(!w||!w.new&&S.new)return b.ccOffset=b.presentationOffset=S.start,void(S.new=!1);for(;null!==(E=w)&&void 0!==E&&E.new;){var E;b.ccOffset+=S.start-w.start,S.new=!1,w=b[(S=w).prevCC]}b.presentationOffset=v}(v,S,ne)),ne&&(re=ne-v.presentationOffset);var oe=L.endTime-L.startTime,Te=(0,u.normalizePts)(9e4*(L.startTime+re-x),9e4*w)/9e4;L.startTime=Math.max(Te,0),L.endTime=Math.max(Te+oe,0);var ye=L.text.trim();L.text=decodeURIComponent(encodeURIComponent(ye)),L.id||(L.id=W(L.startTime,L.endTime,ye)),L.endTime>0&&d.push(L)},c.onparsingerror=function(L){T=L},c.onflush=function(){T?_(T):E(d)},h.forEach(function(L){if(I){if(B(L,"X-TIMESTAMP-MAP=")){I=!1,L.slice(16).split(",").forEach(function(Z){B(Z,"LOCAL:")?m=Z.slice(6):B(Z,"MPEGTS:")&&(C=parseInt(Z.slice(7)))});try{x=function(b){var g=parseInt(b.slice(-3)),v=parseInt(b.slice(-6,-4)),S=parseInt(b.slice(-9,-7)),w=b.length>9?parseInt(b.substring(0,b.indexOf(":"))):0;if(!((0,ee.isFiniteNumber)(g)&&(0,ee.isFiniteNumber)(v)&&(0,ee.isFiniteNumber)(S)&&(0,ee.isFiniteNumber)(w)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+b);return g+=1e3*v,(g+=6e4*S)+36e5*w}(m)/1e3}catch(Z){T=Z}return}""===L&&(I=!1)}c.parse(L+"\n")}),c.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
                !*** ./src/utils/xhr-loader.ts ***!
                \*********************************/(Se,ue,N)=>{"use strict";N.r(ue),N.d(ue,{default:()=>u});var ee=N(
/*! ../utils/logger */
"./src/utils/logger.ts"),G=N(
/*! ../loader/load-stats */
"./src/loader/load-stats.ts"),V=/^age:\s*[\d.]+\s*$/m;const u=function(){function Y(F){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=F?F.xhrSetup:null,this.stats=new G.LoadStats,this.retryDelay=0}var B=Y.prototype;return B.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},B.abortInternal=function(){var O=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),O&&(O.onreadystatechange=null,O.onprogress=null,4!==O.readyState&&(this.stats.aborted=!0,O.abort()))},B.abort=function(){var O;this.abortInternal(),null!==(O=this.callbacks)&&void 0!==O&&O.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},B.load=function(O,W,U){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=O,this.config=W,this.callbacks=U,this.retryDelay=W.retryDelay,this.loadInternal()},B.loadInternal=function(){var O=this.config,W=this.context;if(O){var U=this.loader=new self.XMLHttpRequest,R=this.stats;R.loading.first=0,R.loaded=0;var M=this.xhrSetup;try{if(M)try{M(U,W.url)}catch{U.open("GET",W.url,!0),M(U,W.url)}U.readyState||U.open("GET",W.url,!0);var b=this.context.headers;if(b)for(var g in b)U.setRequestHeader(g,b[g])}catch(v){return void this.callbacks.onError({code:U.status,text:v.message},W,U)}W.rangeEnd&&U.setRequestHeader("Range","bytes="+W.rangeStart+"-"+(W.rangeEnd-1)),U.onreadystatechange=this.readystatechange.bind(this),U.onprogress=this.loadprogress.bind(this),U.responseType=W.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),O.timeout),U.send()}},B.readystatechange=function(){var O=this.context,W=this.loader,U=this.stats;if(O&&W){var R=W.readyState,M=this.config;if(!U.aborted&&R>=2)if(self.clearTimeout(this.requestTimeout),0===U.loading.first&&(U.loading.first=Math.max(self.performance.now(),U.loading.start)),4===R){W.onreadystatechange=null,W.onprogress=null;var b=W.status,g="arraybuffer"===W.responseType;if(b>=200&&b<300&&(g&&W.response||null!==W.responseText)){var v,S;if(U.loading.end=Math.max(self.performance.now(),U.loading.first),S=g?(v=W.response).byteLength:(v=W.responseText).length,U.loaded=U.total=S,!this.callbacks)return;var w=this.callbacks.onProgress;if(w&&w(U,O,v,W),!this.callbacks)return;this.callbacks.onSuccess({url:W.responseURL,data:v},U,O,W)}else U.retry>=M.maxRetry||b>=400&&b<499?(ee.logger.error(b+" while loading "+O.url),this.callbacks.onError({code:b,text:W.statusText},O,W)):(ee.logger.warn(b+" while loading "+O.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,M.maxRetryDelay),U.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),M.timeout)}},B.loadtimeout=function(){ee.logger.warn("timeout while loading "+this.context.url);var O=this.callbacks;O&&(this.abortInternal(),O.onTimeout(this.stats,this.context,this.loader))},B.loadprogress=function(O){var W=this.stats;W.loaded=O.loaded,O.lengthComputable&&(W.total=O.total)},B.getCacheAge=function(){var O=null;if(this.loader&&V.test(this.loader.getAllResponseHeaders())){var W=this.loader.getResponseHeader("age");O=W?parseFloat(W):null}return O},Y}()},"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
                !*** ./node_modules/eventemitter3/index.js ***!
                \*********************************************/Se=>{"use strict";var ue=Object.prototype.hasOwnProperty,N="~";function ee(){}function G(Y,B,F){this.fn=Y,this.context=B,this.once=F||!1}function V(Y,B,F,O,W){if("function"!=typeof F)throw new TypeError("The listener must be a function");var U=new G(F,O||Y,W),R=N?N+B:B;return Y._events[R]?Y._events[R].fn?Y._events[R]=[Y._events[R],U]:Y._events[R].push(U):(Y._events[R]=U,Y._eventsCount++),Y}function q(Y,B){0==--Y._eventsCount?Y._events=new ee:delete Y._events[B]}function u(){this._events=new ee,this._eventsCount=0}Object.create&&(ee.prototype=Object.create(null),(new ee).__proto__||(N=!1)),u.prototype.eventNames=function(){var F,O,B=[];if(0===this._eventsCount)return B;for(O in F=this._events)ue.call(F,O)&&B.push(N?O.slice(1):O);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(F)):B},u.prototype.listeners=function(B){var O=this._events[N?N+B:B];if(!O)return[];if(O.fn)return[O.fn];for(var W=0,U=O.length,R=new Array(U);W<U;W++)R[W]=O[W].fn;return R},u.prototype.listenerCount=function(B){var O=this._events[N?N+B:B];return O?O.fn?1:O.length:0},u.prototype.emit=function(B,F,O,W,U,R){var M=N?N+B:B;if(!this._events[M])return!1;var v,S,b=this._events[M],g=arguments.length;if(b.fn){switch(b.once&&this.removeListener(B,b.fn,void 0,!0),g){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,F),!0;case 3:return b.fn.call(b.context,F,O),!0;case 4:return b.fn.call(b.context,F,O,W),!0;case 5:return b.fn.call(b.context,F,O,W,U),!0;case 6:return b.fn.call(b.context,F,O,W,U,R),!0}for(S=1,v=new Array(g-1);S<g;S++)v[S-1]=arguments[S];b.fn.apply(b.context,v)}else{var E,w=b.length;for(S=0;S<w;S++)switch(b[S].once&&this.removeListener(B,b[S].fn,void 0,!0),g){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,F);break;case 3:b[S].fn.call(b[S].context,F,O);break;case 4:b[S].fn.call(b[S].context,F,O,W);break;default:if(!v)for(E=1,v=new Array(g-1);E<g;E++)v[E-1]=arguments[E];b[S].fn.apply(b[S].context,v)}}return!0},u.prototype.on=function(B,F,O){return V(this,B,F,O,!1)},u.prototype.once=function(B,F,O){return V(this,B,F,O,!0)},u.prototype.removeListener=function(B,F,O,W){var U=N?N+B:B;if(!this._events[U])return this;if(!F)return q(this,U),this;var R=this._events[U];if(R.fn)R.fn===F&&(!W||R.once)&&(!O||R.context===O)&&q(this,U);else{for(var M=0,b=[],g=R.length;M<g;M++)(R[M].fn!==F||W&&!R[M].once||O&&R[M].context!==O)&&b.push(R[M]);b.length?this._events[U]=1===b.length?b[0]:b:q(this,U)}return this},u.prototype.removeAllListeners=function(B){var F;return B?this._events[F=N?N+B:B]&&q(this,F):(this._events=new ee,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=N,u.EventEmitter=u,Se.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
                !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
                \*****************************************************/function(Se){var N,ee,G,V,q;N=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,ee=/^(?=([^\/?#]*))\1([^]*)$/,G=/(?:\/|^)\.(?=\/)/g,V=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Se.exports=q={buildAbsoluteURL:function(u,Y,B){if(B=B||{},u=u.trim(),!(Y=Y.trim())){if(!B.alwaysNormalize)return u;var F=q.parseURL(u);if(!F)throw new Error("Error trying to parse base URL.");return F.path=q.normalizePath(F.path),q.buildURLFromParts(F)}var O=q.parseURL(Y);if(!O)throw new Error("Error trying to parse relative URL.");if(O.scheme)return B.alwaysNormalize?(O.path=q.normalizePath(O.path),q.buildURLFromParts(O)):Y;var W=q.parseURL(u);if(!W)throw new Error("Error trying to parse base URL.");if(!W.netLoc&&W.path&&"/"!==W.path[0]){var U=ee.exec(W.path);W.netLoc=U[1],W.path=U[2]}W.netLoc&&!W.path&&(W.path="/");var R={scheme:W.scheme,netLoc:O.netLoc,path:null,params:O.params,query:O.query,fragment:O.fragment};if(!O.netLoc&&(R.netLoc=W.netLoc,"/"!==O.path[0]))if(O.path){var M=W.path,b=M.substring(0,M.lastIndexOf("/")+1)+O.path;R.path=q.normalizePath(b)}else R.path=W.path,O.params||(R.params=W.params,O.query||(R.query=W.query));return null===R.path&&(R.path=B.alwaysNormalize?q.normalizePath(O.path):O.path),q.buildURLFromParts(R)},parseURL:function(u){var Y=N.exec(u);return Y?{scheme:Y[1]||"",netLoc:Y[2]||"",path:Y[3]||"",params:Y[4]||"",query:Y[5]||"",fragment:Y[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(G,"");u.length!==(u=u.replace(V,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}}}},Ne={};function Ge(Se){var ue=Ne[Se];if(void 0!==ue)return ue.exports;var N=Ne[Se]={exports:{}};return dt[Se].call(N.exports,N,N.exports,Ge),N.exports}Ge.m=dt,Ge.n=Se=>{var ue=Se&&Se.__esModule?()=>Se.default:()=>Se;return Ge.d(ue,{a:ue}),ue},Ge.d=(Se,ue)=>{for(var N in ue)Ge.o(ue,N)&&!Ge.o(Se,N)&&Object.defineProperty(Se,N,{enumerable:!0,get:ue[N]})},Ge.o=(Se,ue)=>Object.prototype.hasOwnProperty.call(Se,ue),Ge.r=Se=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Se,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Se,"__esModule",{value:!0})};var de=Ge("./src/hls.ts");return de.default})(),ft.exports=Ge())},48461:(ft,dt)=>{dt.read=function(Ne,Ge,de,Se,ue){var N,ee,G=8*ue-Se-1,V=(1<<G)-1,q=V>>1,u=-7,Y=de?ue-1:0,B=de?-1:1,F=Ne[Ge+Y];for(Y+=B,N=F&(1<<-u)-1,F>>=-u,u+=G;u>0;N=256*N+Ne[Ge+Y],Y+=B,u-=8);for(ee=N&(1<<-u)-1,N>>=-u,u+=Se;u>0;ee=256*ee+Ne[Ge+Y],Y+=B,u-=8);if(0===N)N=1-q;else{if(N===V)return ee?NaN:1/0*(F?-1:1);ee+=Math.pow(2,Se),N-=q}return(F?-1:1)*ee*Math.pow(2,N-Se)},dt.write=function(Ne,Ge,de,Se,ue,N){var ee,G,V,q=8*N-ue-1,u=(1<<q)-1,Y=u>>1,B=23===ue?Math.pow(2,-24)-Math.pow(2,-77):0,F=Se?0:N-1,O=Se?1:-1,W=Ge<0||0===Ge&&1/Ge<0?1:0;for(Ge=Math.abs(Ge),isNaN(Ge)||Ge===1/0?(G=isNaN(Ge)?1:0,ee=u):(ee=Math.floor(Math.log(Ge)/Math.LN2),Ge*(V=Math.pow(2,-ee))<1&&(ee--,V*=2),(Ge+=ee+Y>=1?B/V:B*Math.pow(2,1-Y))*V>=2&&(ee++,V/=2),ee+Y>=u?(G=0,ee=u):ee+Y>=1?(G=(Ge*V-1)*Math.pow(2,ue),ee+=Y):(G=Ge*Math.pow(2,Y-1)*Math.pow(2,ue),ee=0));ue>=8;Ne[de+F]=255&G,F+=O,G/=256,ue-=8);for(ee=ee<<ue|G,q+=ue;q>0;Ne[de+F]=255&ee,F+=O,ee/=256,q-=8);Ne[de+F-O]|=128*W}},72703:ft=>{ft.exports=function Ne(Ge){if(!Ge)return!1;var de=dt.call(Ge);return"[object Function]"===de||"function"==typeof Ge&&"[object RegExp]"!==de||typeof window<"u"&&(Ge===window.setTimeout||Ge===window.alert||Ge===window.confirm||Ge===window.prompt)};var dt=Object.prototype.toString},81234:(ft,dt)=>{function Ne(ee){if(ee&&"object"==typeof ee){var G=ee.which||ee.keyCode||ee.charCode;G&&(ee=G)}if("number"==typeof ee)return ue[ee];var q,V=String(ee);return(q=Ge[V.toLowerCase()])?q:(q=de[V.toLowerCase()])||(1===V.length?V.charCodeAt(0):void 0)}Ne.isEventKey=function(G,V){if(G&&"object"==typeof G){var q=G.which||G.keyCode||G.charCode;if(null==q)return!1;if("string"==typeof V){var u;if(u=Ge[V.toLowerCase()])return u===q;if(u=de[V.toLowerCase()])return u===q}else if("number"==typeof V)return V===q;return!1}};var Ge=(dt=ft.exports=Ne).code=dt.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},de=dt.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Se=97;Se<123;Se++)Ge[String.fromCharCode(Se)]=Se-32;for(var Se=48;Se<58;Se++)Ge[Se-48]=Se;for(Se=1;Se<13;Se++)Ge["f"+Se]=Se+111;for(Se=0;Se<10;Se++)Ge["numpad "+Se]=Se+96;var ue=dt.names=dt.title={};for(Se in Ge)ue[Ge[Se]]=Se;for(var N in de)Ge[N]=de[N]},17489:function(ft,dt,Ne){var Ge;ft=Ne.nmd(ft),function(){var de,ee="Expected a function",V="__lodash_hash_undefined__",u="__lodash_placeholder__",v=32,w=128,T=1/0,I=9007199254740991,Z=NaN,re=4294967295,Te=[["ary",w],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",v],["partialRight",64],["rearg",256]],ye="[object Arguments]",Ce="[object Array]",Be="[object Boolean]",Ze="[object Date]",ct="[object Error]",yt="[object Function]",_t="[object GeneratorFunction]",ot="[object Map]",bt="[object Number]",nt="[object Object]",Ht="[object Promise]",Ut="[object RegExp]",tr="[object Set]",It="[object String]",Xt="[object Symbol]",fr="[object WeakMap]",vr="[object ArrayBuffer]",ce="[object DataView]",X="[object Float32Array]",J="[object Float64Array]",be="[object Int8Array]",Le="[object Int16Array]",He="[object Int32Array]",Ve="[object Uint8Array]",Pt="[object Uint8ClampedArray]",Zt="[object Uint16Array]",Bt="[object Uint32Array]",jt=/\b__p \+= '';/g,Qt=/\b(__p \+=) '' \+/g,nn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wn=/&(?:amp|lt|gt|quot|#39);/g,In=/[&<>"']/g,un=RegExp(Wn.source),Pi=RegExp(In.source),pi=/<%-([\s\S]+?)%>/g,Gn=/<%([\s\S]+?)%>/g,Vn=/<%=([\s\S]+?)%>/g,pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wi=/^\w*$/,An=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ca=/[\\^$.*+?()[\]{}|]/g,vi=RegExp(ca.source),Oi=/^\s+/,Kn=/\s/,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ve=/\{\n\/\* \[wrapped with (.+)\] \*/,Ae=/,? & /,Ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gt=/[()=,{}\[\]\/\s]/,Mt=/\\(\\)?/g,Yt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xr=/\w*$/,mr=/^[-+]0x[0-9a-f]+$/i,Cn=/^0b[01]+$/i,Ln=/^\[object .+?Constructor\]$/,Gi=/^0o[0-7]+$/i,Vi=/^(?:0|[1-9]\d*)$/,Rn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vn=/($^)/,Ki=/['\n\r\u2028\u2029\\]/g,Ii="\\ud800-\\udfff",Bo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",da="\\u2700-\\u27bf",No="a-z\\xdf-\\xf6\\xf8-\\xff",gd="A-Z\\xc0-\\xd6\\xd8-\\xde",Yi="\\ufe0e\\ufe0f",Ra="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",md="["+Ii+"]",Kl="["+Ra+"]",Li="["+Bo+"]",yd="\\d+",_d="["+da+"]",Yl="["+No+"]",Td="[^"+Ii+Ra+yd+da+No+gd+"]",zl="\\ud83c[\\udffb-\\udfff]",Xl="[^"+Ii+"]",Zl="(?:\\ud83c[\\udde6-\\uddff]){2}",Ql="[\\ud800-\\udbff][\\udc00-\\udfff]",Ma="["+gd+"]",ws="(?:"+Yl+"|"+Td+")",og="(?:"+Ma+"|"+Td+")",Ed="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",bd="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",jo="(?:"+Li+"|"+zl+")?",xd="["+Yi+"]?",Sd=xd+jo+"(?:\\u200d(?:"+[Xl,Zl,Ql].join("|")+")"+xd+jo+")*",cg="(?:"+[_d,Zl,Ql].join("|")+")"+Sd,dg="(?:"+[Xl+Li+"?",Li,Zl,Ql,md].join("|")+")",hg=RegExp("['\u2019]","g"),Os=RegExp(Li,"g"),Jl=RegExp(zl+"(?="+zl+")|"+dg+Sd,"g"),pg=RegExp([Ma+"?"+Yl+"+"+Ed+"(?="+[Kl,Ma,"$"].join("|")+")",og+"+"+bd+"(?="+[Kl,Ma+ws,"$"].join("|")+")",Ma+"?"+ws+"+"+Ed,Ma+"+"+bd,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yd,cg].join("|"),"g"),vg=RegExp("[\\u200d"+Ii+Bo+Yi+"]"),gg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yg=-1,wr={};wr[X]=wr[J]=wr[be]=wr[Le]=wr[He]=wr[Ve]=wr[Pt]=wr[Zt]=wr[Bt]=!0,wr[ye]=wr[Ce]=wr[vr]=wr[Be]=wr[ce]=wr[Ze]=wr[ct]=wr[yt]=wr[ot]=wr[bt]=wr[nt]=wr[Ut]=wr[tr]=wr[It]=wr[fr]=!1;var Dr={};Dr[ye]=Dr[Ce]=Dr[vr]=Dr[ce]=Dr[Be]=Dr[Ze]=Dr[X]=Dr[J]=Dr[be]=Dr[Le]=Dr[He]=Dr[ot]=Dr[bt]=Dr[nt]=Dr[Ut]=Dr[tr]=Dr[It]=Dr[Xt]=Dr[Ve]=Dr[Pt]=Dr[Zt]=Dr[Bt]=!0,Dr[ct]=Dr[yt]=Dr[fr]=!1;var Eg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bg=parseFloat,xg=parseInt,Ad="object"==typeof global&&global&&global.Object===Object&&global,Sg="object"==typeof self&&self&&self.Object===Object&&self,ln=Ad||Sg||Function("return this")(),Cd=dt&&!dt.nodeType&&dt,Ls=Cd&&ft&&!ft.nodeType&&ft,Dd=Ls&&Ls.exports===Cd,ef=Dd&&Ad.process,si=function(){try{return Ls&&Ls.require&&Ls.require("util").types||ef&&ef.binding&&ef.binding("util")}catch{}}(),Pd=si&&si.isArrayBuffer,wd=si&&si.isDate,Od=si&&si.isMap,Id=si&&si.isRegExp,Ag=si&&si.isSet,Ld=si&&si.isTypedArray;function oi(Fe,Je,je){switch(je.length){case 0:return Fe.call(Je);case 1:return Fe.call(Je,je[0]);case 2:return Fe.call(Je,je[0],je[1]);case 3:return Fe.call(Je,je[0],je[1],je[2])}return Fe.apply(Je,je)}function Rd(Fe,Je,je,xt){for(var wt=-1,kt=null==Fe?0:Fe.length;++wt<kt;){var br=Fe[wt];Je(xt,br,je(br),Fe)}return xt}function ui(Fe,Je){for(var je=-1,xt=null==Fe?0:Fe.length;++je<xt&&!1!==Je(Fe[je],je,Fe););return Fe}function Cg(Fe,Je){for(var je=null==Fe?0:Fe.length;je--&&!1!==Je(Fe[je],je,Fe););return Fe}function Md(Fe,Je){for(var je=-1,xt=null==Fe?0:Fe.length;++je<xt;)if(!Je(Fe[je],je,Fe))return!1;return!0}function ha(Fe,Je){for(var je=-1,xt=null==Fe?0:Fe.length,wt=0,kt=[];++je<xt;){var br=Fe[je];Je(br,je,Fe)&&(kt[wt++]=br)}return kt}function Ho(Fe,Je){return!(null==Fe||!Fe.length)&&va(Fe,Je,0)>-1}function Rs(Fe,Je,je){for(var xt=-1,wt=null==Fe?0:Fe.length;++xt<wt;)if(je(Je,Fe[xt]))return!0;return!1}function Ir(Fe,Je){for(var je=-1,xt=null==Fe?0:Fe.length,wt=Array(xt);++je<xt;)wt[je]=Je(Fe[je],je,Fe);return wt}function pa(Fe,Je){for(var je=-1,xt=Je.length,wt=Fe.length;++je<xt;)Fe[wt+je]=Je[je];return Fe}function us(Fe,Je,je,xt){var wt=-1,kt=null==Fe?0:Fe.length;for(xt&&kt&&(je=Fe[++wt]);++wt<kt;)je=Je(je,Fe[wt],wt,Fe);return je}function kd(Fe,Je,je,xt){var wt=null==Fe?0:Fe.length;for(xt&&wt&&(je=Fe[--wt]);wt--;)je=Je(je,Fe[wt],wt,Fe);return je}function Ms(Fe,Je){for(var je=-1,xt=null==Fe?0:Fe.length;++je<xt;)if(Je(Fe[je],je,Fe))return!0;return!1}var Fd=rf("length");function Ud(Fe,Je,je){var xt;return je(Fe,function(wt,kt,br){if(Je(wt,kt,br))return xt=kt,!1}),xt}function ka(Fe,Je,je,xt){for(var wt=Fe.length,kt=je+(xt?1:-1);xt?kt--:++kt<wt;)if(Je(Fe[kt],kt,Fe))return kt;return-1}function va(Fe,Je,je){return Je==Je?function kg(Fe,Je,je){for(var xt=je-1,wt=Fe.length;++xt<wt;)if(Fe[xt]===Je)return xt;return-1}(Fe,Je,je):ka(Fe,Wo,je)}function Bd(Fe,Je,je,xt){for(var wt=je-1,kt=Fe.length;++wt<kt;)if(xt(Fe[wt],Je))return wt;return-1}function Wo(Fe){return Fe!=Fe}function Go(Fe,Je){var je=null==Fe?0:Fe.length;return je?nf(Fe,Je)/je:Z}function rf(Fe){return function(Je){return null==Je?de:Je[Fe]}}function Vo(Fe){return function(Je){return null==Fe?de:Fe[Je]}}function Nd(Fe,Je,je,xt,wt){return wt(Fe,function(kt,br,xr){je=xt?(xt=!1,kt):Je(je,kt,br,xr)}),je}function nf(Fe,Je){for(var je,xt=-1,wt=Fe.length;++xt<wt;){var kt=Je(Fe[xt]);kt!==de&&(je=je===de?kt:je+kt)}return je}function Ko(Fe,Je){for(var je=-1,xt=Array(Fe);++je<Fe;)xt[je]=Je(je);return xt}function dr(Fe){return Fe&&Fe.slice(0,Fg(Fe)+1).replace(Oi,"")}function gn(Fe){return function(Je){return Fe(Je)}}function af(Fe,Je){return Ir(Je,function(je){return Fe[je]})}function ls(Fe,Je){return Fe.has(Je)}function jd(Fe,Je){for(var je=-1,xt=Fe.length;++je<xt&&va(Je,Fe[je],0)>-1;);return je}function Hd(Fe,Je){for(var je=Fe.length;je--&&va(Je,Fe[je],0)>-1;);return je}function sf(Fe,Je){for(var je=Fe.length,xt=0;je--;)Fe[je]===Je&&++xt;return xt}var Og=Vo({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ig=Vo({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function of(Fe){return"\\"+Eg[Fe]}function zi(Fe){return vg.test(Fe)}function Gd(Fe){var Je=-1,je=Array(Fe.size);return Fe.forEach(function(xt,wt){je[++Je]=[wt,xt]}),je}function Vd(Fe,Je){return function(je){return Fe(Je(je))}}function ga(Fe,Je){for(var je=-1,xt=Fe.length,wt=0,kt=[];++je<xt;){var br=Fe[je];(br===Je||br===u)&&(Fe[je]=u,kt[wt++]=je)}return kt}function ks(Fe){var Je=-1,je=Array(Fe.size);return Fe.forEach(function(xt){je[++Je]=xt}),je}function Fs(Fe){return zi(Fe)?function Ug(Fe){for(var Je=Jl.lastIndex=0;Jl.test(Fe);)++Je;return Je}(Fe):Fd(Fe)}function Ri(Fe){return zi(Fe)?function KT(Fe){return Fe.match(Jl)||[]}(Fe):function Dg(Fe){return Fe.split("")}(Fe)}function Fg(Fe){for(var Je=Fe.length;Je--&&Kn.test(Fe.charAt(Je)););return Je}var VT=Vo({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Yo=function Fe(Je){var o,je=(Je=null==Je?ln:Yo.defaults(ln.Object(),Je,Yo.pick(ln,mg))).Array,xt=Je.Date,wt=Je.Error,kt=Je.Function,br=Je.Math,xr=Je.Object,Lr=Je.RegExp,zo=Je.String,Mn=Je.TypeError,Us=je.prototype,qi=xr.prototype,qo=Je["__core-js_shared__"],Bs=kt.prototype.toString,_r=qi.hasOwnProperty,Bg=0,Xo=(o=/[^.]+$/.exec(qo&&qo.keys&&qo.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",Zo=qi.toString,Ng=Bs.call(xr),uf=ln._,jg=Lr("^"+Bs.call(_r).replace(ca,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fa=Dd?Je.Buffer:de,Xi=Je.Symbol,Qo=Je.Uint8Array,Ns=Fa?Fa.allocUnsafe:de,$o=Vd(xr.getPrototypeOf,xr),lf=xr.create,zd=qi.propertyIsEnumerable,Jo=Us.splice,eu=Xi?Xi.isConcatSpreadable:de,js=Xi?Xi.iterator:de,Ua=Xi?Xi.toStringTag:de,fs=function(){try{var o=Ga(xr,"defineProperty");return o({},"",{}),o}catch{}}(),Hg=Je.clearTimeout!==ln.clearTimeout&&Je.clearTimeout,tu=xt&&xt.now!==ln.Date.now&&xt.now,qd=Je.setTimeout!==ln.setTimeout&&Je.setTimeout,ru=br.ceil,Ba=br.floor,ff=xr.getOwnPropertySymbols,Xd=Fa?Fa.isBuffer:de,Zd=Je.isFinite,Wg=Us.join,cf=Vd(xr.keys,xr),Jr=br.max,mn=br.min,df=xt.now,Gg=Je.parseInt,Hs=br.random,Qd=Us.reverse,hf=Ga(Je,"DataView"),ma=Ga(Je,"Map"),pf=Ga(Je,"Promise"),Na=Ga(Je,"Set"),Ws=Ga(Je,"WeakMap"),Gs=Ga(xr,"create"),cs=Ws&&new Ws,ds={},Vg=Ka(hf),vf=Ka(ma),Kg=Ka(pf),nu=Ka(Na),$d=Ka(Ws),iu=Xi?Xi.prototype:de,ya=iu?iu.valueOf:de,Jd=iu?iu.toString:de;function he(o){if(Gr(o)&&!$t(o)&&!(o instanceof or)){if(o instanceof kn)return o;if(_r.call(o,"__wrapped__"))return Nh(o)}return new kn(o)}var hs=function(){function o(){}return function(f){if(!Fr(f))return{};if(lf)return lf(f);o.prototype=f;var A=new o;return o.prototype=de,A}}();function au(){}function kn(o,f){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=de}function or(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Mi(o){var f=-1,A=null==o?0:o.length;for(this.clear();++f<A;){var Q=o[f];this.set(Q[0],Q[1])}}function Zi(o){var f=-1,A=null==o?0:o.length;for(this.clear();++f<A;){var Q=o[f];this.set(Q[0],Q[1])}}function Qi(o){var f=-1,A=null==o?0:o.length;for(this.clear();++f<A;){var Q=o[f];this.set(Q[0],Q[1])}}function _a(o){var f=-1,A=null==o?0:o.length;for(this.__data__=new Qi;++f<A;)this.add(o[f])}function zn(o){var f=this.__data__=new Zi(o);this.size=f.size}function Tf(o,f){var A=$t(o),Q=!A&&za(o),se=!A&&!Q&&Sa(o),ge=!A&&!Q&&!se&&ys(o),Pe=A||Q||se||ge,Re=Pe?Ko(o.length,zo):[],Ue=Re.length;for(var tt in o)(f||_r.call(o,tt))&&(!Pe||!("length"==tt||se&&("offset"==tt||"parent"==tt)||ge&&("buffer"==tt||"byteLength"==tt||"byteOffset"==tt)||ra(tt,Ue)))&&Re.push(tt);return Re}function nh(o){var f=o.length;return f?o[Mf(0,f-1)]:de}function fu(o,f){return Uu(Bn(o),ki(f,0,o.length))}function sm(o){return Uu(Bn(o))}function cu(o,f,A){(A!==de&&!Ti(o[f],A)||A===de&&!(f in o))&&gi(o,f,A)}function Vs(o,f,A){var Q=o[f];(!_r.call(o,f)||!Ti(Q,A)||A===de&&!(f in o))&&gi(o,f,A)}function du(o,f){for(var A=o.length;A--;)if(Ti(o[A][0],f))return A;return-1}function Ef(o,f,A,Q){return $i(o,function(se,ge,Pe){f(Q,se,A(se),Pe)}),Q}function ih(o,f){return o&&Xn(f,sn(f),o)}function gi(o,f,A){"__proto__"==f&&fs?fs(o,f,{configurable:!0,enumerable:!0,value:A,writable:!0}):o[f]=A}function bf(o,f){for(var A=-1,Q=f.length,se=je(Q),ge=null==o;++A<Q;)se[A]=ge?de:Cc(o,f[A]);return se}function ki(o,f,A){return o==o&&(A!==de&&(o=o<=A?o:A),f!==de&&(o=o>=f?o:f)),o}function qn(o,f,A,Q,se,ge){var Pe,Re=1&f,Ue=2&f,tt=4&f;if(A&&(Pe=se?A(o,Q,se,ge):A(o)),Pe!==de)return Pe;if(!Fr(o))return o;var rt=$t(o);if(rt){if(Pe=function Mm(o){var f=o.length,A=new o.constructor(f);return f&&"string"==typeof o[0]&&_r.call(o,"index")&&(A.index=o.index,A.input=o.input),A}(o),!Re)return Bn(o,Pe)}else{var ut=_n(o),St=ut==yt||ut==_t;if(Sa(o))return _h(o,Re);if(ut==nt||ut==ye||St&&!se){if(Pe=Ue||St?{}:Lu(o),!Re)return Ue?function Dm(o,f){return Xn(o,qf(o),f)}(o,function om(o,f){return o&&Xn(f,Zn(f),o)}(Pe,o)):function xh(o,f){return Xn(o,zf(o),f)}(o,ih(Pe,o))}else{if(!Dr[ut])return se?o:{};Pe=function km(o,f,A){var Q=o.constructor;switch(f){case vr:return gs(o);case Be:case Ze:return new Q(+o);case ce:return function Sm(o,f){var A=f?gs(o.buffer):o.buffer;return new o.constructor(A,o.byteOffset,o.byteLength)}(o,A);case X:case J:case be:case Le:case He:case Ve:case Pt:case Zt:case Bt:return Eh(o,A);case ot:return new Q;case bt:case It:return new Q(o);case Ut:return function Th(o){var f=new o.constructor(o.source,Xr.exec(o));return f.lastIndex=o.lastIndex,f}(o);case tr:return new Q;case Xt:return function Am(o){return ya?xr(ya.call(o)):{}}(o)}}(o,ut,Re)}}ge||(ge=new zn);var Ot=ge.get(o);if(Ot)return Ot;ge.set(o,Pe),zt(o)?o.forEach(function(Gt){Pe.add(qn(Gt,f,A,Gt,o,ge))}):bc(o)&&o.forEach(function(Gt,ur){Pe.set(ur,qn(Gt,f,A,ur,o,ge))});var nr=rt?de:(tt?Ue?oo:Kf:Ue?Zn:sn)(o);return ui(nr||o,function(Gt,ur){nr&&(Gt=o[ur=Gt]),Vs(Pe,ur,qn(Gt,f,A,ur,o,ge))}),Pe}function ah(o,f,A){var Q=A.length;if(null==o)return!Q;for(o=xr(o);Q--;){var se=A[Q],Pe=o[se];if(Pe===de&&!(se in o)||!(0,f[se])(Pe))return!1}return!0}function Ks(o,f,A){if("function"!=typeof o)throw new Mn(ee);return Va(function(){o.apply(de,A)},f)}function Ys(o,f,A,Q){var se=-1,ge=Ho,Pe=!0,Re=o.length,Ue=[],tt=f.length;if(!Re)return Ue;A&&(f=Ir(f,gn(A))),Q?(ge=Rs,Pe=!1):f.length>=200&&(ge=ls,Pe=!1,f=new _a(f));e:for(;++se<Re;){var rt=o[se],ut=null==A?rt:A(rt);if(rt=Q||0!==rt?rt:0,Pe&&ut==ut){for(var St=tt;St--;)if(f[St]===ut)continue e;Ue.push(rt)}else ge(f,ut,Q)||Ue.push(rt)}return Ue}he.templateSettings={escape:pi,evaluate:Gn,interpolate:Vn,variable:"",imports:{_:he}},(he.prototype=au.prototype).constructor=he,(kn.prototype=hs(au.prototype)).constructor=kn,(or.prototype=hs(au.prototype)).constructor=or,Mi.prototype.clear=function eh(){this.__data__=Gs?Gs(null):{},this.size=0},Mi.prototype.delete=function qg(o){var f=this.has(o)&&delete this.__data__[o];return this.size-=f?1:0,f},Mi.prototype.get=function su(o){var f=this.__data__;if(Gs){var A=f[o];return A===V?de:A}return _r.call(f,o)?f[o]:de},Mi.prototype.has=function Xg(o){var f=this.__data__;return Gs?f[o]!==de:_r.call(f,o)},Mi.prototype.set=function th(o,f){var A=this.__data__;return this.size+=this.has(o)?0:1,A[o]=Gs&&f===de?V:f,this},Zi.prototype.clear=function Zg(){this.__data__=[],this.size=0},Zi.prototype.delete=function mf(o){var f=this.__data__,A=du(f,o);return!(A<0||(A==f.length-1?f.pop():Jo.call(f,A,1),--this.size,0))},Zi.prototype.get=function Qg(o){var f=this.__data__,A=du(f,o);return A<0?de:f[A][1]},Zi.prototype.has=function $g(o){return du(this.__data__,o)>-1},Zi.prototype.set=function yf(o,f){var A=this.__data__,Q=du(A,o);return Q<0?(++this.size,A.push([o,f])):A[Q][1]=f,this},Qi.prototype.clear=function ou(){this.size=0,this.__data__={hash:new Mi,map:new(ma||Zi),string:new Mi}},Qi.prototype.delete=function rh(o){var f=Wa(this,o).delete(o);return this.size-=f?1:0,f},Qi.prototype.get=function Jg(o){return Wa(this,o).get(o)},Qi.prototype.has=function uu(o){return Wa(this,o).has(o)},Qi.prototype.set=function em(o,f){var A=Wa(this,o),Q=A.size;return A.set(o,f),this.size+=A.size==Q?0:1,this},_a.prototype.add=_a.prototype.push=function tm(o){return this.__data__.set(o,V),this},_a.prototype.has=function rm(o){return this.__data__.has(o)},zn.prototype.clear=function nm(){this.__data__=new Zi,this.size=0},zn.prototype.delete=function im(o){var f=this.__data__,A=f.delete(o);return this.size=f.size,A},zn.prototype.get=function _f(o){return this.__data__.get(o)},zn.prototype.has=function am(o){return this.__data__.has(o)},zn.prototype.set=function lu(o,f){var A=this.__data__;if(A instanceof Zi){var Q=A.__data__;if(!ma||Q.length<199)return Q.push([o,f]),this.size=++A.size,this;A=this.__data__=new Qi(Q)}return A.set(o,f),this.size=A.size,this};var $i=Sh(mi),sh=Sh(Sf,!0);function lm(o,f){var A=!0;return $i(o,function(Q,se,ge){return A=!!f(Q,se,ge)}),A}function ps(o,f,A){for(var Q=-1,se=o.length;++Q<se;){var ge=o[Q],Pe=f(ge);if(null!=Pe&&(Re===de?Pe==Pe&&!ht(Pe):A(Pe,Re)))var Re=Pe,Ue=ge}return Ue}function oh(o,f){var A=[];return $i(o,function(Q,se,ge){f(Q,se,ge)&&A.push(Q)}),A}function en(o,f,A,Q,se){var ge=-1,Pe=o.length;for(A||(A=Ih),se||(se=[]);++ge<Pe;){var Re=o[ge];f>0&&A(Re)?f>1?en(Re,f-1,A,Q,se):pa(se,Re):Q||(se[se.length]=Re)}return se}var xf=Hf(),zs=Hf(!0);function mi(o,f){return o&&xf(o,f,sn)}function Sf(o,f){return o&&zs(o,f,sn)}function hu(o,f){return ha(f,function(A){return na(o[A])})}function Fi(o,f){for(var A=0,Q=(f=Ui(f,o)).length;null!=o&&A<Q;)o=o[_i(f[A++])];return A&&A==Q?o:de}function uh(o,f,A){var Q=f(o);return $t(o)?Q:pa(Q,A(o))}function yn(o){return null==o?o===de?"[object Undefined]":"[object Null]":Ua&&Ua in xr(o)?function Iu(o){var f=_r.call(o,Ua),A=o[Ua];try{o[Ua]=de;var Q=!0}catch{}var se=Zo.call(o);return Q&&(f?o[Ua]=A:delete o[Ua]),se}(o):function Bm(o){return Zo.call(o)}(o)}function Af(o,f){return o>f}function cm(o,f){return null!=o&&_r.call(o,f)}function Cf(o,f){return null!=o&&f in xr(o)}function Df(o,f,A){for(var Q=A?Rs:Ho,se=o[0].length,ge=o.length,Pe=ge,Re=je(ge),Ue=1/0,tt=[];Pe--;){var rt=o[Pe];Pe&&f&&(rt=Ir(rt,gn(f))),Ue=mn(rt.length,Ue),Re[Pe]=!A&&(f||se>=120&&rt.length>=120)?new _a(Pe&&rt):de}rt=o[0];var ut=-1,St=Re[0];e:for(;++ut<se&&tt.length<Ue;){var Ot=rt[ut],Wt=f?f(Ot):Ot;if(Ot=A||0!==Ot?Ot:0,!(St?ls(St,Wt):Q(tt,Wt,A))){for(Pe=ge;--Pe;){var nr=Re[Pe];if(!(nr?ls(nr,Wt):Q(o[Pe],Wt,A)))continue e}St&&St.push(Wt),tt.push(Ot)}}return tt}function qs(o,f,A){var Q=null==(o=kh(o,f=Ui(f,o)))?o:o[_i(Dn(f))];return null==Q?de:oi(Q,o,A)}function Xs(o){return Gr(o)&&yn(o)==ye}function Ta(o,f,A,Q,se){return o===f||(null==o||null==f||!Gr(o)&&!Gr(f)?o!=o&&f!=f:function pm(o,f,A,Q,se,ge){var Pe=$t(o),Re=$t(f),Ue=Pe?Ce:_n(o),tt=Re?Ce:_n(f),rt=(Ue=Ue==ye?nt:Ue)==nt,ut=(tt=tt==ye?nt:tt)==nt,St=Ue==tt;if(St&&Sa(o)){if(!Sa(f))return!1;Pe=!0,rt=!1}if(St&&!rt)return ge||(ge=new zn),Pe||ys(o)?so(o,f,A,Q,se,ge):function Lm(o,f,A,Q,se,ge,Pe){switch(A){case ce:if(o.byteLength!=f.byteLength||o.byteOffset!=f.byteOffset)return!1;o=o.buffer,f=f.buffer;case vr:return!(o.byteLength!=f.byteLength||!ge(new Qo(o),new Qo(f)));case Be:case Ze:case bt:return Ti(+o,+f);case ct:return o.name==f.name&&o.message==f.message;case Ut:case It:return o==f+"";case ot:var Re=Gd;case tr:if(Re||(Re=ks),o.size!=f.size&&!(1&Q))return!1;var tt=Pe.get(o);if(tt)return tt==f;Q|=2,Pe.set(o,f);var rt=so(Re(o),Re(f),Q,se,ge,Pe);return Pe.delete(o),rt;case Xt:if(ya)return ya.call(o)==ya.call(f)}return!1}(o,f,Ue,A,Q,se,ge);if(!(1&A)){var Ot=rt&&_r.call(o,"__wrapped__"),Wt=ut&&_r.call(f,"__wrapped__");if(Ot||Wt){var nr=Ot?o.value():o,Gt=Wt?f.value():f;return ge||(ge=new zn),se(nr,Gt,A,Q,ge)}}return!!St&&(ge||(ge=new zn),function wh(o,f,A,Q,se,ge){var Pe=1&A,Re=Kf(o),Ue=Re.length;if(Ue!=Kf(f).length&&!Pe)return!1;for(var ut=Ue;ut--;){var St=Re[ut];if(!(Pe?St in f:_r.call(f,St)))return!1}var Ot=ge.get(o),Wt=ge.get(f);if(Ot&&Wt)return Ot==f&&Wt==o;var nr=!0;ge.set(o,f),ge.set(f,o);for(var Gt=Pe;++ut<Ue;){var ur=o[St=Re[ut]],lr=f[St];if(Q)var fi=Pe?Q(lr,ur,St,f,o,ge):Q(ur,lr,St,o,f,ge);if(!(fi===de?ur===lr||se(ur,lr,A,Q,ge):fi)){nr=!1;break}Gt||(Gt="constructor"==St)}if(nr&&!Gt){var cn=o.constructor,Qn=f.constructor;cn!=Qn&&"constructor"in o&&"constructor"in f&&!("function"==typeof cn&&cn instanceof cn&&"function"==typeof Qn&&Qn instanceof Qn)&&(nr=!1)}return ge.delete(o),ge.delete(f),nr}(o,f,A,Q,se,ge))}(o,f,A,Q,Ta,se))}function wf(o,f,A,Q){var se=A.length,ge=se,Pe=!Q;if(null==o)return!ge;for(o=xr(o);se--;){var Re=A[se];if(Pe&&Re[2]?Re[1]!==o[Re[0]]:!(Re[0]in o))return!1}for(;++se<ge;){var Ue=(Re=A[se])[0],tt=o[Ue],rt=Re[1];if(Pe&&Re[2]){if(tt===de&&!(Ue in o))return!1}else{var ut=new zn;if(Q)var St=Q(tt,rt,Ue,o,f,ut);if(!(St===de?Ta(rt,tt,3,Q,ut):St))return!1}}return!0}function ch(o){return!(!Fr(o)||function Fm(o){return!!Xo&&Xo in o}(o))&&(na(o)?jg:Ln).test(Ka(o))}function Zs(o){return"function"==typeof o?o:null==o?jn:"object"==typeof o?$t(o)?ph(o[0],o[1]):hh(o):Np(o)}function If(o){if(!uo(o))return cf(o);var f=[];for(var A in xr(o))_r.call(o,A)&&"constructor"!=A&&f.push(A);return f}function Qs(o,f){return o<f}function dh(o,f){var A=-1,Q=Nn(o)?je(o.length):[];return $i(o,function(se,ge,Pe){Q[++A]=f(se,ge,Pe)}),Q}function hh(o){var f=Ou(o);return 1==f.length&&f[0][2]?Mu(f[0][0],f[0][1]):function(A){return A===o||wf(A,o,f)}}function ph(o,f){return Zf(o)&&Rh(f)?Mu(_i(o),f):function(A){var Q=Cc(A,o);return Q===de&&Q===f?go(A,o):Ta(f,Q,3)}}function ja(o,f,A,Q,se){o!==f&&xf(f,function(ge,Pe){if(se||(se=new zn),Fr(ge))!function mm(o,f,A,Q,se,ge,Pe){var Re=Jf(o,A),Ue=Jf(f,A),tt=Pe.get(Ue);if(tt)cu(o,A,tt);else{var rt=ge?ge(Re,Ue,A+"",o,f,Pe):de,ut=rt===de;if(ut){var St=$t(Ue),Ot=!St&&Sa(Ue),Wt=!St&&!Ot&&ys(Ue);rt=Ue,St||Ot||Wt?$t(Re)?rt=Re:Kr(Re)?rt=Bn(Re):Ot?(ut=!1,rt=_h(Ue,!0)):Wt?(ut=!1,rt=Eh(Ue,!0)):rt=[]:vo(Ue)||za(Ue)?(rt=Re,za(Re)?rt=xc(Re):(!Fr(Re)||na(Re))&&(rt=Lu(Ue))):ut=!1}ut&&(Pe.set(Ue,rt),se(rt,Ue,Q,ge,Pe),Pe.delete(Ue)),cu(o,A,rt)}}(o,f,Pe,A,ja,Q,se);else{var Re=Q?Q(Jf(o,Pe),ge,Pe+"",o,f,se):de;Re===de&&(Re=ge),cu(o,Pe,Re)}},Zn)}function Lf(o,f){var A=o.length;if(A)return ra(f+=f<0?A:0,A)?o[f]:de}function vh(o,f,A){f=f.length?Ir(f,function(ge){return $t(ge)?function(Pe){return Fi(Pe,1===ge.length?ge[0]:ge)}:ge}):[jn];var Q=-1;return f=Ir(f,gn(Nt())),function Pg(Fe,Je){var je=Fe.length;for(Fe.sort(Je);je--;)Fe[je]=Fe[je].value;return Fe}(dh(o,function(ge,Pe,Re){return{criteria:Ir(f,function(tt){return tt(ge)}),index:++Q,value:ge}}),function(ge,Pe){return function Cm(o,f,A){for(var Q=-1,se=o.criteria,ge=f.criteria,Pe=se.length,Re=A.length;++Q<Pe;){var Ue=Tu(se[Q],ge[Q]);if(Ue)return Q>=Re?Ue:Ue*("desc"==A[Q]?-1:1)}return o.index-f.index}(ge,Pe,A)})}function vu(o,f,A){for(var Q=-1,se=f.length,ge={};++Q<se;){var Pe=f[Q],Re=Fi(o,Pe);A(Re,Pe)&&eo(ge,Ui(Pe,o),Re)}return ge}function Rf(o,f,A,Q){var se=Q?Bd:va,ge=-1,Pe=f.length,Re=o;for(o===f&&(f=Bn(f)),A&&(Re=Ir(o,gn(A)));++ge<Pe;)for(var Ue=0,tt=f[ge],rt=A?A(tt):tt;(Ue=se(Re,rt,Ue,Q))>-1;)Re!==o&&Jo.call(Re,Ue,1),Jo.call(o,Ue,1);return o}function $s(o,f){for(var A=o?f.length:0,Q=A-1;A--;){var se=f[A];if(A==Q||se!==ge){var ge=se;ra(se)?Jo.call(o,se,1):vs(o,se)}}return o}function Mf(o,f){return o+Ba(Hs()*(f-o+1))}function Js(o,f){var A="";if(!o||f<1||f>I)return A;do{f%2&&(A+=o),(f=Ba(f/2))&&(o+=o)}while(f);return A}function rr(o,f){return ec(lo(o,f,jn),o+"")}function kf(o){return nh(_o(o))}function mu(o,f){var A=_o(o);return Uu(A,ki(f,0,A.length))}function eo(o,f,A,Q){if(!Fr(o))return o;for(var se=-1,ge=(f=Ui(f,o)).length,Pe=ge-1,Re=o;null!=Re&&++se<ge;){var Ue=_i(f[se]),tt=A;if("__proto__"===Ue||"constructor"===Ue||"prototype"===Ue)return o;if(se!=Pe){var rt=Re[Ue];(tt=Q?Q(rt,Ue,Re):de)===de&&(tt=Fr(rt)?rt:ra(f[se+1])?[]:{})}Vs(Re,Ue,tt),Re=Re[Ue]}return o}var Ff=cs?function(o,f){return cs.set(o,f),o}:jn,Tm=fs?function(o,f){return fs(o,"toString",{configurable:!0,enumerable:!1,value:Ic(f),writable:!0})}:jn;function Em(o){return Uu(_o(o))}function Fn(o,f,A){var Q=-1,se=o.length;f<0&&(f=-f>se?0:se+f),(A=A>se?se:A)<0&&(A+=se),se=f>A?0:A-f>>>0,f>>>=0;for(var ge=je(se);++Q<se;)ge[Q]=o[Q+f];return ge}function bm(o,f){var A;return $i(o,function(Q,se,ge){return!(A=f(Q,se,ge))}),!!A}function yu(o,f,A){var Q=0,se=null==o?Q:o.length;if("number"==typeof f&&f==f&&se<=2147483647){for(;Q<se;){var ge=Q+se>>>1,Pe=o[ge];null!==Pe&&!ht(Pe)&&(A?Pe<=f:Pe<f)?Q=ge+1:se=ge}return se}return to(o,f,jn,A)}function to(o,f,A,Q){var se=0,ge=null==o?0:o.length;if(0===ge)return 0;for(var Pe=(f=A(f))!=f,Re=null===f,Ue=ht(f),tt=f===de;se<ge;){var rt=Ba((se+ge)/2),ut=A(o[rt]),St=ut!==de,Ot=null===ut,Wt=ut==ut,nr=ht(ut);if(Pe)var Gt=Q||Wt;else Gt=tt?Wt&&(Q||St):Re?Wt&&St&&(Q||!Ot):Ue?Wt&&St&&!Ot&&(Q||!nr):!Ot&&!nr&&(Q?ut<=f:ut<f);Gt?se=rt+1:ge=rt}return mn(ge,4294967294)}function gh(o,f){for(var A=-1,Q=o.length,se=0,ge=[];++A<Q;){var Pe=o[A],Re=f?f(Pe):Pe;if(!A||!Ti(Re,Ue)){var Ue=Re;ge[se++]=0===Pe?0:Pe}}return ge}function ro(o){return"number"==typeof o?o:ht(o)?Z:+o}function Un(o){if("string"==typeof o)return o;if($t(o))return Ir(o,Un)+"";if(ht(o))return Jd?Jd.call(o):"";var f=o+"";return"0"==f&&1/o==-T?"-0":f}function Ea(o,f,A){var Q=-1,se=Ho,ge=o.length,Pe=!0,Re=[],Ue=Re;if(A)Pe=!1,se=Rs;else if(ge>=200){var tt=f?null:Om(o);if(tt)return ks(tt);Pe=!1,se=ls,Ue=new _a}else Ue=f?[]:Re;e:for(;++Q<ge;){var rt=o[Q],ut=f?f(rt):rt;if(rt=A||0!==rt?rt:0,Pe&&ut==ut){for(var St=Ue.length;St--;)if(Ue[St]===ut)continue e;f&&Ue.push(ut),Re.push(rt)}else se(Ue,ut,A)||(Ue!==Re&&Ue.push(ut),Re.push(rt))}return Re}function vs(o,f){return null==(o=kh(o,f=Ui(f,o)))||delete o[_i(Dn(f))]}function mh(o,f,A,Q){return eo(o,f,A(Fi(o,f)),Q)}function no(o,f,A,Q){for(var se=o.length,ge=Q?se:-1;(Q?ge--:++ge<se)&&f(o[ge],ge,o););return A?Fn(o,Q?0:ge,Q?ge+1:se):Fn(o,Q?ge+1:0,Q?se:ge)}function yh(o,f){var A=o;return A instanceof or&&(A=A.value()),us(f,function(Q,se){return se.func.apply(se.thisArg,pa([Q],se.args))},A)}function Uf(o,f,A){var Q=o.length;if(Q<2)return Q?Ea(o[0]):[];for(var se=-1,ge=je(Q);++se<Q;)for(var Pe=o[se],Re=-1;++Re<Q;)Re!=se&&(ge[se]=Ys(ge[se]||Pe,o[Re],f,A));return Ea(en(ge,1),f,A)}function _u(o,f,A){for(var Q=-1,se=o.length,ge=f.length,Pe={};++Q<se;)A(Pe,o[Q],Q<ge?f[Q]:de);return Pe}function Bf(o){return Kr(o)?o:[]}function Nf(o){return"function"==typeof o?o:jn}function Ui(o,f){return $t(o)?o:Zf(o,f)?[o]:fo(gr(o))}var xm=rr;function yi(o,f,A){var Q=o.length;return A=A===de?Q:A,!f&&A>=Q?o:Fn(o,f,A)}var jf=Hg||function(o){return ln.clearTimeout(o)};function _h(o,f){if(f)return o.slice();var A=o.length,Q=Ns?Ns(A):new o.constructor(A);return o.copy(Q),Q}function gs(o){var f=new o.constructor(o.byteLength);return new Qo(f).set(new Qo(o)),f}function Eh(o,f){var A=f?gs(o.buffer):o.buffer;return new o.constructor(A,o.byteOffset,o.length)}function Tu(o,f){if(o!==f){var A=o!==de,Q=null===o,se=o==o,ge=ht(o),Pe=f!==de,Re=null===f,Ue=f==f,tt=ht(f);if(!Re&&!tt&&!ge&&o>f||ge&&Pe&&Ue&&!Re&&!tt||Q&&Pe&&Ue||!A&&Ue||!se)return 1;if(!Q&&!ge&&!tt&&o<f||tt&&A&&se&&!Q&&!ge||Re&&A&&se||!Pe&&se||!Ue)return-1}return 0}function bh(o,f,A,Q){for(var se=-1,ge=o.length,Pe=A.length,Re=-1,Ue=f.length,tt=Jr(ge-Pe,0),rt=je(Ue+tt),ut=!Q;++Re<Ue;)rt[Re]=f[Re];for(;++se<Pe;)(ut||se<ge)&&(rt[A[se]]=o[se]);for(;tt--;)rt[Re++]=o[se++];return rt}function Eu(o,f,A,Q){for(var se=-1,ge=o.length,Pe=-1,Re=A.length,Ue=-1,tt=f.length,rt=Jr(ge-Re,0),ut=je(rt+tt),St=!Q;++se<rt;)ut[se]=o[se];for(var Ot=se;++Ue<tt;)ut[Ot+Ue]=f[Ue];for(;++Pe<Re;)(St||se<ge)&&(ut[Ot+A[Pe]]=o[se++]);return ut}function Bn(o,f){var A=-1,Q=o.length;for(f||(f=je(Q));++A<Q;)f[A]=o[A];return f}function Xn(o,f,A,Q){var se=!A;A||(A={});for(var ge=-1,Pe=f.length;++ge<Pe;){var Re=f[ge],Ue=Q?Q(A[Re],o[Re],Re,A,o):de;Ue===de&&(Ue=o[Re]),se?gi(A,Re,Ue):Vs(A,Re,Ue)}return A}function bu(o,f){return function(A,Q){var se=$t(A)?Rd:Ef,ge=f?f():{};return se(A,o,Nt(Q,2),ge)}}function Ji(o){return rr(function(f,A){var Q=-1,se=A.length,ge=se>1?A[se-1]:de,Pe=se>2?A[2]:de;for(ge=o.length>3&&"function"==typeof ge?(se--,ge):de,Pe&&an(A[0],A[1],Pe)&&(ge=se<3?de:ge,se=1),f=xr(f);++Q<se;){var Re=A[Q];Re&&o(f,Re,Q,ge)}return f})}function Sh(o,f){return function(A,Q){if(null==A)return A;if(!Nn(A))return o(A,Q);for(var se=A.length,ge=f?se:-1,Pe=xr(A);(f?ge--:++ge<se)&&!1!==Q(Pe[ge],ge,Pe););return A}}function Hf(o){return function(f,A,Q){for(var se=-1,ge=xr(f),Pe=Q(f),Re=Pe.length;Re--;){var Ue=Pe[o?Re:++se];if(!1===A(ge[Ue],Ue,ge))break}return f}}function Ah(o){return function(f){var A=zi(f=gr(f))?Ri(f):de,Q=A?A[0]:f.charAt(0),se=A?yi(A,1).join(""):f.slice(1);return Q[o]()+se}}function ba(o){return function(f){return us(Oc(Op(f).replace(hg,"")),o,"")}}function io(o){return function(){var f=arguments;switch(f.length){case 0:return new o;case 1:return new o(f[0]);case 2:return new o(f[0],f[1]);case 3:return new o(f[0],f[1],f[2]);case 4:return new o(f[0],f[1],f[2],f[3]);case 5:return new o(f[0],f[1],f[2],f[3],f[4]);case 6:return new o(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new o(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var A=hs(o.prototype),Q=o.apply(A,f);return Fr(Q)?Q:A}}function xu(o){return function(f,A,Q){var se=xr(f);if(!Nn(f)){var ge=Nt(A,3);f=sn(f),A=function(Re){return ge(se[Re],Re,se)}}var Pe=o(f,A,Q);return Pe>-1?se[ge?f[Pe]:Pe]:de}}function Ch(o){return ta(function(f){var A=f.length,Q=A,se=kn.prototype.thru;for(o&&f.reverse();Q--;){var ge=f[Q];if("function"!=typeof ge)throw new Mn(ee);if(se&&!Pe&&"wrapper"==wu(ge))var Pe=new kn([],!0)}for(Q=Pe?Q:A;++Q<A;){var Re=wu(ge=f[Q]),Ue="wrapper"==Re?Yf(ge):de;Pe=Ue&&Qf(Ue[0])&&424==Ue[1]&&!Ue[4].length&&1==Ue[9]?Pe[wu(Ue[0])].apply(Pe,Ue[3]):1==ge.length&&Qf(ge)?Pe[Re]():Pe.thru(ge)}return function(){var tt=arguments,rt=tt[0];if(Pe&&1==tt.length&&$t(rt))return Pe.plant(rt).value();for(var ut=0,St=A?f[ut].apply(this,tt):rt;++ut<A;)St=f[ut].call(this,St);return St}})}function Ha(o,f,A,Q,se,ge,Pe,Re,Ue,tt){var rt=f&w,ut=1&f,St=2&f,Ot=24&f,Wt=512&f,nr=St?de:io(o);return function Gt(){for(var ur=arguments.length,lr=je(ur),fi=ur;fi--;)lr[fi]=arguments[fi];if(Ot)var cn=xa(Gt),Qn=sf(lr,cn);if(Q&&(lr=bh(lr,Q,se,Ot)),ge&&(lr=Eu(lr,ge,Pe,Ot)),ur-=Qn,Ot&&ur<tt){var Ur=ga(lr,cn);return Du(o,f,Ha,Gt.placeholder,A,lr,Ur,Re,Ue,tt-ur)}var $n=ut?A:this,Vr=St?$n[o]:o;return ur=lr.length,Re?lr=Fh(lr,Re):Wt&&ur>1&&lr.reverse(),rt&&Ue<ur&&(lr.length=Ue),this&&this!==ln&&this instanceof Gt&&(Vr=nr||io(Vr)),Vr.apply($n,lr)}}function Wf(o,f){return function(A,Q){return function Pf(o,f,A,Q){return mi(o,function(se,ge,Pe){f(Q,A(se),ge,Pe)}),Q}(A,o,f(Q),{})}}function Su(o,f){return function(A,Q){var se;if(A===de&&Q===de)return f;if(A!==de&&(se=A),Q!==de){if(se===de)return Q;"string"==typeof A||"string"==typeof Q?(A=Un(A),Q=Un(Q)):(A=ro(A),Q=ro(Q)),se=o(A,Q)}return se}}function ms(o){return ta(function(f){return f=Ir(f,gn(Nt())),rr(function(A){var Q=this;return o(f,function(se){return oi(se,Q,A)})})})}function Au(o,f){var A=(f=f===de?" ":Un(f)).length;if(A<2)return A?Js(f,o):f;var Q=Js(f,ru(o/Fs(f)));return zi(f)?yi(Ri(Q),0,o).join(""):Q.slice(0,o)}function Ph(o){return function(f,A,Q){return Q&&"number"!=typeof Q&&an(f,A,Q)&&(A=Q=de),f=ia(f),A===de?(A=f,f=0):A=ia(A),function gu(o,f,A,Q){for(var se=-1,ge=Jr(ru((f-o)/(A||1)),0),Pe=je(ge);ge--;)Pe[Q?ge:++se]=o,o+=A;return Pe}(f,A,Q=Q===de?f<A?1:-1:ia(Q),o)}}function Cu(o){return function(f,A){return"string"==typeof f&&"string"==typeof A||(f=li(f),A=li(A)),o(f,A)}}function Du(o,f,A,Q,se,ge,Pe,Re,Ue,tt){var rt=8&f;f|=rt?v:64,4&(f&=~(rt?64:v))||(f&=-4);var nr=[o,f,se,rt?ge:de,rt?Pe:de,rt?de:ge,rt?de:Pe,Re,Ue,tt],Gt=A.apply(de,nr);return Qf(o)&&Uh(Gt,nr),Gt.placeholder=Q,Bh(Gt,o,f)}function Gf(o){var f=br[o];return function(A,Q){if(A=li(A),(Q=null==Q?0:mn(Jt(Q),292))&&Zd(A)){var se=(gr(A)+"e").split("e");return+((se=(gr(f(se[0]+"e"+(+se[1]+Q)))+"e").split("e"))[0]+"e"+(+se[1]-Q))}return f(A)}}var Om=Na&&1/ks(new Na([,-0]))[1]==T?function(o){return new Na(o)}:kc;function Pu(o){return function(f){var A=_n(f);return A==ot?Gd(f):A==tr?function Mg(Fe){var Je=-1,je=Array(Fe.size);return Fe.forEach(function(xt){je[++Je]=[xt,xt]}),je}(f):function wg(Fe,Je){return Ir(Je,function(je){return[je,Fe[je]]})}(f,o(f))}}function ea(o,f,A,Q,se,ge,Pe,Re){var Ue=2&f;if(!Ue&&"function"!=typeof o)throw new Mn(ee);var tt=Q?Q.length:0;if(tt||(f&=-97,Q=se=de),Pe=Pe===de?Pe:Jr(Jt(Pe),0),Re=Re===de?Re:Jt(Re),tt-=se?se.length:0,64&f){var rt=Q,ut=se;Q=se=de}var St=Ue?de:Yf(o),Ot=[o,f,A,Q,se,rt,ut,ge,Pe,Re];if(St&&function ku(o,f){var A=o[1],Q=f[1],se=A|Q;if(!(se<131)&&!(Q==w&&8==A||Q==w&&256==A&&o[7].length<=f[8]||384==Q&&f[7].length<=f[8]&&8==A))return o;1&Q&&(o[2]=f[2],se|=1&A?0:4);var Re=f[3];if(Re){var Ue=o[3];o[3]=Ue?bh(Ue,Re,f[4]):Re,o[4]=Ue?ga(o[3],u):f[4]}(Re=f[5])&&(o[5]=(Ue=o[5])?Eu(Ue,Re,f[6]):Re,o[6]=Ue?ga(o[5],u):f[6]),(Re=f[7])&&(o[7]=Re),Q&w&&(o[8]=null==o[8]?f[8]:mn(o[8],f[8])),null==o[9]&&(o[9]=f[9]),o[0]=f[0],o[1]=se}(Ot,St),o=Ot[0],f=Ot[1],A=Ot[2],Q=Ot[3],se=Ot[4],!(Re=Ot[9]=Ot[9]===de?Ue?0:o.length:Jr(Ot[9]-tt,0))&&24&f&&(f&=-25),f&&1!=f)Wt=8==f||16==f?function wm(o,f,A){var Q=io(o);return function se(){for(var ge=arguments.length,Pe=je(ge),Re=ge,Ue=xa(se);Re--;)Pe[Re]=arguments[Re];var tt=ge<3&&Pe[0]!==Ue&&Pe[ge-1]!==Ue?[]:ga(Pe,Ue);return(ge-=tt.length)<A?Du(o,f,Ha,se.placeholder,de,Pe,tt,de,de,A-ge):oi(this&&this!==ln&&this instanceof se?Q:o,this,Pe)}}(o,f,Re):f!=v&&33!=f||se.length?Ha.apply(de,Ot):function Dh(o,f,A,Q){var se=1&f,ge=io(o);return function Pe(){for(var Re=-1,Ue=arguments.length,tt=-1,rt=Q.length,ut=je(rt+Ue),St=this&&this!==ln&&this instanceof Pe?ge:o;++tt<rt;)ut[tt]=Q[tt];for(;Ue--;)ut[tt++]=arguments[++Re];return oi(St,se?A:this,ut)}}(o,f,A,Q);else var Wt=function Pm(o,f,A){var Q=1&f,se=io(o);return function ge(){return(this&&this!==ln&&this instanceof ge?se:o).apply(Q?A:this,arguments)}}(o,f,A);return Bh((St?Ff:Uh)(Wt,Ot),o,f)}function ao(o,f,A,Q){return o===de||Ti(o,qi[A])&&!_r.call(Q,A)?f:o}function Vf(o,f,A,Q,se,ge){return Fr(o)&&Fr(f)&&(ge.set(f,o),ja(o,f,de,Vf,ge),ge.delete(f)),o}function Im(o){return vo(o)?de:o}function so(o,f,A,Q,se,ge){var Pe=1&A,Re=o.length,Ue=f.length;if(Re!=Ue&&!(Pe&&Ue>Re))return!1;var tt=ge.get(o),rt=ge.get(f);if(tt&&rt)return tt==f&&rt==o;var ut=-1,St=!0,Ot=2&A?new _a:de;for(ge.set(o,f),ge.set(f,o);++ut<Re;){var Wt=o[ut],nr=f[ut];if(Q)var Gt=Pe?Q(nr,Wt,ut,f,o,ge):Q(Wt,nr,ut,o,f,ge);if(Gt!==de){if(Gt)continue;St=!1;break}if(Ot){if(!Ms(f,function(ur,lr){if(!ls(Ot,lr)&&(Wt===ur||se(Wt,ur,A,Q,ge)))return Ot.push(lr)})){St=!1;break}}else if(Wt!==nr&&!se(Wt,nr,A,Q,ge)){St=!1;break}}return ge.delete(o),ge.delete(f),St}function ta(o){return ec(lo(o,de,nc),o+"")}function Kf(o){return uh(o,sn,zf)}function oo(o){return uh(o,Zn,qf)}var Yf=cs?function(o){return cs.get(o)}:kc;function wu(o){for(var f=o.name+"",A=ds[f],Q=_r.call(ds,f)?A.length:0;Q--;){var se=A[Q],ge=se.func;if(null==ge||ge==o)return se.name}return f}function xa(o){return(_r.call(he,"placeholder")?he:o).placeholder}function Nt(){var o=he.iteratee||Es;return o=o===Es?Zs:o,arguments.length?o(arguments[0],arguments[1]):o}function Wa(o,f){var A=o.__data__;return function Lh(o){var f=typeof o;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==o:null===o}(f)?A["string"==typeof f?"string":"hash"]:A.map}function Ou(o){for(var f=sn(o),A=f.length;A--;){var Q=f[A],se=o[Q];f[A]=[Q,se,Rh(se)]}return f}function Ga(o,f){var A=function Lg(Fe,Je){return null==Fe?de:Fe[Je]}(o,f);return ch(A)?A:de}var zf=ff?function(o){return null==o?[]:(o=xr(o),ha(ff(o),function(f){return zd.call(o,f)}))}:Fc,qf=ff?function(o){for(var f=[];o;)pa(f,zf(o)),o=$o(o);return f}:Fc,_n=yn;function Oh(o,f,A){for(var Q=-1,se=(f=Ui(f,o)).length,ge=!1;++Q<se;){var Pe=_i(f[Q]);if(!(ge=null!=o&&A(o,Pe)))break;o=o[Pe]}return ge||++Q!=se?ge:!!(se=null==o?0:o.length)&&fl(se)&&ra(Pe,se)&&($t(o)||za(o))}function Lu(o){return"function"!=typeof o.constructor||uo(o)?{}:hs($o(o))}function Ih(o){return $t(o)||za(o)||!!(eu&&o&&o[eu])}function ra(o,f){var A=typeof o;return!!(f=f??I)&&("number"==A||"symbol"!=A&&Vi.test(o))&&o>-1&&o%1==0&&o<f}function an(o,f,A){if(!Fr(A))return!1;var Q=typeof f;return!!("number"==Q?Nn(A)&&ra(f,A.length):"string"==Q&&f in A)&&Ti(A[f],o)}function Zf(o,f){if($t(o))return!1;var A=typeof o;return!("number"!=A&&"symbol"!=A&&"boolean"!=A&&null!=o&&!ht(o))||wi.test(o)||!pn.test(o)||null!=f&&o in xr(f)}function Qf(o){var f=wu(o),A=he[f];if("function"!=typeof A||!(f in or.prototype))return!1;if(o===A)return!0;var Q=Yf(A);return!!Q&&o===Q[0]}(hf&&_n(new hf(new ArrayBuffer(1)))!=ce||ma&&_n(new ma)!=ot||pf&&_n(pf.resolve())!=Ht||Na&&_n(new Na)!=tr||Ws&&_n(new Ws)!=fr)&&(_n=function(o){var f=yn(o),A=f==nt?o.constructor:de,Q=A?Ka(A):"";if(Q)switch(Q){case Vg:return ce;case vf:return ot;case Kg:return Ht;case nu:return tr;case $d:return fr}return f});var $f=qo?na:ml;function uo(o){var f=o&&o.constructor;return o===("function"==typeof f&&f.prototype||qi)}function Rh(o){return o==o&&!Fr(o)}function Mu(o,f){return function(A){return null!=A&&A[o]===f&&(f!==de||o in xr(A))}}function lo(o,f,A){return f=Jr(f===de?o.length-1:f,0),function(){for(var Q=arguments,se=-1,ge=Jr(Q.length-f,0),Pe=je(ge);++se<ge;)Pe[se]=Q[f+se];se=-1;for(var Re=je(f+1);++se<f;)Re[se]=Q[se];return Re[f]=A(Pe),oi(o,this,Re)}}function kh(o,f){return f.length<2?o:Fi(o,Fn(f,0,-1))}function Fh(o,f){for(var A=o.length,Q=mn(f.length,A),se=Bn(o);Q--;){var ge=f[Q];o[Q]=ra(ge,A)?se[ge]:de}return o}function Jf(o,f){if(("constructor"!==f||"function"!=typeof o[f])&&"__proto__"!=f)return o[f]}var Uh=Fu(Ff),Va=qd||function(o,f){return ln.setTimeout(o,f)},ec=Fu(Tm);function Bh(o,f,A){var Q=f+"";return ec(o,function Ru(o,f){var A=f.length;if(!A)return o;var Q=A-1;return f[Q]=(A>1?"& ":"")+f[Q],f=f.join(A>2?", ":" "),o.replace(fe,"{\n/* [wrapped with "+f+"] */\n")}(Q,function Bu(o,f){return ui(Te,function(A){var Q="_."+A[0];f&A[1]&&!Ho(o,Q)&&o.push(Q)}),o.sort()}(function Xf(o){var f=o.match(ve);return f?f[1].split(Ae):[]}(Q),A)))}function Fu(o){var f=0,A=0;return function(){var Q=df(),se=16-(Q-A);if(A=Q,se>0){if(++f>=800)return arguments[0]}else f=0;return o.apply(de,arguments)}}function Uu(o,f){var A=-1,Q=o.length,se=Q-1;for(f=f===de?Q:f;++A<f;){var ge=Mf(A,se),Pe=o[ge];o[ge]=o[A],o[A]=Pe}return o.length=f,o}var fo=function Um(o){var f=ho(o,function(Q){return 500===A.size&&A.clear(),Q}),A=f.cache;return f}(function(o){var f=[];return 46===o.charCodeAt(0)&&f.push(""),o.replace(An,function(A,Q,se,ge){f.push(se?ge.replace(Mt,"$1"):Q||A)}),f});function _i(o){if("string"==typeof o||ht(o))return o;var f=o+"";return"0"==f&&1/o==-T?"-0":f}function Ka(o){if(null!=o){try{return Bs.call(o)}catch{}try{return o+""}catch{}}return""}function Nh(o){if(o instanceof or)return o.clone();var f=new kn(o.__wrapped__,o.__chain__);return f.__actions__=Bn(o.__actions__),f.__index__=o.__index__,f.__values__=o.__values__,f}var tc=rr(function(o,f){return Kr(o)?Ys(o,en(f,1,Kr,!0)):[]}),Hm=rr(function(o,f){var A=Dn(f);return Kr(A)&&(A=de),Kr(o)?Ys(o,en(f,1,Kr,!0),Nt(A,2)):[]}),Wm=rr(function(o,f){var A=Dn(f);return Kr(A)&&(A=de),Kr(o)?Ys(o,en(f,1,Kr,!0),de,A):[]});function co(o,f,A){var Q=null==o?0:o.length;if(!Q)return-1;var se=null==A?0:Jt(A);return se<0&&(se=Jr(Q+se,0)),ka(o,Nt(f,3),se)}function Wh(o,f,A){var Q=null==o?0:o.length;if(!Q)return-1;var se=Q-1;return A!==de&&(se=Jt(A),se=A<0?Jr(Q+se,0):mn(se,Q-1)),ka(o,Nt(f,3),se,!0)}function nc(o){return null!=o&&o.length?en(o,1):[]}function Gh(o){return o&&o.length?o[0]:de}var qm=rr(function(o){var f=Ir(o,Bf);return f.length&&f[0]===o[0]?Df(f):[]}),ju=rr(function(o){var f=Dn(o),A=Ir(o,Bf);return f===Dn(A)?f=de:A.pop(),A.length&&A[0]===o[0]?Df(A,Nt(f,2)):[]}),Vh=rr(function(o){var f=Dn(o),A=Ir(o,Bf);return(f="function"==typeof f?f:de)&&A.pop(),A.length&&A[0]===o[0]?Df(A,de,f):[]});function Dn(o){var f=null==o?0:o.length;return f?o[f-1]:de}var Qm=rr(Yh);function Yh(o,f){return o&&o.length&&f&&f.length?Rf(o,f):o}var Jm=ta(function(o,f){var A=null==o?0:o.length,Q=bf(o,f);return $s(o,Ir(f,function(se){return ra(se,A)?+se:se}).sort(Tu)),Q});function uc(o){return null==o?o:Qd.call(o)}var Xh=rr(function(o){return Ea(en(o,1,Kr,!0))}),o0=rr(function(o){var f=Dn(o);return Kr(f)&&(f=de),Ea(en(o,1,Kr,!0),Nt(f,2))}),Vu=rr(function(o){var f=Dn(o);return f="function"==typeof f?f:de,Ea(en(o,1,Kr,!0),de,f)});function cc(o){if(!o||!o.length)return[];var f=0;return o=ha(o,function(A){if(Kr(A))return f=Jr(A.length,f),!0}),Ko(f,function(A){return Ir(o,rf(A))})}function Ku(o,f){if(!o||!o.length)return[];var A=cc(o);return null==f?A:Ir(A,function(Q){return oi(f,de,Q)})}var f0=rr(function(o,f){return Kr(o)?Ys(o,f):[]}),c0=rr(function(o){return Uf(ha(o,Kr))}),dc=rr(function(o){var f=Dn(o);return Kr(f)&&(f=de),Uf(ha(o,Kr),Nt(f,2))}),d0=rr(function(o){var f=Dn(o);return f="function"==typeof f?f:de,Uf(ha(o,Kr),de,f)}),Yu=rr(cc),zu=rr(function(o){var f=o.length,A=f>1?o[f-1]:de;return A="function"==typeof A?(o.pop(),A):de,Ku(o,A)});function $h(o){var f=he(o);return f.__chain__=!0,f}function qu(o,f){return f(o)}var p0=ta(function(o){var f=o.length,A=f?o[0]:0,Q=this.__wrapped__,se=function(ge){return bf(ge,o)};return!(f>1||this.__actions__.length)&&Q instanceof or&&ra(A)?((Q=Q.slice(A,+A+(f?1:0))).__actions__.push({func:qu,args:[se],thisArg:de}),new kn(Q,this.__chain__).thru(function(ge){return f&&!ge.length&&ge.push(de),ge})):this.thru(se)}),y0=bu(function(o,f,A){_r.call(o,A)?++o[A]:gi(o,A,1)}),tp=xu(co),T0=xu(Wh);function rp(o,f){return($t(o)?ui:$i)(o,Nt(f,3))}function Qu(o,f){return($t(o)?Cg:sh)(o,Nt(f,3))}var x0=bu(function(o,f,A){_r.call(o,A)?o[A].push(f):gi(o,A,[f])}),np=rr(function(o,f,A){var Q=-1,se="function"==typeof f,ge=Nn(o)?je(o.length):[];return $i(o,function(Pe){ge[++Q]=se?oi(f,Pe,A):qs(Pe,f,A)}),ge}),S0=bu(function(o,f,A){gi(o,A,f)});function Ya(o,f){return($t(o)?Ir:dh)(o,Nt(f,3))}var ip=bu(function(o,f,A){o[A?0:1].push(f)},function(){return[[],[]]}),ap=rr(function(o,f){if(null==o)return[];var A=f.length;return A>1&&an(o,f[0],f[1])?f=[]:A>2&&an(f[0],f[1],f[2])&&(f=[f[0]]),vh(o,en(f,1),[])}),el=tu||function(){return ln.Date.now()};function sp(o,f,A){return f=A?de:f,ea(o,w,de,de,de,de,f=o&&null==f?o.length:f)}function yc(o,f){var A;if("function"!=typeof f)throw new Mn(ee);return o=Jt(o),function(){return--o>0&&(A=f.apply(this,arguments)),o<=1&&(f=de),A}}var _c=rr(function(o,f,A){var Q=1;if(A.length){var se=ga(A,xa(_c));Q|=v}return ea(o,Q,f,A,se)}),op=rr(function(o,f,A){var Q=3;if(A.length){var se=ga(A,xa(op));Q|=v}return ea(f,Q,o,A,se)});function lp(o,f,A){var Q,se,ge,Pe,Re,Ue,tt=0,rt=!1,ut=!1,St=!0;if("function"!=typeof o)throw new Mn(ee);function Ot(Ur){var $n=Q,Vr=se;return Q=se=de,tt=Ur,Pe=o.apply(Vr,$n)}function Wt(Ur){return tt=Ur,Re=Va(ur,f),rt?Ot(Ur):Pe}function Gt(Ur){var $n=Ur-Ue;return Ue===de||$n>=f||$n<0||ut&&Ur-tt>=ge}function ur(){var Ur=el();if(Gt(Ur))return lr(Ur);Re=Va(ur,function nr(Ur){var qa=f-(Ur-Ue);return ut?mn(qa,ge-(Ur-tt)):qa}(Ur))}function lr(Ur){return Re=de,St&&Q?Ot(Ur):(Q=se=de,Pe)}function Qn(){var Ur=el(),$n=Gt(Ur);if(Q=arguments,se=this,Ue=Ur,$n){if(Re===de)return Wt(Ue);if(ut)return jf(Re),Re=Va(ur,f),Ot(Ue)}return Re===de&&(Re=Va(ur,f)),Pe}return f=li(f)||0,Fr(A)&&(rt=!!A.leading,ge=(ut="maxWait"in A)?Jr(li(A.maxWait)||0,f):ge,St="trailing"in A?!!A.trailing:St),Qn.cancel=function fi(){Re!==de&&jf(Re),tt=0,Q=Ue=se=Re=de},Qn.flush=function cn(){return Re===de?Pe:lr(el())},Qn}var Tc=rr(function(o,f){return Ks(o,1,f)}),I0=rr(function(o,f,A){return Ks(o,li(f)||0,A)});function ho(o,f){if("function"!=typeof o||null!=f&&"function"!=typeof f)throw new Mn(ee);var A=function(){var Q=arguments,se=f?f.apply(this,Q):Q[0],ge=A.cache;if(ge.has(se))return ge.get(se);var Pe=o.apply(this,Q);return A.cache=ge.set(se,Pe)||ge,Pe};return A.cache=new(ho.Cache||Qi),A}function il(o){if("function"!=typeof o)throw new Mn(ee);return function(){var f=arguments;switch(f.length){case 0:return!o.call(this);case 1:return!o.call(this,f[0]);case 2:return!o.call(this,f[0],f[1]);case 3:return!o.call(this,f[0],f[1],f[2])}return!o.apply(this,f)}}ho.Cache=Qi;var al=xm(function(o,f){var A=(f=1==f.length&&$t(f[0])?Ir(f[0],gn(Nt())):Ir(en(f,1),gn(Nt()))).length;return rr(function(Q){for(var se=-1,ge=mn(Q.length,A);++se<ge;)Q[se]=f[se].call(this,Q[se]);return oi(o,this,Q)})}),sl=rr(function(o,f){var A=ga(f,xa(sl));return ea(o,v,de,f,A)}),fp=rr(function(o,f){var A=ga(f,xa(fp));return ea(o,64,de,f,A)}),cp=ta(function(o,f){return ea(o,256,de,de,de,f)});function Ti(o,f){return o===f||o!=o&&f!=f}var H0=Cu(Af),W0=Cu(function(o,f){return o>=f}),za=Xs(function(){return arguments}())?Xs:function(o){return Gr(o)&&_r.call(o,"callee")&&!zd.call(o,"callee")},$t=je.isArray,G0=Pd?gn(Pd):function lh(o){return Gr(o)&&yn(o)==vr};function Nn(o){return null!=o&&fl(o.length)&&!na(o)}function Kr(o){return Gr(o)&&Nn(o)}var Sa=Xd||ml,K0=wd?gn(wd):function hm(o){return Gr(o)&&yn(o)==Ze};function Ec(o){if(!Gr(o))return!1;var f=yn(o);return f==ct||"[object DOMException]"==f||"string"==typeof o.message&&"string"==typeof o.name&&!vo(o)}function na(o){if(!Fr(o))return!1;var f=yn(o);return f==yt||f==_t||"[object AsyncFunction]"==f||"[object Proxy]"==f}function hp(o){return"number"==typeof o&&o==Jt(o)}function fl(o){return"number"==typeof o&&o>-1&&o%1==0&&o<=I}function Fr(o){var f=typeof o;return null!=o&&("object"==f||"function"==f)}function Gr(o){return null!=o&&"object"==typeof o}var bc=Od?gn(Od):function fh(o){return Gr(o)&&_n(o)==ot};function Bi(o){return"number"==typeof o||Gr(o)&&yn(o)==bt}function vo(o){if(!Gr(o)||yn(o)!=nt)return!1;var f=$o(o);if(null===f)return!0;var A=_r.call(f,"constructor")&&f.constructor;return"function"==typeof A&&A instanceof A&&Bs.call(A)==Ng}var qt=Id?gn(Id):function Of(o){return Gr(o)&&yn(o)==Ut},zt=Ag?gn(Ag):function vm(o){return Gr(o)&&_n(o)==tr};function cl(o){return"string"==typeof o||!$t(o)&&Gr(o)&&yn(o)==It}function ht(o){return"symbol"==typeof o||Gr(o)&&yn(o)==Xt}var ys=Ld?gn(Ld):function gm(o){return Gr(o)&&fl(o.length)&&!!wr[yn(o)]},ry=Cu(Qs),vp=Cu(function(o,f){return o<=f});function gp(o){if(!o)return[];if(Nn(o))return cl(o)?Ri(o):Bn(o);if(js&&o[js])return function Rg(Fe){for(var Je,je=[];!(Je=Fe.next()).done;)je.push(Je.value);return je}(o[js]());var f=_n(o);return(f==ot?Gd:f==tr?ks:_o)(o)}function ia(o){return o?(o=li(o))===T||o===-T?17976931348623157e292*(o<0?-1:1):o==o?o:0:0===o?o:0}function Jt(o){var f=ia(o),A=f%1;return f==f?A?f-A:f:0}function mp(o){return o?ki(Jt(o),0,re):0}function li(o){if("number"==typeof o)return o;if(ht(o))return Z;if(Fr(o)){var f="function"==typeof o.valueOf?o.valueOf():o;o=Fr(f)?f+"":f}if("string"!=typeof o)return 0===o?o:+o;o=dr(o);var A=Cn.test(o);return A||Gi.test(o)?xg(o.slice(2),A?2:8):mr.test(o)?Z:+o}function xc(o){return Xn(o,Zn(o))}function gr(o){return null==o?"":Un(o)}var dl=Ji(function(o,f){if(uo(f)||Nn(f))Xn(f,sn(f),o);else for(var A in f)_r.call(f,A)&&Vs(o,A,f[A])}),hl=Ji(function(o,f){Xn(f,Zn(f),o)}),pl=Ji(function(o,f,A,Q){Xn(f,Zn(f),o,Q)}),ny=Ji(function(o,f,A,Q){Xn(f,sn(f),o,Q)}),_p=ta(bf),ay=rr(function(o,f){o=xr(o);var A=-1,Q=f.length,se=Q>2?f[2]:de;for(se&&an(f[0],f[1],se)&&(Q=1);++A<Q;)for(var ge=f[A],Pe=Zn(ge),Re=-1,Ue=Pe.length;++Re<Ue;){var tt=Pe[Re],rt=o[tt];(rt===de||Ti(rt,qi[tt])&&!_r.call(o,tt))&&(o[tt]=ge[tt])}return o}),Sc=rr(function(o){return o.push(de,Vf),oi(yo,de,o)});function Cc(o,f,A){var Q=null==o?de:Fi(o,f);return Q===de?A:Q}function go(o,f){return null!=o&&Oh(o,f,Cf)}var fy=Wf(function(o,f,A){null!=f&&"function"!=typeof f.toString&&(f=Zo.call(f)),o[f]=A},Ic(jn)),zT=Wf(function(o,f,A){null!=f&&"function"!=typeof f.toString&&(f=Zo.call(f)),_r.call(o,f)?o[f].push(A):o[f]=[A]},Nt),Ni=rr(qs);function sn(o){return Nn(o)?Tf(o):If(o)}function Zn(o){return Nn(o)?Tf(o,!0):function pu(o){if(!Fr(o))return function Mh(o){var f=[];if(null!=o)for(var A in xr(o))f.push(A);return f}(o);var f=uo(o),A=[];for(var Q in o)"constructor"==Q&&(f||!_r.call(o,Q))||A.push(Q);return A}(o)}var mo=Ji(function(o,f,A){ja(o,f,A)}),yo=Ji(function(o,f,A,Q){ja(o,f,A,Q)}),Dc=ta(function(o,f){var A={};if(null==o)return A;var Q=!1;f=Ir(f,function(ge){return ge=Ui(ge,o),Q||(Q=ge.length>1),ge}),Xn(o,oo(o),A),Q&&(A=qn(A,7,Im));for(var se=f.length;se--;)vs(A,f[se]);return A}),dy=ta(function(o,f){return null==o?{}:function ym(o,f){return vu(o,f,function(A,Q){return go(o,Q)})}(o,f)});function xp(o,f){if(null==o)return{};var A=Ir(oo(o),function(Q){return[Q]});return f=Nt(f),vu(o,A,function(Q,se){return f(Q,se[0])})}var Ap=Pu(sn),Cp=Pu(Zn);function _o(o){return null==o?[]:af(o,sn(o))}var XT=ba(function(o,f,A){return f=f.toLowerCase(),o+(A?gy(f):f)});function gy(o){return Eo(gr(o).toLowerCase())}function Op(o){return(o=gr(o))&&o.replace(Rn,Og).replace(Os,"")}var _y=ba(function(o,f,A){return o+(A?"-":"")+f.toLowerCase()}),Rr=ba(function(o,f,A){return o+(A?" ":"")+f.toLowerCase()}),ZT=Ah("toLowerCase"),Rp=ba(function(o,f,A){return o+(A?"_":"")+f.toLowerCase()}),vl=ba(function(o,f,A){return o+(A?" ":"")+Eo(f)}),Dy=ba(function(o,f,A){return o+(A?" ":"")+f.toUpperCase()}),Eo=Ah("toUpperCase");function Oc(o,f,A){return o=gr(o),(f=A?de:f)===de?function Wd(Fe){return gg.test(Fe)}(o)?function Kd(Fe){return Fe.match(pg)||[]}(o):function tf(Fe){return Fe.match(Ke)||[]}(o):o.match(f)||[]}var gl=rr(function(o,f){try{return oi(o,de,f)}catch(A){return Ec(A)?A:new wt(A)}}),Py=ta(function(o,f){return ui(f,function(A){A=_i(A),gi(o,A,_c(o[A],o))}),o});function Ic(o){return function(){return o}}var Bp=Ch(),Oy=Ch(!0);function jn(o){return o}function Es(o){return Zs("function"==typeof o?o:qn(o,1))}var Iy=rr(function(o,f){return function(A){return qs(A,o,f)}}),Ly=rr(function(o,f){return function(A){return qs(o,A,f)}});function Mc(o,f,A){var Q=sn(f),se=hu(f,Q);null==A&&(!Fr(f)||!se.length&&Q.length)&&(A=f,f=o,o=this,se=hu(f,sn(f)));var ge=!(Fr(A)&&"chain"in A&&!A.chain),Pe=na(o);return ui(se,function(Re){var Ue=f[Re];o[Re]=Ue,Pe&&(o.prototype[Re]=function(){var tt=this.__chain__;if(ge||tt){var rt=o(this.__wrapped__),ut=rt.__actions__=Bn(this.__actions__);return ut.push({func:Ue,args:arguments,thisArg:o}),rt.__chain__=tt,rt}return Ue.apply(o,pa([this.value()],arguments))})}),o}function kc(){}var ky=ms(Ir),Fy=ms(Md),Uy=ms(Ms);function Np(o){return Zf(o)?rf(_i(o)):function _m(o){return function(f){return Fi(f,o)}}(o)}var jp=Ph(),Ny=Ph(!0);function Fc(){return[]}function ml(){return!1}var Ky=Su(function(o,f){return o+f},0),Yy=Gf("ceil"),zy=Su(function(o,f){return o/f},1),Yr=Gf("floor"),yl=Su(function(o,f){return o*f},1),Bc=Gf("round"),Zy=Su(function(o,f){return o-f},0);return he.after=function tl(o,f){if("function"!=typeof f)throw new Mn(ee);return o=Jt(o),function(){if(--o<1)return f.apply(this,arguments)}},he.ary=sp,he.assign=dl,he.assignIn=hl,he.assignInWith=pl,he.assignWith=ny,he.at=_p,he.before=yc,he.bind=_c,he.bindAll=Py,he.bindKey=op,he.castArray=function B0(){if(!arguments.length)return[];var o=arguments[0];return $t(o)?o:[o]},he.chain=$h,he.chunk=function jh(o,f,A){f=(A?an(o,f,A):f===de)?1:Jr(Jt(f),0);var Q=null==o?0:o.length;if(!Q||f<1)return[];for(var se=0,ge=0,Pe=je(ru(Q/f));se<Q;)Pe[ge++]=Fn(o,se,se+=f);return Pe},he.compact=function Nm(o){for(var f=-1,A=null==o?0:o.length,Q=0,se=[];++f<A;){var ge=o[f];ge&&(se[Q++]=ge)}return se},he.concat=function jm(){var o=arguments.length;if(!o)return[];for(var f=je(o-1),A=arguments[0],Q=o;Q--;)f[Q-1]=arguments[Q];return pa($t(A)?Bn(A):[A],en(f,1))},he.cond=function wy(o){var f=null==o?0:o.length,A=Nt();return o=f?Ir(o,function(Q){if("function"!=typeof Q[1])throw new Mn(ee);return[A(Q[0]),Q[1]]}):[],rr(function(Q){for(var se=-1;++se<f;){var ge=o[se];if(oi(ge[0],this,Q))return oi(ge[1],this,Q)}})},he.conforms=function Fp(o){return function um(o){var f=sn(o);return function(A){return ah(A,o,f)}}(qn(o,1))},he.constant=Ic,he.countBy=y0,he.create=function iy(o,f){var A=hs(o);return null==f?A:ih(A,f)},he.curry=function rl(o,f,A){var Q=ea(o,8,de,de,de,de,de,f=A?de:f);return Q.placeholder=rl.placeholder,Q},he.curryRight=function up(o,f,A){var Q=ea(o,16,de,de,de,de,de,f=A?de:f);return Q.placeholder=up.placeholder,Q},he.debounce=lp,he.defaults=ay,he.defaultsDeep=Sc,he.defer=Tc,he.delay=I0,he.difference=tc,he.differenceBy=Hm,he.differenceWith=Wm,he.drop=function rc(o,f,A){var Q=null==o?0:o.length;return Q?Fn(o,(f=A||f===de?1:Jt(f))<0?0:f,Q):[]},he.dropRight=function Gm(o,f,A){var Q=null==o?0:o.length;return Q?Fn(o,0,(f=Q-(f=A||f===de?1:Jt(f)))<0?0:f):[]},he.dropRightWhile=function Nu(o,f){return o&&o.length?no(o,Nt(f,3),!0,!0):[]},he.dropWhile=function Hh(o,f){return o&&o.length?no(o,Nt(f,3),!0):[]},he.fill=function Vm(o,f,A,Q){var se=null==o?0:o.length;return se?(A&&"number"!=typeof A&&an(o,f,A)&&(A=0,Q=se),function fm(o,f,A,Q){var se=o.length;for((A=Jt(A))<0&&(A=-A>se?0:se+A),(Q=Q===de||Q>se?se:Jt(Q))<0&&(Q+=se),Q=A>Q?0:mp(Q);A<Q;)o[A++]=f;return o}(o,f,A,Q)):[]},he.filter=function _0(o,f){return($t(o)?ha:oh)(o,Nt(f,3))},he.flatMap=function E0(o,f){return en(Ya(o,f),1)},he.flatMapDeep=function vc(o,f){return en(Ya(o,f),T)},he.flatMapDepth=function b0(o,f,A){return A=A===de?1:Jt(A),en(Ya(o,f),A)},he.flatten=nc,he.flattenDeep=function Km(o){return null!=o&&o.length?en(o,T):[]},he.flattenDepth=function Ym(o,f){return null!=o&&o.length?en(o,f=f===de?1:Jt(f)):[]},he.flip=function nl(o){return ea(o,512)},he.flow=Bp,he.flowRight=Oy,he.fromPairs=function ic(o){for(var f=-1,A=null==o?0:o.length,Q={};++f<A;){var se=o[f];Q[se[0]]=se[1]}return Q},he.functions=function ly(o){return null==o?[]:hu(o,sn(o))},he.functionsIn=function Aa(o){return null==o?[]:hu(o,Zn(o))},he.groupBy=x0,he.initial=function ac(o){return null!=o&&o.length?Fn(o,0,-1):[]},he.intersection=qm,he.intersectionBy=ju,he.intersectionWith=Vh,he.invert=fy,he.invertBy=zT,he.invokeMap=np,he.iteratee=Es,he.keyBy=S0,he.keys=sn,he.keysIn=Zn,he.map=Ya,he.mapKeys=function Ep(o,f){var A={};return f=Nt(f,3),mi(o,function(Q,se,ge){gi(A,f(Q,se,ge),Q)}),A},he.mapValues=function cy(o,f){var A={};return f=Nt(f,3),mi(o,function(Q,se,ge){gi(A,se,f(Q,se,ge))}),A},he.matches=function Lc(o){return hh(qn(o,1))},he.matchesProperty=function Rc(o,f){return ph(o,qn(f,1))},he.memoize=ho,he.merge=mo,he.mergeWith=yo,he.method=Iy,he.methodOf=Ly,he.mixin=Mc,he.negate=il,he.nthArg=function My(o){return o=Jt(o),rr(function(f){return Lf(f,o)})},he.omit=Dc,he.omitBy=function bp(o,f){return xp(o,il(Nt(f)))},he.once=function L0(o){return yc(2,o)},he.orderBy=function A0(o,f,A,Q){return null==o?[]:($t(f)||(f=null==f?[]:[f]),$t(A=Q?de:A)||(A=null==A?[]:[A]),vh(o,f,A))},he.over=ky,he.overArgs=al,he.overEvery=Fy,he.overSome=Uy,he.partial=sl,he.partialRight=fp,he.partition=ip,he.pick=dy,he.pickBy=xp,he.property=Np,he.propertyOf=function By(o){return function(f){return null==o?de:Fi(o,f)}},he.pull=Qm,he.pullAll=Yh,he.pullAllBy=function sc(o,f,A){return o&&o.length&&f&&f.length?Rf(o,f,Nt(A,2)):o},he.pullAllWith=function $m(o,f,A){return o&&o.length&&f&&f.length?Rf(o,f,de,A):o},he.pullAt=Jm,he.range=jp,he.rangeRight=Ny,he.rearg=cp,he.reject=function gc(o,f){return($t(o)?ha:oh)(o,il(Nt(f,3)))},he.remove=function oc(o,f){var A=[];if(!o||!o.length)return A;var Q=-1,se=[],ge=o.length;for(f=Nt(f,3);++Q<ge;){var Pe=o[Q];f(Pe,Q,o)&&(A.push(Pe),se.push(Q))}return $s(o,se),A},he.rest=function R0(o,f){if("function"!=typeof o)throw new Mn(ee);return rr(o,f=f===de?f:Jt(f))},he.reverse=uc,he.sampleSize=function w0(o,f,A){return f=(A?an(o,f,A):f===de)?1:Jt(f),($t(o)?fu:mu)(o,f)},he.set=function Sp(o,f,A){return null==o?o:eo(o,f,A)},he.setWith=function py(o,f,A,Q){return Q="function"==typeof Q?Q:de,null==o?o:eo(o,f,A,Q)},he.shuffle=function mc(o){return($t(o)?sm:Em)(o)},he.slice=function Hu(o,f,A){var Q=null==o?0:o.length;return Q?(A&&"number"!=typeof A&&an(o,f,A)?(f=0,A=Q):(f=null==f?0:Jt(f),A=A===de?Q:Jt(A)),Fn(o,f,A)):[]},he.sortBy=ap,he.sortedUniq=function n0(o){return o&&o.length?gh(o):[]},he.sortedUniqBy=function lc(o,f){return o&&o.length?gh(o,Nt(f,2)):[]},he.split=function by(o,f,A){return A&&"number"!=typeof A&&an(o,f,A)&&(f=A=de),(A=A===de?re:A>>>0)?(o=gr(o))&&("string"==typeof f||null!=f&&!qt(f))&&!(f=Un(f))&&zi(o)?yi(Ri(o),0,A):o.split(f,A):[]},he.spread=function M0(o,f){if("function"!=typeof o)throw new Mn(ee);return f=null==f?0:Jr(Jt(f),0),rr(function(A){var Q=A[f],se=yi(A,0,f);return Q&&pa(se,Q),oi(o,this,se)})},he.tail=function i0(o){var f=null==o?0:o.length;return f?Fn(o,1,f):[]},he.take=function a0(o,f,A){return o&&o.length?Fn(o,0,(f=A||f===de?1:Jt(f))<0?0:f):[]},he.takeRight=function fc(o,f,A){var Q=null==o?0:o.length;return Q?Fn(o,(f=Q-(f=A||f===de?1:Jt(f)))<0?0:f,Q):[]},he.takeRightWhile=function s0(o,f){return o&&o.length?no(o,Nt(f,3),!1,!0):[]},he.takeWhile=function Gu(o,f){return o&&o.length?no(o,Nt(f,3)):[]},he.tap=function Jh(o,f){return f(o),o},he.throttle=function k0(o,f,A){var Q=!0,se=!0;if("function"!=typeof o)throw new Mn(ee);return Fr(A)&&(Q="leading"in A?!!A.leading:Q,se="trailing"in A?!!A.trailing:se),lp(o,f,{leading:Q,maxWait:f,trailing:se})},he.thru=qu,he.toArray=gp,he.toPairs=Ap,he.toPairsIn=Cp,he.toPath=function Gy(o){return $t(o)?Ir(o,_i):ht(o)?[o]:Bn(fo(gr(o)))},he.toPlainObject=xc,he.transform=function Dp(o,f,A){var Q=$t(o),se=Q||Sa(o)||ys(o);if(f=Nt(f,4),null==A){var ge=o&&o.constructor;A=se?Q?new ge:[]:Fr(o)&&na(ge)?hs($o(o)):{}}return(se?ui:mi)(o,function(Pe,Re,Ue){return f(A,Pe,Re,Ue)}),A},he.unary=function F0(o){return sp(o,1)},he.union=Xh,he.unionBy=o0,he.unionWith=Vu,he.uniq=function u0(o){return o&&o.length?Ea(o):[]},he.uniqBy=function Zh(o,f){return o&&o.length?Ea(o,Nt(f,2)):[]},he.uniqWith=function l0(o,f){return f="function"==typeof f?f:de,o&&o.length?Ea(o,de,f):[]},he.unset=function Pp(o,f){return null==o||vs(o,f)},he.unzip=cc,he.unzipWith=Ku,he.update=function vy(o,f,A){return null==o?o:mh(o,f,Nf(A))},he.updateWith=function Rt(o,f,A,Q){return Q="function"==typeof Q?Q:de,null==o?o:mh(o,f,Nf(A),Q)},he.values=_o,he.valuesIn=function qT(o){return null==o?[]:af(o,Zn(o))},he.without=f0,he.words=Oc,he.wrap=function U0(o,f){return sl(Nf(f),o)},he.xor=c0,he.xorBy=dc,he.xorWith=d0,he.zip=Yu,he.zipObject=function Qh(o,f){return _u(o||[],f||[],Vs)},he.zipObjectDeep=function h0(o,f){return _u(o||[],f||[],eo)},he.zipWith=zu,he.entries=Ap,he.entriesIn=Cp,he.extend=hl,he.extendWith=pl,Mc(he,he),he.add=Ky,he.attempt=gl,he.camelCase=XT,he.capitalize=gy,he.ceil=Yy,he.clamp=function fn(o,f,A){return A===de&&(A=f,f=de),A!==de&&(A=(A=li(A))==A?A:0),f!==de&&(f=(f=li(f))==f?f:0),ki(li(o),f,A)},he.clone=function ol(o){return qn(o,4)},he.cloneDeep=function ul(o){return qn(o,5)},he.cloneDeepWith=function j0(o,f){return qn(o,5,f="function"==typeof f?f:de)},he.cloneWith=function N0(o,f){return qn(o,4,f="function"==typeof f?f:de)},he.conformsTo=function dp(o,f){return null==f||ah(o,f,sn(f))},he.deburr=Op,he.defaultTo=function Up(o,f){return null==o||o!=o?f:o},he.divide=zy,he.endsWith=function my(o,f,A){o=gr(o),f=Un(f);var Q=o.length,se=A=A===de?Q:ki(Jt(A),0,Q);return(A-=f.length)>=0&&o.slice(A,se)==f},he.eq=Ti,he.escape=function yy(o){return(o=gr(o))&&Pi.test(o)?o.replace(In,Ig):o},he.escapeRegExp=function Ip(o){return(o=gr(o))&&vi.test(o)?o.replace(ca,"\\$&"):o},he.every=function Zu(o,f,A){var Q=$t(o)?Md:lm;return A&&an(o,f,A)&&(f=de),Q(o,Nt(f,3))},he.find=tp,he.findIndex=co,he.findKey=function sy(o,f){return Ud(o,Nt(f,3),mi)},he.findLast=T0,he.findLastIndex=Wh,he.findLastKey=function Ei(o,f){return Ud(o,Nt(f,3),Sf)},he.floor=Yr,he.forEach=rp,he.forEachRight=Qu,he.forIn=function oy(o,f){return null==o?o:xf(o,Nt(f,3),Zn)},he.forInRight=function uy(o,f){return null==o?o:zs(o,Nt(f,3),Zn)},he.forOwn=function _s(o,f){return o&&mi(o,Nt(f,3))},he.forOwnRight=function Ac(o,f){return o&&Sf(o,Nt(f,3))},he.get=Cc,he.gt=H0,he.gte=W0,he.has=function Tp(o,f){return null!=o&&Oh(o,f,cm)},he.hasIn=go,he.head=Gh,he.identity=jn,he.includes=function $u(o,f,A,Q){o=Nn(o)?o:_o(o),A=A&&!Q?Jt(A):0;var se=o.length;return A<0&&(A=Jr(se+A,0)),cl(o)?A<=se&&o.indexOf(f,A)>-1:!!se&&va(o,f,A)>-1},he.indexOf=function zm(o,f,A){var Q=null==o?0:o.length;if(!Q)return-1;var se=null==A?0:Jt(A);return se<0&&(se=Jr(Q+se,0)),va(o,f,se)},he.inRange=function Pc(o,f,A){return f=ia(f),A===de?(A=f,f=0):A=ia(A),function dm(o,f,A){return o>=mn(f,A)&&o<Jr(f,A)}(o=li(o),f,A)},he.invoke=Ni,he.isArguments=za,he.isArray=$t,he.isArrayBuffer=G0,he.isArrayLike=Nn,he.isArrayLikeObject=Kr,he.isBoolean=function V0(o){return!0===o||!1===o||Gr(o)&&yn(o)==Be},he.isBuffer=Sa,he.isDate=K0,he.isElement=function ll(o){return Gr(o)&&1===o.nodeType&&!vo(o)},he.isEmpty=function Y0(o){if(null==o)return!0;if(Nn(o)&&($t(o)||"string"==typeof o||"function"==typeof o.splice||Sa(o)||ys(o)||za(o)))return!o.length;var f=_n(o);if(f==ot||f==tr)return!o.size;if(uo(o))return!If(o).length;for(var A in o)if(_r.call(o,A))return!1;return!0},he.isEqual=function z0(o,f){return Ta(o,f)},he.isEqualWith=function q0(o,f,A){var Q=(A="function"==typeof A?A:de)?A(o,f):de;return Q===de?Ta(o,f,de,A):!!Q},he.isError=Ec,he.isFinite=function X0(o){return"number"==typeof o&&Zd(o)},he.isFunction=na,he.isInteger=hp,he.isLength=fl,he.isMap=bc,he.isMatch=function po(o,f){return o===f||wf(o,f,Ou(f))},he.isMatchWith=function Z0(o,f,A){return A="function"==typeof A?A:de,wf(o,f,Ou(f),A)},he.isNaN=function De(o){return Bi(o)&&o!=+o},he.isNative=function Q0(o){if($f(o))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ch(o)},he.isNil=function $0(o){return null==o},he.isNull=function mt(o){return null===o},he.isNumber=Bi,he.isObject=Fr,he.isObjectLike=Gr,he.isPlainObject=vo,he.isRegExp=qt,he.isSafeInteger=function J0(o){return hp(o)&&o>=-I&&o<=I},he.isSet=zt,he.isString=cl,he.isSymbol=ht,he.isTypedArray=ys,he.isUndefined=function ey(o){return o===de},he.isWeakMap=function ty(o){return Gr(o)&&_n(o)==fr},he.isWeakSet=function pp(o){return Gr(o)&&"[object WeakSet]"==yn(o)},he.join=function Xm(o,f){return null==o?"":Wg.call(o,f)},he.kebabCase=_y,he.last=Dn,he.lastIndexOf=function Zm(o,f,A){var Q=null==o?0:o.length;if(!Q)return-1;var se=Q;return A!==de&&(se=(se=Jt(A))<0?Jr(Q+se,0):mn(se,Q-1)),f==f?function GT(Fe,Je,je){for(var xt=je+1;xt--;)if(Fe[xt]===Je)return xt;return xt}(o,f,se):ka(o,Wo,se,!0)},he.lowerCase=Rr,he.lowerFirst=ZT,he.lt=ry,he.lte=vp,he.max=function Uc(o){return o&&o.length?ps(o,jn,Af):de},he.maxBy=function bs(o,f){return o&&o.length?ps(o,Nt(f,2),Af):de},he.mean=function qy(o){return Go(o,jn)},he.meanBy=function Wp(o,f){return Go(o,Nt(f,2))},he.min=function Tn(o){return o&&o.length?ps(o,jn,Qs):de},he.minBy=function Xy(o,f){return o&&o.length?ps(o,Nt(f,2),Qs):de},he.stubArray=Fc,he.stubFalse=ml,he.stubObject=function jy(){return{}},he.stubString=function Hy(){return""},he.stubTrue=function Hp(){return!0},he.multiply=yl,he.nth=function Kh(o,f){return o&&o.length?Lf(o,Jt(f)):de},he.noConflict=function Ry(){return ln._===this&&(ln._=uf),this},he.noop=kc,he.now=el,he.pad=function QT(o,f,A){o=gr(o);var Q=(f=Jt(f))?Fs(o):0;if(!f||Q>=f)return o;var se=(f-Q)/2;return Au(Ba(se),A)+o+Au(ru(se),A)},he.padEnd=function Ty(o,f,A){o=gr(o);var Q=(f=Jt(f))?Fs(o):0;return f&&Q<f?o+Au(f-Q,A):o},he.padStart=function Ey(o,f,A){o=gr(o);var Q=(f=Jt(f))?Fs(o):0;return f&&Q<f?Au(f-Q,A)+o:o},he.parseInt=function $T(o,f,A){return A||null==f?f=0:f&&(f=+f),Gg(gr(o).replace(Oi,""),f||0)},he.random=function wp(o,f,A){if(A&&"boolean"!=typeof A&&an(o,f,A)&&(f=A=de),A===de&&("boolean"==typeof f?(A=f,f=de):"boolean"==typeof o&&(A=o,o=de)),o===de&&f===de?(o=0,f=1):(o=ia(o),f===de?(f=o,o=0):f=ia(f)),o>f){var Q=o;o=f,f=Q}if(A||o%1||f%1){var se=Hs();return mn(o+se*(f-o+bg("1e-"+((se+"").length-1))),f)}return Mf(o,f)},he.reduce=function C0(o,f,A){var Q=$t(o)?us:Nd,se=arguments.length<3;return Q(o,Nt(f,4),A,se,$i)},he.reduceRight=function D0(o,f,A){var Q=$t(o)?kd:Nd,se=arguments.length<3;return Q(o,Nt(f,4),A,se,sh)},he.repeat=function Lp(o,f,A){return f=(A?an(o,f,A):f===de)?1:Jt(f),Js(gr(o),f)},he.replace=function Pn(){var o=arguments,f=gr(o[0]);return o.length<3?f:f.replace(o[1],o[2])},he.result=function hy(o,f,A){var Q=-1,se=(f=Ui(f,o)).length;for(se||(se=1,o=de);++Q<se;){var ge=null==o?de:o[_i(f[Q])];ge===de&&(Q=se,ge=A),o=na(ge)?ge.call(o):ge}return o},he.round=Bc,he.runInContext=Fe,he.sample=function P0(o){return($t(o)?nh:kf)(o)},he.size=function O0(o){if(null==o)return 0;if(Nn(o))return cl(o)?Fs(o):o.length;var f=_n(o);return f==ot||f==tr?o.size:If(o).length},he.snakeCase=Rp,he.some=function Ju(o,f,A){var Q=$t(o)?Ms:bm;return A&&an(o,f,A)&&(f=de),Q(o,Nt(f,3))},he.sortedIndex=function zh(o,f){return yu(o,f)},he.sortedIndexBy=function e0(o,f,A){return to(o,f,Nt(A,2))},he.sortedIndexOf=function Wu(o,f){var A=null==o?0:o.length;if(A){var Q=yu(o,f);if(Q<A&&Ti(o[Q],f))return Q}return-1},he.sortedLastIndex=function t0(o,f){return yu(o,f,!0)},he.sortedLastIndexBy=function qh(o,f,A){return to(o,f,Nt(A,2),!0)},he.sortedLastIndexOf=function r0(o,f){if(null!=o&&o.length){var Q=yu(o,f,!0)-1;if(Ti(o[Q],f))return Q}return-1},he.startCase=vl,he.startsWith=function Mp(o,f,A){return o=gr(o),A=null==A?0:ki(Jt(A),0,o.length),f=Un(f),o.slice(A,A+f.length)==f},he.subtract=Zy,he.sum=function Qy(o){return o&&o.length?nf(o,jn):0},he.sumBy=function $y(o,f){return o&&o.length?nf(o,Nt(f,2)):0},he.template=function xy(o,f,A){var Q=he.templateSettings;A&&an(o,f,A)&&(f=de),o=gr(o),f=pl({},f,Q,ao);var Re,Ue,se=pl({},f.imports,Q.imports,ao),ge=sn(se),Pe=af(se,ge),tt=0,rt=f.interpolate||vn,ut="__p += '",St=Lr((f.escape||vn).source+"|"+rt.source+"|"+(rt===Vn?Yt:vn).source+"|"+(f.evaluate||vn).source+"|$","g"),Ot="//# sourceURL="+(_r.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yg+"]")+"\n";o.replace(St,function(Gt,ur,lr,fi,cn,Qn){return lr||(lr=fi),ut+=o.slice(tt,Qn).replace(Ki,of),ur&&(Re=!0,ut+="' +\n__e("+ur+") +\n'"),cn&&(Ue=!0,ut+="';\n"+cn+";\n__p += '"),lr&&(ut+="' +\n((__t = ("+lr+")) == null ? '' : __t) +\n'"),tt=Qn+Gt.length,Gt}),ut+="';\n";var Wt=_r.call(f,"variable")&&f.variable;if(Wt){if(gt.test(Wt))throw new wt("Invalid `variable` option passed into `_.template`")}else ut="with (obj) {\n"+ut+"\n}\n";ut=(Ue?ut.replace(jt,""):ut).replace(Qt,"$1").replace(nn,"$1;"),ut="function("+(Wt||"obj")+") {\n"+(Wt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Re?", __e = _.escape":"")+(Ue?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ut+"return __p\n}";var nr=gl(function(){return kt(ge,Ot+"return "+ut).apply(de,Pe)});if(nr.source=ut,Ec(nr))throw nr;return nr},he.times=function Wy(o,f){if((o=Jt(o))<1||o>I)return[];var A=re,Q=mn(o,re);f=Nt(f),o-=re;for(var se=Ko(Q,f);++A<o;)f(A);return se},he.toFinite=ia,he.toInteger=Jt,he.toLength=mp,he.toLower=function wc(o){return gr(o).toLowerCase()},he.toNumber=li,he.toSafeInteger=function yp(o){return o?ki(Jt(o),-I,I):0===o?o:0},he.toString=gr,he.toUpper=function Sy(o){return gr(o).toUpperCase()},he.trim=function Ts(o,f,A){if((o=gr(o))&&(A||f===de))return dr(o);if(!o||!(f=Un(f)))return o;var Q=Ri(o),se=Ri(f);return yi(Q,jd(Q,se),Hd(Q,se)+1).join("")},he.trimEnd=function To(o,f,A){if((o=gr(o))&&(A||f===de))return o.slice(0,Fg(o)+1);if(!o||!(f=Un(f)))return o;var Q=Ri(o);return yi(Q,0,Hd(Q,Ri(f))+1).join("")},he.trimStart=function Ay(o,f,A){if((o=gr(o))&&(A||f===de))return o.replace(Oi,"");if(!o||!(f=Un(f)))return o;var Q=Ri(o);return yi(Q,jd(Q,Ri(f))).join("")},he.truncate=function kp(o,f){var A=30,Q="...";if(Fr(f)){var se="separator"in f?f.separator:se;A="length"in f?Jt(f.length):A,Q="omission"in f?Un(f.omission):Q}var ge=(o=gr(o)).length;if(zi(o)){var Pe=Ri(o);ge=Pe.length}if(A>=ge)return o;var Re=A-Fs(Q);if(Re<1)return Q;var Ue=Pe?yi(Pe,0,Re).join(""):o.slice(0,Re);if(se===de)return Ue+Q;if(Pe&&(Re+=Ue.length-Re),qt(se)){if(o.slice(Re).search(se)){var tt,rt=Ue;for(se.global||(se=Lr(se.source,gr(Xr.exec(se))+"g")),se.lastIndex=0;tt=se.exec(rt);)var ut=tt.index;Ue=Ue.slice(0,ut===de?Re:ut)}}else if(o.indexOf(Un(se),Re)!=Re){var St=Ue.lastIndexOf(se);St>-1&&(Ue=Ue.slice(0,St))}return Ue+Q},he.unescape=function Cy(o){return(o=gr(o))&&un.test(o)?o.replace(Wn,VT):o},he.uniqueId=function Vy(o){var f=++Bg;return gr(o)+f},he.upperCase=Dy,he.upperFirst=Eo,he.each=rp,he.eachRight=Qu,he.first=Gh,Mc(he,function(){var o={};return mi(he,function(f,A){_r.call(he.prototype,A)||(o[A]=f)}),o}(),{chain:!1}),he.VERSION="4.17.21",ui(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){he[o].placeholder=he}),ui(["drop","take"],function(o,f){or.prototype[o]=function(A){A=A===de?1:Jr(Jt(A),0);var Q=this.__filtered__&&!f?new or(this):this.clone();return Q.__filtered__?Q.__takeCount__=mn(A,Q.__takeCount__):Q.__views__.push({size:mn(A,re),type:o+(Q.__dir__<0?"Right":"")}),Q},or.prototype[o+"Right"]=function(A){return this.reverse()[o](A).reverse()}}),ui(["filter","map","takeWhile"],function(o,f){var A=f+1,Q=1==A||3==A;or.prototype[o]=function(se){var ge=this.clone();return ge.__iteratees__.push({iteratee:Nt(se,3),type:A}),ge.__filtered__=ge.__filtered__||Q,ge}}),ui(["head","last"],function(o,f){var A="take"+(f?"Right":"");or.prototype[o]=function(){return this[A](1).value()[0]}}),ui(["initial","tail"],function(o,f){var A="drop"+(f?"":"Right");or.prototype[o]=function(){return this.__filtered__?new or(this):this[A](1)}}),or.prototype.compact=function(){return this.filter(jn)},or.prototype.find=function(o){return this.filter(o).head()},or.prototype.findLast=function(o){return this.reverse().find(o)},or.prototype.invokeMap=rr(function(o,f){return"function"==typeof o?new or(this):this.map(function(A){return qs(A,o,f)})}),or.prototype.reject=function(o){return this.filter(il(Nt(o)))},or.prototype.slice=function(o,f){o=Jt(o);var A=this;return A.__filtered__&&(o>0||f<0)?new or(A):(o<0?A=A.takeRight(-o):o&&(A=A.drop(o)),f!==de&&(A=(f=Jt(f))<0?A.dropRight(-f):A.take(f-o)),A)},or.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},or.prototype.toArray=function(){return this.take(re)},mi(or.prototype,function(o,f){var A=/^(?:filter|find|map|reject)|While$/.test(f),Q=/^(?:head|last)$/.test(f),se=he[Q?"take"+("last"==f?"Right":""):f],ge=Q||/^find/.test(f);se&&(he.prototype[f]=function(){var Pe=this.__wrapped__,Re=Q?[1]:arguments,Ue=Pe instanceof or,tt=Re[0],rt=Ue||$t(Pe),ut=function(ur){var lr=se.apply(he,pa([ur],Re));return Q&&St?lr[0]:lr};rt&&A&&"function"==typeof tt&&1!=tt.length&&(Ue=rt=!1);var St=this.__chain__,Ot=!!this.__actions__.length,Wt=ge&&!St,nr=Ue&&!Ot;if(!ge&&rt){Pe=nr?Pe:new or(this);var Gt=o.apply(Pe,Re);return Gt.__actions__.push({func:qu,args:[ut],thisArg:de}),new kn(Gt,St)}return Wt&&nr?o.apply(this,Re):(Gt=this.thru(ut),Wt?Q?Gt.value()[0]:Gt.value():Gt)})}),ui(["pop","push","shift","sort","splice","unshift"],function(o){var f=Us[o],A=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",Q=/^(?:pop|shift)$/.test(o);he.prototype[o]=function(){var se=arguments;if(Q&&!this.__chain__){var ge=this.value();return f.apply($t(ge)?ge:[],se)}return this[A](function(Pe){return f.apply($t(Pe)?Pe:[],se)})}}),mi(or.prototype,function(o,f){var A=he[f];if(A){var Q=A.name+"";_r.call(ds,Q)||(ds[Q]=[]),ds[Q].push({name:f,func:A})}}),ds[Ha(de,2).name]=[{name:"wrapper",func:de}],or.prototype.clone=function Yg(){var o=new or(this.__wrapped__);return o.__actions__=Bn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Bn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Bn(this.__views__),o},or.prototype.reverse=function gf(){if(this.__filtered__){var o=new or(this);o.__dir__=-1,o.__filtered__=!0}else(o=this.clone()).__dir__*=-1;return o},or.prototype.value=function zg(){var o=this.__wrapped__.value(),f=this.__dir__,A=$t(o),Q=f<0,se=A?o.length:0,ge=function Rm(o,f,A){for(var Q=-1,se=A.length;++Q<se;){var ge=A[Q],Pe=ge.size;switch(ge.type){case"drop":o+=Pe;break;case"dropRight":f-=Pe;break;case"take":f=mn(f,o+Pe);break;case"takeRight":o=Jr(o,f-Pe)}}return{start:o,end:f}}(0,se,this.__views__),Pe=ge.start,Re=ge.end,Ue=Re-Pe,tt=Q?Re:Pe-1,rt=this.__iteratees__,ut=rt.length,St=0,Ot=mn(Ue,this.__takeCount__);if(!A||!Q&&se==Ue&&Ot==Ue)return yh(o,this.__actions__);var Wt=[];e:for(;Ue--&&St<Ot;){for(var nr=-1,Gt=o[tt+=f];++nr<ut;){var ur=rt[nr],fi=ur.type,cn=(0,ur.iteratee)(Gt);if(2==fi)Gt=cn;else if(!cn){if(1==fi)continue e;break e}}Wt[St++]=Gt}return Wt},he.prototype.at=p0,he.prototype.chain=function hc(){return $h(this)},he.prototype.commit=function v0(){return new kn(this.value(),this.__chain__)},he.prototype.next=function g0(){this.__values__===de&&(this.__values__=gp(this.value()));var o=this.__index__>=this.__values__.length;return{done:o,value:o?de:this.__values__[this.__index__++]}},he.prototype.plant=function m0(o){for(var f,A=this;A instanceof au;){var Q=Nh(A);Q.__index__=0,Q.__values__=de,f?se.__wrapped__=Q:f=Q;var se=Q;A=A.__wrapped__}return se.__wrapped__=o,f},he.prototype.reverse=function Xu(){var o=this.__wrapped__;if(o instanceof or){var f=o;return this.__actions__.length&&(f=new or(this)),(f=f.reverse()).__actions__.push({func:qu,args:[uc],thisArg:de}),new kn(f,this.__chain__)}return this.thru(uc)},he.prototype.toJSON=he.prototype.valueOf=he.prototype.value=function ep(){return yh(this.__wrapped__,this.__actions__)},he.prototype.first=he.prototype.head,js&&(he.prototype[js]=function pc(){return this}),he}();ln._=Yo,(Ge=function(){return Yo}.call(dt,Ne,dt,ft))!==de&&(ft.exports=Ge)}.call(this)},87459:(ft,dt,Ne)=>{var Ge=Ne(33357).getUint64;ft.exports=function(Se){var ue=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),N={version:Se[0],flags:new Uint8Array(Se.subarray(1,4)),references:[],referenceId:ue.getUint32(4),timescale:ue.getUint32(8)},ee=12;0===N.version?(N.earliestPresentationTime=ue.getUint32(ee),N.firstOffset=ue.getUint32(ee+4),ee+=8):(N.earliestPresentationTime=Ge(Se.subarray(ee)),N.firstOffset=Ge(Se.subarray(ee+8)),ee+=16);var G=ue.getUint16(ee+=2);for(ee+=2;G>0;ee+=12,G--)N.references.push({referenceType:(128&Se[ee])>>>7,referencedSize:2147483647&ue.getUint32(ee),subsegmentDuration:ue.getUint32(ee+4),startsWithSap:!!(128&Se[ee+8]),sapType:(112&Se[ee+8])>>>4,sapDeltaTime:268435455&ue.getUint32(ee+8)});return N}},16277:ft=>{var Ne,Ge,de,Se,ue,N,ee;ue=function(G,V){return Ne(Se(G,V))},N=function(G,V){return Ge(de(G),V)},ee=function(G,V,q){return de(q?G:G-V)},ft.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:Ne=function(G){return 9e4*G},secondsToAudioTs:Ge=function(G,V){return G*V},videoTsToSeconds:de=function(G){return G/9e4},audioTsToSeconds:Se=function(G,V){return G/V},audioTsToVideoTs:ue,videoTsToAudioTs:N,metadataTsToSeconds:ee}},33357:ft=>{var dt=Math.pow(2,32);ft.exports={getUint64:function(Ge){var Se,de=new DataView(Ge.buffer,Ge.byteOffset,Ge.byteLength);return de.getBigUint64?(Se=de.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(Se):Se:de.getUint32(0)*dt+de.getUint32(4)},MAX_UINT32:dt}},53559:(ft,dt,Ne)=>{"use strict";const de=Ne(5343),Se=Ne(48461),ue="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;dt.lW=V,dt.h2=50;const N=2147483647;function G(ce){if(ce>N)throw new RangeError('The value "'+ce+'" is invalid for option "size"');const X=new Uint8Array(ce);return Object.setPrototypeOf(X,V.prototype),X}function V(ce,X,J){if("number"==typeof ce){if("string"==typeof X)throw new TypeError('The "string" argument must be of type string. Received type number');return B(ce)}return q(ce,X,J)}function q(ce,X,J){if("string"==typeof ce)return function F(ce,X){if(("string"!=typeof X||""===X)&&(X="utf8"),!V.isEncoding(X))throw new TypeError("Unknown encoding: "+X);const J=0|g(ce,X);let be=G(J);const Le=be.write(ce,X);return Le!==J&&(be=be.slice(0,Le)),be}(ce,X);if(ArrayBuffer.isView(ce))return function W(ce){if(Xt(ce,Uint8Array)){const X=new Uint8Array(ce);return U(X.buffer,X.byteOffset,X.byteLength)}return O(ce)}(ce);if(null==ce)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(Xt(ce,ArrayBuffer)||ce&&Xt(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xt(ce,SharedArrayBuffer)||ce&&Xt(ce.buffer,SharedArrayBuffer)))return U(ce,X,J);if("number"==typeof ce)throw new TypeError('The "value" argument must not be of type number. Received type number');const be=ce.valueOf&&ce.valueOf();if(null!=be&&be!==ce)return V.from(be,X,J);const Le=function R(ce){if(V.isBuffer(ce)){const X=0|M(ce.length),J=G(X);return 0===J.length||ce.copy(J,0,0,X),J}return void 0!==ce.length?"number"!=typeof ce.length||sr(ce.length)?G(0):O(ce):"Buffer"===ce.type&&Array.isArray(ce.data)?O(ce.data):void 0}(ce);if(Le)return Le;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ce[Symbol.toPrimitive])return V.from(ce[Symbol.toPrimitive]("string"),X,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}function u(ce){if("number"!=typeof ce)throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function B(ce){return u(ce),G(ce<0?0:0|M(ce))}function O(ce){const X=ce.length<0?0:0|M(ce.length),J=G(X);for(let be=0;be<X;be+=1)J[be]=255&ce[be];return J}function U(ce,X,J){if(X<0||ce.byteLength<X)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<X+(J||0))throw new RangeError('"length" is outside of buffer bounds');let be;return be=void 0===X&&void 0===J?new Uint8Array(ce):void 0===J?new Uint8Array(ce,X):new Uint8Array(ce,X,J),Object.setPrototypeOf(be,V.prototype),be}function M(ce){if(ce>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return 0|ce}function g(ce,X){if(V.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||Xt(ce,ArrayBuffer))return ce.byteLength;if("string"!=typeof ce)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);const J=ce.length,be=arguments.length>2&&!0===arguments[2];if(!be&&0===J)return 0;let Le=!1;for(;;)switch(X){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return Ht(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*J;case"hex":return J>>>1;case"base64":return tr(ce).length;default:if(Le)return be?-1:Ht(ce).length;X=(""+X).toLowerCase(),Le=!0}}function v(ce,X,J){let be=!1;if((void 0===X||X<0)&&(X=0),X>this.length||((void 0===J||J>this.length)&&(J=this.length),J<=0)||(J>>>=0)<=(X>>>=0))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return Z(this,X,J);case"utf8":case"utf-8":return C(this,X,J);case"ascii":return I(this,X,J);case"latin1":case"binary":return L(this,X,J);case"base64":return m(this,X,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,X,J);default:if(be)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),be=!0}}function S(ce,X,J){const be=ce[X];ce[X]=ce[J],ce[J]=be}function w(ce,X,J,be,Le){if(0===ce.length)return-1;if("string"==typeof J?(be=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),sr(J=+J)&&(J=Le?0:ce.length-1),J<0&&(J=ce.length+J),J>=ce.length){if(Le)return-1;J=ce.length-1}else if(J<0){if(!Le)return-1;J=0}if("string"==typeof X&&(X=V.from(X,be)),V.isBuffer(X))return 0===X.length?-1:E(ce,X,J,be,Le);if("number"==typeof X)return X&=255,"function"==typeof Uint8Array.prototype.indexOf?Le?Uint8Array.prototype.indexOf.call(ce,X,J):Uint8Array.prototype.lastIndexOf.call(ce,X,J):E(ce,[X],J,be,Le);throw new TypeError("val must be string, number or Buffer")}function E(ce,X,J,be,Le){let Bt,He=1,Ve=ce.length,Pt=X.length;if(void 0!==be&&("ucs2"===(be=String(be).toLowerCase())||"ucs-2"===be||"utf16le"===be||"utf-16le"===be)){if(ce.length<2||X.length<2)return-1;He=2,Ve/=2,Pt/=2,J/=2}function Zt(jt,Qt){return 1===He?jt[Qt]:jt.readUInt16BE(Qt*He)}if(Le){let jt=-1;for(Bt=J;Bt<Ve;Bt++)if(Zt(ce,Bt)===Zt(X,-1===jt?0:Bt-jt)){if(-1===jt&&(jt=Bt),Bt-jt+1===Pt)return jt*He}else-1!==jt&&(Bt-=Bt-jt),jt=-1}else for(J+Pt>Ve&&(J=Ve-Pt),Bt=J;Bt>=0;Bt--){let jt=!0;for(let Qt=0;Qt<Pt;Qt++)if(Zt(ce,Bt+Qt)!==Zt(X,Qt)){jt=!1;break}if(jt)return Bt}return-1}function _(ce,X,J,be){J=Number(J)||0;const Le=ce.length-J;be?(be=Number(be))>Le&&(be=Le):be=Le;const He=X.length;let Ve;for(be>He/2&&(be=He/2),Ve=0;Ve<be;++Ve){const Pt=parseInt(X.substr(2*Ve,2),16);if(sr(Pt))return Ve;ce[J+Ve]=Pt}return Ve}function c(ce,X,J,be){return It(Ht(X,ce.length-J),ce,J,be)}function h(ce,X,J,be){return It(function Kt(ce){const X=[];for(let J=0;J<ce.length;++J)X.push(255&ce.charCodeAt(J));return X}(X),ce,J,be)}function d(ce,X,J,be){return It(tr(X),ce,J,be)}function P(ce,X,J,be){return It(function Ut(ce,X){let J,be,Le;const He=[];for(let Ve=0;Ve<ce.length&&!((X-=2)<0);++Ve)J=ce.charCodeAt(Ve),be=J>>8,Le=J%256,He.push(Le),He.push(be);return He}(X,ce.length-J),ce,J,be)}function m(ce,X,J){return de.fromByteArray(0===X&&J===ce.length?ce:ce.slice(X,J))}function C(ce,X,J){J=Math.min(ce.length,J);const be=[];let Le=X;for(;Le<J;){const He=ce[Le];let Ve=null,Pt=He>239?4:He>223?3:He>191?2:1;if(Le+Pt<=J){let Zt,Bt,jt,Qt;switch(Pt){case 1:He<128&&(Ve=He);break;case 2:Zt=ce[Le+1],128==(192&Zt)&&(Qt=(31&He)<<6|63&Zt,Qt>127&&(Ve=Qt));break;case 3:Zt=ce[Le+1],Bt=ce[Le+2],128==(192&Zt)&&128==(192&Bt)&&(Qt=(15&He)<<12|(63&Zt)<<6|63&Bt,Qt>2047&&(Qt<55296||Qt>57343)&&(Ve=Qt));break;case 4:Zt=ce[Le+1],Bt=ce[Le+2],jt=ce[Le+3],128==(192&Zt)&&128==(192&Bt)&&128==(192&jt)&&(Qt=(15&He)<<18|(63&Zt)<<12|(63&Bt)<<6|63&jt,Qt>65535&&Qt<1114112&&(Ve=Qt))}}null===Ve?(Ve=65533,Pt=1):Ve>65535&&(Ve-=65536,be.push(Ve>>>10&1023|55296),Ve=56320|1023&Ve),be.push(Ve),Le+=Pt}return function T(ce){const X=ce.length;if(X<=x)return String.fromCharCode.apply(String,ce);let J="",be=0;for(;be<X;)J+=String.fromCharCode.apply(String,ce.slice(be,be+=x));return J}(be)}!(V.TYPED_ARRAY_SUPPORT=function ee(){try{const ce=new Uint8Array(1),X={foo:function(){return 42}};return Object.setPrototypeOf(X,Uint8Array.prototype),Object.setPrototypeOf(ce,X),42===ce.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}}),V.poolSize=8192,V.from=function(ce,X,J){return q(ce,X,J)},Object.setPrototypeOf(V.prototype,Uint8Array.prototype),Object.setPrototypeOf(V,Uint8Array),V.alloc=function(ce,X,J){return function Y(ce,X,J){return u(ce),ce<=0?G(ce):void 0!==X?"string"==typeof J?G(ce).fill(X,J):G(ce).fill(X):G(ce)}(ce,X,J)},V.allocUnsafe=function(ce){return B(ce)},V.allocUnsafeSlow=function(ce){return B(ce)},V.isBuffer=function(X){return null!=X&&!0===X._isBuffer&&X!==V.prototype},V.compare=function(X,J){if(Xt(X,Uint8Array)&&(X=V.from(X,X.offset,X.byteLength)),Xt(J,Uint8Array)&&(J=V.from(J,J.offset,J.byteLength)),!V.isBuffer(X)||!V.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===J)return 0;let be=X.length,Le=J.length;for(let He=0,Ve=Math.min(be,Le);He<Ve;++He)if(X[He]!==J[He]){be=X[He],Le=J[He];break}return be<Le?-1:Le<be?1:0},V.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(X,J){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(0===X.length)return V.alloc(0);let be;if(void 0===J)for(J=0,be=0;be<X.length;++be)J+=X[be].length;const Le=V.allocUnsafe(J);let He=0;for(be=0;be<X.length;++be){let Ve=X[be];if(Xt(Ve,Uint8Array))He+Ve.length>Le.length?(V.isBuffer(Ve)||(Ve=V.from(Ve)),Ve.copy(Le,He)):Uint8Array.prototype.set.call(Le,Ve,He);else{if(!V.isBuffer(Ve))throw new TypeError('"list" argument must be an Array of Buffers');Ve.copy(Le,He)}He+=Ve.length}return Le},V.byteLength=g,V.prototype._isBuffer=!0,V.prototype.swap16=function(){const X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let J=0;J<X;J+=2)S(this,J,J+1);return this},V.prototype.swap32=function(){const X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let J=0;J<X;J+=4)S(this,J,J+3),S(this,J+1,J+2);return this},V.prototype.swap64=function(){const X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let J=0;J<X;J+=8)S(this,J,J+7),S(this,J+1,J+6),S(this,J+2,J+5),S(this,J+3,J+4);return this},V.prototype.toLocaleString=V.prototype.toString=function(){const X=this.length;return 0===X?"":0===arguments.length?C(this,0,X):v.apply(this,arguments)},V.prototype.equals=function(X){if(!V.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X||0===V.compare(this,X)},V.prototype.inspect=function(){let X="";const J=dt.h2;return X=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(X+=" ... "),"<Buffer "+X+">"},ue&&(V.prototype[ue]=V.prototype.inspect),V.prototype.compare=function(X,J,be,Le,He){if(Xt(X,Uint8Array)&&(X=V.from(X,X.offset,X.byteLength)),!V.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(void 0===J&&(J=0),void 0===be&&(be=X?X.length:0),void 0===Le&&(Le=0),void 0===He&&(He=this.length),J<0||be>X.length||Le<0||He>this.length)throw new RangeError("out of range index");if(Le>=He&&J>=be)return 0;if(Le>=He)return-1;if(J>=be)return 1;if(this===X)return 0;let Ve=(He>>>=0)-(Le>>>=0),Pt=(be>>>=0)-(J>>>=0);const Zt=Math.min(Ve,Pt),Bt=this.slice(Le,He),jt=X.slice(J,be);for(let Qt=0;Qt<Zt;++Qt)if(Bt[Qt]!==jt[Qt]){Ve=Bt[Qt],Pt=jt[Qt];break}return Ve<Pt?-1:Pt<Ve?1:0},V.prototype.includes=function(X,J,be){return-1!==this.indexOf(X,J,be)},V.prototype.indexOf=function(X,J,be){return w(this,X,J,be,!0)},V.prototype.lastIndexOf=function(X,J,be){return w(this,X,J,be,!1)},V.prototype.write=function(X,J,be,Le){if(void 0===J)Le="utf8",be=this.length,J=0;else if(void 0===be&&"string"==typeof J)Le=J,be=this.length,J=0;else{if(!isFinite(J))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");J>>>=0,isFinite(be)?(be>>>=0,void 0===Le&&(Le="utf8")):(Le=be,be=void 0)}const He=this.length-J;if((void 0===be||be>He)&&(be=He),X.length>0&&(be<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");Le||(Le="utf8");let Ve=!1;for(;;)switch(Le){case"hex":return _(this,X,J,be);case"utf8":case"utf-8":return c(this,X,J,be);case"ascii":case"latin1":case"binary":return h(this,X,J,be);case"base64":return d(this,X,J,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,X,J,be);default:if(Ve)throw new TypeError("Unknown encoding: "+Le);Le=(""+Le).toLowerCase(),Ve=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function I(ce,X,J){let be="";J=Math.min(ce.length,J);for(let Le=X;Le<J;++Le)be+=String.fromCharCode(127&ce[Le]);return be}function L(ce,X,J){let be="";J=Math.min(ce.length,J);for(let Le=X;Le<J;++Le)be+=String.fromCharCode(ce[Le]);return be}function Z(ce,X,J){const be=ce.length;(!X||X<0)&&(X=0),(!J||J<0||J>be)&&(J=be);let Le="";for(let He=X;He<J;++He)Le+=fr[ce[He]];return Le}function re(ce,X,J){const be=ce.slice(X,J);let Le="";for(let He=0;He<be.length-1;He+=2)Le+=String.fromCharCode(be[He]+256*be[He+1]);return Le}function ne(ce,X,J){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+X>J)throw new RangeError("Trying to access beyond buffer length")}function oe(ce,X,J,be,Le,He){if(!V.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>Le||X<He)throw new RangeError('"value" argument is out of bounds');if(J+be>ce.length)throw new RangeError("Index out of range")}function Te(ce,X,J,be,Le){_t(X,be,Le,ce,J,7);let He=Number(X&BigInt(4294967295));ce[J++]=He,He>>=8,ce[J++]=He,He>>=8,ce[J++]=He,He>>=8,ce[J++]=He;let Ve=Number(X>>BigInt(32)&BigInt(4294967295));return ce[J++]=Ve,Ve>>=8,ce[J++]=Ve,Ve>>=8,ce[J++]=Ve,Ve>>=8,ce[J++]=Ve,J}function ye(ce,X,J,be,Le){_t(X,be,Le,ce,J,7);let He=Number(X&BigInt(4294967295));ce[J+7]=He,He>>=8,ce[J+6]=He,He>>=8,ce[J+5]=He,He>>=8,ce[J+4]=He;let Ve=Number(X>>BigInt(32)&BigInt(4294967295));return ce[J+3]=Ve,Ve>>=8,ce[J+2]=Ve,Ve>>=8,ce[J+1]=Ve,Ve>>=8,ce[J]=Ve,J+8}function Ce(ce,X,J,be,Le,He){if(J+be>ce.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function we(ce,X,J,be,Le){return X=+X,J>>>=0,Le||Ce(ce,0,J,4),Se.write(ce,X,J,be,23,4),J+4}function Be(ce,X,J,be,Le){return X=+X,J>>>=0,Le||Ce(ce,0,J,8),Se.write(ce,X,J,be,52,8),J+8}V.prototype.slice=function(X,J){const be=this.length;(X=~~X)<0?(X+=be)<0&&(X=0):X>be&&(X=be),(J=void 0===J?be:~~J)<0?(J+=be)<0&&(J=0):J>be&&(J=be),J<X&&(J=X);const Le=this.subarray(X,J);return Object.setPrototypeOf(Le,V.prototype),Le},V.prototype.readUintLE=V.prototype.readUIntLE=function(X,J,be){X>>>=0,J>>>=0,be||ne(X,J,this.length);let Le=this[X],He=1,Ve=0;for(;++Ve<J&&(He*=256);)Le+=this[X+Ve]*He;return Le},V.prototype.readUintBE=V.prototype.readUIntBE=function(X,J,be){X>>>=0,J>>>=0,be||ne(X,J,this.length);let Le=this[X+--J],He=1;for(;J>0&&(He*=256);)Le+=this[X+--J]*He;return Le},V.prototype.readUint8=V.prototype.readUInt8=function(X,J){return X>>>=0,J||ne(X,1,this.length),this[X]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(X,J){return X>>>=0,J||ne(X,2,this.length),this[X]|this[X+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(X,J){return X>>>=0,J||ne(X,2,this.length),this[X]<<8|this[X+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(X,J){return X>>>=0,J||ne(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+16777216*this[X+3]},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(X,J){return X>>>=0,J||ne(X,4,this.length),16777216*this[X]+(this[X+1]<<16|this[X+2]<<8|this[X+3])},V.prototype.readBigUInt64LE=ir(function(X){ot(X>>>=0,"offset");const J=this[X],be=this[X+7];(void 0===J||void 0===be)&&bt(X,this.length-8);const Le=J+256*this[++X]+65536*this[++X]+this[++X]*2**24,He=this[++X]+256*this[++X]+65536*this[++X]+be*2**24;return BigInt(Le)+(BigInt(He)<<BigInt(32))}),V.prototype.readBigUInt64BE=ir(function(X){ot(X>>>=0,"offset");const J=this[X],be=this[X+7];(void 0===J||void 0===be)&&bt(X,this.length-8);const Le=J*2**24+65536*this[++X]+256*this[++X]+this[++X],He=this[++X]*2**24+65536*this[++X]+256*this[++X]+be;return(BigInt(Le)<<BigInt(32))+BigInt(He)}),V.prototype.readIntLE=function(X,J,be){X>>>=0,J>>>=0,be||ne(X,J,this.length);let Le=this[X],He=1,Ve=0;for(;++Ve<J&&(He*=256);)Le+=this[X+Ve]*He;return He*=128,Le>=He&&(Le-=Math.pow(2,8*J)),Le},V.prototype.readIntBE=function(X,J,be){X>>>=0,J>>>=0,be||ne(X,J,this.length);let Le=J,He=1,Ve=this[X+--Le];for(;Le>0&&(He*=256);)Ve+=this[X+--Le]*He;return He*=128,Ve>=He&&(Ve-=Math.pow(2,8*J)),Ve},V.prototype.readInt8=function(X,J){return X>>>=0,J||ne(X,1,this.length),128&this[X]?-1*(255-this[X]+1):this[X]},V.prototype.readInt16LE=function(X,J){X>>>=0,J||ne(X,2,this.length);const be=this[X]|this[X+1]<<8;return 32768&be?4294901760|be:be},V.prototype.readInt16BE=function(X,J){X>>>=0,J||ne(X,2,this.length);const be=this[X+1]|this[X]<<8;return 32768&be?4294901760|be:be},V.prototype.readInt32LE=function(X,J){return X>>>=0,J||ne(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},V.prototype.readInt32BE=function(X,J){return X>>>=0,J||ne(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},V.prototype.readBigInt64LE=ir(function(X){ot(X>>>=0,"offset");const J=this[X],be=this[X+7];return(void 0===J||void 0===be)&&bt(X,this.length-8),(BigInt(this[X+4]+256*this[X+5]+65536*this[X+6]+(be<<24))<<BigInt(32))+BigInt(J+256*this[++X]+65536*this[++X]+this[++X]*2**24)}),V.prototype.readBigInt64BE=ir(function(X){ot(X>>>=0,"offset");const J=this[X],be=this[X+7];(void 0===J||void 0===be)&&bt(X,this.length-8);const Le=(J<<24)+65536*this[++X]+256*this[++X]+this[++X];return(BigInt(Le)<<BigInt(32))+BigInt(this[++X]*2**24+65536*this[++X]+256*this[++X]+be)}),V.prototype.readFloatLE=function(X,J){return X>>>=0,J||ne(X,4,this.length),Se.read(this,X,!0,23,4)},V.prototype.readFloatBE=function(X,J){return X>>>=0,J||ne(X,4,this.length),Se.read(this,X,!1,23,4)},V.prototype.readDoubleLE=function(X,J){return X>>>=0,J||ne(X,8,this.length),Se.read(this,X,!0,52,8)},V.prototype.readDoubleBE=function(X,J){return X>>>=0,J||ne(X,8,this.length),Se.read(this,X,!1,52,8)},V.prototype.writeUintLE=V.prototype.writeUIntLE=function(X,J,be,Le){X=+X,J>>>=0,be>>>=0,Le||oe(this,X,J,be,Math.pow(2,8*be)-1,0);let He=1,Ve=0;for(this[J]=255&X;++Ve<be&&(He*=256);)this[J+Ve]=X/He&255;return J+be},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(X,J,be,Le){X=+X,J>>>=0,be>>>=0,Le||oe(this,X,J,be,Math.pow(2,8*be)-1,0);let He=be-1,Ve=1;for(this[J+He]=255&X;--He>=0&&(Ve*=256);)this[J+He]=X/Ve&255;return J+be},V.prototype.writeUint8=V.prototype.writeUInt8=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,1,255,0),this[J]=255&X,J+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,2,65535,0),this[J]=255&X,this[J+1]=X>>>8,J+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,2,65535,0),this[J]=X>>>8,this[J+1]=255&X,J+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,4,4294967295,0),this[J+3]=X>>>24,this[J+2]=X>>>16,this[J+1]=X>>>8,this[J]=255&X,J+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,4,4294967295,0),this[J]=X>>>24,this[J+1]=X>>>16,this[J+2]=X>>>8,this[J+3]=255&X,J+4},V.prototype.writeBigUInt64LE=ir(function(X,J=0){return Te(this,X,J,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeBigUInt64BE=ir(function(X,J=0){return ye(this,X,J,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeIntLE=function(X,J,be,Le){if(X=+X,J>>>=0,!Le){const Zt=Math.pow(2,8*be-1);oe(this,X,J,be,Zt-1,-Zt)}let He=0,Ve=1,Pt=0;for(this[J]=255&X;++He<be&&(Ve*=256);)X<0&&0===Pt&&0!==this[J+He-1]&&(Pt=1),this[J+He]=(X/Ve>>0)-Pt&255;return J+be},V.prototype.writeIntBE=function(X,J,be,Le){if(X=+X,J>>>=0,!Le){const Zt=Math.pow(2,8*be-1);oe(this,X,J,be,Zt-1,-Zt)}let He=be-1,Ve=1,Pt=0;for(this[J+He]=255&X;--He>=0&&(Ve*=256);)X<0&&0===Pt&&0!==this[J+He+1]&&(Pt=1),this[J+He]=(X/Ve>>0)-Pt&255;return J+be},V.prototype.writeInt8=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,1,127,-128),X<0&&(X=255+X+1),this[J]=255&X,J+1},V.prototype.writeInt16LE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,2,32767,-32768),this[J]=255&X,this[J+1]=X>>>8,J+2},V.prototype.writeInt16BE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,2,32767,-32768),this[J]=X>>>8,this[J+1]=255&X,J+2},V.prototype.writeInt32LE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,4,2147483647,-2147483648),this[J]=255&X,this[J+1]=X>>>8,this[J+2]=X>>>16,this[J+3]=X>>>24,J+4},V.prototype.writeInt32BE=function(X,J,be){return X=+X,J>>>=0,be||oe(this,X,J,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),this[J]=X>>>24,this[J+1]=X>>>16,this[J+2]=X>>>8,this[J+3]=255&X,J+4},V.prototype.writeBigInt64LE=ir(function(X,J=0){return Te(this,X,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),V.prototype.writeBigInt64BE=ir(function(X,J=0){return ye(this,X,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),V.prototype.writeFloatLE=function(X,J,be){return we(this,X,J,!0,be)},V.prototype.writeFloatBE=function(X,J,be){return we(this,X,J,!1,be)},V.prototype.writeDoubleLE=function(X,J,be){return Be(this,X,J,!0,be)},V.prototype.writeDoubleBE=function(X,J,be){return Be(this,X,J,!1,be)},V.prototype.copy=function(X,J,be,Le){if(!V.isBuffer(X))throw new TypeError("argument should be a Buffer");if(be||(be=0),!Le&&0!==Le&&(Le=this.length),J>=X.length&&(J=X.length),J||(J=0),Le>0&&Le<be&&(Le=be),Le===be||0===X.length||0===this.length)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("sourceEnd out of bounds");Le>this.length&&(Le=this.length),X.length-J<Le-be&&(Le=X.length-J+be);const He=Le-be;return this===X&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(J,be,Le):Uint8Array.prototype.set.call(X,this.subarray(be,Le),J),He},V.prototype.fill=function(X,J,be,Le){if("string"==typeof X){if("string"==typeof J?(Le=J,J=0,be=this.length):"string"==typeof be&&(Le=be,be=this.length),void 0!==Le&&"string"!=typeof Le)throw new TypeError("encoding must be a string");if("string"==typeof Le&&!V.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);if(1===X.length){const Ve=X.charCodeAt(0);("utf8"===Le&&Ve<128||"latin1"===Le)&&(X=Ve)}}else"number"==typeof X?X&=255:"boolean"==typeof X&&(X=Number(X));if(J<0||this.length<J||this.length<be)throw new RangeError("Out of range index");if(be<=J)return this;let He;if(J>>>=0,be=void 0===be?this.length:be>>>0,X||(X=0),"number"==typeof X)for(He=J;He<be;++He)this[He]=X;else{const Ve=V.isBuffer(X)?X:V.from(X,Le),Pt=Ve.length;if(0===Pt)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(He=0;He<be-J;++He)this[He+J]=Ve[He%Pt]}return this};const Ze={};function st(ce,X,J){Ze[ce]=class extends J{constructor(){super(),Object.defineProperty(this,"message",{value:X.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ce}]`,delete this.name}get code(){return ce}set code(Le){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Le,writable:!0})}toString(){return`${this.name} [${ce}]: ${this.message}`}}}function ct(ce){let X="",J=ce.length;const be="-"===ce[0]?1:0;for(;J>=be+4;J-=3)X=`_${ce.slice(J-3,J)}${X}`;return`${ce.slice(0,J)}${X}`}function _t(ce,X,J,be,Le,He){if(ce>J||ce<X){const Ve="bigint"==typeof X?"n":"";let Pt;throw Pt=He>3?0===X||X===BigInt(0)?`>= 0${Ve} and < 2${Ve} ** ${8*(He+1)}${Ve}`:`>= -(2${Ve} ** ${8*(He+1)-1}${Ve}) and < 2 ** ${8*(He+1)-1}${Ve}`:`>= ${X}${Ve} and <= ${J}${Ve}`,new Ze.ERR_OUT_OF_RANGE("value",Pt,ce)}!function yt(ce,X,J){ot(X,"offset"),(void 0===ce[X]||void 0===ce[X+J])&&bt(X,ce.length-(J+1))}(be,Le,He)}function ot(ce,X){if("number"!=typeof ce)throw new Ze.ERR_INVALID_ARG_TYPE(X,"number",ce)}function bt(ce,X,J){throw Math.floor(ce)!==ce?(ot(ce,J),new Ze.ERR_OUT_OF_RANGE(J||"offset","an integer",ce)):X<0?new Ze.ERR_BUFFER_OUT_OF_BOUNDS:new Ze.ERR_OUT_OF_RANGE(J||"offset",`>= ${J?1:0} and <= ${X}`,ce)}st("ERR_BUFFER_OUT_OF_BOUNDS",function(ce){return ce?`${ce} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(ce,X){return`The "${ce}" argument must be of type number. Received type ${typeof X}`},TypeError),st("ERR_OUT_OF_RANGE",function(ce,X,J){let be=`The value of "${ce}" is out of range.`,Le=J;return Number.isInteger(J)&&Math.abs(J)>2**32?Le=ct(String(J)):"bigint"==typeof J&&(Le=String(J),(J>BigInt(2)**BigInt(32)||J<-(BigInt(2)**BigInt(32)))&&(Le=ct(Le)),Le+="n"),be+=` It must be ${X}. Received ${Le}`,be},RangeError);const Ct=/[^+/0-9A-Za-z-_]/g;function Ht(ce,X){let J;X=X||1/0;const be=ce.length;let Le=null;const He=[];for(let Ve=0;Ve<be;++Ve){if(J=ce.charCodeAt(Ve),J>55295&&J<57344){if(!Le){if(J>56319){(X-=3)>-1&&He.push(239,191,189);continue}if(Ve+1===be){(X-=3)>-1&&He.push(239,191,189);continue}Le=J;continue}if(J<56320){(X-=3)>-1&&He.push(239,191,189),Le=J;continue}J=65536+(Le-55296<<10|J-56320)}else Le&&(X-=3)>-1&&He.push(239,191,189);if(Le=null,J<128){if((X-=1)<0)break;He.push(J)}else if(J<2048){if((X-=2)<0)break;He.push(J>>6|192,63&J|128)}else if(J<65536){if((X-=3)<0)break;He.push(J>>12|224,J>>6&63|128,63&J|128)}else{if(!(J<1114112))throw new Error("Invalid code point");if((X-=4)<0)break;He.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}}return He}function tr(ce){return de.toByteArray(function nt(ce){if((ce=(ce=ce.split("=")[0]).trim().replace(Ct,"")).length<2)return"";for(;ce.length%4!=0;)ce+="=";return ce}(ce))}function It(ce,X,J,be){let Le;for(Le=0;Le<be&&!(Le+J>=X.length||Le>=ce.length);++Le)X[Le+J]=ce[Le];return Le}function Xt(ce,X){return ce instanceof X||null!=ce&&null!=ce.constructor&&null!=ce.constructor.name&&ce.constructor.name===X.name}function sr(ce){return ce!=ce}const fr=function(){const ce="0123456789abcdef",X=new Array(256);for(let J=0;J<16;++J){const be=16*J;for(let Le=0;Le<16;++Le)X[be+Le]=ce[J]+ce[Le]}return X}();function ir(ce){return typeof BigInt>"u"?vr:ce}function vr(){throw new Error("BigInt not supported")}},28099:ft=>{ft.exports=function dt(Ne,Ge){var de,Se=null;try{de=JSON.parse(Ne,Ge)}catch(ue){Se=ue}return[Se,de]}},53871:function(ft){var Ne,Ge,de,Se,ue;Ne=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Ge=/^(?=([^\/?#]*))\1([^]*)$/,de=/(?:\/|^)\.(?=\/)/g,Se=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ft.exports=ue={buildAbsoluteURL:function(N,ee,G){if(G=G||{},N=N.trim(),!(ee=ee.trim())){if(!G.alwaysNormalize)return N;var V=ue.parseURL(N);if(!V)throw new Error("Error trying to parse base URL.");return V.path=ue.normalizePath(V.path),ue.buildURLFromParts(V)}var q=ue.parseURL(ee);if(!q)throw new Error("Error trying to parse relative URL.");if(q.scheme)return G.alwaysNormalize?(q.path=ue.normalizePath(q.path),ue.buildURLFromParts(q)):ee;var u=ue.parseURL(N);if(!u)throw new Error("Error trying to parse base URL.");if(!u.netLoc&&u.path&&"/"!==u.path[0]){var Y=Ge.exec(u.path);u.netLoc=Y[1],u.path=Y[2]}u.netLoc&&!u.path&&(u.path="/");var B={scheme:u.scheme,netLoc:q.netLoc,path:null,params:q.params,query:q.query,fragment:q.fragment};if(!q.netLoc&&(B.netLoc=u.netLoc,"/"!==q.path[0]))if(q.path){var F=u.path,O=F.substring(0,F.lastIndexOf("/")+1)+q.path;B.path=ue.normalizePath(O)}else B.path=u.path,q.params||(B.params=u.params,q.query||(B.query=u.query));return null===B.path&&(B.path=G.alwaysNormalize?ue.normalizePath(q.path):q.path),ue.buildURLFromParts(B)},parseURL:function(N){var ee=Ne.exec(N);return ee?{scheme:ee[1]||"",netLoc:ee[2]||"",path:ee[3]||"",params:ee[4]||"",query:ee[5]||"",fragment:ee[6]||""}:null},normalizePath:function(N){for(N=N.split("").reverse().join("").replace(de,"");N.length!==(N=N.replace(Se,"")).length;);return N.split("").reverse().join("")},buildURLFromParts:function(N){return N.scheme+N.netLoc+N.path+N.params+N.query+N.fragment}}},53629:(ft,dt,Ne)=>{var Ge=Ne(69226),de=ft.exports={WebVTT:Ne(58318),VTTCue:Ne(15713),VTTRegion:Ne(63872)};Ge.vttjs=de,Ge.WebVTT=de.WebVTT;var Se=de.VTTCue,ue=de.VTTRegion,N=Ge.VTTCue,ee=Ge.VTTRegion;de.shim=function(){Ge.VTTCue=Se,Ge.VTTRegion=ue},de.restore=function(){Ge.VTTCue=N,Ge.VTTRegion=ee},Ge.VTTCue||de.shim()},58318:(ft,dt,Ne)=>{var Ge=Ne(11421),de=Object.create||function(){function c(){}return function(h){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return c.prototype=h,new c}}();function Se(c,h){this.name="ParsingError",this.code=c.code,this.message=h||c.message}function ue(c){function h(P,m,C,x){return 3600*(0|P)+60*(0|m)+(0|C)+(0|x)/1e3}var d=c.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return d?d[3]?h(d[1],d[2],d[3].replace(":",""),d[4]):d[1]>59?h(d[1],d[2],0,d[4]):h(0,d[1],d[2],d[4]):null}function N(){this.values=de(null)}function ee(c,h,d,P){var m=P?c.split(P):[c];for(var C in m)if("string"==typeof m[C]){var x=m[C].split(d);2===x.length&&h(x[0].trim(),x[1].trim())}}function G(c,h,d){var P=c;function m(){var T=ue(c);if(null===T)throw new Se(Se.Errors.BadTimeStamp,"Malformed timestamp: "+P);return c=c.replace(/^[^\sa-zA-Z-]+/,""),T}function x(){c=c.replace(/^\s+/,"")}if(x(),h.startTime=m(),x(),"--\x3e"!==c.substr(0,3))throw new Se(Se.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+P);c=c.substr(3),x(),h.endTime=m(),x(),function C(T,I){var L=new N;ee(T,function(Z,re){switch(Z){case"region":for(var ne=d.length-1;ne>=0;ne--)if(d[ne].id===re){L.set(Z,d[ne].region);break}break;case"vertical":L.alt(Z,re,["rl","lr"]);break;case"line":var oe=re.split(","),Te=oe[0];L.integer(Z,Te),L.percent(Z,Te)&&L.set("snapToLines",!1),L.alt(Z,Te,["auto"]),2===oe.length&&L.alt("lineAlign",oe[1],["start","center","end"]);break;case"position":oe=re.split(","),L.percent(Z,oe[0]),2===oe.length&&L.alt("positionAlign",oe[1],["start","center","end"]);break;case"size":L.percent(Z,re);break;case"align":L.alt(Z,re,["start","center","end","left","right"])}},/:/,/\s/),I.region=L.get("region",null),I.vertical=L.get("vertical","");try{I.line=L.get("line","auto")}catch{}I.lineAlign=L.get("lineAlign","start"),I.snapToLines=L.get("snapToLines",!0),I.size=L.get("size",100);try{I.align=L.get("align","center")}catch{I.align=L.get("align","middle")}try{I.position=L.get("position","auto")}catch{I.position=L.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},I.align)}I.positionAlign=L.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},I.align)}(c,h)}(Se.prototype=de(Error.prototype)).constructor=Se,Se.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},N.prototype={set:function(c,h){!this.get(c)&&""!==h&&(this.values[c]=h)},get:function(c,h,d){return d?this.has(c)?this.values[c]:h[d]:this.has(c)?this.values[c]:h},has:function(c){return c in this.values},alt:function(c,h,d){for(var P=0;P<d.length;++P)if(h===d[P]){this.set(c,h);break}},integer:function(c,h){/^-?\d+$/.test(h)&&this.set(c,parseInt(h,10))},percent:function(c,h){return!!(h.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(h=parseFloat(h),h>=0&&h<=100))&&(this.set(c,h),!0)}};var V=Ge.createElement&&Ge.createElement("textarea"),q={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Y={v:"title",lang:"lang"},B={rt:"ruby"};function F(c,h){function d(){if(!h)return null;var ye=h.match(/^([^<]*)(<[^>]*>?)?/);return function Te(Ce){return h=h.substr(Ce.length),Ce}(ye[1]?ye[1]:ye[2])}function P(Te){return V.innerHTML=Te,Te=V.textContent,V.textContent="",Te}function C(Te,ye){var Ce=q[Te];if(!Ce)return null;var we=c.document.createElement(Ce),Be=Y[Te];return Be&&ye&&(we[Be]=ye.trim()),we}for(var I,x=c.document.createElement("div"),T=x,L=[];null!==(I=d());)if("<"!==I[0])T.appendChild(c.document.createTextNode(P(I)));else{if("/"===I[1]){L.length&&L[L.length-1]===I.substr(2).replace(">","")&&(L.pop(),T=T.parentNode);continue}var re,Z=ue(I.substr(1,I.length-2));if(Z){re=c.document.createProcessingInstruction("timestamp",Z),T.appendChild(re);continue}var ne=I.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ne||!(re=C(ne[1],ne[3]))||B[(ye=re).localName]&&B[ye.localName]!==T.localName)continue;if(ne[2]){var oe=ne[2].split(".");oe.forEach(function(Te){var ye=/^bg_/.test(Te),Ce=ye?Te.slice(3):Te;u.hasOwnProperty(Ce)&&(re.style[ye?"background-color":"color"]=u[Ce])}),re.className=oe.join(" ")}L.push(ne[1]),T.appendChild(re),T=re}var ye;return x}var O=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function W(c){for(var h=0;h<O.length;h++){var d=O[h];if(c>=d[0]&&c<=d[1])return!0}return!1}function U(c){var h=[],d="";if(!c||!c.childNodes)return"ltr";function m(T,I){for(var L=I.childNodes.length-1;L>=0;L--)T.push(I.childNodes[L])}function C(T){if(!T||!T.length)return null;var I=T.pop(),L=I.textContent||I.innerText;if(L){var Z=L.match(/^.*(\n|\r)/);return Z?(T.length=0,Z[0]):L}return"ruby"===I.tagName?C(T):I.childNodes?(m(T,I),C(T)):void 0}for(m(h,c);d=C(h);)for(var x=0;x<d.length;x++)if(W(d.charCodeAt(x)))return"rtl";return"ltr"}function M(){}function b(c,h,d){M.call(this),this.cue=h,this.cueDiv=F(c,h.text);var P={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===h.vertical?"horizontal-tb":"lr"===h.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(P,this.cueDiv),this.div=c.document.createElement("div"),P={direction:U(this.cueDiv),writingMode:""===h.vertical?"horizontal-tb":"lr"===h.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===h.align?"center":h.align,font:d.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(P),this.div.appendChild(this.cueDiv);var m=0;switch(h.positionAlign){case"start":m=h.position;break;case"center":m=h.position-h.size/2;break;case"end":m=h.position-h.size}this.applyStyles(""===h.vertical?{left:this.formatStyle(m,"%"),width:this.formatStyle(h.size,"%")}:{top:this.formatStyle(m,"%"),height:this.formatStyle(h.size,"%")}),this.move=function(C){this.applyStyles({top:this.formatStyle(C.top,"px"),bottom:this.formatStyle(C.bottom,"px"),left:this.formatStyle(C.left,"px"),right:this.formatStyle(C.right,"px"),height:this.formatStyle(C.height,"px"),width:this.formatStyle(C.width,"px")})}}function g(c){var h,d,P,m;if(c.div){d=c.div.offsetHeight,P=c.div.offsetWidth,m=c.div.offsetTop;var C=(C=c.div.childNodes)&&(C=C[0])&&C.getClientRects&&C.getClientRects();c=c.div.getBoundingClientRect(),h=C?Math.max(C[0]&&C[0].height||0,c.height/C.length):0}this.left=c.left,this.right=c.right,this.top=c.top||m,this.height=c.height||d,this.bottom=c.bottom||m+(c.height||d),this.width=c.width||P,this.lineHeight=void 0!==h?h:c.lineHeight}function v(c,h,d,P){var C=new g(h),x=h.cue,T=function R(c){if("number"==typeof c.line&&(c.snapToLines||c.line>=0&&c.line<=100))return c.line;if(!c.track||!c.track.textTrackList||!c.track.textTrackList.mediaElement)return-1;for(var h=c.track,d=h.textTrackList,P=0,m=0;m<d.length&&d[m]!==h;m++)"showing"===d[m].mode&&P++;return-1*++P}(x),I=[];if(x.snapToLines){var L;switch(x.vertical){case"":I=["+y","-y"],L="height";break;case"rl":I=["+x","-x"],L="width";break;case"lr":I=["-x","+x"],L="width"}var Z=C.lineHeight,re=Z*Math.round(T),ne=d[L]+Z,oe=I[0];Math.abs(re)>ne&&(re=re<0?-1:1,re*=Math.ceil(ne/Z)*Z),T<0&&(re+=""===x.vertical?d.height:d.width,I=I.reverse()),C.move(oe,re)}else{var Te=C.lineHeight/d.height*100;switch(x.lineAlign){case"center":T-=Te/2;break;case"end":T-=Te}switch(x.vertical){case"":h.applyStyles({top:h.formatStyle(T,"%")});break;case"rl":h.applyStyles({left:h.formatStyle(T,"%")});break;case"lr":h.applyStyles({right:h.formatStyle(T,"%")})}I=["+y","-x","+x","-y"],C=new g(h)}var ye=function m(Ce,we){for(var Be,Ze=new g(Ce),st=1,ct=0;ct<we.length;ct++){for(;Ce.overlapsOppositeAxis(d,we[ct])||Ce.within(d)&&Ce.overlapsAny(P);)Ce.move(we[ct]);if(Ce.within(d))return Ce;var yt=Ce.intersectPercentage(d);st>yt&&(Be=new g(Ce),st=yt),Ce=new g(Ze)}return Be||Ze}(C,I);h.move(ye.toCSSCompatValues(d))}function S(){}M.prototype.applyStyles=function(c,h){for(var d in h=h||this.div,c)c.hasOwnProperty(d)&&(h.style[d]=c[d])},M.prototype.formatStyle=function(c,h){return 0===c?0:c+h},(b.prototype=de(M.prototype)).constructor=b,g.prototype.move=function(c,h){switch(h=void 0!==h?h:this.lineHeight,c){case"+x":this.left+=h,this.right+=h;break;case"-x":this.left-=h,this.right-=h;break;case"+y":this.top+=h,this.bottom+=h;break;case"-y":this.top-=h,this.bottom-=h}},g.prototype.overlaps=function(c){return this.left<c.right&&this.right>c.left&&this.top<c.bottom&&this.bottom>c.top},g.prototype.overlapsAny=function(c){for(var h=0;h<c.length;h++)if(this.overlaps(c[h]))return!0;return!1},g.prototype.within=function(c){return this.top>=c.top&&this.bottom<=c.bottom&&this.left>=c.left&&this.right<=c.right},g.prototype.overlapsOppositeAxis=function(c,h){switch(h){case"+x":return this.left<c.left;case"-x":return this.right>c.right;case"+y":return this.top<c.top;case"-y":return this.bottom>c.bottom}},g.prototype.intersectPercentage=function(c){return Math.max(0,Math.min(this.right,c.right)-Math.max(this.left,c.left))*Math.max(0,Math.min(this.bottom,c.bottom)-Math.max(this.top,c.top))/(this.height*this.width)},g.prototype.toCSSCompatValues=function(c){return{top:this.top-c.top,bottom:c.bottom-this.bottom,left:this.left-c.left,right:c.right-this.right,height:this.height,width:this.width}},g.getSimpleBoxPosition=function(c){var h=c.div?c.div.offsetHeight:c.tagName?c.offsetHeight:0,d=c.div?c.div.offsetWidth:c.tagName?c.offsetWidth:0,P=c.div?c.div.offsetTop:c.tagName?c.offsetTop:0;return{left:(c=c.div?c.div.getBoundingClientRect():c.tagName?c.getBoundingClientRect():c).left,right:c.right,top:c.top||P,height:c.height||h,bottom:c.bottom||P+(c.height||h),width:c.width||d}},S.StringDecoder=function(){return{decode:function(c){if(!c)return"";if("string"!=typeof c)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(c))}}},S.convertCueToDOMTree=function(c,h){return c&&h?F(c,h):null},S.processCues=function(c,h,d){if(!c||!h||!d)return null;for(;d.firstChild;)d.removeChild(d.firstChild);var P=c.document.createElement("div");if(P.style.position="absolute",P.style.left="0",P.style.right="0",P.style.top="0",P.style.bottom="0",P.style.margin="1.5%",d.appendChild(P),function m(Z){for(var re=0;re<Z.length;re++)if(Z[re].hasBeenReset||!Z[re].displayState)return!0;return!1}(h)){var x=[],T=g.getSimpleBoxPosition(P),L={font:Math.round(.05*T.height*100)/100+"px sans-serif"};!function(){for(var Z,re,ne=0;ne<h.length;ne++)Z=new b(c,re=h[ne],L),P.appendChild(Z.div),v(0,Z,T,x),re.displayState=Z.div,x.push(g.getSimpleBoxPosition(Z))}()}else for(var C=0;C<h.length;C++)P.appendChild(h[C].displayState)},(S.Parser=function(c,h,d){d||(d=h,h={}),h||(h={}),this.window=c,this.vttjs=h,this.state="INITIAL",this.buffer="",this.decoder=d||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(c){if(!(c instanceof Se))throw c;this.onparsingerror&&this.onparsingerror(c)},parse:function(c){var Z,h=this;function d(){for(var Z=h.buffer,re=0;re<Z.length&&"\r"!==Z[re]&&"\n"!==Z[re];)++re;var ne=Z.substr(0,re);return"\r"===Z[re]&&++re,"\n"===Z[re]&&++re,h.buffer=Z.substr(re),ne}c&&(h.buffer+=h.decoder.decode(c,{stream:!0}));try{var x;if("INITIAL"===h.state){if(!/\r\n|\n/.test(h.buffer))return this;var T=(x=d()).match(/^WEBVTT([ \t].*)?$/);if(!T||!T[0])throw new Se(Se.Errors.BadSignature);h.state="HEADER"}for(var I=!1;h.buffer;){if(!/\r\n|\n/.test(h.buffer))return this;switch(I?I=!1:x=d(),h.state){case"HEADER":/:/.test(x)?(Z=x).match(/X-TIMESTAMP-MAP/)?ee(Z,function(re,ne){"X-TIMESTAMP-MAP"===re&&function m(Z){var re=new N;ee(Z,function(ne,oe){switch(ne){case"MPEGT":re.integer(ne+"S",oe);break;case"LOCA":re.set(ne+"L",ue(oe))}},/[^\d]:/,/,/),h.ontimestampmap&&h.ontimestampmap({MPEGTS:re.get("MPEGTS"),LOCAL:re.get("LOCAL")})}(ne)},/=/):ee(Z,function(re,ne){"Region"===re&&function P(Z){var re=new N;if(ee(Z,function(oe,Te){switch(oe){case"id":re.set(oe,Te);break;case"width":re.percent(oe,Te);break;case"lines":re.integer(oe,Te);break;case"regionanchor":case"viewportanchor":var ye=Te.split(",");if(2!==ye.length)break;var Ce=new N;if(Ce.percent("x",ye[0]),Ce.percent("y",ye[1]),!Ce.has("x")||!Ce.has("y"))break;re.set(oe+"X",Ce.get("x")),re.set(oe+"Y",Ce.get("y"));break;case"scroll":re.alt(oe,Te,["up"])}},/=/,/\s/),re.has("id")){var ne=new(h.vttjs.VTTRegion||h.window.VTTRegion);ne.width=re.get("width",100),ne.lines=re.get("lines",3),ne.regionAnchorX=re.get("regionanchorX",0),ne.regionAnchorY=re.get("regionanchorY",100),ne.viewportAnchorX=re.get("viewportanchorX",0),ne.viewportAnchorY=re.get("viewportanchorY",100),ne.scroll=re.get("scroll",""),h.onregion&&h.onregion(ne),h.regionList.push({id:re.get("id"),region:ne})}}(ne)},/:/):x||(h.state="ID");continue;case"NOTE":x||(h.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(x)){h.state="NOTE";break}if(!x)continue;h.cue=new(h.vttjs.VTTCue||h.window.VTTCue)(0,0,"");try{h.cue.align="center"}catch{h.cue.align="middle"}if(h.state="CUE",-1===x.indexOf("--\x3e")){h.cue.id=x;continue}case"CUE":try{G(x,h.cue,h.regionList)}catch(Z){h.reportOrThrowError(Z),h.cue=null,h.state="BADCUE";continue}h.state="CUETEXT";continue;case"CUETEXT":var L=-1!==x.indexOf("--\x3e");if(!x||L&&(I=!0)){h.oncue&&h.oncue(h.cue),h.cue=null,h.state="ID";continue}h.cue.text&&(h.cue.text+="\n"),h.cue.text+=x.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":x||(h.state="ID");continue}}}catch(Z){h.reportOrThrowError(Z),"CUETEXT"===h.state&&h.cue&&h.oncue&&h.oncue(h.cue),h.cue=null,h.state="INITIAL"===h.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var c=this;try{if(c.buffer+=c.decoder.decode(),(c.cue||"HEADER"===c.state)&&(c.buffer+="\n\n",c.parse()),"INITIAL"===c.state)throw new Se(Se.Errors.BadSignature)}catch(h){c.reportOrThrowError(h)}return c.onflush&&c.onflush(),this}},ft.exports=S},15713:ft=>{var Ne={"":1,lr:1,rl:1},Ge={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Se(N){return"string"==typeof N&&!!Ge[N.toLowerCase()]&&N.toLowerCase()}function ue(N,ee,G){this.hasBeenReset=!1;var V="",q=!1,u=N,Y=ee,B=G,F=null,O="",W=!0,U="auto",R="start",M="auto",b="auto",g=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return V},set:function(S){V=""+S}},pauseOnExit:{enumerable:!0,get:function(){return q},set:function(S){q=!!S}},startTime:{enumerable:!0,get:function(){return u},set:function(S){if("number"!=typeof S)throw new TypeError("Start time must be set to a number.");u=S,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Y},set:function(S){if("number"!=typeof S)throw new TypeError("End time must be set to a number.");Y=S,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return B},set:function(S){B=""+S,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return F},set:function(S){F=S,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return O},set:function(S){var w=function de(N){return"string"==typeof N&&!!Ne[N.toLowerCase()]&&N.toLowerCase()}(S);if(!1===w)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");O=w,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return W},set:function(S){W=!!S,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return U},set:function(S){if("number"!=typeof S&&"auto"!==S)throw new SyntaxError("Line: an invalid number or illegal string was specified.");U=S,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return R},set:function(S){var w=Se(S);w?(R=w,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return M},set:function(S){if(S<0||S>100)throw new Error("Position must be between 0 and 100.");M=S,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return b},set:function(S){var w=Se(S);w?(b=w,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(S){if(S<0||S>100)throw new Error("Size must be between 0 and 100.");g=S,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(S){var w=Se(S);if(!w)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=w,this.hasBeenReset=!0}}}),this.displayState=void 0}ue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},ft.exports=ue},63872:ft=>{var dt={"":!0,up:!0};function Ge(Se){return"number"==typeof Se&&Se>=0&&Se<=100}ft.exports=function de(){var Se=100,ue=3,N=0,ee=100,G=0,V=100,q="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return Se},set:function(u){if(!Ge(u))throw new Error("Width must be between 0 and 100.");Se=u}},lines:{enumerable:!0,get:function(){return ue},set:function(u){if("number"!=typeof u)throw new TypeError("Lines must be set to a number.");ue=u}},regionAnchorY:{enumerable:!0,get:function(){return ee},set:function(u){if(!Ge(u))throw new Error("RegionAnchorX must be between 0 and 100.");ee=u}},regionAnchorX:{enumerable:!0,get:function(){return N},set:function(u){if(!Ge(u))throw new Error("RegionAnchorY must be between 0 and 100.");N=u}},viewportAnchorY:{enumerable:!0,get:function(){return V},set:function(u){if(!Ge(u))throw new Error("ViewportAnchorY must be between 0 and 100.");V=u}},viewportAnchorX:{enumerable:!0,get:function(){return G},set:function(u){if(!Ge(u))throw new Error("ViewportAnchorX must be between 0 and 100.");G=u}},scroll:{enumerable:!0,get:function(){return q},set:function(u){var Y=function Ne(Se){return"string"==typeof Se&&!!dt[Se.toLowerCase()]&&Se.toLowerCase()}(u);!1===Y?console.warn("Scroll: an invalid or illegal string was specified."):q=Y}}})}},25893:()=>{},66115:ft=>{ft.exports=function dt(Ne){if(void 0===Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ne},ft.exports.__esModule=!0,ft.exports.default=ft.exports},3515:(ft,dt,Ne)=>{var Ge=Ne(6015),de=Ne(69617);function Se(ue,N,ee){return de()?(ft.exports=Se=Reflect.construct.bind(),ft.exports.__esModule=!0,ft.exports.default=ft.exports):(ft.exports=Se=function(V,q,u){var Y=[null];Y.push.apply(Y,q);var F=new(Function.bind.apply(V,Y));return u&&Ge(F,u.prototype),F},ft.exports.__esModule=!0,ft.exports.default=ft.exports),Se.apply(null,arguments)}ft.exports=Se,ft.exports.__esModule=!0,ft.exports.default=ft.exports},10434:ft=>{function dt(){return ft.exports=dt=Object.assign?Object.assign.bind():function(Ne){for(var Ge=1;Ge<arguments.length;Ge++){var de=arguments[Ge];for(var Se in de)Object.prototype.hasOwnProperty.call(de,Se)&&(Ne[Se]=de[Se])}return Ne},ft.exports.__esModule=!0,ft.exports.default=ft.exports,dt.apply(this,arguments)}ft.exports=dt,ft.exports.__esModule=!0,ft.exports.default=ft.exports},61655:(ft,dt,Ne)=>{var Ge=Ne(6015);ft.exports=function de(Se,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Super expression must either be null or a function");Se.prototype=Object.create(ue&&ue.prototype,{constructor:{value:Se,writable:!0,configurable:!0}}),Object.defineProperty(Se,"prototype",{writable:!1}),ue&&Ge(Se,ue)},ft.exports.__esModule=!0,ft.exports.default=ft.exports},7867:(ft,dt,Ne)=>{var Ge=Ne(6015);ft.exports=function de(Se,ue){Se.prototype=Object.create(ue.prototype),Se.prototype.constructor=Se,Ge(Se,ue)},ft.exports.__esModule=!0,ft.exports.default=ft.exports},69617:ft=>{ft.exports=function dt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},ft.exports.__esModule=!0,ft.exports.default=ft.exports},6015:ft=>{function dt(Ne,Ge){return ft.exports=dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Se,ue){return Se.__proto__=ue,Se},ft.exports.__esModule=!0,ft.exports.default=ft.exports,dt(Ne,Ge)}ft.exports=dt,ft.exports.__esModule=!0,ft.exports.default=ft.exports}}]);